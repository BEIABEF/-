海阔视界规则分享，当前分享的是：小程序￥home_rule￥{"last_chapter_rule":"","title":"某聚合","author":"Lín","url":"hiker://empty","version":0,"col_type":"movie_3","class_name":"","type":"video","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nif (!getItem(\":firstUse\", false)) {\n    confirm({\n        title: \"提醒\",\n        content: \"这是一个极度危险的集合，不要乱分享，不要乱分享，不要乱分享！！！\",\n        confirm: \"setItem(':firstUse', '1');refreshPage()\",\n        cancel: \"'toast://很遗憾，不能为您服务。\\\\n长按标题可删除。'\"\n    });\n    setResult([]);\n}else if (MY_RULE.title !== \"某聚合\") {\n    confirm({\n        title: \"警告⚠\",\n        content: \"不能改名，不然影响使用！！！\",\n        confirm: $.toString(() => {\n            MY_RULE.title = \"某聚合\";\n            toast(\"已帮你改回原名，请重新导入\");\n            return \"rule://\" + base64Encode(\"海阔视界￥home_rule￥\" + JSON.stringify(MY_RULE));\n        }),\n        cancel: \"'toast://很遗憾，不能为您服务。\\\\n长按标题可删除。'\"\n    });\n    setResult([]);\n}\neval(JSON.parse(request('hiker://page/view')).rule);\nsetResult(d);","search_url":"hiker://empty?kw=**","group":"～～～","searchFind":"js:\nsetResult([{\n        title: \"hanime1动漫\",\n        url: \"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=hanime1动漫&kw=\" + getParam(\"kw\")\n    },\n    {\n        title: \"hanime1漫画\",\n        url: \"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=hanime1漫画&kw=\" + getParam(\"kw\")\n    },\n    {\n        title: \"麻豆\",\n        url: \"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=麻豆&kw=\" + getParam(\"kw\")\n    },\n    {\n        title: \"麻豆club\",\n        url: \"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=麻豆club&kw=\" + getParam(\"kw\")\n    },\n    {\n        title: \"小黄书\",\n        url: \"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=小黄书&kw=\" + getParam(\"kw\")\n    },\n    {\n        title: \"rule34video\",\n        url: \"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=rule34video&kw=\" + getParam(\"kw\")\n    },\n    {\n        title: \"yande\",\n        url: \"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=yande&kw=\" + getParam(\"kw\")\n    },\n    {\n        title: \"xvideo\",\n        url: \"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=xvideo&kw=\" + getParam(\"kw\")\n    },\n    {\n        title: \"jable\",\n        url: \"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=jable&kw=\" + getParam(\"kw\")\n    },\n    {\n        title: \"wnacg\",\n        url: \"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=wnacg&kw=\" + getParam(\"kw\")\n    },\n    {\n        title: \"spankbang\",\n        url: \"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=spankbang&kw=\" + getParam(\"kw\")\n    },\n    {\n        title: \"noodlemagazine\",\n        url: \"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=noodlemagazine(纯搜索)&kw=\" + getParam(\"kw\")\n    },\n    {\n        title: \"hitxhot\",\n        url: \"hiker://page/search?p=#noHistory##fullTheme##noRecordHistory#fypage&type=hitxhot&kw=\" + getParam(\"kw\")\n    },\n    {\n        title: \"pornhub\",\n        url: \"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=pornhub&kw=\" + getParam(\"kw\")\n    },\n    {\n        title: \"e-hentai\",\n        url: \"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=ehentai&kw=\" + getParam(\"kw\")\n    }\n])","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"","ua":"mobile","preRule":"let day = new Date().getDate() + '';\nlet old = readFile(\"day.txt\", 0);\nif (old != day) {\n    toast('正在检查每日更新！！！');\n    evalPrivateJS('kh/kQ0RkaJaVbnPholIRx+03xlJrXRFB/pwkMVq86/xE0hWaRSwIVFhr4nToatUsmGHSaEHXhF4a065zuMXZGU7bHNsiRE9C47kIkWUTdXSLYMOHqUSMVunOhMxtzMX2');\n    var u = pdfh(html, 'body&&h3&&Text');\n    var n = [];\n    var h4 = pdfa(html, 'body&&h4');\n    for (let j in h4) {\n        n.push(pdfh(h4[j], 'h4&&Text'))\n    }\n    if (u != MY_RULE.version) {\n        evalPrivateJS('2zI7KtiOJVXMT7NueJK24e03xlJrXRFB/pwkMVq86/xE0hWaRSwIVFhr4nToatUsmGHSaEHXhF4a065zuMXZGUHB/Q2Dn+Q2T0s64v922A9b/Wba7q0mYw4V2ypFft62gSJGrbwOraeAhOcCAegksg==');\n        confirm({\n            title: \"更新内容\",\n            content: n.join(\"\\n\"),\n            confirm: $.toString((day, href) => {\n                saveFile(\"day.txt\", day, 0);\n                return href\n            }, day, href),\n            cancel: $.toString(() => {\n                toast(\"请导入新版本\");\n            }),\n        });\n        setResult([]);\n    } else {\n        toast(\"当前是最新版，恭喜恭喜\");\n        saveFile(\"day.txt\", day, 0);\n    }\n}\n//每天检测一遍更新","pages":"[{\"col_type\":\"movie_3\",\"name\":\"1.动漫分类\",\"path\":\"cartoon\",\"rule\":\"let dataType = getVar(\\\"Warehouse.type\\\", \\\"全部\\\");\\nlet order = getVar(\\\"Warehouse.order\\\", \\\"全部\\\");\\nlet sort = getVar(\\\"Warehouse.sort\\\", \\\"\\\");\\nlet good = getVar(\\\"Warehouse.good\\\", \\\"\\\");\\nlet href = 'https://hanime1.me/search?query=' + good + '&page=' + page + '&genre=' + dataType + '&sort=' + order + '&year=' + sort;\\neval(JSON.parse(request('hiker://page/common')).rule);\\nif (page == 1) {\\n    if (当前折叠状态 == \\\"0\\\") {\\n        tab([\\n            [\\\"全部\\\", \\\"\\\"],\\n            [\\\"無碼\\\", \\\"無碼\\\"],\\n            [\\\"AI解碼\\\", \\\"AI解碼\\\"],\\n            [\\\"中文字幕\\\", \\\"中文字幕\\\"],\\n            [\\\"1080p\\\", \\\"1080p\\\"],\\n            [\\\"60FPS\\\", \\\"60FPS\\\"],\\n            [\\\"近親\\\", \\\"近親\\\"],\\n            [\\\"姐\\\", \\\"姐\\\"],\\n            [\\\"妹\\\", \\\"妹\\\"],\\n            [\\\"母\\\", \\\"母\\\"],\\n            [\\\"女兒\\\", \\\"女兒\\\"],\\n            [\\\"師生\\\", \\\"師生\\\"],\\n            [\\\"情侶\\\", \\\"情侶\\\"],\\n            [\\\"青梅竹馬\\\", \\\"青梅竹馬\\\"],\\n            [\\\"JK\\\", \\\"JK\\\"],\\n            [\\\"處女\\\", \\\"處女\\\"],\\n            [\\\"御姐\\\", \\\"御姐\\\"],\\n            [\\\"熟女\\\", \\\"熟女\\\"],\\n            [\\\"人妻\\\", \\\"人妻\\\"],\\n            [\\\"老師\\\", \\\"老師\\\"],\\n            [\\\"女醫護士\\\", \\\"女醫護士\\\"],\\n            [\\\"OL\\\", \\\"OL\\\"],\\n            [\\\"大小姐\\\", \\\"大小姐\\\"],\\n            [\\\"偶像\\\", \\\"偶像\\\"],\\n            [\\\"女僕\\\", \\\"女僕\\\"],\\n            [\\\"巫女\\\", \\\"巫女\\\"],\\n            [\\\"修女\\\", \\\"修女\\\"],\\n            [\\\"風俗娘\\\", \\\"風俗娘\\\"],\\n            [\\\"公主\\\", \\\"公主\\\"],\\n            [\\\"女戰士\\\", \\\"女戰士\\\"],\\n            [\\\"魔法少女\\\", \\\"魔法少女\\\"],\\n            [\\\"異種族\\\", \\\"異種族\\\"],\\n            [\\\"妖精\\\", \\\"妖精\\\"],\\n            [\\\"魔物娘\\\", \\\"魔物娘\\\"],\\n            [\\\"獸娘\\\", \\\"獸娘\\\"],\\n            [\\\"碧池\\\", \\\"碧池\\\"],\\n            [\\\"痴女\\\", \\\"痴女\\\"],\\n            [\\\"不良少女\\\", \\\"不良少女\\\"],\\n            [\\\"傲嬌\\\", \\\"傲嬌\\\"],\\n            [\\\"病嬌\\\", \\\"病嬌\\\"],\\n            [\\\"無口\\\", \\\"無口\\\"],\\n            [\\\"偽娘\\\", \\\"偽娘\\\"],\\n            [\\\"扶他\\\", \\\"扶他\\\"],\\n            [\\\"短髮\\\", \\\"短髮\\\"],\\n            [\\\"馬尾\\\", \\\"馬尾\\\"],\\n            [\\\"雙馬尾\\\", \\\"雙馬尾\\\"],\\n            [\\\"巨乳\\\", \\\"巨乳\\\"],\\n            [\\\"貧乳\\\", \\\"貧乳\\\"],\\n            [\\\"黑皮膚\\\", \\\"黑皮膚\\\"],\\n            [\\\"眼鏡娘\\\", \\\"眼鏡娘\\\"],\\n            [\\\"獸耳\\\", \\\"獸耳\\\"],\\n            [\\\"美人痣\\\", \\\"美人痣\\\"],\\n            [\\\"肌肉女\\\", \\\"肌肉女\\\"],\\n            [\\\"白虎\\\", \\\"白虎\\\"],\\n            [\\\"大屌\\\", \\\"大屌\\\"],\\n            [\\\"水手服\\\", \\\"水手服\\\"],\\n            [\\\"體操服\\\", \\\"體操服\\\"],\\n            [\\\"泳裝\\\", \\\"泳裝\\\"],\\n            [\\\"比基尼\\\", \\\"比基尼\\\"],\\n            [\\\"和服\\\", \\\"和服\\\"],\\n            [\\\"兔女郎\\\", \\\"兔女郎\\\"],\\n            [\\\"圍裙\\\", \\\"圍裙\\\"],\\n            [\\\"啦啦隊\\\", \\\"啦啦隊\\\"],\\n            [\\\"旗袍\\\", \\\"旗袍\\\"],\\n            [\\\"絲襪\\\", \\\"絲襪\\\"],\\n            [\\\"吊襪帶\\\", \\\"吊襪帶\\\"],\\n            [\\\"熱褲\\\", \\\"熱褲\\\"],\\n            [\\\"迷你裙\\\", \\\"迷你裙\\\"],\\n            [\\\"性感內衣\\\", \\\"性感內衣\\\"],\\n            [\\\"丁字褲\\\", \\\"丁字褲\\\"],\\n            [\\\"高跟鞋\\\", \\\"高跟鞋\\\"],\\n            [\\\"淫紋\\\", \\\"淫紋\\\"],\\n            [\\\"純愛\\\", \\\"純愛\\\"],\\n            [\\\"戀愛喜劇\\\", \\\"戀愛喜劇\\\"],\\n            [\\\"後宮\\\", \\\"後宮\\\"],\\n            [\\\"開大車\\\", \\\"開大車\\\"],\\n            [\\\"公眾場合\\\", \\\"公眾場合\\\"],\\n            [\\\"NTR\\\", \\\"NTR\\\"],\\n            [\\\"精神控制\\\", \\\"精神控制\\\"],\\n            [\\\"藥物\\\", \\\"藥物\\\"],\\n            [\\\"痴漢\\\", \\\"痴漢\\\"],\\n            [\\\"阿嘿顏\\\", \\\"阿嘿顏\\\"],\\n            [\\\"精神崩潰\\\", \\\"精神崩潰\\\"],\\n            [\\\"獵奇\\\", \\\"獵奇\\\"],\\n            [\\\"BDSM\\\", \\\"BDSM\\\"],\\n            [\\\"綑綁\\\", \\\"綑綁\\\"],\\n            [\\\"眼罩\\\", \\\"眼罩\\\"],\\n            [\\\"項圈\\\", \\\"項圈\\\"],\\n            [\\\"調教\\\", \\\"調教\\\"],\\n            [\\\"異物插入\\\", \\\"異物插入\\\"],\\n            [\\\"肉便器\\\", \\\"肉便器\\\"],\\n            [\\\"胃凸\\\", \\\"胃凸\\\"],\\n            [\\\"強制\\\", \\\"強制\\\"],\\n            [\\\"逆強制\\\", \\\"逆強制\\\"],\\n            [\\\"女王樣\\\", \\\"女王樣\\\"],\\n            [\\\"母女丼\\\", \\\"母女丼\\\"],\\n            [\\\"姐妹丼\\\", \\\"姐妹丼\\\"],\\n            [\\\"凌辱\\\", \\\"凌辱\\\"],\\n            [\\\"出軌\\\", \\\"出軌\\\"],\\n            [\\\"攝影\\\", \\\"攝影\\\"],\\n            [\\\"性轉換\\\", \\\"性轉換\\\"],\\n            [\\\"百合\\\", \\\"百合\\\"],\\n            [\\\"耽美\\\", \\\"耽美\\\"],\\n            [\\\"異世界\\\", \\\"異世界\\\"],\\n            [\\\"怪獸\\\", \\\"怪獸\\\"],\\n            [\\\"世界末日\\\", \\\"世界末日\\\"],\\n            [\\\"手交\\\", \\\"手交\\\"],\\n            [\\\"指交\\\", \\\"指交\\\"],\\n            [\\\"乳交\\\", \\\"乳交\\\"],\\n            [\\\"肛交\\\", \\\"肛交\\\"],\\n            [\\\"腳交\\\", \\\"腳交\\\"],\\n            [\\\"拳交\\\", \\\"拳交\\\"],\\n            [\\\"3P\\\", \\\"3P\\\"],\\n            [\\\"群交\\\", \\\"群交\\\"],\\n            [\\\"口交\\\", \\\"口交\\\"],\\n            [\\\"口爆\\\", \\\"口爆\\\"],\\n            [\\\"吞精\\\", \\\"吞精\\\"],\\n            [\\\"舔蛋蛋\\\", \\\"舔蛋蛋\\\"],\\n            [\\\"舔穴\\\", \\\"舔穴\\\"],\\n            [\\\"69\\\", \\\"69\\\"],\\n            [\\\"自慰\\\", \\\"自慰\\\"],\\n            [\\\"腋毛\\\", \\\"腋毛\\\"],\\n            [\\\"腋交\\\", \\\"腋交\\\"],\\n            [\\\"舔腋下\\\", \\\"舔腋下\\\"],\\n            [\\\"內射\\\", \\\"內射\\\"],\\n            [\\\"顏射\\\", \\\"顏射\\\"],\\n            [\\\"雙洞齊下\\\", \\\"雙洞齊下\\\"],\\n            [\\\"懷孕\\\", \\\"懷孕\\\"],\\n            [\\\"噴奶\\\", \\\"噴奶\\\"],\\n            [\\\"放尿\\\", \\\"放尿\\\"],\\n            [\\\"排便\\\", \\\"排便\\\"],\\n            [\\\"顏面騎乘\\\", \\\"顏面騎乘\\\"],\\n            [\\\"車震\\\", \\\"車震\\\"],\\n            [\\\"性玩具\\\", \\\"性玩具\\\"],\\n            [\\\"毒龍鑽\\\", \\\"毒龍鑽\\\"],\\n            [\\\"觸手\\\", \\\"觸手\\\"],\\n            [\\\"頸手枷\\\", \\\"頸手枷\\\"],\\n            [\\\"新番预告\\\", \\\"新番预告\\\"]\\n        ], \\\"Warehouse.good\\\", good);\\n    }\\n}\\neval(JSON.parse(request('hiker://page/commonjx')).rule);\"},{\"col_type\":\"movie_3\",\"name\":\"1.动漫二级解析\",\"path\":\"jiexi\",\"rule\":\"js:\\nvar d = [];\\nvar html = fetch(MY_URL, {\\n    headers: {\\n        Cookie: readFile(\\\"Cookie.txt\\\", 0)\\n    },\\n})\\n\\nfunction player(Url) {\\n    return $(Url).lazyRule(() => {\\n        var html = fetch(input, {\\n            headers: {\\n                Cookie: readFile(\\\"Cookie.txt\\\", 0)\\n            },\\n        });\\n        return pdfh(html, '#video-sd&&value')\\n    })\\n} //解析\\n\\nsetPageTitle('');\\nvar pic = pdfh(html, '.desktop-inline-mobile-block&&img,0&&src');\\nvar 标题 = pdfh(html, '#video-playlist-wrapper&&h4&&Text');\\nvar 描述 = '类型:' + pdfh(html, '.desktop-inline-mobile-block&&.hidden-xs&&Text');\\nd.push({\\n    title: '‘‘’’<font color=\\\"black\\\">作者/作品名：' + '\\\\n' + 标题 + '</font>',\\n    url: pic,\\n    col_type: \\\"movie_1_vertical_pic_blur\\\",\\n    desc: '‘‘’’<font color=\\\"black\\\">' + 描述 + '</font>',\\n    pic_url: pic,\\n    extra: {\\n        gradient: true\\n    }\\n});\\n\\n\\nlet contents = pdfh(html, '.video-caption-text&&Text');\\nd.push({\\n    title: '‘‘’’<font color=\\\"#098AC1\\\">剧情简介</font>',\\n    desc: '‘‘’’<font color=\\\"black\\\">' + contents.substr(0, 50) + '</font>' + '<small><font color=\\\"red\\\">点击查看详情</font></small>',\\n    col_type: 'text_1',\\n    extra: {\\n        lineVisible: false\\n    },\\n    url: $().rule((text) => {\\n        setResult([{\\n            title: text,\\n            col_type: 'long_text',\\n        }])\\n    }, contents)\\n});\\n\\nlet t = pdfh(html, '#video-title&&value').replace(\\\" (zh-CHS)\\\", \\\"\\\");\\nd.push({\\n    title: '‘‘’’<small><font color=\\\"red\\\">点击播放👉🏻</font></small>',\\n    url: 'toast://点了也没用',\\n    col_type: \\\"scroll_button\\\",\\n}, {\\n    url: pdfh(html, '#video-sd&&value'),\\n    title: '‘‘’’<font color=\\\"#fba414\\\">' + t + '</font>',\\n    col_type: \\\"scroll_button\\\",\\n    extra: {\\n        cls: 'playlist r1',\\n    }\\n}, {\\n    col_type: \\\"blank_block\\\"\\n});\\n\\nvar comic = pdfa(html, 'body&&#video-comic-btn');\\nif (comic.length > 0) {\\n    d.push({\\n        title: \\\"漫画原作\\\",\\n        url: 'hiker://page/comicjiexi?url=' + pdfh(html, '.video-buttons-wrapper&&a&&href'),\\n        col_type: \\\"scroll_button\\\"\\n    }, {\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\n\\nvar coo = pdfa(html, 'body--.single-video-tag,-1--.single-video-tag,-1&&.single-video-tag');\\nfor (var i in coo) {\\n    d.push({\\n        title: pdfh(coo[i], 'Text'),\\n        url: \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=hanime1动漫&kw=\\\" + pdfh(coo[i], 'Text'),\\n        col_type: 'scroll_button'\\n    })\\n}\\n\\neval(JSON.parse(request('hiker://page/errorpic')).rule);\\nvar list = pdfa(html, '#playlist-scroll&&.related-watch-wrap').reverse();\\nfor (var j in list) {\\n    var img = pdfh(list[j], 'img,1&&src').replace(\\\"l.jpg\\\", \\\"h.jpg\\\");\\n    let img1 = img.substr(-12, 7);\\n    if (img1.match(errorpic)) {\\n        img = img;\\n    } else {\\n        img = 'https://i.imgur.com/' + img1 + 'g.jpg';\\n    }\\n    d.push({\\n        title: pdfh(list[j], 'img,1&&alt'),\\n        desc: \\\"观看次数：\\\" + pdfh(list[j], '.card-mobile-duration,-1&&Text') + \\\" | 时长：\\\" + pdfh(list[j], '.card-mobile-duration&&Text'),\\n        pic_url: img,\\n        url: player(pdfh(list[j], 'a&&href')),\\n        col_type: 'movie_1_left_pic',\\n        extra: {\\n            lineVisible: false,\\n        }\\n    })\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"1.漫画分类\",\"path\":\"comic\",\"rule\":\"let dataType = getVar(\\\"Warehouse.type\\\", \\\"\\\");\\nlet href = 'https://hanime1.me/comics/search?sort=' + dataType + '&page=' + page;\\neval(JSON.parse(request('hiker://page/comicgt')).rule)\"},{\"col_type\":\"movie_3\",\"name\":\"1.漫画二级解析\",\"path\":\"comicjiexi\",\"rule\":\"js:\\nvar d = [];\\nvar html = fetch(MY_URL, {\\n    headers: {\\n        Cookie: readFile(\\\"Cookie.txt\\\", 0)\\n    },\\n})\\n\\nvar title = pdfh(html, '.comics-metadata-top-row&&Text');\\nsetPageTitle(title);\\nd.push({\\n    title: '作者/作品名：' + '\\\\n' + title,\\n    url: pdfh(html, '.col-md-4&&img&&data-srcset'),\\n    col_type: \\\"movie_1_vertical_pic_blur\\\",\\n    desc: pdfh(html, '.col-md-8&&h5,-2&&Text') + '\\\\n' + pdfh(html, '.col-md-8&&h5,-1&&Text'),\\n    pic_url: pdfh(html, '.col-md-4&&img&&src'),\\n});\\n\\nfunction 解析() {\\n    var pics = [];\\n    var html = fetch(input, {\\n        headers: {\\n            Cookie: readFile(\\\"Cookie.txt\\\", 0)\\n        },\\n    });\\n    var list1 = pdfa(html, '.comic-rows-wrapper&&.hover-lighter');\\n    for (var j in list1) {\\n        pics.push(pdfh(list1[j], 'img&&data-srcset').replace(\\\"t.n\\\", \\\"i.n\\\").replace(\\\"t.j\\\", \\\".j\\\").replace(\\\"t.p\\\", \\\".p\\\"))\\n    }\\n    return \\\"pics://\\\" + pics.join(\\\"&&\\\");\\n}\\nlet downloadlazy = $.toString(解析);\\nvar doList = [];\\nd.push({\\n    title: '““””<b><span style=\\\"color: #1aad19\\\">📥下载</span></b>',\\n    url: \\\"hiker://page/download.view#noRecordHistory##noRefresh#?rule=某聚合\\\",\\n    col_type: \\\"text_2\\\",\\n    extra: {\\n        chapterList: doList,\\n        info: {\\n            bookName: title,\\n            ruleName: \\\"hanime1漫画\\\",\\n            bookTopPic: pdfh(html, '.comic-rows-wrapper&&.hover-lighter&&img&&data-srcset'),\\n            parseCode: downloadlazy\\n        },\\n        defaultView: \\\"1\\\"\\n    }\\n});\\nd.push({\\n    title: '‘‘’’<strong><font color= \\\"#098AC1\\\">' + \\\"🗳书架\\\" + '</front></strong>',\\n    url: \\\"hiker://page/Bookrack.view?rule=某聚合&ruleName=hanime1漫画\\\",\\n    col_type: \\\"text_2\\\",\\n});\\ndoList.push({\\n    title: \\\"第一话\\\",\\n    url: MY_URL,\\n})\\nsetSearchMode(0);\\nvar tags = pdfa(html, '.col-md-8--a,-1&&a');\\nfor (var i in tags) {\\n    d.push({\\n        title: pdfh(tags[i], 'a&&Text'),\\n        url: \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=hanime1漫画&kw=\\\" + pdfh(tags[i], 'a&&Text'),\\n        col_type: 'scroll_button'\\n    })\\n}\\nvar pics = [];\\nvar list1 = pdfa(html, '.comic-rows-wrapper&&.hover-lighter');\\nfor (var j in list1) {\\n    pics.push(pdfh(list1[j], 'img&&data-srcset').replace(\\\"t.n\\\", \\\"i.n\\\").replace(\\\"t.j\\\", \\\".j\\\").replace(\\\"t.p\\\", \\\".p\\\"))\\n}\\nd.push({\\n    title: \\\"第一话\\\",\\n    url: \\\"pics://\\\" + pics.join(\\\"&&\\\"),\\n    col_type: 'text_2'\\n})\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"搜索\",\"path\":\"search\",\"rule\":\"js:\\nvar d = [];\\nconst page = MY_PAGE;\\nvar kw = getParam(\\\"kw\\\")\\nvar type = getParam(\\\"type\\\")\\nsetPageTitle(\\\"搜索--\\\" + kw);\\nvar ku = getVar(\\\"Warehouse.type\\\", \\\"hanime1动漫\\\");\\naddListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n}));\\n\\nfunction tab(arr, type1, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type1, kw) => {\\n                if (key == \\\"hitxhot\\\") return 'hiker://page/search?p=#noHistory##fullTheme##noRecordHistory#fypage&type=hitxhot&kw=' + kw;\\n                putVar(type1, key, kw);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type1),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\n\\nif (MY_PAGE == 1 && type == '全部') {\\n    tab([\\n        [\\\"hanime1动漫\\\", \\\"hanime1动漫\\\"],\\n        [\\\"hanime1漫画\\\", \\\"hanime1漫画\\\"],\\n        [\\\"麻豆\\\", \\\"麻豆\\\"],\\n        [\\\"麻豆club\\\", \\\"麻豆club\\\"],\\n        [\\\"小黄书\\\", \\\"小黄书\\\"],\\n        [\\\"rule34video\\\", \\\"rule34video\\\"],\\n        [\\\"yande\\\", \\\"yande\\\"],\\n        [\\\"xvideo\\\", \\\"xvideo\\\"],\\n        [\\\"jable\\\", \\\"jable\\\"],\\n        [\\\"pornhub\\\", \\\"pornhub\\\"],\\n        [\\\"hitxhot\\\", \\\"hitxhot\\\"],\\n        [\\\"noodlemagazine\\\", \\\"noodlemagazine(纯搜索)\\\"],\\n        [\\\"spankbang\\\", \\\"spankbang\\\"],\\n        [\\\"e-hentai\\\", \\\"ehentai\\\"],\\n        [\\\"wnacg\\\", \\\"wnacg\\\"]\\n    ], \\\"Warehouse.type\\\", ku);\\n}\\nif (type == 'hanime1动漫' || (ku == 'hanime1动漫' && type == '全部')) {\\n    let dataType = getVar(\\\"Warehouse.type\\\", \\\"全部\\\");\\n    let order = getVar(\\\"Warehouse.order\\\", \\\"全部\\\");\\n    let sort = getVar(\\\"Warehouse.sort\\\", \\\"\\\");\\n    let href = 'https://hanime1.me/search?query=' + kw + '&page=' + page + '&genre=' + dataType + '&sort=' + order + '&year=' + sort;\\n    var getRandomColor = function() {\\n        return '#' + (Math.random() * 0xffffff << 0).toString(16);\\n    }\\n    var color = getRandomColor();\\n    eval(JSON.parse(request('hiker://page/common')).rule);\\n    eval(JSON.parse(request('hiker://page/commonjx')).rule);\\n}\\nif (type == 'hanime1漫画' || ku == 'hanime1漫画') {\\n    let dataType = getVar(\\\"Warehouse.type\\\", \\\"\\\");\\n    let href = 'https://hanime1.me/comics/search?sort=' + dataType + '&query=' + kw + '&page=' + page;\\n    eval(JSON.parse(request('hiker://page/comicgt')).rule)\\n}\\nif (type == '麻豆' || ku == '麻豆') {\\n    let href = 'https://91md.me/index.php/vod/search/page/' + page + '/wd/' + kw + '.html';\\n    var html = fetch(href);\\n\\n    function player(Url) {\\n        return $(Url).lazyRule(() => {\\n            var html = fetch(input);\\n            var video = pdfh(html, '#bofang_box&&script&&Html').match(/url\\\":\\\"(.*)\\\\\\\",\\\"url_n/)[1];\\n            return video.replace(/\\\\\\\\/g, \\\"\\\");\\n        })\\n    }\\n    var list = parseDomForArray(html, '.video-list&&.video-item');\\n    for (var j in list) {\\n        d.push({\\n            title: parseDomForHtml(list[j], '.title&&Text'),\\n            desc: parseDomForHtml(list[j], '.time&&Text'),\\n            pic_url: parseDom(list[j], 'img&&src'),\\n            url: player('https://91md.me' + pdfh(list[j], 'a,0&&href')),\\n            col_type: 'movie_2'\\n        });\\n    }\\n}\\nif (type == '麻豆club' || ku == '麻豆club') {\\n    let href = 'https://madou.club/page/' + page + '?s=' + kw;\\n    var html = fetchCodeByWebView(href);\\n\\n    function player(Url) {\\n        return $(Url).lazyRule(() => {\\n            var html = fetch(input);\\n            var href = pdfh(html, '.article-content&&iframe&&src');\\n            var htmll = fetch(href);\\n            var video1 = pdfh(htmll, 'body&&script,-1&&Html')\\n            var video = video1.match(/token = \\\"(.*)\\\\\\\";/)[1];\\n            return href.replace(\\\"share\\\", \\\"videos\\\") + \\\"/index.m3u8?token=\\\" + video;\\n        })\\n    }\\n    var list = parseDomForArray(html, '.excerpts&&.excerpt');\\n    for (var j in list) {\\n        d.push({\\n            title: parseDomForHtml(list[j], 'h2&&Text'),\\n            pic_url: parseDom(list[j], 'img&&data-src'),\\n            url: player(pdfh(list[j], 'a&&href')),\\n            extra: {\\n                blockRules: ['.png', '.jpg']\\n            },\\n            desc: pdfh(list[j], '.post-view&&Text'),\\n            col_type: 'movie_2',\\n        });\\n    }\\n}\\nif (type == '小黄书' || ku == '小黄书') {\\n    let href = 'https://xchina.co/photos/keyword-' + kw + '/' + page + '.html';\\n    var html = fetch(href);\\n    var list = pdfa(html, '.list&&.item');\\n    for (var j in list) {\\n        d.push({\\n            title: pdfh(list[j], 'img&&alt'),\\n            desc: pdfh(list[j], '.tag&&Text'),\\n            img: pd(list[j], 'img&&src'),\\n            url: 'hiker://page/小黄书二级?url=' + 'https://xchina.co' + pdfh(list[j], 'a&&href')\\n        });\\n    }\\n}\\nif (type == 'rule34video' || ku == 'rule34video') {\\n    let href = 'https://rule34video.com/search/' + kw + '/?mode=async&function=get_block&block_id=custom_list_videos_videos_list_search&q=' + kw + '&category_ids=&sort_by=post_date&from_videos=' + page + '&from_albums=' + page + '&_=1675394253801';\\n    var html = fetch(href);\\n\\n    function player(Url) {\\n        return $(Url).lazyRule(() => {\\n            var html = fetch(input);\\n            var videos = [];\\n            var titles = [];\\n            var list = pdfa(html, 'body&&.row,3&&a');\\n            for (var j in list) {\\n                videos.push('\\\"' + pdfh(list[j], 'a&&href') + '\\\"')\\n                titles.push('\\\"' + pdfh(list[j], 'a&&Text').replace(\\\"MP4 \\\", \\\"\\\") + '\\\"')\\n            }\\n            return \\\"{urls:[\\\" + videos + \\\"],names:[\\\" + titles + \\\"]}\\\"\\n        })\\n    }\\n    var list = parseDomForArray(html, '.thumbs&&.item');\\n    for (var j in list) {\\n        var lj = pdfh(list[j], 'a&&href');\\n        d.push({\\n            title: parseDomForHtml(list[j], '.thumb_title&&Text'),\\n            pic_url: parseDom(list[j], 'img&&data-original'),\\n            url: player(lj),\\n            desc: pdfh(list[j], '.added&&Text'),\\n            col_type: 'movie_2',\\n            extra: {\\n                longClick: [{\\n                    title: '刷新',\\n                    js: $.toString(() => {\\n                        refreshPage();\\n                        return \\\"hiker://empty\\\";\\n                    })\\n                }, {\\n                    title: '获取标签',\\n                    js: $.toString((u) => {\\n                        return $(u).lazyRule(() => {\\n                            var html = fetch(input)\\n                            let Artist = pdfh(html, 'body&&.row,2&&.name&&Text').replace(/ /g, \\\"-\\\");\\n                            var tag = [Artist];\\n                            var list = pdfa(html, 'body&&.row,4--a,-1&&a');\\n                            for (var j in list) {\\n                                tag.push(pdfh(list[j], 'a&&Text').replace(/ /g, \\\"-\\\"))\\n                            }\\n                            return $(tag.map(v => v)).select((name) => {\\n                                return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=rule34video&kw=\\\" + input\\n                            })\\n                        })\\n                    }, lj)\\n                }]\\n            }\\n        });\\n    }\\n}\\nif (type == 'yande' || ku == 'yande') {\\n    let href = 'https://yande.re/post?tags=' + kw + '&page=' + page;\\n    var html = fetch(href);\\n    var list = pdfa(html, '#post-list-posts&&li');\\n    for (var j in list) {\\n        var img = 'https://yande.re' + pdfh(list[j], 'a&&href');\\n        d.push({\\n            title: pdfh(list[j], '.directlink-res&&Text'),\\n            img: pd(list[j], 'img&&src'),\\n            url: pdfh(list[j], 'a,1&&href') + '@lazyRule=.js:input',\\n            extra: {\\n                longClick: [{\\n                    title: '刷新',\\n                    js: $.toString(() => {\\n                        refreshPage();\\n                        return \\\"hiker://empty\\\";\\n                    })\\n                }, {\\n                    title: '获取标签',\\n                    js: $.toString((img) => {\\n                        return $(img).lazyRule(() => {\\n                            var html = fetch(input)\\n                            var tag = [];\\n                            var list = pdfa(html, '#tag-sidebar&&li');\\n                            for (var j in list) {\\n                                tag.push(pdfh(list[j], 'a,1&&Text').replace(/ /g, \\\"_\\\"))\\n                            }\\n                            return $(tag.map(v => v)).select((name) => {\\n                                return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=yande&kw=\\\" + input\\n                            })\\n                        })\\n                    }, img)\\n                }]\\n            }\\n        });\\n    };\\n}\\nif (type == 'xvideo' || ku == 'xvideo') {\\n    let dataType = getVar(\\\"Warehouse.type\\\", \\\"allduration\\\");\\n    let href = 'https://www.xvideos.com/?k=' + kw + '&durf=' + dataType + '&p=' + page;\\n    addListener('onClose', $.toString(() => {\\n        clearVar(\\\"Warehouse.type\\\");\\n    }));\\n\\n    function tab(arr, type, contrast) {\\n        for (let item of arr) {\\n            d.push({\\n                title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n                url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                    putVar(type, key);\\n                    refreshPage(false);\\n                    return \\\"hiker://empty\\\";\\n                }, item[1], type),\\n                col_type: \\\"scroll_button\\\"\\n            });\\n        }\\n        d.push({\\n            col_type: \\\"blank_block\\\"\\n        });\\n    }\\n    var html = fetch(href)\\n\\n    if (page == 1) {\\n        tab([\\n            [\\\"全部\\\", \\\"allduration\\\"],\\n            [\\\"1-3分鐘\\\", \\\"1-3min\\\"],\\n            [\\\"3-10分鐘\\\", \\\"3-10min\\\"],\\n            [\\\"大於10分鐘\\\", \\\"10min_more\\\"],\\n            [\\\"10-20 分钟\\\", \\\"10-20min\\\"],\\n            [\\\"20 分钟以上\\\", \\\"20min_more\\\"]\\n        ], \\\"Warehouse.type\\\", dataType);\\n        d.push({\\n            title: \\\"🔍\\\",\\n            url: $.toString((r) => {\\n                putMyVar('keyword', input);\\n                return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=xvideo&kw=\\\" + input;\\n            }, MY_RULE.title),\\n            desc: '搜索',\\n            col_type: \\\"input\\\"\\n        });\\n    }\\n\\n    function player(Url) {\\n        return $(Url).lazyRule(() => {\\n            var html = fetch(input);\\n            var list = pdfa(html, 'body&&script');\\n            for (var j in list) {\\n                var video1 = pdfh(list[j], 'script&&Html')\\n                if (video1.includes('html5player.setVideoHLS')) {\\n                    var video = video1.match(/html5player.setVideoHLS\\\\('(.*)\\\\'\\\\);/)[1];\\n                    return video;\\n                }\\n            }\\n        })\\n    }\\n    var list = pdfa(html, '#content&&.thumb-under');\\n    var list1 = pdfa(html, '#content&&.thumb');\\n    for (var j in list) {\\n        d.push({\\n            title: pdfh(list[j], 'a&&title'),\\n            desc: pdfh(list1[j], '.video-hd-mark&&Text'),\\n            img: pd(list1[j], 'img&&data-src'),\\n            url: player('https://www.xvideos.com' + pdfh(list[j], 'a&&href')),\\n            col_type: 'movie_2'\\n        });\\n    }\\n}\\nif (type == 'jable' || ku == 'jable') {\\n    let href = 'https://jable.tv/search/' + kw + '/?mode=async&function=get_block&block_id=list_videos_videos_list_search_result&q=' + kw + '&sort_by=&from_videos=' + page + '&from_albums=' + page + '&_=1677931968317';\\n    var html = fetch(href);\\n\\n    function player(Url) {\\n        return $(Url).lazyRule(() => {\\n            var html = fetch(input);\\n            var list = pdfa(html, 'body&&script');\\n            for (var j in list) {\\n                var video1 = pdfh(list[j], 'script&&Html');\\n                if (video1.includes('hlsUrl')) {\\n                    var video = video1.match(/hlsUrl = '(.*)\\\\';/)[1];\\n                    return video;\\n                }\\n            }\\n        })\\n    }\\n    var list = parseDomForArray(html, '.pb-e-lg-40&&.col-sm-4');\\n    for (var j in list) {\\n        d.push({\\n            title: parseDomForHtml(list[j], 'h6&&Text'),\\n            pic_url: parseDom(list[j], 'img&&data-src'),\\n            url: player(parseDomForHtml(list[j], 'a&&href')),\\n            desc: pdfh(list[j], '.label&&Text'),\\n            col_type: 'movie_2',\\n        });\\n    }\\n}\\nif (type == 'wnacg' || ku == 'wnacg') {\\n    let href = 'http://www.wnacg.com/q/index.php?q=' + kw + '&m=&f=_all&syn=yes&s=create_time_DESC&p=' + page;\\n    var html = fetch(href);\\n    var list = pdfa(html, '#classify_container&&li');\\n    for (var j in list) {\\n        d.push({\\n            title: pdfh(list[j], '.txtA&&Text'),\\n            url: 'hiker://page/wnacg二级?url=http://www.wnacg.com' + pdfh(list[j], 'a&&href'),\\n            pic_url: 'http:' + pdfh(list[j], 'img&&src'),\\n            desc: pdfh(list[j], '.info&&Text'),\\n            col_type: \\\"movie_3\\\",\\n        })\\n    }\\n}\\nif (type == 'spankbang' || ku == 'spankbang') {\\n    let href = 'https://spankbang.party/s/' + kw + '/' + page + '/?o=all';\\n    var html = fetch(href);\\n\\n    function player(Url) {\\n        return $(Url).lazyRule(() => {\\n            var html = fetch(input);\\n            var list = pdfa(html, '#inner_content&&script');\\n            for (var j in list) {\\n                var video1 = pdfh(list[j], 'script&&Html');\\n                if (video1.includes('contentUrl')) {\\n                    var video = video1.match(/contentUrl\\\": \\\"(.*)\\\\\\\",/)[1];\\n                    return video;\\n                }\\n            }\\n        })\\n    }\\n\\n    var list = pdfa(html, '.video-list&&.video-item');\\n    for (var j in list) {\\n        d.push({\\n            title: pdfh(list[j], 'h4&&Text'),\\n            pic_url: pdfh(list[j], 'img&&data-src'),\\n            url: player('https://spankbang.party' + pdfh(list[j], 'a&&href')),\\n            desc: \\\"观看次数：\\\" + pdfh(list[j], '.v&&Text'),\\n            col_type: 'movie_2',\\n            extra: {\\n                longClick: [{\\n                    title: '刷新',\\n                    js: $.toString(() => {\\n                        refreshPage();\\n                        return \\\"hiker://empty\\\";\\n                    })\\n                }]\\n            }\\n        });\\n    }\\n}\\nif (type == 'noodlemagazine(纯搜索)' || ku == 'noodlemagazine(纯搜索)') {\\n    let href = 'https://noodlemagazine.com/video/' + kw + '?p=' + (page - 1);\\n    var html = fetch(href);\\n\\n    function player(Url) {\\n        return $(Url).lazyRule(() => {\\n            var html = fetch(input);\\n            var href = 'https://nmcorp.video' + pdfh(html, '#iplayer&&src').replace(\\\"player\\\", \\\"playlist\\\");\\n            var htmll = fetch(href);\\n            var video1 = pdfh(htmll, 'body&&Html');\\n            if (video1.includes('240') && !video1.includes('360')) {\\n                var video = video1.match(/\\\"file\\\": \\\"(.*)\\\\\\\", \\\"label\\\": \\\"240\\\"/)[1] + \\\"#isVideo=true#\\\";\\n            }\\n            if (video1.includes('360') && !video1.includes('480')) {\\n                video = video1.match(/\\\"file\\\": \\\"(.*)\\\\\\\", \\\"label\\\": \\\"360\\\"/)[1] + \\\"#isVideo=true#\\\";\\n            }\\n            if (video1.includes('480') && !video1.includes('720')) {\\n                video = video1.match(/\\\"file\\\": \\\"(.*)\\\\\\\", \\\"label\\\": \\\"480\\\"/)[1] + \\\"#isVideo=true#\\\";\\n            }\\n            if (video1.includes('720')) {\\n                video = video1.match(/\\\"file\\\": \\\"(.*)\\\\\\\", \\\"label\\\": \\\"720\\\"/)[1] + \\\"#isVideo=true#\\\";\\n            }\\n            if (video.includes('&amp')) {\\n                video = video.replace(/amp;/g, \\\"\\\")\\n            }\\n            return video\\n        })\\n    }\\n\\n    var list = pdfa(html, '.list_videos&&.item');\\n    for (var j in list) {\\n        d.push({\\n            title: pdfh(list[j], '.title&&Text'),\\n            pic_url: pdfh(list[j], 'img&&data-src'),\\n            url: player('https://noodlemagazine.com' + pdfh(list[j], 'a&&href')),\\n            desc: \\\"时长：\\\" + pdfh(list[j], '.m_time&&Text'),\\n            col_type: 'movie_2',\\n            extra: {\\n                longClick: [{\\n                    title: '刷新',\\n                    js: $.toString(() => {\\n                        refreshPage();\\n                        return \\\"hiker://empty\\\";\\n                    })\\n                }]\\n            }\\n        });\\n    }\\n}\\nif (type == 'hitxhot' || ku == 'hitxhot') {\\n    var href = 'https://www.google.com/search?sitesearch=www.hitxhot.org&q=' + kw;\\n    d.push({\\n        col_type: \\\"x5_webview_single\\\",\\n        url: href,\\n        desc: \\\"float&&100%\\\",\\n        extra: {\\n            canBack: true,\\n            urlInterceptor: $.toString((rule) => {\\n                if (input.match(/gallerys/)) {\\n                    return $.toString((url, rule) => {\\n                        fba.open(JSON.stringify({\\n                            rule: rule,\\n                            title: name,\\n                            url: 'hiker://page/hitxhot二级?url=' + url + \\\"&rule=\\\" + rule\\n                        }));\\n                    }, input, rule)\\n                }\\n            }, MY_RULE.title),\\n            blockRules: [''],\\n            ua: MOBILE_UA\\n        }\\n    });\\n}\\nif (type == 'pornhub' || ku == 'pornhub') {\\n    var href = 'https://cn.pornhub.com/video/search?search=' + kw + '&page=' + page;\\n    var html = fetch(href);\\n\\n    function player(Url) {\\n        return $(Url).lazyRule(() => {\\n            var html = fetch(input);\\n            var list = pdfa(html, '#mobileContainer&&script');\\n            for (var j in list) {\\n                var video1 = pdfh(list[j], 'script&&Html');\\n                if (video1.match(/1080P/)) {\\n                    var video = video1.match(/videoUrl\\\":\\\"(.*)\\\\\\\",\\\"quality\\\":\\\"1080/)[1];\\n                    var video2 = video1.match(/true,\\\"format\\\":\\\"hls\\\",\\\"videoUrl\\\":\\\"(.*)\\\\\\\",\\\"quality\\\":\\\"720/)[1];\\n                    var video3 = video1.match(/240\\\"},{\\\"defaultQuality\\\":false,\\\"format\\\":\\\"hls\\\",\\\"videoUrl\\\":\\\"(.*)\\\\\\\",\\\"quality\\\":\\\"480/)[1];\\n                    return \\\"{urls:['\\\" + video.replace(/\\\\\\\\/g, \\\"\\\") + \\\"','\\\" + video2.replace(/\\\\\\\\/g, \\\"\\\") + \\\"','\\\" + video3.replace(/\\\\\\\\/g, \\\"\\\") + \\\"'],names:['1080P','720P','480P']}\\\"\\n                } else if (!video1.match(/1080P/) && video1.match(/720P/)) {\\n                    video = video1.match(/true,\\\"format\\\":\\\"hls\\\",\\\"videoUrl\\\":\\\"(.*)\\\\\\\",\\\"quality\\\":\\\"720/)[1];\\n                    video2 = video1.match(/240\\\"},{\\\"defaultQuality\\\":false,\\\"format\\\":\\\"hls\\\",\\\"videoUrl\\\":\\\"(.*)\\\\\\\",\\\"quality\\\":\\\"480/)[1];\\n                    return \\\"{urls:['\\\" + video.replace(/\\\\\\\\/g, \\\"\\\") + \\\"','\\\" + video2.replace(/\\\\\\\\/g, \\\"\\\") + \\\"'],names:['720P','480P']}\\\"\\n                } else if (!video1.match(/720P/) && video1.match(/480P/)) {\\n                    video = video1.match(/240\\\"},{\\\"defaultQuality\\\":false,\\\"format\\\":\\\"hls\\\",\\\"videoUrl\\\":\\\"(.*)\\\\\\\",\\\"quality\\\":\\\"480/)[1];\\n                    video2 = video1.match(/videoUrl\\\":\\\"(.*)\\\\\\\",\\\"quality\\\":\\\"240/)[1];\\n                    return \\\"{urls:['\\\" + video.replace(/\\\\\\\\/g, \\\"\\\") + \\\"','\\\" + video2.replace(/\\\\\\\\/g, \\\"\\\") + \\\"'],names:['480P','240P']}\\\"\\n                } else {\\n                    video = video1.match(/videoUrl\\\":\\\"(.*)\\\\\\\",\\\"quality\\\":\\\"240/)[1];\\n                    return video.replace(/\\\\\\\\/g, \\\"\\\")\\n                }\\n            }\\n        })\\n    }\\n    var list = pdfa(html, '.videoList&&.videoWrapper');\\n    for (var j in list) {\\n        d.push({\\n            title: pdfh(list[j], '.title&&Text'),\\n            desc: pdfh(list[j], '.views&&Text') + \\\" | \\\" + pdfh(list[j], '.time&&Text'),\\n            img: pdfh(list[j], 'img&&src'),\\n            url: player('https://cn.pornhub.com' + pdfh(list[j], '.title&&a&&href')),\\n            col_type: 'movie_2',\\n            extra: {\\n                longClick: [{\\n                    title: '刷新',\\n                    js: $.toString(() => {\\n                        refreshPage();\\n                        return \\\"hiker://empty\\\";\\n                    })\\n                }]\\n            }\\n        });\\n    }\\n}\\nif (type == 'ehentai' || ku == 'ehentai') {\\n    var spage = getVar(\\\"spage\\\", \\\"\\\");\\n    if (MY_PAGE == 1) {\\n        var href = \\\"https://e-hentai.org/?f_search=\\\" + kw\\n    } else {\\n        href = \\\"https://e-hentai.org/?f_search=\\\" + kw + \\\"&next=\\\" + spage\\n    }\\n    var html = fetch(href)\\n    let page1 = pdfh(html, '#unext&&href').split(\\\"next=\\\")[1];\\n    putVar(\\\"spage\\\", page1);\\n    var list = pdfa(html, 'body&&.glthumb');\\n    for (var j in list) {\\n        d.push({\\n            title: pdfh(list[j], 'img&&title'),\\n            url: 'hiker://page/ehentai二级?url=' + pdfh(list[j], '.glthumb&&Html').match(/popUp\\\\('(.*)\\\\&amp;act/)[1].replace(/amp;/g, \\\"\\\").replace(\\\"allerypopups.php?gid=\\\", \\\"/\\\").replace(\\\"&t=\\\", \\\"/\\\"),\\n            pic_url: pdfh(list[j], 'img&&data-src||src'),\\n            desc: pdfh(list[j], '.cn&&Text'),\\n            col_type: \\\"movie_3_marquee\\\"\\n        })\\n    }\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"1.hanmie首页\",\"path\":\"main\",\"rule\":\"js:\\nvar d = [];\\nsetPageTitle('hanime1');\\nvar index = storage0.getMyVar('index', 0);\\naddListener('onClose', $.toString(() => {\\n    clearMyVar(\\\"index\\\");\\n}));\\nif (MY_PAGE == 1) {\\n    var getRandomColor = function() {\\n        return '#' + (Math.random() * 0xffffff << 0).toString(16);\\n    }\\n    var color = getRandomColor();\\n    d.push({\\n        title: index == '0' ? '““””' + `<font color = \\\"${getRandomColor()}\\\" >` + '主页</font>' : '主页',\\n        pic_url: 'https://lanmeiguojiang.com/tubiao/more/47.png',\\n        url: $('').lazyRule(() => {\\n            storage0.putMyVar('index', 0)\\n            refreshPage()\\n            return 'hiker://empty'\\n        }),\\n        col_type: \\\"icon_4\\\",\\n    }, {\\n        title: index == '1' ? '““””' + `<font color = \\\"${getRandomColor()}\\\" >` + '动漫</font>' : '动漫',\\n        pic_url: 'https://lanmeiguojiang.com/tubiao/more/124.png',\\n        url: $('').lazyRule(() => {\\n            storage0.putMyVar('index', 1)\\n            refreshPage()\\n            return 'hiker://empty'\\n        }),\\n        extra: {\\n            longClick: [{\\n                title: '设置默认折叠方式',\\n                js: $.toString(() => {\\n                    var 折叠 = [\\\"展开\\\", \\\"折叠\\\"];\\n                    var name = getItem(\\\"折叠1\\\",\\\"折叠\\\");\\n                    return $(折叠.map(v => v === name ? '““' + v + '””' : v)).select((name) => {\\n                        if (/““.*?””/.test(input)) return;\\n                        if (input === '展开'){\\n                            setItem(\\\"默认折叠模式\\\",\\\"0\\\")                            \\n                        }else{\\n                            setItem(\\\"默认折叠模式\\\",\\\"1\\\")\\n                        }\\n                        setItem(\\\"折叠1\\\", input);\\n                        toast(\\\"切换成功\\\")\\n                    })\\n                })\\n            }]\\n        },\\n        col_type: \\\"icon_4\\\",\\n    }, {\\n        title: index == '2' ? '““””' + `<font color = \\\"${getRandomColor()}\\\" >` + '漫画</font>' : '漫画',\\n        pic_url: 'https://lanmeiguojiang.com/tubiao/more/164.png',\\n        url: $('').lazyRule(() => {\\n            storage0.putMyVar('index', 2)\\n            refreshPage()\\n            return 'hiker://empty'\\n        }),\\n        col_type: \\\"icon_4\\\",\\n    }, {\\n        title: '书架',\\n        pic_url: 'https://lanmeiguojiang.com/tubiao/more/173.png',\\n        url: \\\"hiker://page/Bookrack.view?rule=某聚合&ruleName=#noHistory##noRecordHistory#hanime1漫画\\\",\\n        col_type: \\\"icon_4\\\",\\n    });\\n}\\nconst page = MY_PAGE;\\nswitch (parseInt(index)) {\\n    case 0:\\n        eval(JSON.parse(request('hiker://page/hanime1')).rule);\\n        break;\\n    case 1:\\n        eval(JSON.parse(request('hiker://page/cartoon')).rule)\\n        break;\\n    case 2:\\n        eval(JSON.parse(request('hiker://page/comic')).rule)\\n        break;\\n}\\n\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"1.动漫搜索共同部分代码\",\"path\":\"common\",\"rule\":\"addListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n    clearVar(\\\"Warehouse.order\\\");\\n    clearVar(\\\"Warehouse.sort\\\");\\n    clearVar(\\\"Warehouse.good\\\");\\n    clearVar(\\\"header.fold\\\");\\n}));\\nconst 当前折叠状态 = getVar('header.fold', getItem(\\\"默认折叠模式\\\",\\\"1\\\"));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? '““””'+`<font color = \\\"${color}\\\" >` + item[0] + '</font>' : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\nif (page == 1) {\\n    d.push({\\n        title: \\\"🔍\\\",\\n        url: $.toString(() => {\\n            putMyVar('keyword', input);\\n            return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=hanime1动漫&kw=\\\" + input;\\n        }),\\n        desc: '搜索hanime1动漫',\\n        col_type: \\\"input\\\"\\n    });\\n\\n    d.push({\\n        title: 当前折叠状态 == \\\"1\\\" ? '““””'+`<font color = \\\"${color}\\\" >`+'▼</font>' : '““””'+`<font color = \\\"${color}\\\" >`+'▲</font>',\\n        col_type: \\\"scroll_button\\\",\\n        url: $().lazyRule((默认折叠) => {\\n            putVar('header.fold', getVar('header.fold', 默认折叠) == '1' ? '0' : '1')\\n            refreshPage(false);\\n            return \\\"hiker://empty\\\"\\n        }, 当前折叠状态)\\n    });\\n    tab([\\n        [\\\"全部\\\", \\\"全部\\\"],\\n        [\\\"裏番\\\", \\\"裏番\\\"],\\n        [\\\"泡面番\\\", \\\"泡麵番\\\"],\\n        [\\\"3D動畫\\\", \\\"3D動畫\\\"],\\n        [\\\"同人作品\\\", \\\"同人作品\\\"],\\n        [\\\"Motion Anime\\\", \\\"Motion+Anime\\\"],\\n        [\\\"Cosplay\\\", \\\"Cosplay\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n    if (当前折叠状态 == \\\"0\\\") {\\n        tab([\\n            [\\\"全部\\\", \\\"全部\\\"],\\n            [\\\"最新上市\\\", \\\"最新上市\\\"],\\n            [\\\"最新上傳\\\", \\\"最新上傳\\\"],\\n            [\\\"本日排行\\\", \\\"本日排行\\\"],\\n            [\\\"本週排行\\\", \\\"本週排行\\\"],\\n            [\\\"本月排行\\\", \\\"本月排行\\\"],\\n            [\\\"觀看次數\\\", \\\"觀看次數\\\"],\\n            [\\\"他們在看\\\", \\\"他們在看\\\"]\\n        ], \\\"Warehouse.order\\\", order);\\n        tab([\\n            [\\\"全部\\\", \\\"\\\"],\\n            [\\\"2023\\\", \\\"2023\\\"],\\n            [\\\"2022\\\", \\\"2022\\\"],\\n            [\\\"2021\\\", \\\"2021\\\"],\\n            [\\\"2020\\\", \\\"2020\\\"],\\n            [\\\"2019\\\", \\\"2019\\\"],\\n            [\\\"2018\\\", \\\"2018\\\"],\\n            [\\\"2017\\\", \\\"2017\\\"],\\n            [\\\"2016\\\", \\\"2016\\\"],\\n            [\\\"2015\\\", \\\"2015\\\"],\\n            [\\\"2014\\\", \\\"2014\\\"],\\n            [\\\"2013\\\", \\\"2013\\\"],\\n            [\\\"2012\\\", \\\"2012\\\"],\\n            [\\\"2011\\\", \\\"2011\\\"],\\n            [\\\"2010\\\", \\\"2010\\\"],\\n            [\\\"2009\\\", \\\"2009\\\"],\\n            [\\\"2008\\\", \\\"2008\\\"],\\n            [\\\"2007\\\", \\\"2007\\\"],\\n            [\\\"2006\\\", \\\"2006\\\"],\\n            [\\\"2005\\\", \\\"2005\\\"],\\n            [\\\"2004\\\", \\\"2004\\\"],\\n            [\\\"2003\\\", \\\"2003\\\"],\\n            [\\\"2002\\\", \\\"2002\\\"],\\n            [\\\"2001\\\", \\\"2001\\\"],\\n            [\\\"2000\\\", \\\"2000\\\"],\\n            [\\\"1999\\\", \\\"1999\\\"],\\n            [\\\"1998\\\", \\\"1998\\\"],\\n            [\\\"1997\\\", \\\"1997\\\"],\\n            [\\\"1996\\\", \\\"1996\\\"],\\n            [\\\"1995\\\", \\\"1995\\\"],\\n            [\\\"1994\\\", \\\"1994\\\"],\\n            [\\\"1993\\\", \\\"1993\\\"],\\n            [\\\"1992\\\", \\\"1992\\\"],\\n            [\\\"1991\\\", \\\"1991\\\"],\\n            [\\\"1990\\\", \\\"1990\\\"]\\n        ], \\\"Warehouse.sort\\\", sort);\\n\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"1.动漫搜索一级解析\",\"path\":\"commonjx\",\"rule\":\"var html = fetch(href, {\\n    headers: {\\n        Cookie: readFile(\\\"Cookie.txt\\\", 0)\\n    },\\n    redirect: false\\n});\\n\\neval(JSON.parse(request('hiker://page/errorpic')).rule);\\ntry {\\n    var list1 = pdfa(html, '.no-gutter&&.col-xs-12');\\n    for (var i in list1) {\\n        var img = pdfh(list1[i], 'img,1&&src').replace(\\\"l.jpg\\\", \\\"h.jpg\\\");\\n        let img1 = img.substr(-12, 7);\\n        if (img1.match(errorpic)) {\\n            img = img;\\n        } else {\\n            img = 'https://i.imgur.com/' + img1 + 'g.jpg';\\n        }\\n        d.push({\\n            title: pdfh(list1[i], '.card-mobile-title&&Text'),\\n            desc: '观看次数：' + pdfh(list1[i], '.card-mobile-duration,1&&Text'),\\n            pic_url: img,\\n            url: 'hiker://page/jiexi?url=' + pdfh(list1[i], 'a,0&&href') + '#gameTheme##noRecordHistory#',\\n            col_type: 'movie_2',\\n            extra: {\\n                longClick: [{\\n                    title: '刷新',\\n                    js: $.toString(() => {\\n                        refreshPage();\\n                        return \\\"hiker://empty\\\";\\n                    })\\n                }]\\n            }\\n        });\\n    }\\n} catch (e) {}\\n\\n\\ntry {\\n    var list = pdfa(html, '.home-rows-videos-wrapper&&a');\\n    for (var j in list) {\\n        d.push({\\n            title: pdfh(list[j], 'Text'),\\n            pic_url: pdfh(list[j], 'img&&src'),\\n            url: 'hiker://page/jiexi?url=' + pdfh(list[j], 'a&&href') + '#gameTheme##noRecordHistory#',\\n            col_type: 'movie_3_marquee',\\n            extra: {\\n                longClick: [{\\n                    title: '刷新',\\n                    js: $.toString(() => {\\n                        refreshPage();\\n                        return \\\"hiker://empty\\\";\\n                    })\\n                }]\\n            }\\n        });\\n    }\\n} catch (e) {}\"},{\"col_type\":\"movie_3\",\"name\":\"1.漫画搜索共同及一级解析\",\"path\":\"comicgt\",\"rule\":\"addListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n}));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\nvar html = fetch(href, {\\n    headers: {\\n        Cookie: readFile(\\\"Cookie.txt\\\", 0)\\n    },\\n})\\n\\nif (page == 1) {\\n    d.push({\\n        title: \\\"🔍\\\",\\n        url: $.toString((r) => {\\n            putMyVar('keyword', input);\\n            return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=hanime1漫画&kw=\\\" + input;\\n        }, MY_RULE.title),\\n        desc: '搜索hanime1漫画',\\n        col_type: \\\"input\\\"\\n    });\\n    tab([\\n        [\\\"最新\\\", \\\"\\\"],\\n        [\\\"本日排行\\\", \\\"popular-today\\\"],\\n        [\\\"本周排行\\\", \\\"popular-week\\\"],\\n        [\\\"总排行\\\", \\\"popular\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n}\\nvar list = pdfa(html, '.comics-panel-margin&&.comic-rows-videos-div');\\nfor (var j in list) {\\n    var title = pdfh(list[j], 'Text');\\n    d.push({\\n        title: title,\\n        pic_url: pdfh(list[j], 'img&&data-srcset'),\\n        url: 'hiker://page/comicjiexi?url=' + pdfh(list[j], 'a&&href'),\\n        col_type: 'movie_3_marquee',\\n        extra: {\\n            longClick: [{\\n                title: '刷新',\\n                js: $.toString(() => {\\n                    refreshPage();\\n                    return \\\"hiker://empty\\\";\\n                })\\n            }, {\\n                title: '快速搜索',\\n                js: $.toString((title, rule) => {\\n                    return \\\"hiker://search?s=\\\" + title + \\\"&rule=\\\" + rule;\\n                }, title, MY_RULE.title)\\n            }]\\n        }\\n    });\\n}\"},{\"col_type\":\"movie_2\",\"name\":\"2.麻豆\",\"path\":\"madou_main\",\"rule\":\"js:\\nvar d = [];\\nconst page = MY_PAGE;\\nlet dataType = getVar(\\\"Warehouse.type\\\", \\\"\\\");\\nvar href = 'https://91md.me/index.php/vod/type/id/' + dataType + '/page/' + page + '.html';\\nif (dataType == \\\"\\\" && page == 1) {\\n    href = 'https://91md.me'\\n}\\naddListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n}));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\nvar html = fetch(href)\\n\\nfunction player(Url) {\\n    return $(Url).lazyRule(() => {\\n        var html = fetch(input);\\n        var video = pdfh(html, '#bofang_box&&script&&Html').match(/url\\\":\\\"(.*)\\\\\\\",\\\"url_n/)[1];\\n        return video.replace(/\\\\\\\\/g,'');\\n    })\\n}\\n\\nif (page == 1) {\\n    tab([\\n        [\\\"首页\\\", \\\"\\\"],\\n        [\\\"麻豆视频\\\", \\\"1\\\"],\\n        [\\\"91制片厂\\\", \\\"2\\\"],\\n        [\\\"天美传媒\\\", \\\"3\\\"],\\n        [\\\"蜜桃传媒\\\", \\\"4\\\"],\\n        [\\\"皇家华人\\\", \\\"5\\\"],\\n        [\\\"星空传媒\\\", \\\"6\\\"],\\n        [\\\"精东影业\\\", \\\"7\\\"],\\n        [\\\"乐播传媒\\\", \\\"8\\\"],\\n        [\\\"成人头条\\\", \\\"9\\\"],\\n        [\\\"乌鸦传媒\\\", \\\"10\\\"],\\n        [\\\"兔子先生\\\", \\\"20\\\"],\\n        [\\\"杏吧原创\\\", \\\"21\\\"],\\n        [\\\"玩偶姐姐\\\", \\\"22\\\"],\\n        [\\\"mini传媒\\\", \\\"23\\\"],\\n        [\\\"大象传媒\\\", \\\"24\\\"],\\n        [\\\"开心鬼传媒\\\", \\\"25\\\"],\\n        [\\\"萝莉社\\\", \\\"29\\\"],\\n        [\\\"PsychoPorn\\\", \\\"26\\\"],\\n        [\\\"糖心Vlog\\\", \\\"27\\\"],\\n        [\\\"性视界\\\", \\\"30\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n    d.push({\\n        title: \\\"🔍\\\",\\n        url: $.toString((r) => {\\n            putMyVar('keyword', input);\\n            return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=麻豆&kw=\\\" + input;\\n        }, MY_RULE.title),\\n        desc: '搜索',\\n        col_type: \\\"input\\\"\\n    });\\n}\\n\\nvar lit = pdfa(html, 'body&&.video-list');\\nif (lit.length > 1) {\\n    d.push({\\n        title: '最新影片',\\n        url: 'toast://点了也没用',\\n        col_type: 'text_1'\\n    });\\n    var list1 = pdfa(html, '.video-list,1&&.video-item');\\n    for (var i = 0; i < 8; i++) {\\n        var title = pdfh(list1[i], '.title&&Text');\\n        d.push({\\n            title: title,\\n            desc: pdfh(list1[i], '.time&&Text'),\\n            img: pd(list1[i], 'img&&src') + '@Referer=',\\n            url: player('https://91md.me' + pdfh(list1[i], 'a&&href')),\\n            extra: {\\n                longClick: [{\\n                    title: '刷新',\\n                    js: $.toString(() => {\\n                        refreshPage();\\n                        return \\\"hiker://empty\\\";\\n                    })\\n                }, {\\n                    title: '快速搜索',\\n                    js: $.toString((title, rule) => {\\n                        return \\\"hiker://search?s=\\\" + title + \\\"&rule=\\\" + rule;\\n                    }, title, MY_RULE.title)\\n                }]\\n            }\\n        });\\n    }\\n    d.push({\\n        title: '‘‘’’<font color=\\\"#098AC1\\\">他们在看</font>' + `${\\\"\\\\t\\\".repeat(37)}` + '<small><font color=\\\"red\\\">[刷新]</font></small>',\\n        url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n            refreshPage(false);\\n            return \\\"hiker://empty\\\";\\n        }),\\n        col_type: 'text_1'\\n    });\\n}\\nvar list = pdfa(html, '.video-list&&.video-item');\\nfor (var j in list) {\\n    var title = pdfh(list[j], '.title&&Text');\\n    d.push({\\n        title: title,\\n        desc: pdfh(list[j], '.time&&Text'),\\n        img: pd(list[j], 'img&&src') + '@Referer=',\\n        url: player('https://91md.me' + pdfh(list[j], 'a&&href')),\\n        extra: {\\n            longClick: [{\\n                title: '刷新',\\n                js: $.toString(() => {\\n                    refreshPage();\\n                    return \\\"hiker://empty\\\";\\n                })\\n            }, {\\n                title: '快速搜索',\\n                js: $.toString((title, rule) => {\\n                    return \\\"hiker://search?s=\\\" + title + \\\"&rule=\\\" + rule;\\n                }, title, MY_RULE.title)\\n            }]\\n        }\\n    });\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"4.小黄书\",\"path\":\"小黄书\",\"rule\":\"js:\\nvar d = [];\\nconst page = MY_PAGE;\\nlet dataType = getVar(\\\"Warehouse.type\\\", \\\"kind-1\\\");\\nlet href = 'https://xchina.co/photos/' + dataType + '/' + page + '.html';\\naddListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n}));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\nvar html = fetch(href)\\n\\nif (page == 1) {\\n    tab([\\n        [\\\"全部性感写真\\\", \\\"kind-1\\\"],\\n        [\\\"全部人体摄影\\\", \\\"kind-2\\\"],\\n        [\\\"未分类人体摄影\\\", \\\"series-618e4909ea9b6\\\"],\\n        [\\\"未分类性感写真\\\", \\\"series-618e48e381edf\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n    tab([\\n        [\\\"秀人网尺度主题\\\", \\\"album-1\\\"],\\n        [\\\"大尺度主题\\\", \\\"album-2\\\"],\\n        [\\\"性爱主题\\\", \\\"album-3\\\"],\\n        [\\\"露出主题\\\", \\\"album-4\\\"],\\n        [\\\"Cosplay主题\\\", \\\"album-5\\\"],\\n        [\\\"道具主题\\\", \\\"album-6\\\"],\\n        [\\\"捆绑主题\\\", \\\"album-7\\\"],\\n        [\\\"白虎主题\\\", \\\"album-8\\\"],\\n        [\\\"女同主题\\\", \\\"album-9\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n    tab([\\n        [\\\"丽图100\\\", \\\"series-5f1d784995865\\\"],\\n        [\\\"PANS新版\\\", \\\"series-6310ce9b90056\\\"],\\n        [\\\"摄影师作品\\\", \\\"series-6395a1e929f23\\\"],\\n        [\\\"CHOKmoson脱神\\\", \\\"series-63c7ccc347a68\\\"],\\n        [\\\"王动作品\\\", \\\"series-5f26a5c1d39e9\\\"],\\n        [\\\"风吟鸟唱\\\", \\\"series-63b54e804a694\\\"],\\n        [\\\"宇航员\\\", \\\"series-63b548623b10d\\\"],\\n        [\\\"唐兴\\\", \\\"series-63bdcc1007f87\\\"],\\n        [\\\"TIAN WEN（鳼岛）\\\", \\\"series-63bdcbdb38f2a\\\"],\\n        [\\\"L.P.VISION\\\", \\\"series-63b14e571521d\\\"],\\n        [\\\"轰趴猫\\\", \\\"series-5f1ae6caae922\\\"],\\n        [\\\"相约中国\\\", \\\"series-5f1dcdeaee582\\\"],\\n        [\\\"潘多拉\\\", \\\"series-5f23c44cd66bd\\\"],\\n        [\\\"韩国模特养成\\\", \\\"series-5f1d345bf2a1d\\\"],\\n        [\\\"推女郎\\\", \\\"series-5f14a5eb5b0d7\\\"],\\n        [\\\"无忌影社\\\", \\\"series-619a92aa1fa7a\\\"],\\n        [\\\"JVID\\\", \\\"series-637b2029d2347\\\"],\\n        [\\\"深夜企划\\\", \\\"series-638e5a60b1770\\\"],\\n        [\\\"北京天使\\\", \\\"series-622c7f95220a4\\\"],\\n        [\\\"A4U\\\", \\\"series-5f60b98248a81\\\"],\\n        [\\\"DDY\\\", \\\"series-5f15f727df393\\\"],\\n        [\\\"东莞V女郎\\\", \\\"series-5f22ea422221c\\\"],\\n        [\\\"Fantasy Factory\\\", \\\"series-5f889afb37619\\\"],\\n        [\\\"TPimage\\\", \\\"series-5f7a0a80d3d66\\\"],\\n        [\\\"SK丝库\\\", \\\"series-5f382ba894af4\\\"],\\n        [\\\"Loozy\\\", \\\"series-62888afad416b\\\"],\\n        [\\\"美尤网\\\", \\\"series-5f23c8a10708a\\\"],\\n        [\\\"Super Pose Book\\\", \\\"series-62a0a15911f16\\\"],\\n        [\\\"HT95\\\", \\\"series-6030eca9efe43\\\"],\\n        [\\\"伊甸园写真\\\", \\\"series-63cf9666a9239\\\"],\\n        [\\\"秀人网旗下\\\", \\\"series-63959b9c87149\\\"],\\n        [\\\"秀人网\\\", \\\"series-5f1476781eab4\\\"],\\n        [\\\"爱蜜社\\\", \\\"series-5f71afc92d8ab\\\"],\\n        [\\\"模范学院\\\", \\\"series-5f181625966a6\\\"],\\n        [\\\"花漾\\\", \\\"series-5fc4ce40386af\\\"],\\n        [\\\"美媛馆\\\", \\\"series-5f1495dbda4de\\\"],\\n        [\\\"语画界\\\", \\\"series-601ef80997845\\\"],\\n        [\\\"尤蜜荟\\\", \\\"series-5f184ff551888\\\"],\\n        [\\\"尤物馆\\\", \\\"series-60673bec9dd11\\\"],\\n        [\\\"蜜桃社\\\", \\\"series-5f1dd5a7ebe9a\\\"],\\n        [\\\"瑞丝馆\\\", \\\"series-61263de287e2f\\\"],\\n        [\\\"FEILIN嗲囡囡\\\", \\\"series-5f14a3105d3e8\\\"],\\n        [\\\"爱尤物\\\", \\\"series-5f148046cb2c7\\\"],\\n        [\\\"星颜社\\\", \\\"series-6141c88882a36\\\"],\\n        [\\\"影私荟\\\", \\\"series-63d435352808c\\\"],\\n        [\\\"魅妍社\\\", \\\"series-60f4691dd2f2d\\\"],\\n        [\\\"模特联盟\\\", \\\"series-6218cfb82b6cd\\\"],\\n        [\\\"ArtGravia\\\", \\\"series-60a4a953ca563\\\"],\\n        [\\\"爱丝\\\", \\\"series-5f15f389e993e\\\"],\\n        [\\\"果团网\\\", \\\"series-5f1817b42772b\\\"],\\n        [\\\"PANS写真\\\", \\\"series-5f1482b3a68d6\\\"],\\n        [\\\"妖精社\\\", \\\"series-5f4b5f4eb8b71\\\"],\\n        [\\\"蜜丝\\\", \\\"series-5f2089564c6c2\\\"],\\n        [\\\"头条女神\\\", \\\"series-5f14806585bef\\\"],\\n        [\\\"Pure Media\\\", \\\"series-6224e755e21f4\\\"],\\n        [\\\"尤美\\\", \\\"series-61b997728043b\\\"],\\n        [\\\"SLADY猎女神\\\", \\\"series-605ed5233ca57\\\"],\\n        [\\\"推女神\\\", \\\"series-5f20324cad61d\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n    d.push({\\n        title: \\\"🔍\\\",\\n        url: $.toString((r) => {\\n            putMyVar('keyword', input);\\n            return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=小黄书&kw=\\\" + input;\\n        }, MY_RULE.title),\\n        desc: '搜索',\\n        col_type: \\\"input\\\"\\n    });\\n}\\nvar list = pdfa(html, '.list&&.item');\\nfor (var j in list) {\\n    var title = pdfh(list[j], 'img&&alt');\\n    d.push({\\n            title: title,\\n            desc: pdfh(list[j], '.tag&&Text'),\\n            img: pd(list[j], 'img&&src'),\\n            url: 'hiker://page/小黄书二级?url=' + 'https://xchina.co' + pdfh(list[j], 'a&&href'),\\n            extra: {\\n                longClick: [{\\n                        title: '刷新',\\n                        js: $.toString(() => {\\n                            refreshPage();\\n                            return \\\"hiker://empty\\\";\\n                        })\\n                    }, {\\n                        title: '快速搜索',\\n                        js: $.toString((title, rule) => {\\n                            return \\\"hiker://search?s=\\\" + title + \\\"&rule=\\\" + rule;\\n                        }, title, MY_RULE.title)\\n                }]\\n        }\\n    });\\n}\\nsetResult(d)\"},{\"col_type\":\"movie_2\",\"name\":\"3.麻豆club\",\"path\":\"madouclub\",\"rule\":\"js:\\nvar d = [];\\nconst page = MY_PAGE;\\nlet dataType = getVar(\\\"Warehouse.type\\\", \\\"/\\\");\\nlet href = 'https://madou.club/' + dataType + '/page/' + page;\\naddListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n}));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\nvar html = fetchCodeByWebView(href)\\n\\nif (page == 1) {\\n    tab([\\n        [\\\"首页\\\", \\\"/\\\"],\\n        [\\\"麻豆传媒\\\", \\\"category/%e9%ba%bb%e8%b1%86%e4%bc%a0%e5%aa%92\\\"],\\n        [\\\"麻豆番外篇\\\", \\\"category/%e9%ba%bb%e8%b1%86%e7%95%aa%e5%a4%96%e7%af%87\\\"],\\n        [\\\"麻豆花絮\\\", \\\"category/%e9%ba%bb%e8%b1%86%e8%8a%b1%e7%b5%ae\\\"],\\n        [\\\"其他原创/企划\\\", \\\"#\\\"],\\n        [\\\"HongKongDoll\\\", \\\"category/hongkongdoll\\\"],\\n        [\\\"PsychopornTW\\\", \\\"category/psychoporntw\\\"],\\n        [\\\"91制片厂\\\", \\\"category/91%e5%88%b6%e7%89%87%e5%8e%82\\\"],\\n        [\\\"果冻传媒\\\", \\\"category/%e6%9e%9c%e5%86%bb%e4%bc%a0%e5%aa%92\\\"],\\n        [\\\"蜜桃影像\\\", \\\"category/%e8%9c%9c%e6%a1%83%e5%bd%b1%e5%83%8f\\\"],\\n        [\\\"天美传媒\\\", \\\"category/%e5%a4%a9%e7%be%8e%e4%bc%a0%e5%aa%92\\\"],\\n        [\\\"精东影业\\\", \\\"category/%e7%b2%be%e4%b8%9c%e5%bd%b1%e4%b8%9a\\\"],\\n        [\\\"星空无限传媒\\\", \\\"category/%e6%98%9f%e7%a9%ba%e6%97%a0%e9%99%90%e4%bc%a0%e5%aa%92\\\"],\\n        [\\\"杏吧\\\", \\\"category/%e6%9d%8f%e5%90%a7\\\"],\\n        [\\\"皇家华人\\\", \\\"category/%e7%9a%87%e5%ae%b6%e5%8d%8e%e4%ba%ba\\\"],\\n        [\\\"乐播传媒\\\", \\\"category/%e4%b9%90%e6%92%ad%e4%bc%a0%e5%aa%92\\\"],\\n        [\\\"猫爪影像\\\", \\\"category/%e7%8c%ab%e7%88%aa%e5%bd%b1%e5%83%8f\\\"],\\n        [\\\"爱豆\\\", \\\"category/%e7%88%b1%e8%b1%86\\\"],\\n        [\\\"草莓\\\", \\\"category/%e8%8d%89%e8%8e%93\\\"],\\n        [\\\"抖阴\\\", \\\"category/%e6%8a%96%e9%98%b4\\\"],\\n        [\\\"麻豆导演系列\\\", \\\"category/%e9%ba%bb%e8%b1%86%e5%af%bc%e6%bc%94%e7%b3%bb%e5%88%97\\\"],\\n        [\\\"兔子先生\\\", \\\"category/%e5%85%94%e5%ad%90%e5%85%88%e7%94%9f\\\"],\\n        [\\\"SA国际传媒\\\", \\\"category/sa%e5%9b%bd%e9%99%85%e4%bc%a0%e5%aa%92\\\"],\\n        [\\\"起点传媒/性视界传媒\\\", \\\"category/%e8%b5%b7%e7%82%b9%e4%bc%a0%e5%aa%92-%e6%80%a7%e8%a7%86%e7%95%8c%e4%bc%a0%e5%aa%92\\\"],\\n        [\\\"乌托邦\\\", \\\"category/%e4%b9%8c%e6%89%98%e9%82%a6\\\"],\\n        [\\\"大鸟十八\\\", \\\"category/%e5%a4%a7%e9%b8%9f%e5%8d%81%e5%85%ab\\\"],\\n        [\\\"小鹏奇啪行\\\", \\\"category/%e5%b0%8f%e9%b9%8f%e5%a5%87%e5%95%aa%e8%a1%8c\\\"],\\n        [\\\"女优淫娃培训营\\\", \\\"category/%e5%a5%b3%e4%bc%98%e6%b7%ab%e5%a8%83%e5%9f%b9%e8%ae%ad%e8%90%a5\\\"],\\n        [\\\"淫欲游戏王\\\", \\\"category/%e6%b7%ab%e6%ac%b2%e6%b8%b8%e6%88%8f%e7%8e%8b\\\"],\\n        [\\\"女神羞羞研究所\\\", \\\"category/%e5%a5%b3%e7%a5%9e%e7%be%9e%e7%be%9e%e7%a0%94%e7%a9%b6%e6%89%80\\\"],\\n        [\\\"突袭女优家\\\", \\\"category/%e7%aa%81%e8%a2%ad%e5%a5%b3%e4%bc%98%e5%ae%b6\\\"],\\n        [\\\"情趣K歌房\\\", \\\"category/%e6%83%85%e8%b6%a3k%e6%ad%8c%e6%88%bf\\\"],\\n        [\\\"KISS糖果屋\\\", \\\"category/kiss%e7%b3%96%e6%9e%9c%e5%b1%8b\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n    d.push({\\n        title: \\\"🔍\\\",\\n        url: $.toString((r) => {\\n            putMyVar('keyword', input);\\n            return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=麻豆club&kw=\\\" + input;\\n        }, MY_RULE.title),\\n        desc: '搜索',\\n        col_type: \\\"input\\\"\\n    });\\n}\\n\\nfunction player(Url) {\\n    return $(Url).lazyRule(() => {\\n        var html = fetch(input);\\n        var href = pdfh(html, '.article-content&&iframe&&src');\\n        return $(href).lazyRule(() => {\\n            var htmll = fetch(input);\\n            var video1 = pdfh(htmll, 'body&&script,-1&&Html')\\n            var video = video1.match(/token = \\\"(.*)\\\\\\\";/)[1];\\n            return input.replace(\\\"share\\\", \\\"videos\\\") + \\\"/index.m3u8?token=\\\" + video;\\n        })\\n    })\\n}\\n\\nvar list = pdfa(html, '.excerpts&&.excerpt');\\nfor (var j in list) {\\n    var title = pdfh(list[j], 'h2&&Text');\\n    d.push({\\n        title: title,\\n        desc: pdfh(list[j], '.post-view&&Text'),\\n        img: pd(list[j], 'img&&data-src') + '@Referer=',\\n        url: player(pdfh(list[j], 'a&&href')),\\n        extra: {\\n            longClick: [{\\n                title: '刷新',\\n                js: $.toString(() => {\\n                    refreshPage();\\n                    return \\\"hiker://empty\\\";\\n                })\\n            }, {\\n                title: '快速搜索',\\n                js: $.toString((title, rule) => {\\n                    return \\\"hiker://search?s=\\\" + title + \\\"&rule=\\\" + rule;\\n                }, title, MY_RULE.title)\\n            }]\\n        }\\n    });\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"4.小黄书二级\",\"path\":\"小黄书二级\",\"rule\":\"js:\\nvar d = [];\\nvar html = fetch(MY_URL);\\n\\nd.push({\\n    title: '作品名：' + '\\\\n' + pdfh(html, '.breadcrumb&&a,-1&&Text'),\\n    url: pdfh(html, 'head&&meta,-3&&content'),\\n    col_type: \\\"movie_1_vertical_pic_blur\\\",\\n    desc: pdfh(html, '.info&&Text'),\\n    pic_url: pdfh(html, 'head&&meta,-3&&content').replace(\\\".jpg\\\", \\\"_300x0.jpg\\\"),\\n});\\n\\nfunction 解析() {\\n    var pics = [];\\n    var html = fetch(input);\\n    var list = pdfa(html, '.photos&&img');\\n    if (list.length > 4) {\\n        var list1 = pdfa(html, '.photos--img,4&&img');\\n        for (var j in list1) {\\n            pics.push(pdfh(list1[j], 'img&&src').replace(\\\"_600x0\\\", \\\"\\\"))\\n        }\\n    } else {\\n        for (var j in list) {\\n            pics.push(pdfh(list[j], 'img&&src').replace(\\\"_600x0\\\", \\\"\\\"))\\n        }\\n    }\\n    return \\\"pics://\\\" + pics.join(\\\"&&\\\");\\n}\\nlet lazy = $(\\\"\\\").lazyRule(解析);\\nlet downloadlazy = $.toString(解析);\\nvar doList = [];\\nd.push({\\n    title: '““””<b><span style=\\\"color: #1aad19\\\">📥下载</span></b>',\\n    url: \\\"hiker://page/download.view#noRecordHistory##noRefresh#?rule=某聚合\\\",\\n    col_type: \\\"text_2\\\",\\n    extra: {\\n        chapterList: doList,\\n        info: {\\n            bookName: pdfh(html, '.breadcrumb&&a,-1&&Text'),\\n            ruleName: \\\"小黄书\\\",\\n            bookTopPic: pdfh(html, 'head&&meta,-3&&content'),\\n            parseCode: downloadlazy\\n        },\\n        defaultView: \\\"1\\\"\\n    }\\n});\\nd.push({\\n    title: '‘‘’’<strong><font color= \\\"#098AC1\\\">' + \\\"🗳书架\\\" + '</front></strong>',\\n    url: \\\"hiker://page/Bookrack.view?rule=某聚合&ruleName=小黄书\\\",\\n    col_type: \\\"text_2\\\",\\n});\\nvar video = pdfa(html, 'body&&#video');\\nif (video.length > 0) {\\n    d.push({\\n        title: '““视频””',\\n        url: 'video://' + MY_URL,\\n        extra: {\\n            blockRules: ['.png', '.jpg', '/ad/'],\\n            videoRules: ['*s1.playhls.com/*'],\\n            cls: 'playlist r1'\\n        },\\n        col_type: 'text_3',\\n    });\\n}\\nlet co = pdfa(html, '.pager&&a');\\nif (co.length > 0) {\\n    var list = pdfh(html, '.pager&&a,-2&&Text');\\n    for (var i = 1; i <= list; i++) {\\n        doList.push({\\n            title: \\\"第\\\" + i + \\\"页\\\",\\n            url: MY_URL.replace(\\\".html\\\", \\\"/\\\") + i + \\\".html\\\",\\n        })\\n    }\\n    for (var j = 1; j <= list; j++) {\\n        d.push({\\n            title: \\\"第\\\" + j + \\\"页\\\",\\n            url: MY_URL.replace(\\\".html\\\", \\\"/\\\") + j + \\\".html\\\" + lazy,\\n            col_type: 'text_3',\\n        });\\n    }\\n} else {\\n    doList.push({\\n        title: \\\"第1页\\\",\\n        url: MY_URL,\\n    })\\n    var pics = [];\\n    var list1 = pdfa(html, '.photos--img,4&&img');\\n    for (var j in list1) {\\n        pics.push(pdfh(list1[j], 'img&&src').replace(\\\"_600x0\\\", \\\"\\\"))\\n    }\\n    d.push({\\n        title: \\\"第1页\\\",\\n        url: \\\"pics://\\\" + pics.join(\\\"&&\\\"),\\n        col_type: 'text_3',\\n    });\\n}\\nsetResult(d)\"},{\"col_type\":\"movie_3\",\"name\":\"5.rule34video\",\"path\":\"rule34video\",\"rule\":\"js:\\nvar d = [];\\nconst page = MY_PAGE;\\nlet dataType = getVar(\\\"Warehouse.type\\\", \\\"post_date\\\");\\nlet Type1 = getVar(\\\"Warehouse.type1\\\", \\\"\\\");\\nif (Type1 == '') {\\n    var href = 'https://rule34video.com/' + Type1 + '?mode=async&function=get_block&block_id=custom_list_videos_most_recent_videos&sort_by=' + dataType + '&from=' + page + '&_=1679026476626'\\n} else {\\n    href = 'https://rule34video.com/' + Type1 + '?mode=async&function=get_block&block_id=custom_list_videos_common_videos&sort_by=' + dataType + '&from=' + page + '&_=1679026476626'\\n}\\naddListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n}));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\nvar html = fetch(href)\\n\\nif (page == 1) {\\n    tab([\\n        [\\\"最新\\\", \\\"post_date\\\"],\\n        [\\\"最高评价\\\", \\\"rating\\\"],\\n        [\\\"最受欢迎：全部\\\", \\\"video_viewed\\\"],\\n        [\\\"月\\\", \\\"video_viewed_month\\\"],\\n        [\\\"周\\\", \\\"video_viewed_week\\\"],\\n        [\\\"日\\\", \\\"video_viewed_today\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n    tab([\\n        [\\\"全部\\\", \\\"\\\"],\\n        [\\\"鬼灭\\\", \\\"categories/kimetsu-no-yaiba/\\\"],\\n        [\\\"2d\\\", \\\"categories/2d/\\\"],\\n        [\\\"3d\\\", \\\"categories/3d/\\\"],\\n        [\\\"最终幻想\\\", \\\"categories/final-fantasy/\\\"],\\n        [\\\"龙珠\\\", \\\"categories/dragon-ball/\\\"],\\n        [\\\"原神\\\", \\\"categories/genshin-impact/\\\"],\\n        [\\\"hentai\\\", \\\"categories/hentai/\\\"],\\n        [\\\"2077\\\", \\\"categories/cyberpunk-2077/\\\"]\\n    ], \\\"Warehouse.type1\\\", Type1);\\n    d.push({\\n        title: \\\"🔍\\\",\\n        url: $.toString((r) => {\\n            putMyVar('keyword', input);\\n            return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=rule34video&kw=\\\" + input;\\n        }, MY_RULE.title),\\n        desc: '搜索(英文)//长按图片有惊喜',\\n        col_type: \\\"input\\\"\\n    });\\n}\\n\\nfunction player(Url) {\\n    return $(Url).lazyRule(() => {\\n        var html = fetch(input);\\n        var videos = [];\\n        var titles = [];\\n        var list = pdfa(html, 'body&&.row,3&&a');\\n        for (var j in list) {\\n            videos.push('\\\"' + pdfh(list[j], 'a&&href') + '\\\"')\\n            titles.push('\\\"' + pdfh(list[j], 'a&&Text').replace(\\\"MP4 \\\", \\\"\\\") + '\\\"')\\n        }\\n        return \\\"{urls:[\\\" + videos + \\\"],names:[\\\" + titles + \\\"]}\\\"\\n    })\\n}\\n\\nvar list = parseDomForArray(html, '.thumbs&&.item');\\nfor (var j in list) {\\n    var lj = pdfh(list[j], 'a&&href');\\n    d.push({\\n        title: parseDomForHtml(list[j], '.thumb_title&&Text'),\\n        pic_url: parseDom(list[j], 'img&&data-original'),\\n        url: player(lj),\\n        desc: pdfh(list[j], '.added&&Text'),\\n        col_type: 'movie_2',\\n        extra: {\\n            longClick: [{\\n                title: '刷新',\\n                js: $.toString(() => {\\n                    refreshPage();\\n                    return \\\"hiker://empty\\\";\\n                })\\n            }, {\\n                title: '获取标签',\\n                js: $.toString((u) => {\\n                    return $(u).lazyRule(() => {\\n                        var html = fetch(input)\\n                        let Artist = pdfh(html, 'body&&.row,2&&.name&&Text').replace(/ /g, \\\"-\\\");\\n                        var tag = [Artist];\\n                        var list = pdfa(html, 'body&&.row,4--a,-1&&a');\\n                        for (var j in list) {\\n                            tag.push(pdfh(list[j], 'a&&Text').replace(/ /g, \\\"-\\\"))\\n                        }\\n                        return $(tag.map(v => v)).select((name) => {\\n                            return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=rule34video&kw=\\\" + input\\n                        })\\n                    })\\n                }, lj)\\n            }]\\n        }\\n    });\\n}\\nsetResult(d)\"},{\"col_type\":\"movie_3\",\"name\":\"6.yande\",\"path\":\"yande\",\"rule\":\"js:\\nvar d = [];\\nconst page = MY_PAGE;\\nlet dataType = getVar(\\\"Warehouse.type\\\", \\\"\\\");\\nlet href = 'https://yande.re/post?tags=' + dataType + '&page=' + page;\\naddListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n}));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\nvar html = fetch(href)\\n\\nif (page == 1) {\\n    d.push({\\n        title: 'yande排行',\\n        url: \\\"hiker://page/yande排行?url=hiker://empty#noHistory##noRecordHistory#\\\",\\n        col_type: \\\"icon_2\\\",\\n    }, {\\n        title: '今日热门标签',\\n        url: \\\"hiker://page/yandetags#noHistory##noRecordHistory#\\\",\\n        col_type: \\\"icon_2\\\",\\n    })\\n    d.push({\\n        title: \\\"🔍\\\",\\n        url: $.toString(() => {\\n            putMyVar('keyword', input);\\n            return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=yande&kw=\\\" + input;\\n        }, MY_RULE.title),\\n        desc: '搜索(英文)//长按图片有惊喜',\\n        col_type: \\\"input\\\"\\n    });\\n    tab([\\n        [\\\"全部\\\", \\\"\\\"],\\n        [\\\"裸体\\\", \\\"naked\\\"],\\n        [\\\"剑\\\", \\\"sword\\\"],\\n        [\\\"约战\\\", \\\"date_a_live\\\"],\\n        [\\\"破衣服\\\", \\\"torn_clothes\\\"],\\n        [\\\"fate\\\", \\\"fate/grand_order\\\"],\\n        [\\\"kon\\\", \\\"k-on\\\"],\\n        [\\\"换装人偶\\\", \\\"sono_bisque_doll_wa_koi_wo_suru\\\"],\\n        [\\\"marinesnow\\\", \\\"marinesnow\\\"],\\n        [\\\"莉可\\\", \\\"lycoris_recoil\\\"],\\n        [\\\"屁股\\\", \\\"ass\\\"],\\n        [\\\"会长告白\\\", \\\"kaguya-sama_wa_kokurasetai_~tensai-tachi_no_renai_zunousen~\\\"],\\n        [\\\"fate\\\", \\\"fate/stay_night\\\"],\\n        [\\\"刀剑\\\", \\\"SAO\\\"],\\n        [\\\"乳头\\\", \\\"nipples\\\"],\\n        [\\\"没胸罩\\\", \\\"no_bra\\\"],\\n        [\\\"原神\\\", \\\"genshin_impact\\\"],\\n        [\\\"未经审核\\\", \\\"uncensored\\\"],\\n        [\\\"间谍\\\", \\\"spy_x_family\\\"],\\n        [\\\"赛博\\\", \\\"cyberpunk:_edgerunners\\\"],\\n        [\\\"猫\\\", \\\"pussy\\\"],\\n        [\\\"裸体\\\", \\\"loli\\\"],\\n        [\\\"阴茎\\\", \\\"penis\\\"],\\n        [\\\"口交\\\", \\\"fellatio\\\"],\\n        [\\\"通过审查\\\", \\\"censored\\\"],\\n        [\\\"动物耳朵\\\", \\\"animal_ears\\\"],\\n        [\\\"恶魔高校\\\", \\\"highschool_dxd\\\"],\\n        [\\\"方舟\\\", \\\"arknights\\\"],\\n        [\\\"碧蓝航线\\\", \\\"azur_lane\\\"],\\n        [\\\"碧档\\\", \\\"blue_archive\\\"],\\n        [\\\"翅膀\\\", \\\"wings\\\"],\\n        [\\\"东方\\\", \\\"touhou\\\"],\\n        [\\\"连衣裙\\\", \\\"dress\\\"],\\n        [\\\"壁纸\\\", \\\"wallpaper\\\"],\\n        [\\\"虚拟偶像\\\", \\\"vocaloid\\\"],\\n        [\\\"初音\\\", \\\"hatsune_miku\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n}\\nvar list = pdfa(html, '#post-list-posts&&li');\\nfor (var j in list) {\\n    let img = 'https://yande.re' + pdfh(list[j], 'a&&href');\\n    let img1 = pdfh(list[j], 'a,1&&href');\\n    d.push({\\n        title: pdfh(list[j], '.directlink-res&&Text'),\\n        img: pd(list[j], 'img&&src'),\\n        url: img1 + '@lazyRule=.js:input',\\n        extra: {\\n            longClick: [{\\n                title: '刷新',\\n                js: $.toString(() => {\\n                    refreshPage();\\n                    return \\\"hiker://empty\\\";\\n                })\\n            }, {\\n                title: '获取标签',\\n                js: $.toString((u) => {\\n                    return $(u).lazyRule(() => {\\n                        var html = fetch(input)\\n                        var tag = [];\\n                        var list = pdfa(html, '#tag-sidebar&&li');\\n                        for (var j in list) {\\n                            tag.push(pdfh(list[j], 'a,1&&Text').replace(/ /g, \\\"_\\\"))\\n                        }\\n                        return $(tag.map(v => v)).select((name) => {\\n                            return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=yande&kw=\\\" + input\\n                        })\\n                    })\\n                }, img)\\n            }, {\\n                title: '保存原图',\\n                js: $.toString((u) => {\\n                    var now = new Date();\\n                    var day = now.getDate() + '';\\n                    var year = now.getFullYear() + '';\\n                    var month = (now.getMonth() + 1) + '';\\n                    var hour = now.getHours() + '';\\n                    var minute = now.getMinutes() + '';\\n                    var second = now.getSeconds() + '';\\n                    var date = year + '-' + month + '-' + day + '-' + hour + ':' + minute + ':' + second;\\n                    return saveImage(u, 'file:///storage/emulated/0/Pictures/'+date+'.jpg')\\n                }, img1)\\n            }]\\n        }\\n    });\\n};\\nsetResult(d)\"},{\"col_type\":\"movie_3\",\"name\":\"6.yande排行\",\"path\":\"yande排行\",\"rule\":\"js:\\nvar d = [];\\nsetPageTitle('yande排行');\\n\\nvar now = new Date();\\nvar day = now.getDate() + '';\\nvar year = now.getFullYear() + '';\\nvar month = (now.getMonth() + 1) + '';\\n\\nlet dataType = getVar(\\\"Warehouse.type\\\", \\\"popular_by_day\\\");\\nlet Type1 = getVar(\\\"Warehouse.type1\\\", year);\\nlet Type2 = getVar(\\\"Warehouse.type2\\\", month);\\nlet Type3 = getVar(\\\"Warehouse.type3\\\", day);\\nlet href = 'https://yande.re/post/' + dataType + '?day=' + Type3 + '&month=' + Type2 + '&year=' + Type1;\\naddListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n    clearVar(\\\"Warehouse.type1\\\");\\n    clearVar(\\\"Warehouse.type2\\\");\\n    clearVar(\\\"Warehouse.type3\\\");\\n}));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\nvar html = fetch(href)\\n\\ntab([\\n    [\\\"按日排行\\\", \\\"popular_by_day\\\"],\\n    [\\\"按周排行\\\", \\\"popular_by_week\\\"],\\n    [\\\"按月排行\\\", \\\"popular_by_month\\\"]\\n], \\\"Warehouse.type\\\", dataType);\\ntab([\\n    [\\\"2023\\\", \\\"2023\\\"],\\n    [\\\"2022\\\", \\\"2022\\\"],\\n    [\\\"2021\\\", \\\"2021\\\"],\\n    [\\\"2020\\\", \\\"2020\\\"],\\n    [\\\"2019\\\", \\\"2019\\\"],\\n    [\\\"2018\\\", \\\"2018\\\"],\\n    [\\\"2017\\\", \\\"2017\\\"],\\n    [\\\"2016\\\", \\\"2016\\\"],\\n    [\\\"2015\\\", \\\"2015\\\"],\\n    [\\\"2014\\\", \\\"2014\\\"],\\n    [\\\"2013\\\", \\\"2013\\\"],\\n    [\\\"2012\\\", \\\"2012\\\"],\\n    [\\\"2011\\\", \\\"2011\\\"],\\n    [\\\"2010\\\", \\\"2010\\\"],\\n    [\\\"2009\\\", \\\"2009\\\"],\\n    [\\\"2008\\\", \\\"2008\\\"],\\n    [\\\"2007\\\", \\\"2007\\\"]\\n], \\\"Warehouse.type1\\\", Type1);\\ntab([\\n    [\\\"1\\\", \\\"1\\\"],\\n    [\\\"2\\\", \\\"2\\\"],\\n    [\\\"3\\\", \\\"3\\\"],\\n    [\\\"4\\\", \\\"4\\\"],\\n    [\\\"5\\\", \\\"5\\\"],\\n    [\\\"6\\\", \\\"6\\\"],\\n    [\\\"7\\\", \\\"7\\\"],\\n    [\\\"8\\\", \\\"8\\\"],\\n    [\\\"9\\\", \\\"9\\\"],\\n    [\\\"10\\\", \\\"10\\\"],\\n    [\\\"11\\\", \\\"11\\\"],\\n    [\\\"12\\\", \\\"12\\\"]\\n], \\\"Warehouse.type2\\\", Type2);\\ntab([\\n    [\\\"1\\\", \\\"1\\\"],\\n    [\\\"2\\\", \\\"2\\\"],\\n    [\\\"3\\\", \\\"3\\\"],\\n    [\\\"4\\\", \\\"4\\\"],\\n    [\\\"5\\\", \\\"5\\\"],\\n    [\\\"6\\\", \\\"6\\\"],\\n    [\\\"7\\\", \\\"7\\\"],\\n    [\\\"8\\\", \\\"8\\\"],\\n    [\\\"9\\\", \\\"9\\\"],\\n    [\\\"10\\\", \\\"10\\\"],\\n    [\\\"11\\\", \\\"11\\\"],\\n    [\\\"12\\\", \\\"12\\\"],\\n    [\\\"13\\\", \\\"13\\\"],\\n    [\\\"14\\\", \\\"14\\\"],\\n    [\\\"15\\\", \\\"15\\\"],\\n    [\\\"16\\\", \\\"16\\\"],\\n    [\\\"17\\\", \\\"17\\\"],\\n    [\\\"18\\\", \\\"18\\\"],\\n    [\\\"19\\\", \\\"19\\\"],\\n    [\\\"20\\\", \\\"20\\\"],\\n    [\\\"21\\\", \\\"21\\\"],\\n    [\\\"22\\\", \\\"22\\\"],\\n    [\\\"23\\\", \\\"23\\\"],\\n    [\\\"24\\\", \\\"24\\\"],\\n    [\\\"25\\\", \\\"25\\\"],\\n    [\\\"26\\\", \\\"26\\\"],\\n    [\\\"27\\\", \\\"27\\\"],\\n    [\\\"28\\\", \\\"28\\\"],\\n    [\\\"29\\\", \\\"29\\\"],\\n    [\\\"30\\\", \\\"30\\\"],\\n    [\\\"31\\\", \\\"31\\\"]\\n], \\\"Warehouse.type3\\\", Type3);\\n\\nvar list = pdfa(html, '#post-list-posts&&li');\\nfor (var j in list) {\\nvar img = 'https://yande.re'+pdfh(list[j], 'a&&href');\\n    d.push({\\n        title: pdfh(list[j], '.directlink-res&&Text'),\\n        img: pd(list[j], 'img&&src'),\\n        url: pdfh(list[j], 'a,1&&href') + '@lazyRule=.js:input',\\n        extra: {\\n            longClick: [{\\n                title: '刷新',\\n                js: $.toString(() => {\\n                    refreshPage();\\n                    return \\\"hiker://empty\\\";\\n                })\\n             }, {\\n                title: '获取标签',\\n                js: $.toString((img) => {\\n                    return $(img).lazyRule(() => {\\n                        var html = fetch(input)\\nvar tag = [];\\n                        var list = pdfa(html, '#tag-sidebar&&li');\\n                        for (var j in list) {\\n                            tag.push(pdfh(list[j], 'a,1&&Text').replace(/ /g,\\\"_\\\"))\\n                        }\\n                        return $(tag.map(v => v)).select((name) => {\\n                            return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=yande&kw=\\\" + input\\n                        })\\n                    })\\n                }, img)\\n            }]\\n        }\\n    });\\n}\\n\\nif (list.length == 0) {\\n    if (Type3 == day) {\\n        confirm({\\n            title: \\\"提示\\\",\\n            content: \\\"今日还没有数据，是否显示昨日排行？\\\",\\n            confirm: $.toString(() => {\\n                var days = (new Date().getDate() - 1) + '';\\n                putVar(\\\"Warehouse.type3\\\", days);\\n                refreshPage();\\n            }),\\n            cancel: \\\"'toast://请自己选择日期death'\\\"\\n        });\\n    } else {\\n        if (Type1 == year) {\\n            toast('喂喂，这一天到了吗！');\\n        }\\n    }\\n}\\nsetResult(d)\"},{\"col_type\":\"movie_3\",\"name\":\"6.yande热门tags\",\"path\":\"yandetags\",\"rule\":\"js:\\nvar d = [];\\nsetPageTitle(\\\"今日热门标签\\\");\\nvar href = 'https://yande.re/tag/popular_by_day';\\nvar html = fetch(href);\\nlet list = pdfa(html, '#tag-list--a--a&&a');\\nfor (var j in list) {\\n    d.push({\\n        title: pdfh(list[j], 'a&&Text'),\\n        url: \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=yande&kw=\\\" + pdfh(list[j], 'a&&Text'),\\n        col_type: 'text_center_1'\\n    })\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"7.xvideo\",\"path\":\"xvideo\",\"rule\":\"js:\\nvar d = [];\\nconst page = MY_PAGE;\\nlet dataType = getVar(\\\"Warehouse.type\\\", \\\"/new\\\");\\nlet href = 'https://www.xvideos.com' + dataType + '/' + page;\\naddListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n}));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\nvar html = fetch(href)\\n\\nif (page == 1) {\\n    tab([\\n        [\\\"最新\\\", \\\"/new\\\"],\\n        [\\\"中文\\\", \\\"/lang/chinese\\\"],\\n        [\\\"3d\\\", \\\"/?k=3d&top\\\"],\\n        [\\\"阿拉伯\\\", \\\"/c/Arab-159\\\"],\\n        [\\\"按摩\\\", \\\"/?k=%E6%8C%89%E6%91%A9&top\\\"],\\n        [\\\"白虎\\\", \\\"/?k=%E7%99%BD%E8%99%8E&top\\\"],\\n        [\\\"白丝\\\", \\\"/?k=%E7%99%BD%E4%B8%9D&top\\\"],\\n        [\\\"成熟\\\", \\\"/c/Mature-38\\\"],\\n        [\\\"出轨背叛/火辣妻子\\\", \\\"/c/Cuckold-237\\\"],\\n        [\\\"调教\\\", \\\"/c/Femdom-235\\\"],\\n        [\\\"动漫\\\", \\\"/?k=%E5%8A%A8%E6%BC%AB&top\\\"],\\n        [\\\"肛交\\\", \\\"/c/Anal-12\\\"],\\n        [\\\"国产\\\", \\\"/?k=%E5%9B%BD%E4%BA%A7&top\\\"],\\n        [\\\"褐发\\\", \\\"/c/Brunette-25\\\"],\\n        [\\\"黑人\\\", \\\"/c/Black_Woman-30\\\"],\\n        [\\\"黑丝\\\", \\\"/?k=%E9%BB%91%E4%B8%9D&top\\\"],\\n        [\\\"紅髮\\\", \\\"/c/Redhead-31\\\"],\\n        [\\\"家庭乱搞\\\", \\\"/c/Fucked_Up_Family-81\\\"],\\n        [\\\"金髮\\\", \\\"/c/Blonde-20\\\"],\\n        [\\\"巨屌\\\", \\\"/c/Big_Cock-34\\\"],\\n        [\\\"巨乳\\\", \\\"/?k=%E5%B7%A8%E4%B9%B3&top\\\"],\\n        [\\\"巨乳\\\", \\\"/c/Big_Tits-23\\\"],\\n        [\\\"巨臀\\\", \\\"/c/Big_Ass-24\\\"],\\n        [\\\"口交\\\", \\\"/c/Blowjob-15\\\"],\\n        [\\\"拉丁裔\\\", \\\"/c/Latina-16\\\"],\\n        [\\\"辣媽\\\", \\\"/c/Milf-19\\\"],\\n        [\\\"老师\\\", \\\"/?k=%E8%80%81%E5%B8%88&top\\\"],\\n        [\\\"裂开\\\", \\\"/c/Gapes-167\\\"],\\n        [\\\"妈妈\\\", \\\"/?k=%E5%A6%88%E5%A6%88&top\\\"],\\n        [\\\"麻豆\\\", \\\"/?k=%E9%BA%BB%E8%B1%86&top\\\"],\\n        [\\\"美臀\\\", \\\"/c/Ass-14\\\"],\\n        [\\\"男同\\\", \\\"/gay?fmc=1\\\"],\\n        [\\\"内射\\\", \\\"/?k=%E5%86%85%E5%B0%84&top\\\"],\\n        [\\\"女同\\\", \\\"/c/Lesbian-26\\\"],\\n        [\\\"胖女\\\", \\\"/c/bbw-51\\\"],\\n        [\\\"喷出\\\", \\\"/c/Squirting-56\\\"],\\n        [\\\"拳交\\\", \\\"/c/Fisting-165\\\"],\\n        [\\\"羣交\\\", \\\"/c/Gangbang-69\\\"],\\n        [\\\"人妖\\\", \\\"/shemale?fmc=1\\\"],\\n        [\\\"日本\\\", \\\"/?k=%E6%97%A5%E6%9C%AC&top\\\"],\\n        [\\\"少女\\\", \\\"/c/Teen-13\\\"],\\n        [\\\"射顏\\\", \\\"/c/Cumshot-18\\\"],\\n        [\\\"摄像頭\\\", \\\"/c/Cam_Porn-58\\\"],\\n        [\\\"雙性戀\\\", \\\"/c/Bi_Sexual-62\\\"],\\n        [\\\"絲襪\\\", \\\"/c/Stockings-28\\\"],\\n        [\\\"偷拍\\\", \\\"/?k=%E5%81%B7%E6%8B%8D&top\\\"],\\n        [\\\"塗油\\\", \\\"/c/Oiled-22\\\"],\\n        [\\\"性感内衣\\\", \\\"/c/Lingerie-83\\\"],\\n        [\\\"亞洲的\\\", \\\"/c/Asian_Woman-32\\\"],\\n        [\\\"业余\\\", \\\"/c/Amateur-65\\\"],\\n        [\\\"異族\\\", \\\"/c/Interracial-27\\\"],\\n        [\\\"印度的\\\", \\\"/c/Indian-89\\\"],\\n        [\\\"中出\\\", \\\"/c/Creampie-40\\\"],\\n        [\\\"自慰\\\", \\\"/?k=%E8%87%AA%E6%85%B0&top\\\"],\\n        [\\\"自慰\\\", \\\"/c/Solo_and_Masturbation-33\\\"],\\n        [\\\"足交\\\", \\\"/?k=%E8%B6%B3%E4%BA%A4&top\\\"],\\n        [\\\"ASMR\\\", \\\"/c/ASMR-229\\\"],\\n        [\\\"Cos\\\", \\\"/?k=cos&top\\\"],\\n        [\\\"Cosplay\\\", \\\"/?k=cosplay&top\\\"],\\n        [\\\"Curious wife no panties\\\", \\\"/?k=curious+wife+no+panties&top\\\"],\\n        [\\\"Jk\\\", \\\"/?k=jk&top\\\"],\\n        [\\\"同性視頻\\\", \\\"/gay?fmc=1\\\"],\\n        [\\\"人妖色情\\\", \\\"/shemale?fmc=1\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n    d.push({\\n        title: \\\"🔍\\\",\\n        url: $.toString((r) => {\\n            putMyVar('keyword', input);\\n            return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=xvideo&kw=\\\" + input;\\n        }, MY_RULE.title),\\n        desc: '搜索',\\n        col_type: \\\"input\\\"\\n    });\\n}\\n\\nfunction player(Url) {\\n    return $(Url).lazyRule(() => {\\n        var html = fetch(input);\\n        var list = pdfa(html, 'body&&script');\\n        for (var j in list) {\\n            var video1 = pdfh(list[j], 'script&&Html')\\n            if (video1.includes('html5player.setVideoHLS')) {\\n                var video = video1.match(/html5player.setVideoHLS\\\\('(.*)\\\\'\\\\);/)[1];\\n         var video1 = video1.match(/html5player.setVideoUrlHigh\\\\('(.*)\\\\'\\\\);/)[1];\\n                return \\\"{urls:['\\\"+video+\\\"','\\\"+video1+\\\"'],names:['原画','马赛克']}\\\"\\n               // return video\\n\\n            }\\n        }\\n    })\\n}\\nvar list = pdfa(html, '#content&&.thumb-under');\\nvar list1 = pdfa(html, '#content&&.thumb');\\nfor (var j in list) {\\n    d.push({\\n        title: pdfh(list[j], 'a&&title'),\\n        desc: pdfh(list1[j], '.video-hd-mark&&Text'),\\n        img: pd(list1[j], 'img&&data-src'),\\n        url: player('https://www.xvideos.com' + pdfh(list[j], 'a&&href')),\\n        col_type: 'movie_2',\\n        extra: {\\n            longClick: [{\\n                title: '刷新',\\n                js: $.toString(() => {\\n                    refreshPage();\\n                    return \\\"hiker://empty\\\";\\n                })\\n            }]\\n        }\\n    });\\n}\\nsetResult(d)\"},{\"col_type\":\"movie_3\",\"name\":\"8.jable\",\"path\":\"jable\",\"rule\":\"js:\\nvar d = [];\\nconst page = MY_PAGE;\\nlet dataType = getVar(\\\"Warehouse.type\\\", \\\"/new-release/\\\");\\nlet href = 'https://jable.tv' + dataType + page + '/';\\naddListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n}));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\nvar html = fetch(href)\\n\\nif (page == 1) {\\n    tab([\\n        [\\\"最新\\\", \\\"/new-release/\\\"],\\n        [\\\"最近更新\\\", \\\"/latest-updates/\\\"],\\n        [\\\"热门\\\", \\\"/hot/\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n    tab([\\n        [\\\"主奴調教\\\", \\\"/categories/bdsm/\\\"],\\n        [\\\"直接開啪\\\", \\\"/categories/sex-only/\\\"],\\n        [\\\"中文字幕\\\", \\\"/categories/chinese-subtitle/\\\"],\\n        [\\\"凌辱強暴\\\", \\\"/categories/rape/\\\"],\\n        [\\\"制服誘惑\\\", \\\"/categories/uniform/\\\"],\\n        [\\\"角色劇情\\\", \\\"/categories/roleplay/\\\"],\\n        [\\\"盜攝偷拍\\\", \\\"/categories/hidden-cam/\\\"],\\n        [\\\"無碼解放\\\", \\\"/categories/uncensored/\\\"],\\n        [\\\"男友視角\\\", \\\"/categories/pov/\\\"],\\n        [\\\"多P群交\\\", \\\"/categories/groupsex/\\\"],\\n        [\\\"絲襪美腿\\\", \\\"/categories/pantyhose/\\\"],\\n        [\\\"女同歡愉\\\", \\\"/categories/lesbian/\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n    tab([\\n        [\\\"黑絲\\\", \\\"/tags/black-pantyhose/\\\"],\\n        [\\\"過膝襪\\\", \\\"/tags/knee-socks/\\\"],\\n        [\\\"運動裝\\\", \\\"/tags/sportswear/\\\"],\\n        [\\\"肉絲\\\", \\\"/tags/flesh-toned-pantyhose/\\\"],\\n        [\\\"絲襪\\\", \\\"/tags/pantyhose/\\\"],\\n        [\\\"眼鏡娘\\\", \\\"/tags/glasses/\\\"],\\n        [\\\"獸耳\\\", \\\"/tags/kemonomimi/\\\"],\\n        [\\\"漁網\\\", \\\"/tags/fishnets/\\\"],\\n        [\\\"水着\\\", \\\"/tags/swimsuit/\\\"],\\n        [\\\"校服\\\", \\\"/tags/school-uniform/\\\"],\\n        [\\\"旗袍\\\", \\\"/tags/cheongsam/\\\"],\\n        [\\\"婚紗\\\", \\\"/tags/wedding-dress/\\\"],\\n        [\\\"女僕\\\", \\\"/tags/maid/\\\"],\\n        [\\\"和服\\\", \\\"/tags/kimono/\\\"],\\n        [\\\"吊帶襪\\\", \\\"/tags/stockings/\\\"],\\n        [\\\"兔女郎\\\", \\\"/tags/bunny-girl/\\\"],\\n        [\\\"Cosplay\\\", \\\"/tags/Cosplay/\\\"],\\n        [\\\"黑肉\\\", \\\"/tags/suntan/\\\"],\\n        [\\\"長身\\\", \\\"/tags/tall/\\\"],\\n        [\\\"軟體\\\", \\\"/tags/flexible-body/\\\"],\\n        [\\\"貧乳\\\", \\\"/tags/small-tits/\\\"],\\n        [\\\"蘿莉\\\", \\\"/tags/loli/\\\"],\\n        [\\\"美腿\\\", \\\"/tags/beautiful-leg/\\\"],\\n        [\\\"美尻\\\", \\\"/tags/beautiful-butt/\\\"],\\n        [\\\"紋身\\\", \\\"/tags/tattoo/\\\"],\\n        [\\\"短髮\\\", \\\"/tags/short-hair/\\\"],\\n        [\\\"白虎\\\", \\\"/tags/hairless-pussy/\\\"],\\n        [\\\"熟女\\\", \\\"/tags/mature-woman/\\\"],\\n        [\\\"巨乳\\\", \\\"/tags/big-tits/\\\"],\\n        [\\\"少女\\\", \\\"/tags/girl/\\\"],\\n        [\\\"顏射\\\", \\\"/tags/facial/\\\"],\\n        [\\\"腳交\\\", \\\"/tags/footjob/\\\"],\\n        [\\\"肛交\\\", \\\"/tags/anal-sex/\\\"],\\n        [\\\"痙攣\\\", \\\"/tags/spasms/\\\"],\\n        [\\\"潮吹\\\", \\\"/tags/squirting/\\\"],\\n        [\\\"深喉\\\", \\\"/tags/deep-throat/\\\"],\\n        [\\\"接吻\\\", \\\"/tags/kiss/\\\"],\\n        [\\\"口爆\\\", \\\"/tags/cum-in-mouth/\\\"],\\n        [\\\"口交\\\", \\\"/tags/blowjob/\\\"],\\n        [\\\"乳交\\\", \\\"/tags/tit-wank/\\\"],\\n        [\\\"中出\\\", \\\"/tags/creampie/\\\"],\\n        [\\\"露出\\\", \\\"/tags/outdoor/\\\"],\\n        [\\\"輪姦\\\", \\\"/tags/gang-rape/\\\"],\\n        [\\\"調教\\\", \\\"/tags/tune/\\\"],\\n        [\\\"綑綁\\\", \\\"/tags/bondage/\\\"],\\n        [\\\"瞬間插入\\\", \\\"/tags/quickie/\\\"],\\n        [\\\"痴漢\\\", \\\"/tags/chikan/\\\"],\\n        [\\\"痴女\\\", \\\"/tags/chizyo/\\\"],\\n        [\\\"男M\\\", \\\"/tags/masochism-guy/\\\"],\\n        [\\\"泥醉\\\", \\\"/tags/crapulence/\\\"],\\n        [\\\"泡姬\\\", \\\"/tags/soapland/\\\"],\\n        [\\\"母乳\\\", \\\"/tags/breast-milk/\\\"],\\n        [\\\"放尿\\\", \\\"/tags/piss/\\\"],\\n        [\\\"按摩\\\", \\\"/tags/massage/\\\"],\\n        [\\\"強姦\\\", \\\"/tags/rape/\\\"],\\n        [\\\"多P\\\", \\\"/tags/gangbang/\\\"],\\n        [\\\"刑具\\\", \\\"/tags/torture/\\\"],\\n        [\\\"凌辱\\\", \\\"/tags/insult/\\\"],\\n        [\\\"一日十回\\\", \\\"/tags/10-times-a-day/\\\"],\\n        [\\\"3P\\\", \\\"/tags/3p/\\\"],\\n        [\\\"黑人\\\", \\\"/tags/black/\\\"],\\n        [\\\"醜男\\\", \\\"/tags/ugly-man/\\\"],\\n        [\\\"誘惑\\\", \\\"/tags/temptation/\\\"],\\n        [\\\"童貞\\\", \\\"/tags/virginity/\\\"],\\n        [\\\"時間停止\\\", \\\"/tags/time-stop/\\\"],\\n        [\\\"復仇\\\", \\\"/tags/avenge/\\\"],\\n        [\\\"年齡差\\\", \\\"/tags/age-difference/\\\"],\\n        [\\\"巨漢\\\", \\\"/tags/giant/\\\"],\\n        [\\\"媚藥\\\", \\\"/tags/love-potion/\\\"],\\n        [\\\"夫目前犯\\\", \\\"/tags/sex-beside-husband/\\\"],\\n        [\\\"出軌\\\", \\\"/tags/affair/\\\"],\\n        [\\\"催眠\\\", \\\"/tags/hypnosis/\\\"],\\n        [\\\"偷拍\\\", \\\"/tags/hidden-cam/\\\"],\\n        [\\\"不倫\\\", \\\"/tags/incest/\\\"],\\n        [\\\"下雨天\\\", \\\"/tags/rainy-day/\\\"],\\n        [\\\"NTR\\\", \\\"/tags/ntr/\\\"],\\n        [\\\"風俗娘\\\", \\\"/tags/club-hostess-and-sex-worker/\\\"],\\n        [\\\"醫生\\\", \\\"/tags/doctor/\\\"],\\n        [\\\"逃犯\\\", \\\"/tags/fugitive/\\\"],\\n        [\\\"護士\\\", \\\"/tags/nurse/\\\"],\\n        [\\\"老師\\\", \\\"/tags/teacher/\\\"],\\n        [\\\"空姐\\\", \\\"/tags/flight-attendant/\\\"],\\n        [\\\"球隊經理\\\", \\\"/tags/team-manager/\\\"],\\n        [\\\"未亡人\\\", \\\"/tags/widow/\\\"],\\n        [\\\"搜查官\\\", \\\"/tags/detective/\\\"],\\n        [\\\"情侶\\\", \\\"/tags/couple/\\\"],\\n        [\\\"家政婦\\\", \\\"/tags/housewife/\\\"],\\n        [\\\"家庭教師\\\", \\\"/tags/private-teacher/\\\"],\\n        [\\\"偶像\\\", \\\"/tags/idol/\\\"],\\n        [\\\"人妻\\\", \\\"/tags/wife/\\\"],\\n        [\\\"主播\\\", \\\"/tags/female-anchor/\\\"],\\n        [\\\"OL\\\", \\\"/tags/ol/\\\"],\\n        [\\\"魔鏡號\\\", \\\"/tags/magic-mirror/\\\"],\\n        [\\\"電車\\\", \\\"/tags/tram/\\\"],\\n        [\\\"處女\\\", \\\"/tags/first-night/\\\"],\\n        [\\\"監獄\\\", \\\"/tags/prison/\\\"],\\n        [\\\"溫泉\\\", \\\"/tags/hot-spring/\\\"],\\n        [\\\"洗浴場\\\", \\\"/tags/bathing-place/\\\"],\\n        [\\\"泳池\\\", \\\"/tags/swimming-pool/\\\"],\\n        [\\\"汽車\\\", \\\"/tags/car/\\\"],\\n        [\\\"廁所\\\", \\\"/tags/toilet/\\\"],\\n        [\\\"學校\\\", \\\"/tags/school/\\\"],\\n        [\\\"圖書館\\\", \\\"/tags/library/\\\"],\\n        [\\\"健身房\\\", \\\"/tags/gym-room/\\\"],\\n        [\\\"便利店\\\", \\\"/tags/store/\\\"],\\n        [\\\"錄像\\\", \\\"/tags/video-recording/\\\"],\\n        [\\\"處女作/引退作\\\", \\\"/tags/debut-retires/\\\"],\\n        [\\\"綜藝\\\", \\\"/tags/variety-show/\\\"],\\n        [\\\"節日主題\\\", \\\"/tags/festival/\\\"],\\n        [\\\"感謝祭\\\", \\\"/tags/thanksgiving/\\\"],\\n        [\\\"4小時以上\\\", \\\"/tags/more-than-4-hours/\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n    d.push({\\n        title: \\\"🔍\\\",\\n        url: $.toString((r) => {\\n            putMyVar('keyword', input);\\n            return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=jable&kw=\\\" + input;\\n        }, MY_RULE.title),\\n        desc: '搜索',\\n        col_type: \\\"input\\\"\\n    });\\n}\\n\\nfunction player(Url) {\\n    return $(Url).lazyRule(() => {\\n        var html = fetch(input);\\n        var list = pdfa(html, 'body&&script');\\n        for (var j in list) {\\n            var video1 = pdfh(list[j], 'script&&Html');\\n            if (video1.includes('hlsUrl')) {\\n                var video = video1.match(/hlsUrl = '(.*)\\\\';/)[1];\\n                return video;\\n            }\\n        }\\n    })\\n}\\nvar list = parseDomForArray(html, '.pb-e-lg-40&&.col-sm-4');\\nfor (var j in list) {\\n    d.push({\\n        title: parseDomForHtml(list[j], 'h6&&Text'),\\n        pic_url: parseDom(list[j], 'img&&data-src'),\\n        url: player(parseDomForHtml(list[j], 'a&&href')),\\n        desc: pdfh(list[j], '.label&&Text'),\\n        col_type: 'movie_2',\\n        extra: {\\n            longClick: [{\\n                title: '刷新',\\n                js: $.toString(() => {\\n                    refreshPage();\\n                    return \\\"hiker://empty\\\";\\n                })\\n            }]\\n        }\\n    });\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"0.首页\",\"path\":\"view\",\"rule\":\"var d = [];\\nd.push({\\n    img: 'https://lanmeiguojiang.com/tubiao/more/35.png',\\n    title: '下载',\\n    url: \\\"hiker://download\\\",\\n    col_type: \\\"icon_4\\\"\\n}, {\\n    img: 'https://lanmeiguojiang.com/tubiao/more/164.png',\\n    title: '历史',\\n    url: \\\"hiker://history?rule=某聚合\\\",\\n    col_type: \\\"icon_4\\\"\\n}, {\\n    img: 'https://lanmeiguojiang.com/tubiao/more/241.png',\\n    title: '收藏',\\n    url: \\\"hiker://collection?group=～～～\\\",\\n    col_type: \\\"icon_4\\\"\\n}, {\\n    img: 'https://lanmeiguojiang.com/tubiao/more/173.png',\\n    title: '书架',\\n    url: \\\"hiker://page/Main.view#noHistory##noRecordHistory#\\\",\\n    col_type: \\\"icon_4\\\"\\n})\\n\\nlet name = getItem(\\\"name\\\", \\\"hanime1动漫\\\");\\nlet names = [\\\"全部\\\", \\\"hanime1动漫\\\", \\\"hanime1漫画\\\", \\\"麻豆\\\", \\\"麻豆club\\\", \\\"小黄书\\\", \\\"rule34video\\\", \\\"yande\\\", \\\"xvideo\\\", \\\"jable\\\", \\\"wnacg\\\", \\\"spankbang\\\", \\\"noodlemagazine(纯搜索)\\\", \\\"hitxhot\\\", \\\"pornhub\\\", \\\"ehentai\\\"];\\nd.push({\\n    title: \\\"🔍\\\",\\n    url: $.toString(() => {\\n        putMyVar('keyword', input);\\n        let name = getItem(\\\"name\\\", \\\"hanime1动漫\\\");\\n        if (name == \\\"hitxhot\\\") return 'hiker://page/search?p=#noHistory##fullTheme##noRecordHistory#fypage&type=' + name + '&kw=' + input;\\nif (name == \\\"全部\\\") return 'hiker://page/search?p=hiker://empty#fypage#noHistory##noRecordHistory#&type=全部&kw=' + input;\\n        return 'hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=' + name + '&kw=' + input;\\n    }),\\n    desc: '当前搜索引擎:' + name,\\n    col_type: \\\"input\\\",\\n    extra: {\\n        defaultValue: getMyVar('keyword', '') || \\\"\\\",\\n    }\\n}, {\\n    title: '““””<small><font color=\\\"#f1441d\\\">点击选择搜索引擎</font></small>',\\n    col_type: \\\"text_center_1\\\",\\n    url: $(names.map(v => v === name ? \\\"““\\\" + v + \\\"””\\\" : v)).select((name) => {\\n        if (/““.*?””/.test(input)) return;\\n        setItem(\\\"name\\\", input);\\n        refreshPage();\\n    })\\n});\\n\\nd.push({\\n    title: '‘‘’’<font color=\\\"#1E4F86\\\">hanime1</font>' + '\\\\n' + '<small><font color=\\\"#1E4F86\\\">(可长按)</font></small>',\\n    pic_url: \\\"https://i.imgur.com/mIRiIohg.jpg\\\",\\n    url: \\\"hiker://page/main?url=hiker://empty#fypage#noHistory##noRecordHistory##noRefresh#\\\",\\n    col_type: \\\"card_pic_2_2_left\\\",\\n    extra: {\\n        longClick: [{\\n            title: '导入最新规则(强制)',\\n            js: $.toString(() => {\\n                deleteFile(\\\"day.txt\\\");\\n                deleteFile(\\\"update.txt\\\");\\n                refreshPage();\\n                return \\\"hiker://empty\\\";\\n            })\\n        }]\\n    }\\n\\n}, {\\n    title: '‘‘’’<font color=\\\"#f1441d\\\">麻豆</font>',\\n    pic_url: \\\"https://assets.yande.re/data/preview/5a/e1/5ae17c396f707b2c1a7bc73c9acb3461.jpg\\\",\\n    url: \\\"hiker://page/madou_main?url=hiker://empty#fypage#noHistory##noRecordHistory#\\\",\\n    col_type: \\\"card_pic_2_2\\\",\\n\\n}, {\\n    title: '‘‘’’<font color=\\\"#FFE4E1\\\">麻豆club</font>',\\n    pic_url: \\\"https://assets.yande.re/data/preview/71/6b/716b5e6b7ed6ecfe2bddde57e8de408d.jpg\\\",\\n    url: \\\"hiker://page/madouclub?url=hiker://empty#fypage#noHistory##noRecordHistory#\\\",\\n    col_type: \\\"card_pic_2_2\\\",\\n\\n}, {\\n    title: '‘‘’’<font color=\\\"#fca104\\\">rule34video</font>' + '\\\\n' + '<small><font color=\\\"#fca104\\\">(多线路)</font></small>',\\n    pic_url: \\\"https://assets.yande.re/data/preview/1a/96/1a96ced31372b85d3891924ad65faf00.jpg\\\",\\n    url: \\\"hiker://page/rule34video?url=hiker://empty#fypage#noHistory##noRecordHistory#\\\",\\n    col_type: \\\"card_pic_2_2_left\\\",\\n\\n}, {\\n    title: '‘‘’’<font color=\\\"#fca104\\\">小黄书</font>',\\n    pic_url: \\\"https://img.xchina.pics/photos/63ef8e07d8b73/0006_300x0.jpg\\\",\\n    url: \\\"hiker://page/小黄书?url=hiker://empty#fypage#noHistory##noRecordHistory#\\\",\\n    col_type: \\\"card_pic_2_2_left\\\",\\n\\n}, {\\n    title: '‘‘’’<font color=\\\"#FFE4E1\\\">xvideo</font>' + '\\\\n' + '<small><font color=\\\"#FFE4E1\\\">(多线路)</font></small>',\\n    pic_url: \\\"https://assets.yande.re/data/preview/67/18/6718cc3fa830e3218ad2ac40bb6648e2.jpg\\\",\\n    url: \\\"hiker://page/xvideo?url=hiker://empty#fypage#noHistory##noRecordHistory#\\\",\\n    col_type: \\\"card_pic_2_2\\\",\\n\\n}, {\\n    title: '‘‘’’<font color=\\\"#f1441d\\\">yande</font>',\\n    pic_url: \\\"https://assets.yande.re/data/preview/89/8d/898d476cb5c9ad63be38177494e0907d.jpg\\\",\\n    url: \\\"hiker://page/yande?url=hiker://empty#fypage#noHistory##noRecordHistory#\\\",\\n    col_type: \\\"card_pic_2_2\\\",\\n\\n}, {\\n    title: '‘‘’’<font color=\\\"#ffffff\\\">jable</font>',\\n    pic_url: \\\"https://assets.yande.re/data/preview/06/cd/06cd840ee00f182b8e84cdabdcfca4e5.jpg\\\",\\n    url: \\\"hiker://page/jable?url=hiker://empty#fypage#noHistory##noRecordHistory#\\\",\\n    col_type: \\\"card_pic_2_2_left\\\",\\n\\n}, {\\n    title: '‘‘’’<font color=\\\"#fa7e23\\\">某色网</font>',\\n    pic_url: \\\"https://assets.yande.re/data/preview/29/3e/293e0ac5d9266d49f5046ffe5c1061a3.jpg\\\",\\n    url: \\\"hiker://page/sewang?url=hiker://empty#fypage#noHistory##noRecordHistory#\\\",\\n    col_type: \\\"card_pic_2_2_left\\\",\\n\\n}, {\\n    title: '‘‘’’<font color=\\\"#f1441d\\\">18H漫画</font>' + '\\\\n' + '<small><font color=\\\"#f1441d\\\">(旧类漫画)</font></small>',\\n    pic_url: \\\"https://assets.yande.re/data/preview/1a/96/1a96ced31372b85d3891924ad65faf00.jpg\\\",\\n    url: \\\"hiker://page/18H?url=hiker://empty#fypage#noHistory##noRecordHistory#\\\",\\n    col_type: \\\"card_pic_2_2\\\",\\n\\n}, {\\n    title: '‘‘’’<font color=\\\"#f1441d\\\">wnacg漫画</font>' + '\\\\n' + '<small><font color=\\\"#f1441d\\\">(只能下载zip)</font></small>',\\n    pic_url: \\\"https://assets.yande.re/data/preview/02/51/025161c6bedc91b5393e77f58190fb59.jpg\\\",\\n    url: \\\"hiker://page/wnacg?url=hiker://empty#fypage#noHistory##noRecordHistory#\\\",\\n    col_type: \\\"card_pic_2_2\\\",\\n\\n}, {\\n    title: '‘‘’’<font color=\\\"#f1441d\\\">spankbang</font>',\\n    desc: '0',\\n    pic_url: \\\"https://files.yande.re/jpeg/52285da077745b8d8df32716b4a61d59/yande.re%201071830%20animal_ears%20bandaid%20lethe_%28lethe187%29%20tail.jpg\\\",\\n    url: \\\"hiker://page/spankbang?url=hiker://empty#fypage#noHistory##noRecordHistory#\\\",\\n    col_type: \\\"card_pic_2_2_left\\\",\\n\\n}, {\\n    title: '‘‘’’<font color=\\\"#f1441d\\\">e-hentai</font>'+ '\\\\n' + '<small><font color=\\\"#f1441d\\\">(容易被封ip)</font></small>',\\n    desc: '0',\\n    pic_url: \\\"https://files.yande.re/image/33298ee201d2054aa1288295c7e694d4/yande.re%201069351%20animal_ears%20bathing%20bunny_ears%20echocalypse%20horns%20naked%20onsen%20pointy_ears%20sake%20see_through%20suraimu_%28suraimuraimu%29%20tail%20towel%20wallpaper%20wet%20wings.jpg\\\",\\n    url: \\\"hiker://page/ehentai?url=hiker://empty#fypage#noHistory##noRecordHistory#\\\",\\n    col_type: \\\"card_pic_2_2_left\\\",\\n\\n}, {\\n    title: '‘‘’’<font color=\\\"#f1441d\\\">fikfap</font>',\\n    desc: '0',\\n    pic_url: \\\"https://files.yande.re/image/708a7152ee259b94e5e4517761774a5e/yande.re%201082384%20animal_ears%20ass%20garter%20no_bra%20tagme%20tail%20thighhighs%20wet.jpg\\\",\\n    url: \\\"hiker://page/fikfap?url=hiker://empty#fypage#noHistory##noRecordHistory#\\\",\\n    col_type: \\\"card_pic_2\\\",\\n\\n}, {\\n    title: '‘‘’’<font color=\\\"#f1441d\\\">hitxhot</font>',\\n    desc: '0',\\n    pic_url: \\\"https://files.yande.re/image/192a81a25a9ad2453ce698aae527e6ea/yande.re%201076091%20animal_ears%20garter%20habu_rin%20karyl_%28princess_connect%29%20nekomimi%20princess_connect%20princess_connect%21_re%3Adive%20skirt_lift%20thighhighs%20undressing%20wallpaper.jpg\\\",\\n    url: \\\"hiker://page/hitxhot?url=hiker://empty#fypage#noHistory##noRecordHistory#\\\",\\n    col_type: \\\"card_pic_1\\\",\\n\\n}, {\\n    title: '‘‘’’<font color=\\\"#f1441d\\\">pornhub</font>' + '\\\\n' + '<small><font color=\\\"#f1441d\\\">(多线路)</font></small>',\\n    desc: '0',\\n    pic_url: \\\"https://files.yande.re/image/0228d3c397943a310bdaebbfb75bd939/yande.re%201074856%20animal_ears%20maoao%20naked%20neko%20nekomimi%20nipples%20thighhighs.jpg\\\",\\n    url: \\\"hiker://page/pornhub?url=hiker://empty#fypage#noHistory##noRecordHistory#\\\",\\n    col_type: \\\"card_pic_1\\\",\\n})\"},{\"col_type\":\"movie_3\",\"name\":\"#普通下载主程序\",\"path\":\"Download.exe.js\",\"rule\":\"const Mian = $.require(\\\"mainDownload\\\");\\nfunction novel(item, info, order, MY_ID) {\\n    Mian.novel(item, info, order);\\n    return \\\"toast://\\\" + info.bookName + \\\"@\\\" + item.title + \\\" 下载完成\\\";\\n}\\n\\nfunction comic(item, info, order, MY_ID) {\\n    Mian.comic(item, info, order);\\n    return \\\"toast://\\\" + info.bookName + \\\"@\\\" + item.title + \\\" 下载完成\\\";\\n}\\nvar $exe = {\\n    comic: comic,\\n    novel: novel\\n};\\n$.exports = function(item, info, order, MY_ID) {\\n    return $exe[info.type](item, info, order, MY_ID);\\n};\"},{\"col_type\":\"text_2\",\"name\":\"#普通下载列表主程序\",\"path\":\"download.view\",\"rule\":\"js:\\nconst viewConfig = Object.assign({\\n    chapterList: [],\\n    info: {},\\n    defaultView: \\\"0\\\"\\n}, MY_PARAMS);\\nviewConfig.info = Object.assign({\\n    ruleName: \\\"\\\",\\n    bookName: \\\"\\\",\\n    bookTopPic: \\\"\\\",\\n    parseCode: \\\"\\\",\\n    decode: undefined,\\n    type: \\\"comic\\\",\\n    comicScheme: \\\"1\\\"\\n}, viewConfig.info);\\nlet {\\n    chapterList,\\n    info,\\n    defaultView\\n} = viewConfig;\\nsetPageTitle(\\\"选择器|\\\" + info.bookName)\\n\\nconst File = $.require(\\\"hiker://page/File.js\\\");\\nconst Tool = $.require(\\\"hiker://page/Tool.js\\\");\\nconst Config = $.require(\\\"hiker://page/Config.json\\\");\\n\\nviewConfig.info.bookName=Tool.textShield(viewConfig.info.bookName);\\nviewConfig.info.ruleName=Tool.textShield(viewConfig.info.ruleName);\\n\\nconst def_DoVi_Style = Config.def_DoVi_Style;\\nconst MY_ID = info.ruleName + \\\"//\\\" + info.bookName;\\n\\nlet isStart = getMyVar(MY_ID + \\\":isStart\\\");\\nlet viewMode = getMyVar(MY_ID + \\\":viewMode\\\", defaultView);\\nlet isReverse = getMyVar(MY_ID + \\\":isReverse\\\", \\\"0\\\");\\nlet tagFilter = getMyVar(MY_ID + \\\":tagFilter\\\", Config.def_DoVi_Type);\\n\\naddListener(\\\"onClose\\\", $.toString((MY_ID) => {\\n    clearMyVar(MY_ID + \\\":loadingTeam\\\");\\n    clearMyVar(MY_ID + \\\":viewMode\\\");\\n    clearMyVar(MY_ID + \\\":completed\\\");\\n    clearMyVar(MY_ID + \\\":batchTeam\\\");\\n    clearMyVar(MY_ID + \\\":tagFilter\\\");\\n    clearMyVar(MY_ID + \\\":pageNum\\\");\\n}, MY_ID));\\n\\nlet layout = [];\\n\\nif (isStart === \\\"1\\\") {\\n    putMyVar(MY_ID + \\\":viewMode\\\", defaultView);\\n    viewMode = \\\"1\\\";\\n}\\n\\nlet backupChapterList = chapterList;\\nif (typeof chapterList === \\\"string\\\") {\\n    chapterList = JSON.parse(request(\\\"file://\\\" + chapterList) || \\\"[]\\\");\\n}\\nlet chapterAll = chapterList;\\nchapterList = chapterList.map((item, CID) => {\\n    item.CID = CID;\\n    item.title=Tool.textShield(item.title);\\n    return item;\\n});\\nlet pageNum = Number(getMyVar(MY_ID + \\\":pageNum\\\", \\\"1\\\"));\\nlet chapterChunk = [chapterList].concat(Tool.chunk(chapterList, Config.viewPageSize));\\nchapterList = chapterChunk[pageNum] || [];\\n\\nfunction setType() {\\n    let set = (tag, put) => {\\n        putMyVar(put, tag);\\n        refreshPage(false);\\n        return \\\"hiker://empty\\\"\\n    };\\n    layout.push({\\n        title: 0 == pageNum ? \\\"““””\\\" + (\\\"全部(\\\" + chapterAll.length + \\\")\\\").fontcolor(\\\"#23AD6F\\\") : \\\"全部(\\\" + chapterAll.length + \\\")\\\",\\n        url: $(\\\"#noLoading#\\\").lazyRule(set, 0, MY_ID + \\\":pageNum\\\"),\\n        col_type: \\\"scroll_button\\\"\\n    });\\n    for (let i = 1; i < chapterChunk.length; i++) {\\n        let tagText = (i - 1) * Config.viewPageSize + \\\"-\\\" + ((i - 1) * Config.viewPageSize + chapterChunk[i].length);\\n        layout.push({\\n            title: i == pageNum ? \\\"““””\\\" + tagText.fontcolor(\\\"#23AD6F\\\") : tagText,\\n            url: $(\\\"#noLoading#\\\").lazyRule(set, i, MY_ID + \\\":pageNum\\\"),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    layout.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n    layout.push({\\n        title: tagFilter === \\\"0\\\" ? \\\"““””\\\" + \\\"全部\\\".fontcolor(\\\"#23AD6F\\\") : \\\"全部\\\",\\n        url: $(\\\"#noLoading#\\\").lazyRule(set, \\\"0\\\", MY_ID + \\\":tagFilter\\\"),\\n        col_type: \\\"scroll_button\\\"\\n    });\\n    layout.push({\\n        title: tagFilter === \\\"1\\\" ? \\\"““””\\\" + \\\"未下载\\\".fontcolor(\\\"#23AD6F\\\") : \\\"未下载\\\",\\n        url: $(\\\"#noLoading#\\\").lazyRule(set, \\\"1\\\", MY_ID + \\\":tagFilter\\\"),\\n        col_type: \\\"scroll_button\\\"\\n    });\\n    layout.push({\\n        title: tagFilter === \\\"2\\\" ? \\\"““””\\\" + \\\"已下载\\\".fontcolor(\\\"#23AD6F\\\") : \\\"已下载\\\",\\n        url: $(\\\"#noLoading#\\\").lazyRule(set, \\\"2\\\", MY_ID + \\\":tagFilter\\\"),\\n        col_type: \\\"scroll_button\\\"\\n    });\\n}\\nlet chapterTeam = [];\\nlet record = [];\\nif (info.type === \\\"comic\\\") {\\n    let lazy = $(\\\"#noLoading#\\\").lazyRule(() => {\\n        const File = $.require(\\\"hiker://page/File.js\\\");\\n        let filelist = File.getFilePath(input);\\n        let piclist = filelist.map((item, i) => \\\"file://\\\" + input + \\\"/\\\" + (i + 1) + \\\".jpg\\\");\\n        return \\\"pics://\\\" + piclist.join(\\\"&&\\\");\\n    });\\n\\n    function comFun(i, item) {\\n        let rootPath = Config.comicPath + \\\"/\\\" + info.ruleName + \\\"/\\\" + info.bookName + \\\"/\\\" + i + \\\"$A$\\\" + item.title;\\n        return {\\n            title: \\\"““\\\" + item.title + \\\"””\\\",\\n            url: rootPath + lazy,\\n            extra: {\\n                id: MY_ID + \\\"#\\\" + i,\\n            },\\n            col_type: def_DoVi_Style\\n        }\\n    }\\n    File.getFilePath(Config[info.type + \\\"Path\\\"] + \\\"/\\\" + info.ruleName + \\\"/\\\" + info.bookName, \\\"dir\\\").forEach((file) => {\\n        let att = Tool.split(file.name, \\\"$\\\", 2);\\n        if (att.length === 3 && att[1] === (\\\"A\\\")) {\\n            record.push(att[2]);\\n        }\\n    });\\n} else {\\n    function comFun(i, item) {\\n        return {\\n            title: \\\"““\\\" + item.title + \\\"””\\\",\\n            url: \\\"hiker://page/NovelMainBody#autoPage##readTheme#\\\",\\n            extra: {\\n                id: MY_ID + \\\"#\\\" + i,\\n                path: Config.novelPath + \\\"/\\\" + info.ruleName + \\\"/\\\" + info.bookName + \\\"/\\\" + i + \\\"$A$\\\" + item.title + \\\".txt\\\",\\n                title: item.title\\n            },\\n            col_type: def_DoVi_Style\\n        }\\n    }\\n    File.getFilePath(Config[info.type + \\\"Path\\\"] + \\\"/\\\" + info.ruleName + \\\"/\\\" + info.bookName, \\\"file\\\", \\\".txt\\\").forEach((file) => {\\n        let att = Tool.split(file.name, \\\"$\\\", 2);\\n        if (att.length === 3 && att[1] === (\\\"A\\\")) {\\n            record.push(att[2].slice(0, att[2].lastIndexOf(\\\".\\\")));\\n        }\\n    });\\n}\\n\\nfunction clickDownload(item, info, MY_ID, i) {\\n    let loadingTeam = JSON.parse(getMyVar(MY_ID + \\\":loadingTeam\\\", \\\"[]\\\") || \\\"[]\\\");\\n    let ElementIndex = loadingTeam.indexOf(i);\\n    if (ElementIndex > -1) return \\\"toast://正在下载\\\";\\n\\n    loadingTeam.push(i);\\n    putMyVar(MY_ID + \\\":loadingTeam\\\", JSON.stringify(loadingTeam));\\n    updateItem({\\n        title: \\\"‘‘\\\" + item.title + \\\"’’\\\",\\n        extra: {\\n            id: MY_ID + \\\"#\\\" + i\\n        }\\n    });\\n    let result = \\\"toast://下载失败\\\";\\n    try {\\n        toast(\\\"开始下载:\\\" + item.title);\\n        let download = $.require(\\\"hiker://page/Download.exe.js\\\");\\n        result = download(item, info, i, MY_ID);\\n        updateItem({\\n            title: \\\"““\\\" + item.title + \\\"””\\\",\\n            url: \\\"toast://已下载\\\",\\n            extra: {\\n                id: MY_ID + \\\"#\\\" + i\\n            }\\n        });\\n    } catch (e) {\\n        updateItem({\\n            title: item.title,\\n            extra: {\\n                id: MY_ID + \\\"#\\\" + i\\n            }\\n        });\\n        log(e.toString());\\n    } finally {\\n        loadingTeam.splice(ElementIndex, 1);\\n        putMyVar(MY_ID + \\\":loadingTeam\\\", JSON.stringify(loadingTeam));\\n    }\\n    return result;\\n}\\n\\nfunction singleView() {\\n    layout.push({\\n        title: \\\"反转列表\\\",\\n        url: $(\\\"#noLoading#\\\").lazyRule((isReverse, MY_ID) => {\\n            putMyVar(MY_ID + \\\":isReverse\\\", isReverse === \\\"0\\\" ? \\\"1\\\" : \\\"0\\\");\\n            refreshPage(false);\\n            return \\\"hiker://empty\\\";\\n        }, isReverse, MY_ID),\\n        pic_url: \\\"https://img.icons8.com/?id=33nvDqbHH7HW&size=48&format=gif&token=\\\",\\n        col_type: \\\"icon_2\\\"\\n    });\\n    layout.push({\\n        title: \\\"批量下载\\\",\\n        url: $(\\\"#noLoading#\\\").lazyRule((MY_ID) => {\\n            let loadingTeam = JSON.parse(getMyVar(MY_ID + \\\":loadingTeam\\\", \\\"[]\\\") || \\\"[]\\\");\\n            if (loadingTeam.length > 0) return \\\"toast://还有任务没有完成\\\";\\n            if (getAppVersion() < 2594) return \\\"toast://未开放\\\";\\n            putMyVar(MY_ID + \\\":viewMode\\\", \\\"1\\\");\\n            refreshPage(false);\\n            return \\\"hiker://empty\\\";\\n\\n        }, MY_ID),\\n        pic_url: \\\"https://img.icons8.com/?format=gif&id=0uafaMNzxj88&token=\\\",\\n        col_type: \\\"icon_2\\\"\\n    });\\n    setType();\\n    layout.push({\\n        col_type: \\\"line_blank\\\"\\n    });\\n    let loadingTeam = JSON.parse(getMyVar(MY_ID + \\\":loadingTeam\\\", \\\"[]\\\") || \\\"[]\\\");\\n    for (let i = 0, item = chapterList[0]; i < chapterList.length; item = chapterList[++i]) {\\n        let is_download = record.includes(item.title);\\n        if (is_download && tagFilter !== \\\"1\\\") {\\n            chapterTeam.push(comFun(item.CID, item));\\n        } else if (!is_download && tagFilter !== \\\"2\\\") {\\n            chapterTeam.push({\\n                title: loadingTeam.includes(item.CID) ? \\\"‘‘\\\" + item.title + \\\"’’\\\" : item.title,\\n                url: $(\\\"#noLoading#\\\").lazyRule(clickDownload, item, info, MY_ID, item.CID),\\n                extra: {\\n                    id: MY_ID + \\\"#\\\" + item.CID\\n                },\\n                col_type: def_DoVi_Style\\n            });\\n        }\\n    }\\n}\\n\\nfunction clickChoose(title, MY_ID, i) {\\n    let isStart = getMyVar(MY_ID + \\\":isStart\\\");\\n    if (isStart === \\\"1\\\") return \\\"toast://正在下载...\\\";\\n    let batchTeam = JSON.parse(getMyVar(MY_ID + \\\":batchTeam\\\", \\\"[]\\\") || \\\"[]\\\");\\n    let ElementIndex = batchTeam.indexOf(i);\\n    if (ElementIndex > -1) {\\n        updateItem({\\n            title: title,\\n            extra: {\\n                id: MY_ID + \\\"#\\\" + i\\n            }\\n        });\\n        batchTeam.splice(ElementIndex, 1);\\n    } else {\\n        updateItem({\\n            title: \\\"‘‘\\\" + title + \\\"’’\\\",\\n            extra: {\\n                id: MY_ID + \\\"#\\\" + i\\n            }\\n        });\\n        batchTeam.push(i);\\n    }\\n    putMyVar(MY_ID + \\\":batchTeam\\\", JSON.stringify(batchTeam));\\n    return \\\"hiker://empty\\\";\\n}\\n\\nfunction batchView() {\\n    layout.push({\\n        title: \\\"单选下载\\\",\\n        pic_url: \\\"https://img.icons8.com/?id=PIicvF6ebzMn&size=48&format=gif&token=\\\",\\n        url: $(\\\"#noLoading#\\\").lazyRule((MY_ID) => {\\n            if (getMyVar(MY_ID + \\\":isStart\\\") === \\\"1\\\") return \\\"toast://正在批量下载\\\";\\n            putMyVar(MY_ID + \\\":viewMode\\\", \\\"0\\\");\\n            clearMyVar(MY_ID + \\\":batchTeam\\\");\\n            refreshPage(false);\\n            return \\\"hiker://empty\\\";\\n        }, MY_ID),\\n        col_type: \\\"icon_small_4\\\"\\n    });\\n    let start = Config.viewPageSize * Math.max(pageNum - 1, 0);\\n    let end = start + chapterList.length;\\n    layout.push({\\n        title: \\\"选择全部\\\",\\n        pic_url: \\\"https://img.icons8.com/?format=gif&id=1HVcHLoNzrit&token=\\\",\\n        url: $(\\\"#noLoading#\\\").lazyRule((start, end, MY_ID) => {\\n            if (getMyVar(MY_ID + \\\":isStart\\\") === \\\"1\\\") return \\\"toast://正在下载哦~\\\";\\n            const Tool = $.require(\\\"hiker://page/Tool.js\\\");\\n            let chooseTeam = Tool.range(start, end);\\n            let batchTeam = JSON.parse(getMyVar(MY_ID + \\\":batchTeam\\\", \\\"[]\\\") || \\\"[]\\\");\\n            batchTeam = Array.from(new Set(batchTeam.concat(chooseTeam)));\\n            let completed = JSON.parse(getMyVar(MY_ID + \\\":completed\\\", \\\"[]\\\") || \\\"[]\\\");\\n            batchTeam = batchTeam.filter((i) => !completed.includes(i));\\n            putMyVar(MY_ID + \\\":batchTeam\\\", JSON.stringify(batchTeam));\\n            refreshPage(false);\\n            return \\\"hiker://empty\\\"\\n        }, start, end, MY_ID),\\n        col_type: \\\"icon_small_4\\\"\\n    });\\n    layout.push({\\n        title: \\\"取消全部\\\",\\n        pic_url: \\\"https://img.icons8.com/?format=gif&id=HzEjPpI3NL8D&token=\\\",\\n        url: $(\\\"#noLoading#\\\").lazyRule((start, end, MY_ID) => {\\n            if (getMyVar(MY_ID + \\\":isStart\\\") === \\\"1\\\") return \\\"toast://正在下载哦~\\\";\\n            const Tool = $.require(\\\"hiker://page/Tool.js\\\");\\n            let chooseTeam = new Set(Tool.range(start, end));\\n            let batchTeam = JSON.parse(getMyVar(MY_ID + \\\":batchTeam\\\", \\\"[]\\\") || \\\"[]\\\");\\n            batchTeam = batchTeam.filter(x => !chooseTeam.has(x));\\n            putMyVar(MY_ID + \\\":batchTeam\\\", JSON.stringify(batchTeam));\\n            refreshPage(false);\\n            return \\\"hiker://empty\\\"\\n        }, start, end, MY_ID),\\n        col_type: \\\"icon_small_4\\\"\\n    });\\n    layout.push({\\n        title: \\\"确认选中\\\",\\n        pic_url: \\\"https://img.icons8.com/?format=gif&id=tMrvtc6T9hVb&token=\\\",\\n        url: $(\\\"#noLoading#\\\").lazyRule((MY_ID) => {\\n            if (getMyVar(MY_ID + \\\":isStart\\\", \\\"-1\\\") !== \\\"-1\\\") {\\n                return \\\"toast://正在下载哦~\\\";\\n            }\\n            let batchTeam = JSON.parse(getMyVar(MY_ID + \\\":batchTeam\\\", \\\"[]\\\") || \\\"[]\\\");\\n            return batchTeam.length === 0 ? \\\"toast://你还什么都没有选\\\" : \\\"hiker://page/Batch.view#noRefresh##noHistory##noRecordHistory#\\\";\\n        }, MY_ID),\\n        extra: {\\n            newWindow: true,\\n            windowId: MY_ID + \\\"//批量下载\\\",\\n            MY_ID: MY_ID,\\n            chapterList: backupChapterList,\\n            info: info\\n        },\\n        col_type: \\\"icon_small_4\\\"\\n    });\\n    setType();\\n    layout.push({\\n        col_type: \\\"line_blank\\\"\\n    });\\n    let batchTeam = JSON.parse(getMyVar(MY_ID + \\\":batchTeam\\\", \\\"[]\\\") || \\\"[]\\\");\\n    let completed = [];\\n    for (let i = 0, item = chapterList[0]; i < chapterList.length; item = chapterList[++i]) {\\n        let is_download = record.includes(item.title);\\n\\n        if (is_download) {\\n            completed.push(item.CID);\\n            if(tagFilter !== \\\"1\\\"){\\n                chapterTeam.push(comFun(item.CID, item));\\n            }\\n        } else if (!is_download && tagFilter !== \\\"2\\\") {\\n            chapterTeam.push({\\n                title: batchTeam.includes(item.CID) ? \\\"‘‘\\\" + item.title + \\\"’’\\\" : item.title,\\n                url: $(\\\"#noLoading#\\\").lazyRule(clickChoose, item.title, MY_ID, item.CID),\\n                extra: {\\n                    id: MY_ID + \\\"#\\\" + item.CID\\n                },\\n                col_type: def_DoVi_Style\\n            });\\n        }\\n    }\\n    putMyVar(MY_ID + \\\":completed\\\", JSON.stringify(completed));\\n}\\nswitch (viewMode) {\\n    case \\\"0\\\":\\n        singleView();\\n        break;\\n    case \\\"1\\\":\\n        batchView();\\n        break;\\n}\\nif (isReverse === \\\"1\\\") {\\n    chapterTeam.reverse();\\n}\\nlayout.push.apply(layout, chapterTeam);\\nsetResult(layout);\"},{\"col_type\":\"movie_3\",\"name\":\"#下载主程序\",\"path\":\"mainDownload\",\"rule\":\"const File = $.require(\\\"hiker://page/File.js\\\");\\nconst Config = $.require(\\\"hiker://page/Config.json\\\");\\nconst Tool = $.require(\\\"hiker://page/Tool.js\\\");\\n\\n$.exports.novel = function novel(item, info, order, MY_ID, interrupt) {\\n    let mainPath = Config.novelPath + \\\"/\\\" + info.ruleName + \\\"/\\\" + Tool.textShield(info.bookName) + \\\"/\\\";\\n    let chapterPath = mainPath + order + \\\"$A$\\\" + Tool.textShield(item.title) + \\\".txt\\\";\\n    let content = \\\"\\\";\\n    if (interrupt && getMyVar(MY_ID + \\\":status\\\", \\\"\\\") === \\\"1\\\") {\\n        return -1;\\n    }\\n    try {\\n        let getContent = new Function(\\\"input\\\", \\\"url\\\", \\\"return \\\" + info.parseCode);\\n        content = getContent(item.url, item.url) || \\\"\\\";\\n    } catch (e) {\\n        e.message = \\\"<小说正文解析错误> \\\" + e.message;\\n        throw e;\\n    }\\n    if (!content) {\\n        toast(\\\"小说为空\\\");\\n        throw new Error(\\\"<小说正文解析错误：正文返回为空>\\\");\\n    }\\n    if (info.bookTopPic) {\\n        try {\\n            let bookTopPic = Tool.hikerPic(info.bookTopPic);\\n            Tool.picDownload(bookTopPic[0], mainPath + info.bookName + \\\".jpg\\\", bookTopPic[1], info.decode);\\n\\n        } catch (e) {\\n            log(\\\"<封面下载错误> \\\" + e.message);\\n        }\\n    }\\n    File.fileWrite(chapterPath, content.replace(/<script>.*?<\\\\/script>/gmi, \\\"\\\").trimRight());\\n    //File.renameFile(chapterPath, order + \\\"$A$\\\" + item.title + \\\".txt\\\");\\n}\\n\\n$.exports.comic = function comic(item, info, order, MY_ID, interrupt) {\\n    let mainPath = Config.comicPath + \\\"/\\\" + info.ruleName + \\\"/\\\" + Tool.textShield(info.bookName) + \\\"/\\\";\\n    let chapterPath = mainPath + order + \\\"$B$\\\" + Tool.textShield(item.title) + \\\"/\\\";\\n    let picList = [];\\n    try {\\n        let getPicList = new Function(\\\"input\\\", \\\"url\\\", \\\"return\\\" + info.parseCode);\\n        picList = getPicList(item.url, item.url);\\n        if (typeof picList === \\\"string\\\") {\\n            picList = picList.replace(\\\"pics://\\\", \\\"\\\").split(\\\"&&\\\");\\n        }\\n    } catch (e) {\\n        e.message = \\\"<漫画图片解析错误> \\\" + e.message;\\n        throw e;\\n    }\\n    picList = picList.filter(p => p);\\n    const L = picList.length;\\n    if (L === 0) {\\n        toast(\\\"图片链接为空\\\");\\n        throw new Error(\\\"<漫画图片解析错误：图片链接返回为空>\\\");\\n    }\\n    if (info.bookTopPic) {\\n        try {\\n            let bookTopPic = Tool.hikerPic(info.bookTopPic);\\n            Tool.picDownload(bookTopPic[0], mainPath + info.bookName + \\\".jpg\\\", bookTopPic[1], info.decode);\\n        } catch (e) {\\n            log(\\\"<封面下载错误> \\\" + e.message);\\n        }\\n    }\\n\\n    let errorNum = 0;\\n    for (var i = 0; i < L; i++) {\\n        try {\\n            let pic = Tool.hikerPic(picList[i]);\\n            Tool.picDownload(pic[0], chapterPath + (i + 1) + \\\".jpg\\\", pic[1], info.decode);\\n            if (interrupt && getMyVar(MY_ID + \\\":status\\\", \\\"\\\") === \\\"1\\\") {\\n                return -1;\\n            }\\n            errorNum = 0;\\n        } catch (e) {\\n            if (errorNum < 10) {\\n                i--;\\n                errorNum++;\\n                continue;\\n            } else {\\n                throw e;\\n            }\\n        }\\n    }\\n\\n    File.renameFile(chapterPath, order + \\\"$A$\\\" + Tool.textShield(item.title));\\n}\\n\"},{\"col_type\":\"movie_3\",\"name\":\"#批量下载统计\",\"path\":\"BatchStatistics.js\",\"rule\":\"const Tool = $.require(\\\"hiker://page/Tool.js\\\");\\nconst Config = $.require(\\\"hiker://page/Config.json\\\");\\n\\n$.exports.a = function(chapterTeam, info, MY_ID) {\\n    if (chapterTeam.length === 0) {\\n        return \\\"toast://空的下载队列\\\";\\n    }\\n\\n    var count = 0;\\n    var taskCount = chapterTeam.length;\\n    var successCID = [];\\n    var failName = [];\\n    var logCount = 1;\\n    var taskTeam = chapterTeam.map(chapterItem => ({\\n        func: task,\\n        id: chapterItem.title,\\n        param: {\\n            chapterItem: chapterItem,\\n            info: info,\\n            MY_ID: MY_ID\\n        }\\n    }));\\n    let logNum = Config.logNum;\\n\\n\\n    function putLog(text) {\\n        log(text);\\n        if (logCount >= logNum) {\\n            deleteItem(MY_ID + \\\"#log#\\\" + (logCount - 10));\\n        }\\n        addItemAfter(MY_ID + \\\"||日志\\\", {\\n            url: \\\"hiker://empty\\\",\\n            title: \\\"$>\\\" + text,\\n            col_type: \\\"text_1\\\",\\n            extra: {\\n                lineVisible: false,\\n                id: MY_ID + \\\"#log#\\\" + logCount\\n            }\\n        });\\n        logCount++;\\n    }\\n\\n    function task(taskParam) {\\n        let result = $.require(\\\"hiker://page/Batch.exe.js\\\")(taskParam);\\n        return result;\\n    }\\n\\n    function listener(perch, id, error, CID) {\\n        count++;\\n        let isSuccess = false;\\n        if (error != null) {\\n            failName.push(id);\\n            putLog(\\\"[listener]下载失败：\\\" + id + \\\"<ERROR@ \\\" + error + \\\">\\\");\\n        } else if (CID >= 0) {\\n            successCID.push(CID);\\n            let ratio = (count / taskCount).toFixed(4);\\n            let stripCount = Math.ceil(ratio * 10);\\n            isSuccess = true;\\n            updateItem({\\n                title: \\\"下载进度：\\\" + successCID.length + \\\"/\\\" + taskCount,\\n                desc: \\\"““””\\\" + \\\"▇\\\".repeat(stripCount).fontcolor(\\\"#ffac2d\\\") + \\\"▇\\\".repeat(10 - stripCount).fontcolor(\\\"#e5e1e4\\\") + \\\" \\\" + String((ratio * 100)).slice(0, 5) + \\\"%\\\",\\n                extra: {\\n                    id: MY_ID + \\\"||下载进度\\\"\\n                }\\n            });\\n            putLog(\\\"[listener]已完成下载：\\\" + id);\\n        } else if (CID === -1) {\\n            failName.push(id);\\n            putLog(\\\"[listener]已停止：\\\" + id);\\n            count = taskCount;\\n        }\\n\\n        if (taskCount !== count) return;\\n        if (successCID.length === taskCount) {\\n            updateItem({\\n                desc: \\\"““””\\\" + \\\"▇\\\".repeat(10).fontcolor(\\\"#00ff00\\\") + \\\" 100%\\\",\\n                extra: {\\n                    id: MY_ID + \\\"||下载进度\\\"\\n                }\\n            });\\n        }\\n        let batchTeam = JSON.parse(getMyVar(MY_ID + \\\":batchTeam\\\", \\\"[]\\\") || \\\"[]\\\");\\n        let status = getMyVar(MY_ID + \\\":status\\\", \\\"0\\\");\\n        let failTeam = batchTeam.filter(v => !successCID.includes(v));\\n        putMyVar(MY_ID + \\\":batchTeam\\\", JSON.stringify(failTeam));\\n        if (failTeam.length > 0 && status !== \\\"1\\\") {\\n            putMyVar(MY_ID + \\\":status\\\", \\\"3\\\");\\n            putLog(\\\"下载失败:[\\\" + failName.join(\\\"]，[\\\") + \\\"]。\\\");\\n            updateItem({\\n                title: \\\"[处理失败]\\\",\\n                extra: {\\n                    id: MY_ID + \\\"||下载控制\\\"\\n                }\\n            });\\n        } else if (failTeam.length > 0 && status === \\\"1\\\") {\\n            putMyVar(MY_ID + \\\":status\\\", \\\"4\\\");\\n            putLog(\\\"[listener]#已停止所有任务，但已有进度不会消失#\\\");\\n            updateItem({\\n                title: \\\"[重新开始]\\\",\\n                extra: {\\n                    id: MY_ID + \\\"||下载控制\\\"\\n                }\\n            });\\n            return \\\"break\\\";\\n        } else {\\n            putMyVar(MY_ID + \\\":status\\\", \\\"2\\\");\\n            putLog(\\\"下载任务[\\\" + info.bookName + \\\"]已全部成功完成\\\");\\n            updateItem({\\n                title: \\\"[返回]\\\",\\n                extra: {\\n                    id: MY_ID + \\\"||下载控制\\\"\\n                }\\n            });\\n        }\\n        toast(\\\"下载任务[\\\" + info.bookName + \\\"]已完成\\\");\\n    }\\n    let taskTeamChunk = [];\\n    if (Config.threadNum > 0) {\\n        taskTeamChunk = Tool.chunk(taskTeam, Config.threadNum);\\n    } else {\\n        taskTeamChunk = [taskTeam];\\n    }\\n    for (let taskList of taskTeamChunk) {\\n        be(taskList, {\\n            func: listener\\n        });\\n        let status = getMyVar(MY_ID + \\\":status\\\", \\\"0\\\");\\n        if (status === \\\"1\\\") {\\n            let batchTeam = JSON.parse(getMyVar(MY_ID + \\\":batchTeam\\\", \\\"[]\\\") || \\\"[]\\\");\\n            //let status = getMyVar(MY_ID + \\\":status\\\", \\\"0\\\");\\n            let failTeam = batchTeam.filter(v => !successCID.includes(v));\\n            putMyVar(MY_ID + \\\":batchTeam\\\", JSON.stringify(failTeam));\\n            putMyVar(MY_ID + \\\":status\\\", \\\"4\\\");\\n            putLog(\\\"[listener]#已停止所有任务，但已有进度不会消失#\\\");\\n            updateItem({\\n                title: \\\"[重新开始]\\\",\\n                extra: {\\n                    id: MY_ID + \\\"||下载控制\\\"\\n                }\\n            });\\n            return \\\"hiker://empty\\\";\\n        }\\n\\n    }\\n\\n    return \\\"hiker://empty\\\";\\n};\\n\\n$.exports.b = function comic(chapterTeam, info, MY_ID) {\\n    if (chapterTeam.length === 0) {\\n        return \\\"toast://空的下载队列\\\";\\n    }\\n    const File = $.require(\\\"hiker://page/File.js\\\");\\n\\n    let logNum = Config.logNum;\\n    let logCount = 0;\\n\\n    function putLog(text) {\\n        log(text);\\n        if (logCount >= logNum) {\\n            deleteItem(MY_ID + \\\"#log#\\\" + (logCount - 10));\\n        }\\n        addItemAfter(MY_ID + \\\"||日志\\\", {\\n            url: \\\"hiker://empty\\\",\\n            title: \\\"$>\\\" + text,\\n            col_type: \\\"text_1\\\",\\n            extra: {\\n                lineVisible: false,\\n                id: MY_ID + \\\"#log#\\\" + logCount\\n            }\\n        });\\n        logCount++;\\n    }\\n\\n    function task(taskParam) {\\n        const Tool = $.require(\\\"hiker://page/Tool.js\\\");\\n        for (let i = 0; i < 10; i++) {\\n            try {\\n                let pic = Tool.hikerPic(taskParam.url);\\n                Tool.picDownload(pic[0], taskParam.chapterPath + (taskParam.i + 1) + \\\".jpg\\\", pic[1], taskParam.decode);\\n                if (getMyVar(taskParam.MY_ID + \\\":status\\\", \\\"\\\") === \\\"1\\\") {\\n                    return -1;\\n                }\\n                errorNum = 0;\\n                break;\\n            } catch (e) {\\n                if (i === 9) {\\n                    throw e;\\n                }\\n            }\\n        }\\n        return taskParam.CID;\\n    }\\n    let count = 0;\\n    let totalCount = 0;\\n    let successCID = [];\\n\\n    function listener(param, id, error, result) {\\n        try {\\n            totalCount++;\\n\\n            if (error != null) {\\n                putLog(\\\"[listener]下载失败：\\\" + id + \\\"<ERROR@ \\\" + error + \\\">\\\");\\n            } else if (result === -1) {\\n                putLog(\\\"[listener]已停止：\\\" + id);\\n                totalCount = param.pivCount;\\n            } else {\\n                count++;\\n                let ratio = ((count / param.pivCount)).toFixed(4);\\n                let stripCount = Math.ceil(ratio * 10);\\n                if (param.pivCount === totalCount && totalCount === count) {\\n                    successCID.push(param.CID);\\n                }\\n                updateItem({\\n                    title: \\\"下载进度：\\\" + (successCID.length) + \\\"/\\\" + param.total,\\n                    desc: \\\"““””\\\" + \\\"▇\\\".repeat(stripCount).fontcolor(\\\"#ffac2d\\\") + \\\"▇\\\".repeat(10 - stripCount).fontcolor(\\\"#e5e1e4\\\") + \\\" \\\" + String((ratio * 100)).slice(0, 5) + \\\"%\\\",\\n                    extra: {\\n                        id: MY_ID + \\\"||下载进度\\\"\\n                    }\\n                });\\n                //putLog(\\\"[listener]已完成下载：\\\" + id);\\n            }\\n            if (totalCount !== param.pivCount) return;\\n            if (totalCount === count) {\\n                File.renameFile(param.chapterPath, param.CID + \\\"$A$\\\" + Tool.textShield(param.title));\\n            }\\n            totalCount = count = 0;\\n            return \\\"break\\\";\\n        } catch (e) {\\n            log(e.toString());\\n        }\\n    }\\n    let taskTeam = [];\\n    let mainPath = Config.comicPath + \\\"/\\\" + info.ruleName + \\\"/\\\" + Tool.textShield(info.bookName) + \\\"/\\\";\\n    if (info.bookTopPic) {\\n        try {\\n            let bookTopPic = Tool.hikerPic(info.bookTopPic);\\n            Tool.picDownload(bookTopPic[0], mainPath + info.bookName + \\\".jpg\\\", bookTopPic[1], info.decode);\\n        } catch (e) {\\n            log(\\\"<封面下载错误> \\\" + e.message);\\n        }\\n    }\\n\\n    for (let k = 0; k < chapterTeam.length; k++) {\\n        let item = chapterTeam[k];\\n        let order = k;\\n        let chapterPath = mainPath + item.CID + \\\"$B$\\\" + Tool.textShield(item.title) + \\\"/\\\";\\n        let picList = [];\\n        try {\\n            let getPicList = new Function(\\\"input\\\", \\\"url\\\", \\\"return\\\" + info.parseCode);\\n            picList = getPicList(item.url, item.url);\\n            if (typeof picList === \\\"string\\\") {\\n                picList = picList.replace(\\\"pics://\\\", \\\"\\\").split(\\\"&&\\\");\\n            }\\n        } catch (e) {\\n            putLog(\\\"<漫画图片解析错误> \\\" + e.message);\\n            continue;\\n        }\\n        if (picList.length === 0) {\\n            putLog(\\\"<漫画图片解析错误：图片链接返回为空>\\\");\\n            continue;\\n        }\\n        picList = picList.filter(p => p);\\n        var taskTeam = picList.map((url, i) => ({\\n            func: task,\\n            id: i,\\n            param: {\\n                url: url,\\n                i: i,\\n                chapterPath: chapterPath,\\n                MY_ID: MY_ID,\\n                decode: info.decode\\n            }\\n        }));\\n        be(taskTeam, {\\n            func: listener,\\n            param: {\\n                pivCount: picList.length,\\n                total: chapterTeam.length,\\n                order: order,\\n                CID: item.CID,\\n                title: item.title,\\n                chapterPath: chapterPath\\n            }\\n        });\\n        if (getMyVar(MY_ID + \\\":status\\\", \\\"\\\") === \\\"1\\\") {\\n            break;\\n        }\\n    }\\n\\n    let status = getMyVar(MY_ID + \\\":status\\\", \\\"0\\\");\\n    java.lang.Thread.sleep(40);\\n    //let batchTeam = JSON.parse(getMyVar(MY_ID + \\\":batchTeam\\\", \\\"[]\\\") || \\\"[]\\\");\\n    let failTeam = chapterTeam.filter(v => !successCID.includes(v.CID));\\n    let failName = failTeam.map(item => item.title);\\n    let batchTeam = failTeam.map(item => item.CID);\\n\\n    if (failTeam.length > 0 && status !== \\\"1\\\") {\\n        putMyVar(MY_ID + \\\":batchTeam\\\", JSON.stringify(batchTeam));\\n        putMyVar(MY_ID + \\\":status\\\", \\\"3\\\");\\n        putLog(\\\"下载失败:[\\\" + failName.join(\\\"]，[\\\") + \\\"]。\\\");\\n        updateItem({\\n            title: \\\"[处理失败]\\\",\\n            extra: {\\n                id: MY_ID + \\\"||下载控制\\\"\\n            }\\n        });\\n    } else if (failTeam.length > 0 && status === \\\"1\\\") {\\n        putMyVar(MY_ID + \\\":batchTeam\\\", JSON.stringify(batchTeam));\\n        putMyVar(MY_ID + \\\":status\\\", \\\"4\\\");\\n        putLog(\\\"[listener]#已停止所有任务，但已有进度不会消失#\\\");\\n        updateItem({\\n            title: \\\"[重新开始]\\\",\\n            extra: {\\n                id: MY_ID + \\\"||下载控制\\\"\\n            }\\n        });\\n    } else {\\n        putMyVar(MY_ID + \\\":status\\\", \\\"2\\\");\\n        putLog(\\\"下载任务[\\\" + info.bookName + \\\"]已全部成功完成\\\");\\n        updateItem({\\n            title: \\\"[返回]\\\",\\n            extra: {\\n                id: MY_ID + \\\"||下载控制\\\"\\n            }\\n        });\\n    }\\n    return \\\"hiker://empty\\\";\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"#批量下载主程序\",\"path\":\"Batch.exe.js\",\"rule\":\"const Mian = $.require(\\\"mainDownload\\\");\\nfunction comic(taskParam) {\\n    let {\\n        chapterItem,\\n        info,\\n        MY_ID,\\n    } = taskParam;\\n    return Mian.comic(chapterItem, info, chapterItem.CID, MY_ID, true)||chapterItem.CID;\\n}\\n\\nfunction novel(taskParam) {\\n    let {\\n        chapterItem,\\n        info,\\n        MY_ID,\\n    } = taskParam;\\n    return Mian.novel(chapterItem, info, chapterItem.CID,MY_ID, true)||chapterItem.CID;\\n    //File.renameFile(chapterPath, chapterItem.CID + \\\"$A$\\\" + chapterItem.title);\\n}\\nvar $exe = {\\n    comic: comic,\\n    novel: novel\\n};\\n$.exports = function(taskParam) {\\n    return $exe[taskParam.info.type](taskParam);\\n};\"},{\"col_type\":\"movie_3\",\"name\":\"#file工具\",\"path\":\"File.js\",\"rule\":\"const File = java.io.File;\\nconst {\\n    Files,\\n    Paths,\\n    StandardCopyOption,\\n    StandardOpenOption\\n} = java.nio.file;\\nconst javaString = java.lang.String;\\nlet javaScope = new JavaImporter(java.io, java.lang, java.lang.reflect, java.util.Vector);\\n\\nfunction deleteFiles(fileName) {\\n    let file = new File(fileName);\\n    if (!file.exists()) {\\n        //log(\\\"删除文件失败：\\\" + fileName + \\\"文件不存在\\\");\\n        return false;\\n    } else {\\n        if (file.isFile()) {\\n            return deleteFile(fileName);\\n        } else {\\n            return deleteDirectory(fileName);\\n        }\\n\\n    }\\n\\n}\\n/**\\n * 删除单个文件\\n * \\n * @param fileName\\n *            被删除文件的文件名\\n * @return 单个文件删除成功返回true,否则返回false\\n */\\nfunction deleteFile(fileName) {\\n    let file = new File(fileName);\\n    if (file.isFile() && file.exists()) {\\n        file.delete();\\n        //log(\\\"删除单个文件\\\" + fileName + \\\"成功！\\\");\\n        return true;\\n    } else {\\n        //log(\\\"删除单个文件\\\" + fileName + \\\"失败！\\\");\\n        return false;\\n    }\\n\\n}\\n/**\\n * 删除目录（文件夹）以及目录下的文件\\n * \\n * @param dir\\n *            被删除目录的文件路径\\n * @return 目录删除成功返回true,否则返回false\\n */\\nfunction deleteDirectory(dir) {\\n    // 如果dir不以文件分隔符结尾，自动添加文件分隔符\\n    if (!dir.endsWith(File.separator)) {\\n        dir = dir + File.separator;\\n    }\\n    let dirFile = new File(dir);\\n    // 如果dir对应的文件不存在，或者不是一个目录，则退出\\n    if (!dirFile.exists() || !dirFile.isDirectory()) {\\n        //log(\\\"删除目录失败\\\" + dir + \\\"目录不存在！\\\");\\n        return false;\\n    }\\n    let flag = true;\\n    // 删除文件夹下的所有文件(包括子目录)\\n    let files = dirFile.listFiles();\\n    for (let i = 0; i < files.length; i++) {\\n        // 删除子文件\\n        if (files[i].isFile()) {\\n            flag = deleteFile(files[i].getAbsolutePath());\\n            if (!flag) {\\n                break;\\n            }\\n        } else { // 删除子目录\\n            flag = deleteDirectory(files[i].getAbsolutePath());\\n            if (!flag) {\\n                break;\\n            }\\n        }\\n    }\\n    if (!flag) {\\n        //log(\\\"删除目录失败\\\");\\n        return false;\\n    }\\n    // 删除当前目录\\n    if (dirFile.delete()) {\\n        //log(\\\"删除目录\\\" + dir + \\\"成功！\\\");\\n        return true;\\n    } else {\\n        //log(\\\"删除目录\\\" + dir + \\\"失败！\\\");\\n        return false;\\n    }\\n}\\n\\n//copy单个文件\\nfunction copyFile(source, target, isCover) {\\n    let sourcePath = Paths.get(source);\\n    let targetPath = Paths.get(target);\\n    let isExist = Files.exists(targetPath);\\n    if (Files.isDirectory(sourcePath) || (isExist && !isCover) || (isExist && Files.isDirectory(targetPath))) {\\n        return false;\\n    }\\n    try {\\n        if (!isExist) {\\n            Files.createDirectories(targetPath.getParent());\\n        }\\n        if (isCover === true) {\\n            Files.copy(sourcePath, targetPath, StandardCopyOption.REPLACE_EXISTING, StandardCopyOption.COPY_ATTRIBUTES);\\n        } else {\\n            Files.copy(sourcePath, targetPath, StandardCopyOption.COPY_ATTRIBUTES);\\n        }\\n    } catch (e) {\\n        return false;\\n    }\\n}\\n\\nfunction getFileTime(path) {\\n    let file = new File(path);\\n    let lastModified = file.lastModified();\\n    let date = new Date(lastModified);\\n    return date.getTime();\\n}\\n\\nfunction getName(path) {\\n    return new File(path).getName() + \\\"\\\";\\n}\\n\\nfunction getFilePath(path, type, expand) {\\n    type = type || \\\"file\\\";\\n    if (![\\\"file\\\", \\\"dir\\\"].includes(type)) throw new Error(\\\"类型错误\\\");\\n    let fileType = type === \\\"file\\\" ? \\\"isFile\\\" : \\\"isDirectory\\\";\\n    let file = new File(path);\\n    let array = file.listFiles() || [];\\n    let pathList = [];\\n    for (let i = 0; i < array.length; i++) {\\n        if (array[i][fileType]()) {\\n            pathList.push({\\n                name: array[i].getName() + \\\"\\\",\\n                path: array[i].getPath() + \\\"\\\",\\n                lastModified: Number(array[i].lastModified()),\\n            });\\n        }\\n    }\\n    if (expand) {\\n        pathList = pathList.filter(it => it.name.endsWith(expand));\\n    }\\n    return pathList;\\n}\\n\\nfunction getFiles(path, type, expand) {\\n    let types = {\\n        \\\"file\\\": \\\"isFile\\\",\\n        \\\"dir\\\": \\\"isDirectory\\\"\\n    };\\n    let fileType = types[type];\\n    let file = new File(path);\\n    let array = file.listFiles() || [];\\n    let fileList = [];\\n    for (let i = 0; i < array.length; i++) {\\n        let file = array[i];\\n        if ((!fileType || file[fileType]()) && (!expand || file.getName().endsWith(expand))) {\\n            fileList.push(file);\\n        }\\n    }\\n    return fileList;\\n}\\n\\nfunction renameFile(fromPath, name) {\\n    let fromFile = new File(fromPath);\\n    let toFile = new File(fromFile.getParent() + \\\"/\\\" + name);\\n    try {\\n        if (!fromFile.exists()) {\\n            return false;\\n        }\\n        if (toFile.exists()) {\\n            if (!toFile.delete()) {\\n                return false;\\n            }\\n        }\\n        Files.move(fromFile.toPath(), toFile.toPath(), StandardCopyOption.REPLACE_EXISTING);\\n        return true;\\n    } catch (e) {\\n        log(e.toString());\\n        return false;\\n    }\\n}\\n\\nfunction moveFiles(fromPath, toPath) {\\n    let fromFile = new File(fromPath);\\n    let toFile = new File(toPath);\\n    try {\\n        if (!fromFile.exists()) {\\n            return false;\\n        }\\n        if (toFile.exists()) {\\n            if (!deleteFiles(toPath)) {\\n                return false;\\n            }\\n        }\\n        Files.move(fromFile.toPath(), toFile.toPath(), StandardCopyOption.REPLACE_EXISTING);\\n        return true;\\n    } catch (e) {\\n        log(e.toString());\\n        return false;\\n    }\\n}\\n\\nfunction fileWrite(path, content) {\\n    writeFile(\\\"file://\\\" + path, content)\\n}\\n\\nfunction fileWriteAppend(path, content) {\\n    let file = new File(path);\\n    let paths = file.toPath();\\n    if (file.exists()) {\\n        Files.write(paths, new javaString(content).getBytes(), StandardOpenOption.APPEND);\\n    } else {\\n        writeFile(\\\"file://\\\" + path, content);\\n    }\\n}\\n\\nfunction getTotalSizeOfFilesInDir(file) {\\n    if (file.isFile()) {\\n        return file.length();\\n    }\\n    let children = file.listFiles();\\n    let total = 0;\\n    if (children != null) {\\n        for (let child of children) {\\n            total += getTotalSizeOfFilesInDir(child);\\n        }\\n    }\\n    return total;\\n}\\n\\nfunction getFileSize(filePath) {\\n    //Byte\\n    let size = getTotalSizeOfFilesInDir(new File(filePath));\\n    if (size < 0) {\\n        return null;\\n    }\\n    let unitForm = [\\\"Byte\\\", \\\"KB\\\", \\\"MB\\\", \\\"GB\\\", \\\"TB\\\"];\\n    for (let i = 0, len = unitForm.length; i < len; i++) {\\n        if (size > 1024) {\\n            size /= 1024;\\n            continue;\\n        } else {\\n            return size.toFixed(2).replace(/(\\\\.00)$/, \\\"\\\") + unitForm[i];\\n        }\\n    }\\n    return \\\"ERROR:数值过大\\\";\\n}\\n//完整合并\\n/*\\nfunction fileCombine(filesInput, fileOut, extension, intercept) {\\n    with(javaScope) {\\n        const TMP_BUFFER_SIZE = 0x30000;\\n        const BUFFER_SIZE = 0x300000;\\n        //合并临时文件\\n        let inputFile = new File(filesInput);\\n        let tmpFile = new File(fileOut + \\\".tmp\\\");\\n        let tos = new BufferedOutputStream(new FileOutputStream(tmpFile));\\n        let inputFiles = inputFile.listFiles();\\n        let tbys = Array.newInstance(Byte.TYPE, TMP_BUFFER_SIZE);\\n        for (let file of inputFiles) {\\n            if (file.getName().endsWith(extension)) {\\n                let is = new FileInputStream(file);\\n                let len = 0;\\n                while ((len = is.read(tbys)) != -1) {\\n                    tos.write(tbys, 0, len);\\n                }\\n                is.close();\\n            }\\n        }\\n        tos.close();\\n        //规则替换规则;\\n        let outFile = new File(fileOut);\\n        if (typeof intercept === \\\"function\\\") {\\n            let tis = new FileInputStream(tmpFile);\\n            let os = new BufferedOutputStream(new FileOutputStream(outFile));\\n            let len = 0;\\n            let bys = Array.newInstance(Byte.TYPE, BUFFER_SIZE);\\n            while ((len = tis.read(bys)) != -1) {\\n                let nbys = intercept(new String(bys,0,len));\\n                os.write(nbys, 0, nbys.length);\\n            }\\n            tmpFile.delete();\\n            tis.close();\\n            os.close();\\n        } else {\\n            if (outFile.exists()) {\\n                outFile.delete();\\n            }\\n            tmpFile.renameTo(outFile);\\n        }\\n    }\\n}*/\\n//残\\nfunction fileRule(filesInput, fileOut, intercept) {\\n    with(javaScope) {\\n        const BUFFER_SIZE = 0x300000;\\n        let tmpFile = new File(filesInput);\\n        if (!(tmpFile.exists() && tmpFile.isFile())) {\\n            return false;\\n        }\\n        let outFile = new File(fileOut);\\n\\n        let tis = new FileInputStream(tmpFile);\\n        let os = new BufferedOutputStream(new FileOutputStream(outFile));\\n        let len = 0;\\n        let bys = Array.newInstance(Byte.TYPE, BUFFER_SIZE);\\n        while ((len = tis.read(bys)) != -1) {\\n            let nbys = intercept(new String(bys, 0, len));\\n            os.write(nbys, 0, nbys.length);\\n        }\\n        tmpFile.delete();\\n        tis.close();\\n        os.close();\\n        return true;\\n    }\\n}\\n\\nfunction readFile(path) {\\n    try {\\n        let paths = Paths.get(path);\\n        if (!Files.exists(paths)) return \\\"\\\";\\n        return String(new javaString(Files.readAllBytes(paths)));\\n    } catch {\\n        return \\\"\\\";\\n    }\\n}\\n$.exports = {\\n    getFileTime: (path) => getFileTime(path),\\n    getFilePath: (path, type, expand) => getFilePath(path, type, expand),\\n    deleteFiles: (path) => deleteFiles(path),\\n    renameFile: (path, name) => renameFile(path, name),\\n    moveFiles: (fromPath, toPath) => moveFiles(fromPath, toPath),\\n    fileWrite: (path, content) => fileWrite(path, content),\\n    fileWriteAppend: (path, content) => fileWriteAppend(path, content),\\n    getName: (path) => getName(path),\\n    getFileSize: (filePath) => getFileSize(filePath),\\n    fileRule: (filesInput, fileOut, intercept) => fileRule(filesInput, fileOut, intercept),\\n    copyFile: (source, target, isCover) => copyFile(source, target, isCover),\\n    readFile: (path) => readFile(path),\\n    getFiles: (path, type, expand) => getFiles(path, type, expand),\\n    getTotalSizeOfFilesInDir:(file)=>getTotalSizeOfFilesInDir(file)\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"#通用\",\"path\":\"Tool.js\",\"rule\":\"const v = {\\n    split(text, target, count) {\\n        count = count === undefined ? 1 : count;\\n        let array = [text];\\n        for (let i = 0; i < count; i++) {\\n            text = array[i];\\n            let index = text.indexOf(target);\\n            if (index === -1) {\\n                break;\\n            }\\n            array[i] = text.slice(0, index);\\n            array[i + 1] = text.slice(index + target.length);\\n        }\\n        return array;\\n    },\\n    chunk(arr, size) {\\n        var result = [];\\n        for (var i = 0, len = arr.length; i < len; i += size) {\\n            result.push(arr.slice(i, i + size));\\n        }\\n        return result;\\n    },\\n    hikerPic(url) {\\n        var headers = {};\\n        let urls = url.split(\\\"@\\\");\\n        let picUrl = urls.shift();\\n        let length = urls.length;\\n        for (let i = 0; i < length; i++) {\\n            let [key, value] = v.split(urls[i], \\\"=\\\");\\n            if (key === \\\"headers\\\") {\\n                try {\\n                    Object.assign(headers, JSON.parse(value));\\n                } catch (e) {\\n                    log(e.toString());\\n                }\\n            } else if (key.includes(\\\".\\\") || key.includes(\\\"?\\\")) {\\n                picUrl += \\\"@\\\" + key + (value ? \\\"=\\\" + value : \\\"\\\");\\n            } else if (key !== \\\"js\\\") {\\n                headers[key] = value;\\n            }\\n        }\\n        return [picUrl, headers];\\n    },\\n    range(start, end) {\\n        return Array(end - start).fill(0).map((el, i) => start + i);\\n    },\\n    picDownload(url, path, headers, deciphe) {\\n        if (typeof deciphe === \\\"string\\\" && deciphe.length > 0) {\\n            let instream;\\n            let outstream;\\n            let file;\\n            try {\\n                file = new java.io.File(path);\\n                if (file.exists()) {\\n                    return;\\n                }\\n                let dir = file.getParentFile();\\n                if (dir != null && !dir.exists()) {\\n                    dir.mkdirs();\\n                }\\n                instream = fetch(url, {\\n                    headers: headers,\\n                    inputStream: true\\n                });\\n\\n                outstream = new java.io.FileOutputStream(path);\\n                let t = $.hiker.input,\\n                    c = $.hiker.url;\\n                $.hiker.input = instream;\\n                $.hiker.url = url;\\n                let picin = (new Function(\\\"return \\\" + deciphe))();\\n                $.hiker.input = t;\\n                $.hiker.url = c;\\n                let buf = java.lang.reflect.Array.newInstance(java.lang.Byte.TYPE, 1024);\\n                let len;\\n                while ((len = picin.read(buf)) != -1) {\\n                    outstream.write(buf, 0, len);\\n                }\\n                closeMe(instream);\\n                closeMe(outstream);\\n            } catch (e) {\\n                closeMe(instream);\\n                closeMe(outstream);\\n                if (file instanceof java.io.File && file.exists()) {\\n                    file.delete();\\n                }\\n                log(\\\"<解密下载Error>\\\" + e.toString())\\n                throw e;\\n            } finally {\\n                closeMe(instream);\\n                closeMe(outstream);\\n            }\\n\\n        } else {\\n            requireDownload(url, path, headers);\\n        }\\n    },\\n    textShield(text) {\\n        let e = /#|:|&|\\\\||\\\\^|@|\\\\<|\\\\>|%|\\\\/|\\\\?/g;\\n        return text.replace(e, \\\"_\\\");\\n    }\\n    \\n}\\n\\n$.exports = v;\"},{\"col_type\":\"movie_3\",\"name\":\"#Config\",\"path\":\"Config.json\",\"rule\":\"js:\\nconst File = $.require(\\\"hiker://page/File.js?rule=某聚合\\\");\\n\\nlet localConfig = {};\\n\\ntry {\\n    localConfig = JSON.parse(File.readFile(getPath(\\\"hiker://files/rules/files/某聚合/config.json\\\").slice(7)));\\n} catch (e) {\\n    deleteFile(\\\"config.json\\\");\\n}\\nconst Config = Object.assign({\\n    homePath: getPath(\\\"hiker://files/ComicsBookShelf\\\").slice(7),\\n    logNum: 10,\\n    threadNum: 0,\\n    def_isPaginate: \\\"1\\\", //1默认开启分页，0默认关闭\\n    viewPageSize: 200,\\n    def_Pic: \\\"hiker://images/home_pic4\\\",\\n    def_Lord_Type: \\\"comic\\\",\\n    def_View_Style: \\\"text_1\\\",\\n    def_DoVi_Style: \\\"text_2\\\",\\n    def_DoVi_Type: \\\"1\\\", //0全部, 1未完成，2已完成\\n    def_isComicCompatible: \\\"0\\\"\\n}, localConfig);\\nconst PATHS = {\\n    comicPath: \\\"/某漫画/\\\",\\n    contentsCache: \\\"/目录缓存/\\\"\\n}\\n\\n\\nObject.keys(PATHS).forEach(key => Config[key] = Config.homePath + PATHS[key]);\\n$.exports = Config;\\n\"},{\"col_type\":\"movie_3\",\"name\":\"#批量下载器\",\"path\":\"Batch.view\",\"rule\":\"js:\\nlet {\\n    chapterList,\\n    info,\\n    MY_ID\\n} = MY_PARAMS;\\nsetPageTitle(\\\"下载器|\\\"+info.bookName);\\naddListener(\\\"onClose\\\", $.toString((MY_ID) => {\\n    clearMyVar(MY_ID + \\\":isStart\\\");\\n    clearMyVar(MY_ID + \\\":status\\\");\\n    clearMyVar(MY_ID + \\\":batchTeam\\\");\\n    refreshPage();\\n}, MY_ID));\\n\\nlet isStart = getMyVar(MY_ID + \\\":isStart\\\", \\\"0\\\");\\nlet status = getMyVar(MY_ID + \\\":status\\\", \\\"0\\\");\\nlet layout = [];\\n\\nlet batchTeam = JSON.parse(getMyVar(MY_ID + \\\":batchTeam\\\", \\\"[]\\\") || \\\"[]\\\");\\nif(typeof chapterList === \\\"string\\\"){\\n    chapterList = JSON.parse(request(\\\"file://\\\"+chapterList)||\\\"[]\\\");\\n}\\nlet chapterTeam = batchTeam.map(v => {\\n    let chapterItem = chapterList[v];\\n    chapterItem.CID = v;\\n    return chapterItem;\\n});\\nif (isStart === \\\"0\\\") {\\n    layout.push({\\n        title: \\\"点击这里开始下载[\\\" + chapterTeam.length + \\\"]\\\",\\n        url: $(\\\"#noLoading#\\\").lazyRule((chapterTeam, info, MY_ID) => {\\n            putMyVar(MY_ID + \\\":isStart\\\", \\\"1\\\");\\n            refreshPage(false);\\n            let download = $.require(\\\"hiker://page/BatchStatistics.js\\\");\\n            if(info.type===\\\"comic\\\"&&info.comicScheme===\\\"1\\\"){\\n                download=download.b;\\n            }else{\\n                download=download.a;\\n            }\\n            return download(chapterTeam, info, MY_ID) || \\\"toast://下载错误\\\";\\n        }, chapterTeam, info, MY_ID),\\n        col_type: \\\"text_center_1\\\",\\n        extra: {\\n            id: MY_ID + \\\"||开始下载\\\"\\n        }\\n    });\\n    layout.push({\\n        title: \\\"任务列表：\\\",\\n        col_type: \\\"rich_text\\\",\\n    });\\n    for (let item of chapterTeam) {\\n        layout.push({\\n            title: item.title,\\n            url: \\\"hiker://empty\\\",\\n            col_type: \\\"text_2\\\"\\n        });\\n    }\\n\\n} else {\\n    layout.push({\\n        title: \\\"下载进度:0/\\\"+chapterTeam.length,\\n        desc: \\\"““””▇▇▇▇▇▇▇▇▇▇\\\".fontcolor(\\\"#e5e1e4\\\")+\\\" 0%\\\",\\n        url: \\\"hiker://empty\\\",\\n        col_type: \\\"text_center_1\\\",\\n        extra: {\\n            id: MY_ID + \\\"||下载进度\\\",\\n            lineVisible: false\\n        }\\n    });\\n    layout.push({\\n        title: \\\"后台下载\\\",\\n        url: \\\"func://background\\\",\\n        col_type: \\\"text_2\\\"\\n    });\\n\\n    layout.push({\\n        title: [\\\"[取消下载]\\\", \\\"[正在停止...]\\\", \\\"[返回]\\\", \\\"[处理失败]\\\", \\\"[重新开始]\\\"][status],\\n        url: $(\\\"#noLoading#\\\").lazyRule((MY_ID) => {\\n            let status = getMyVar(MY_ID + \\\":status\\\", \\\"0\\\");\\n            if (status === \\\"0\\\") {\\n                putMyVar(MY_ID + \\\":status\\\", \\\"1\\\");\\n                updateItem({\\n                    title: \\\"[正在停止...]\\\",\\n                    extra: {\\n                        id: MY_ID + \\\"||下载控制\\\"\\n                    }\\n                });\\n                return \\\"toast://正在取消下载任务\\\";\\n            } else if (status === \\\"1\\\") {\\n                return \\\"toast://正在暂停...\\\";\\n            } else if (status === \\\"2\\\") {\\n                back();\\n                return \\\"toast://已退出下载器\\\";\\n            } else if ([\\\"3\\\", \\\"4\\\"].includes(status)) {\\n                clearMyVar(MY_ID + \\\":isStart\\\");\\n                clearMyVar(MY_ID + \\\":status\\\");\\n                clearMyVar(MY_ID + \\\":log\\\");\\n                refreshPage();\\n                return \\\"toast://重新点击下载\\\"\\n            }\\n        }, MY_ID),\\n        col_type: \\\"text_2\\\",\\n        extra: {\\n            id: MY_ID + \\\"||下载控制\\\"\\n        }\\n    });\\n    layout.push({\\n        col_type: \\\"line_blank\\\"\\n    });\\n    layout.push({\\n        title: \\\"<strong>下载日志</strong>\\\".big(),\\n        col_type: \\\"rich_text\\\",\\n        \\n    });\\n    layout.push({\\n        col_type: \\\"line\\\",\\n        extra: {\\n            id: MY_ID + \\\"||日志\\\"\\n        }\\n    });\\n    layout.push({\\n        title:\\\"““””$>\\\"+\\\"开始下载......\\\".fontcolor(\\\"#00ff00\\\"),\\n        url:\\\"hiker://empty\\\",\\n        col_type: \\\"text_1\\\",\\n        extra: {\\n            id: MY_ID + \\\"#log#0\\\",\\n            lineVisible:false\\n        }\\n    });\\n}\\n\\nsetResult(layout);\"},{\"col_type\":\"movie_3\",\"name\":\"#书架\",\"path\":\"Bookrack.view\",\"rule\":\"js:\\nconst File = $.require(\\\"File.js\\\");\\nconst rank = $.require(\\\"fileRank.js\\\");\\nconst Tool = $.require(\\\"Tool.js\\\");\\nconst Config = $.require(\\\"Config.json\\\");\\n\\n(function() {\\n    let type = MY_PARAMS.type || getParam(\\\"type\\\", \\\"\\\") || \\\"comic\\\";\\n    let ruleName = Tool.textShield(MY_PARAMS.ruleName || decodeURIComponent(getParam(\\\"ruleName\\\")));\\n    if (!ruleName) {\\n        toast(\\\"请传入规则名\\\");\\n        back(false);\\n    }\\n    if (![\\\"comic\\\", \\\"novel\\\"].includes(type)) {\\n        toast(\\\"请传入正确的type:comic novel\\\");\\n        back(false);\\n    }\\n    setPageTitle(ruleName + \\\"|本地书架\\\");\\n    let layout = [];\\n    let path = Config[type + \\\"Path\\\"] + ruleName;\\n    let col_type = getItem(\\\"bookrack:col_type\\\", \\\"movie_3_marquee\\\");\\n    let rankMethod = getItem(\\\"bookrack:rankMethod\\\", \\\"系统\\\");\\n    let rankIsReverse = getItem(\\\"bookrack:rankIsReverse\\\", \\\"\\\");\\n\\n    let colTypes = [\\\"movie_1\\\", \\\"movie_2\\\", \\\"movie_3_marquee\\\", \\\"movie_1_vertical_pic\\\", \\\"pic_2\\\", \\\"pic_3\\\", \\\"pic_3_square\\\", \\\"pic_2_card\\\"];\\n    \\n    let rankMethods = [\\\"系统\\\", \\\"大小\\\", \\\"名称\\\", \\\"时间\\\"];\\n    layout.push({\\n        title: \\\"🧩\\\",\\n        col_type: \\\"flex_button\\\",\\n        url: $(colTypes.map(v=>v===col_type?\\\"““\\\"+v+\\\"””\\\":v)).select((name) => {\\n            if(/““.*?””/.test(input)) return;\\n            setItem(\\\"bookrack:col_type\\\", input);\\n            refreshPage();\\n        })\\n    });\\n    for (let name of rankMethods) {\\n        let a = rankMethod === name;\\n        let titlea = a ? \\\"‘‘\\\" + name + \\\"’’\\\" : name;\\n        let titleb = \\\"\\\";\\n        if (a) {\\n            titleb = !rankIsReverse ? \\\"↓\\\" : \\\"↑\\\";\\n        } else {\\n            titleb = \\\"↕\\\";\\n        }\\n        layout.push({\\n            title: titlea + titleb,\\n            col_type: \\\"flex_button\\\",\\n            url: $(\\\"#noLoading#\\\").lazyRule((name) => {\\n                let rankMethod = getItem(\\\"bookrack:rankMethod\\\", \\\"系统\\\");\\n                let rankIsReverse = getItem(\\\"bookrack:rankIsReverse\\\", \\\"\\\");\\n\\n                if (rankMethod === name) {\\n                    if (rankIsReverse) {\\n                        rankIsReverse = \\\"\\\";\\n                    } else {\\n                        rankIsReverse = \\\"1\\\";\\n                    }\\n\\n                    setItem(\\\"bookrack:rankIsReverse\\\", rankIsReverse);\\n                } else {\\n                    setItem(\\\"bookrack:rankIsReverse\\\", \\\"\\\");\\n                    setItem(\\\"bookrack:rankMethod\\\", name);\\n\\n                }\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, name)\\n        });\\n    }\\n    let rankMethodMap = {\\n        \\\"系统\\\": \\\"\\\",\\n        \\\"大小\\\": \\\"size\\\",\\n        \\\"名称\\\": \\\"name\\\",\\n        \\\"时间\\\": \\\"time\\\"\\n    };\\n    let bookList = [];\\n    let list = rank(File.getFiles(path, \\\"dir\\\"), rankMethodMap[rankMethod]);\\n    if (list.length === 0) {\\n        bookList.push({\\n            title: \\\"““””\\\" + \\\"啥都没有耶\\\".big(),\\n            url: \\\"hiker://empty\\\",\\n            col_type: \\\"text_center_1\\\",\\n            extra: {\\n                lineVisible: false\\n            }\\n        });\\n\\n    }\\n    let pageUrl = type === \\\"novel\\\" ? \\\"hiker://page/NovelBrowser.view\\\" : \\\"hiker://page/ComicBrowser.view\\\";\\n    for (let item of list) {\\n        let pic = fileExist(\\\"file://\\\" + item.getPath() + \\\"/\\\" + item.getName() + \\\".jpg\\\") ? item.getPath() + \\\"/\\\" + item.getName() + \\\".jpg\\\" : Config.def_Pic;\\n        bookList.push({\\n            title: item.getName(),\\n            pic_url: pic,\\n            url: pageUrl + \\\"?rule=\\\" + MY_RULE.title,\\n            col_type:col_type,\\n            extra: {\\n                longClick: [{\\n                    title: \\\"删除\\\",\\n                    js: $.toString((path) => {\\n                        return $.require(\\\"longPress.js\\\").deleteFileForBook(path);\\n                    }, item.getPath())\\n                }],\\n                id: item.getPath(),\\n                path: item.getPath(),\\n                name: item.getName()\\n            }\\n        });\\n    }\\n    if (rankIsReverse) {\\n        bookList.reverse();\\n    }\\n\\n    setResult(layout.concat(bookList));\\n})();\"},{\"col_type\":\"movie_3\",\"name\":\"#文件排序\",\"path\":\"fileRank.js\",\"rule\":\"js:\\nconst File = $.require(\\\"File.js\\\");\\nlet chnNumChar = {\\n    零: 0,\\n    一: 1,\\n    二: 2,\\n    三: 3,\\n    四: 4,\\n    五: 5,\\n    六: 6,\\n    七: 7,\\n    八: 8,\\n    九: 9\\n};\\n\\nlet chnNameValue = {\\n    十: {\\n        value: 10,\\n        secUnit: false\\n    },\\n    百: {\\n        value: 100,\\n        secUnit: false\\n    },\\n    千: {\\n        value: 1000,\\n        secUnit: false\\n    },\\n    万: {\\n        value: 10000,\\n        secUnit: true\\n    },\\n    亿: {\\n        value: 100000000,\\n        secUnit: true\\n    }\\n}\\n\\nfunction ChineseToNumber(chnStr) {\\n    let rtn = 0;\\n    let section = 0;\\n    let number = 0;\\n    let secUnit = false;\\n    let str = chnStr.split('');\\n\\n    for (let i = 0; i < str.length; i++) {\\n        let num = chnNumChar[str[i]];\\n        if (typeof num !== 'undefined') {\\n            number = num;\\n            if (i === str.length - 1) {\\n                section += number;\\n            }\\n        } else {\\n            let unit = chnNameValue[str[i]].value;\\n            secUnit = chnNameValue[str[i]].secUnit;\\n            if (secUnit) {\\n                section = (section + number) * unit;\\n                rtn += section;\\n                section = 0;\\n            } else {\\n                section += (number * unit);\\n            }\\n            number = 0;\\n        }\\n    }\\n    return rtn + section;\\n}\\n\\nfunction nameCompare(a, b) {\\n    if (a == null || b == null)\\n        return a == null ? b == null ? 0 : -1 : 1;\\n\\n    a = a.replace(/([零一二三四五六七八九十百千万亿])/g, function(match, p1, p2, p3, offset, string) {\\n        // p1 is nondigits, p2 digits, and p3 non-alphanumerics\\n        return v.ChineseToNumber(p1);\\n    })\\n    b = b.replace(/([零一二三四五六七八九十百千万亿])/g, function(match, p1, p2, p3, offset, string) {\\n        // p1 is nondigits, p2 digits, and p3 non-alphanumerics\\n        return v.ChineseToNumber(p1);\\n    })\\n\\n    let NUMBERS = java.util.regex.Pattern.compile(\\\"(?<=\\\\\\\\D)(?=\\\\\\\\d)|(?<=\\\\\\\\d)(?=\\\\\\\\D)\\\");\\n    let split1 = NUMBERS.split(new java.lang.String(a));\\n    let split2 = NUMBERS.split(new java.lang.String(b));\\n\\n    for (let i = 0; i < Math.min(split1.length, split2.length); i++) {\\n        let c1 = split1[i].charCodeAt(0);\\n        let c2 = split2[i].charCodeAt(0);\\n        let cmp = 0;\\n        let zeroCharCode = '0'.charCodeAt(0);\\n        let nineCharCode = '9'.charCodeAt(0);\\n\\n        if (c1 >= zeroCharCode && c1 <= nineCharCode && c2 >= zeroCharCode && c2 <= nineCharCode) {\\n            cmp = new java.math.BigInteger(split1[i]).compareTo(new java.math.BigInteger(split2[i]));\\n        }\\n\\n        if (cmp === 0) {\\n            let regex = /[a-zA-Z0-9]/\\n            let s1 = String(split1[i])\\n            let s2 = String(split2[i])\\n            if (regex.test(s1) || regex.test(s2)) {\\n                cmp = new java.lang.String(split1[i]).compareTo(new java.lang.String(split2[i]));\\n                // cmp = s1.localeCompare(s2, 'en')\\n            } else {\\n                cmp = s1.localeCompare(s2, 'zh')\\n            }\\n        }\\n\\n        if (cmp !== 0) {\\n            return cmp;\\n        }\\n    }\\n    let lengthCmp = split1.length - split2.length;\\n    // if (lengthCmp !== 0) lengthCmp = lengthCmp > 0 ? -1 : 1;\\n    return lengthCmp;\\n}\\n\\nfunction rank(list, m) {\\n    switch (m) {\\n        case \\\"type\\\":\\n            return list;\\n        case \\\"name\\\":\\n            return list.sort((a, b) => nameCompare(String(a.getName()), String(b.getName())));\\n        case \\\"size\\\":\\n            return list.sort((a, b) => File.getTotalSizeOfFilesInDir(a) - File.getTotalSizeOfFilesInDir(b));\\n        case \\\"time\\\":\\n            return list.sort((a, b) => a.lastModified() - b.lastModified());\\n        default:\\n            return list;\\n    }\\n\\n}\\n$.exports=rank;\"},{\"col_type\":\"text_1\",\"name\":\"#漫画阅读\",\"path\":\"ComicBrowser.view\",\"rule\":\"js:\\nif (getParam(\\\"hasParams\\\") === \\\"true\\\") {\\n    MY_PARAMS = {\\n        path: decodeURIComponent(getParam(\\\"path\\\")),\\n        name: decodeURIComponent(getParam(\\\"name\\\"))\\n    }\\n}\\nlet path = MY_PARAMS.path;\\nsetPageTitle(\\\"本地|\\\" + MY_PARAMS.name)\\nconst File = $.require(\\\"hiker://page/File.js\\\");\\nconst Tool = $.require(\\\"hiker://page/Tool.js\\\");\\nconst Config = $.require(\\\"hiker://page/Config.json\\\");\\n\\nvar layout = [];\\nlet mode = getMyVar(\\\".mode\\\", \\\"0\\\");\\nlet isReverse = getMyVar(\\\".isReverse\\\", \\\"0\\\");\\naddListener(\\\"onClose\\\", $.toString(() => {\\n    clearMyVar(\\\".mode\\\");\\n    clearMyVar(\\\".isReverse\\\");\\n}));\\nconst comicStatus = new Map([\\n    [\\\"A\\\", \\\"\\\"],\\n    [\\\"B\\\", \\\"‘‘[未完成]’’\\\"]\\n]);\\n\\nfunction getTitle(title) {\\n    let titles = Tool.split(title, \\\"$\\\", 2);\\n    return comicStatus.get(titles[1]) + titles[2] || title;\\n}\\nfunction getTitle2(title){\\n    let titles = Tool.split(title, \\\"$\\\", 2);\\n    return titles[2] || title;\\n}\\nlayout.push({\\n    title: \\\"删除整本\\\",\\n    url: $(\\\"确认删除整本漫画？\\\").confirm((path) => {\\n        const File = $.require(\\\"hiker://page/File.js\\\");\\n        if (File.deleteFiles(path)) {\\n            back();\\n            return \\\"toast://删除成功\\\";\\n        } else {\\n            return \\\"toast://删除失败\\\";\\n        }\\n    }, path),\\n    col_type: \\\"text_2\\\"\\n});\\nlayout.push({\\n    title: [\\\"看漫画\\\", \\\"删除章节\\\"][mode],\\n    url: $(\\\"#noLoading#\\\").lazyRule((mode) => {\\n        putMyVar(\\\".mode\\\", mode === \\\"0\\\" ? \\\"1\\\" : \\\"0\\\");\\n        refreshPage(true);\\n        return \\\"hiker://empty\\\"\\n    }, mode),\\n    col_type: \\\"text_2\\\"\\n});\\nlayout.push({\\n    col_type: \\\"line_blank\\\"\\n})\\nlet mhlist = File.getFilePath(path, \\\"dir\\\");\\nmhlist.sort((a, b) => {\\n    a = (a.name.match(/\\\\d+/) || [])[0] || 0;\\n    b = (b.name.match(/\\\\d+/) || [])[0] || 0;\\n    return a - b;\\n});\\n\\nlayout.push({\\n    title: \\\"““””\\\" + \\\"章节 \\\".big() + (\\\"共有:\\\" + mhlist.length + \\\"章\\\").small(),\\n    url: $(\\\"#noLoading#\\\").lazyRule((isReverse) => {\\n        putMyVar(\\\".isReverse\\\", isReverse === \\\"0\\\" ? \\\"1\\\" : \\\"0\\\");\\n        refreshPage(true);\\n        return \\\"hiker://empty\\\"\\n    }, isReverse),\\n    col_type: \\\"text_1\\\"\\n});\\nlet array = [];\\n\\nif (mode === \\\"0\\\") {\\n    if (Config.def_isComicCompatible === \\\"0\\\") {\\n        let lazy = $(\\\"#noLoading#\\\").lazyRule(() => {\\n            const File = $.require(\\\"hiker://page/File.js\\\");\\n            let filelist = File.getFilePath(input);\\n            let shorten = input.replace(getPath(\\\"hiker://files/\\\").slice(7),\\\"hiker://files/\\\");\\n            let piclist = filelist.map((item, i) => shorten + \\\"/\\\" + (i + 1) + \\\".jpg\\\");\\n            return \\\"pics://\\\" + piclist.join(\\\"&&\\\");\\n        });\\n        for (let item of mhlist) {\\n            let title = getTitle(item.name);\\n            array.push({\\n                title: title,\\n                url: item.path + lazy,\\n                col_type: Config.def_View_Style,\\n            });\\n        }\\n    } else {\\n        for (let item of mhlist) {\\n            let title = getTitle(item.name);\\n            array.push({\\n                title: title,\\n                url: \\\"hiker://page/comicCompatible.view#autoPage##readTheme#?path=\\\"+item.path,\\n                col_type: Config.def_View_Style,\\n                extra: {\\n                    path: item.path,\\n                    title: getTitle2(item.name)\\n                }\\n            });\\n        }\\n    }\\n\\n} else {\\n    for (let item of mhlist) {\\n        let name = getTitle2(item.name);\\n        array.push({\\n            title: name,\\n            url: $(\\\"确认删除[\\\" + name + \\\"]？\\\").confirm((path) => {\\n                const File = $.require(\\\"hiker://page/File.js\\\");\\n                if (File.deleteFiles(path)) {\\n                    refreshPage(true);\\n                    return \\\"toast://删除成功\\\";\\n                } else {\\n                    return \\\"toast://删除失败\\\";\\n                }\\n            }, item.path),\\n            col_type: Config.def_View_Style\\n        });\\n    }\\n}\\nif (isReverse === \\\"1\\\") {\\n    array.reverse();\\n}\\nlayout.push.apply(layout, array);\\nsetResult(layout);\"},{\"col_type\":\"movie_3\",\"name\":\"#主页面\",\"path\":\"Main.view\",\"rule\":\"js:\\nfunction main() {\\n    var layout = [];\\n    const File = $.require(\\\"hiker://page/File.js\\\");\\n    const Config = $.require(\\\"hiker://page/Config.json\\\");\\n    let type = getMyVar(\\\".type\\\", getItem(\\\"main:type\\\", Config.def_Lord_Type));\\n    let tgnum = getMyVar(\\\".tgnum\\\", \\\"0\\\");\\n    addListener(\\\"onClose\\\", $.toString((MY_ID) => {\\n        clearMyVar(\\\"searchKey\\\");\\n        clearMyVar(\\\".tgnum\\\");\\n    }));\\n    let tag = File.getFilePath(Config[type + \\\"Path\\\"], \\\"dir\\\");\\n    if (tag.length === 0) {\\n        layout.push({\\n            title: \\\"⚙️\\\",\\n            url: \\\"hiker://page/Setting/More.view#noRefresh##noRecordHistory##noHistory#?settingType=contents\\\",\\n            desc: Config.homePath,\\n            col_type: \\\"scroll_button\\\"\\n        });\\n        layout.push({\\n            title: '<h1 style=\\\"text-align: center;\\\">啥都没有耶</h1>',\\n            col_type: \\\"rich_text\\\"\\n        });\\n        return setResult(layout);\\n    }\\n    layout.push({\\n        url: '\\\"hiker://search?s=\\\"+input',\\n        desc: \\\"搜你想要的#\\\" + type + \\\"#......\\\",\\n        title: \\\"🔍\\\",\\n        col_type: \\\"input\\\",\\n        extra: {\\n            rules: $.toString((tag, type) => {\\n                let arr1 = [];\\n                for (let i = 0; i < tag.length; i++) {\\n                    arr1.push({\\n                        \\\"title\\\": tag[i].name,\\n                        \\\"search_url\\\": \\\"hiker://empty?isAll=1&searchTerms=**&type=\\\" + type,\\n                        \\\"searchFind\\\": \\\"js:$.require('hiker://page/Search.view?rule='+MY_RULE._title);\\\"\\n                    });\\n                }\\n\\n                return JSON.stringify(arr1);\\n            }, tag, type),\\n            defaultValue: getMyVar('searchKey', ''),\\n            onChange: \\\"putMyVar('searchKey',input)\\\"\\n        }\\n    });\\n    let col_type = getItem(\\\"bookrack:col_type\\\", \\\"movie_3_marquee\\\");\\n    let colTypes = [\\\"movie_2\\\", \\\"movie_3\\\", \\\"movie_3_marquee\\\", \\\"movie_1_vertical_pic\\\", \\\"pic_2_card\\\"];\\n    layout.push({\\n        title: \\\"🧩\\\",\\n        col_type: \\\"scroll_button\\\",\\n        url: $(colTypes.map(v => v === col_type ? \\\"““\\\" + v + \\\"””\\\" : v)).select((name) => {\\n            if (/““.*?””/.test(input)) return;\\n            setItem(\\\"bookrack:col_type\\\", input);\\n            refreshPage();\\n        })\\n    });\\n    layout.push({\\n        title: \\\"⚙️\\\",\\n        url: \\\"hiker://page/Setting/More.view#noRefresh##noRecordHistory##noHistory#?settingType=contents\\\",\\n        desc: Config.homePath,\\n        col_type: \\\"scroll_button\\\"\\n    });\\n    for (let i in tag) {\\n        let it = tag[i];\\n        if (tgnum === i) {\\n            layout.push({\\n                title: \\\"““\\\" + it.name + \\\"””\\\",\\n                col_type: \\\"scroll_button\\\",\\n                url: $([\\\"删除该目录\\\", \\\"打开书架\\\"], 1, \\\"选择操作\\\").select((it, type) => {\\n                    if (\\\"删除该目录\\\" === input) {\\n                        //return then([\\\"该操作不会删除小程序，但该小程序下载的所有漫画将被删除\\\"]);\\n                        return $(\\\"该操作不会删除小程序，但该小程序下载的所有 漫画/小说 将被删除\\\").confirm((path) => {\\n                            const File = $.require(\\\"hiker://page/File.js\\\");\\n                            if (File.deleteFiles(path)) {\\n                                clearMyVar(\\\".tgnum\\\");\\n                                refreshPage();\\n                                return \\\"toast://删除成功\\\";\\n                            } else {\\n                                return \\\"toast://删除失败\\\";\\n                            }\\n                        }, it.path);\\n                    } else {\\n                        return \\\"hiker://page/Bookrack.view?rule=某聚合&ruleName=\\\" + it.name + \\\"&type=\\\" + type;\\n                    }\\n                }, it, type)\\n            });\\n        } else {\\n            layout.push({\\n                title: it.name,\\n                col_type: \\\"scroll_button\\\",\\n                url: $(\\\"#noLoading#\\\").lazyRule(i => {\\n                    putMyVar(\\\".tgnum\\\", i);\\n                    refreshPage();\\n                    return \\\"hiker://empty\\\";\\n                }, i),\\n            });\\n        }\\n    }\\n    let path = tag[tgnum].path;\\n    let mhlist = File.getFilePath(path, \\\"dir\\\");\\n\\n    if (mhlist.length === 0) {\\n        layout.push({\\n            title: \\\"““””\\\" + \\\"啥都没有耶\\\".big(),\\n            url: \\\"hiker://empty\\\",\\n            col_type: \\\"text_center_1\\\",\\n            extra: {\\n                lineVisible: false\\n            }\\n        });\\n        return setResult(layout);\\n    }\\n\\n    let pageUrl = type === \\\"novel\\\" ? \\\"hiker://page/NovelBrowser.view\\\" : \\\"hiker://page/ComicBrowser.view\\\";\\n    for (let item of mhlist) {\\n        let pic = fileExist(\\\"file://\\\" + item.path + \\\"/\\\" + item.name + \\\".jpg\\\") ? item.path + \\\"/\\\" + item.name + \\\".jpg\\\" : Config.def_Pic;\\n        layout.push({\\n            title: item.name,\\n            pic_url: pic,\\n            url: pageUrl + \\\"?rule=\\\" + MY_RULE.title,\\n            col_type: col_type,\\n            extra: Object.assign(item, {\\n                longClick: [{\\n                    title: \\\"删除\\\",\\n                    js: $.toString((path) => {\\n                        return $.require(\\\"longPress.js\\\").deleteFileForBook(path)\\n                    }, item.path)\\n                }],\\n                id: item.path\\n            })\\n        });\\n    }\\n    setResult(layout);\\n}\\n\\nmain();\"},{\"col_type\":\"movie_3\",\"name\":\"1.hanime1首页主页\",\"path\":\"hanime1\",\"rule\":\"if (page == 1) {\\n    addListener('onClose', $.toString(() => {\\n        clearVar(\\\"coo\\\");\\n    }));\\n\\n    function error() {\\n        var coo = getVar(\\\"coo\\\", \\\"\\\");\\n        setResult([{\\n            url: \\\"https://hanime1.me/\\\",\\n               col_type: \\\"x5_webview_single\\\",\\n            desc: 'float&&320',\\n               extra: {       \\n                js: $.toString(() => {\\n                    var f = fba.getCookie(location.href)\\n                    return fba.putVar(\\\"coo\\\", f)\\n                })\\n            }\\n        }, {   \\n            title: coo.includes('cf_clearance') == true ? '““获取成功，即将退出””' : '““””<font color = \\\"red\\\" >点击这里(过完上面的验证☝️,然后一直点)</font>',\\n            url: $('').lazyRule(() => {\\n                refreshPage()\\n                return \\\"hiker://empty\\\"\\n            }),\\n            col_type: \\\"text_center_1\\\",\\n        }, {   \\n            pic_url: 'https://p9.itc.cn/q_70/images03/20211026/7ff60fc7f36940ae82f571aac73cd071.gif',\\n            url: 'toast://点我干嘛！！！没见过本帅熊？',\\n            col_type: \\\"pic_1_full\\\",\\n        }]);\\n        if (coo.match(/cf_clearance/)) {\\n            var cookie = \\\"cf_clearance\\\" + coo.match(/cf_clearance(.*?)\\\\;/)[1];\\n            saveFile(\\\"Cookie.txt\\\", cookie, 0);\\n            java.lang.Thread.sleep(1000);\\n            back(false);\\n            toast('请重新进入');\\n        }\\n    }\\n    var href = 'https://hanime1.me/';\\n    var html = fetch(href, {\\n        headers: {\\n            Cookie: readFile(\\\"Cookie.txt\\\", 0)\\n        },\\n    });\\n    var str = \\\"\\\\t\\\";\\n    eval(JSON.parse(request('hiker://page/errorpic')).rule);\\n    try {\\n        d.push({\\n            title: '““””' + `<font color = \\\"${getRandomColor()}\\\" >` + '最新</font>' + `${str.repeat(41)}` + '<small><font color=\\\"red\\\">[更多]</font></small>',\\n            url: $('').lazyRule(() => {\\n                storage0.putMyVar('index', 1)\\n                refreshPage()\\n                putVar(\\\"Warehouse.good\\\", \\\"\\\")\\n                return 'hiker://empty'\\n            }),\\n            extra: {\\n                lineVisible: false\\n            },\\n            col_type: \\\"text_1\\\"\\n        })\\n        var list1 = pdfa(html, 'body&&.home-rows-videos-wrapper,1&&.hidden-xl');\\n        for (var i = 0; i <= 7; i++) {\\n            var img = pdfh(list1[i], 'img,1&&src').replace(\\\"l.jpg\\\", \\\"h.jpg\\\");\\n            let img1 = img.substr(-12, 7);\\n            if (img1.match(errorpic)) {\\n                img = img;\\n            } else {\\n                img = 'https://i.imgur.com/' + img1 + 'g.jpg';\\n            }\\n            d.push({\\n                title: pdfh(list1[i], '.card-mobile-title&&Text'),\\n                desc: '观看次数：' + pdfh(list1[i], '.card-mobile-duration,1&&Text'),\\n                pic_url: img,\\n                url: 'hiker://page/jiexi?url=' + pdfh(list1[i], 'a,0&&href') + '#gameTheme##noRecordHistory#',\\n                col_type: 'movie_2',\\n            });\\n        }\\n        d.push({\\n            title: '““””' + `<font color = \\\"${getRandomColor()}\\\" >` + '新番预告</font>' + `${str.repeat(37)}` + '<small><font color=\\\"red\\\">[更多]</font></small>',\\n            url: $('').lazyRule(() => {\\n                storage0.putMyVar('index', 1)\\n                refreshPage()\\n                putMyVar('header.fold', '0')\\n                putVar(\\\"Warehouse.good\\\", \\\"新番预告\\\")\\n                return 'hiker://empty'\\n            }),\\n            extra: {\\n                lineVisible: false\\n            },\\n            col_type: \\\"text_1\\\"\\n        })\\n        var list = pdfa(html, 'body&&.home-rows-videos-wrapper,10&&a').reverse();\\n        for (var j = 0; j < 6; j++) {\\n            var pic = pdfh(list[j], 'img&&src');\\n            d.push({\\n                title: pdfh(list[j], 'Text'),\\n                pic_url: pic,\\n                url: 'hiker://page/jiexi?url=' + pdfh(list[j], 'a&&href') + '#gameTheme##noRecordHistory#',\\n                col_type: 'movie_3_marquee',\\n            });\\n        }\\n        d.push({\\n            title: '““””' + `<font color = \\\"${getRandomColor()}\\\" >` + '他们在看</font>' + `${str.repeat(37)}` + '<small><font color=\\\"red\\\">[刷新]</font></small>',\\n            url: $(\\\"#noLoading#\\\").lazyRule(() => {\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }),\\n            extra: {\\n                lineVisible: false\\n            },\\n            col_type: \\\"text_1\\\"\\n        })\\n        var list1 = pdfa(html, 'body&&.home-rows-videos-wrapper,4&&.hidden-xl');\\n        for (var i = 0; i <= 7; i++) {\\n            var img = pdfh(list1[i], 'img,1&&src').replace(\\\"l.jpg\\\", \\\"h.jpg\\\");\\n            let img1 = img.substr(-12, 7);\\n            if (img1.match(errorpic)) {\\n                img = img;\\n            } else {\\n                img = 'https://i.imgur.com/' + img1 + 'g.jpg';\\n            }\\n            d.push({\\n                title: pdfh(list1[i], '.card-mobile-title&&Text'),\\n                desc: '观看次数：' + pdfh(list1[i], '.card-mobile-duration,1&&Text'),\\n                pic_url: img,\\n                url: 'hiker://page/jiexi?url=' + pdfh(list1[i], 'a,0&&href') + '#gameTheme##noRecordHistory#',\\n                col_type: 'movie_2',\\n            });\\n        }\\n    } catch (e) {\\n        error()\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"a1.某色网\",\"path\":\"sewang\",\"rule\":\"js:\\nvar d = [];\\nconst page = MY_PAGE;\\nlet dataType = getVar(\\\"Warehouse.type\\\", \\\"3\\\");\\nlet href = 'https://1.sewang39.net/list/' + dataType + '-' + page + '?_t.html';\\naddListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n}));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\nvar html = fetch(href)\\n\\nif (page == 1) {\\n    tab([\\n        [\\\"国产精品\\\", \\\"3\\\"],\\n        [\\\"中文字幕\\\", \\\"4\\\"],\\n        [\\\"日韩精品\\\", \\\"5\\\"],\\n        [\\\"欧美精品\\\", \\\"6\\\"],\\n        [\\\"精彩动漫\\\", \\\"7\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n}\\nvar list = parseDomForArray(html, 'body&&.video-img-box');\\nfor (var j in list) {\\n    let src = parseDom(list[j], \\\"img&&data-src\\\");\\n    d.push({\\n        title: parseDomForHtml(list[j], 'h6&&Text'),\\n        desc: parseDomForHtml(list[j], '.label&&Text'),\\n        pic_url: src,\\n        url: src.replace(\\\"1.jpg\\\", \\\"m3u8/index.m3u8\\\"),\\n        col_type: \\\"movie_2\\\"\\n    });\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"9.18H漫画\",\"path\":\"18H\",\"rule\":\"js:\\nvar d = [];\\nconst page = MY_PAGE;\\nsetPageTitle(\\\"18H漫画\\\");\\nlet dataType = getVar(\\\"Warehouse.type\\\", \\\"18H_list\\\");\\nlet href = 'https://18h.mm-cg.com/zh/' + dataType + '/all/' + page + '.html';\\naddListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n}));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\nvar html = fetch(href)\\n\\nif (page == 1) {\\n    tab([\\n        [\\\"18H长篇\\\", \\\"18H_list\\\"],\\n        [\\\"短篇同人\\\", \\\"doujin_list\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n}\\n\\nfunction play(Url) {\\n    return $(Url).rule(() => {\\n        var d = [];\\n        var html = fetch(MY_URL)\\n        var pics = [];\\n\\n        var pd = pdfh(html, 'body&&h1&&Text');\\n        var p = pd.substr(-7, 7).match(/\\\\[(.*)\\\\]/)[1].replace(/[^0-9]/ig, \\\"\\\");\\n\\n        var list = pdfa(html, 'body&&script');\\n        for (var j in list) {\\n            var pic1 = pdfh(list[j], 'script&&Html')\\n            if (pic1.includes('Large_cgurl')) {\\n                var pic = pic1.match(/Large_cgurl\\\\[1\\\\] = \\\"(.*)\\\\_/)[1]\\n            }\\n        }\\n\\n        setPageTitle(pd);\\n        d.push({\\n            title: pd,\\n            url: pic + '_001.jpg',\\n            col_type: \\\"movie_1_vertical_pic_blur\\\",\\n            pic_url: pic + '_001.jpg',\\n        });\\n\\n        function 解析() {\\n            var pics = [];\\n            var html = fetch(input);\\n            var p = pdfh(html, 'body&&h1&&Text').substr(-7, 7).match(/\\\\[(.*)\\\\]/)[1].replace(/[^0-9]/ig, \\\"\\\");\\n\\n            var list = pdfa(html, 'body&&script');\\n            for (var j in list) {\\n                var pic1 = pdfh(list[j], 'script&&Html')\\n                if (pic1.includes('Large_cgurl')) {\\n                    var pic = pic1.match(/Large_cgurl\\\\[1\\\\] = \\\"(.*)\\\\_/)[1]\\n                }\\n            }\\n            for (var i = 1; i <= p; i++) {\\n                if (i < 10) {\\n                    var pp = pic + '_00' + i + '.jpg'\\n                }\\n                if (i < 100 && i > 9) {\\n                    var pp = pic + '_0' + i + '.jpg'\\n                }\\n                if (i > 99) {\\n                    var pp = pic + '_' + i + '.jpg'\\n                }\\n                pics.push(pp)\\n            }\\n            return \\\"pics://\\\" + pics.join(\\\"&&\\\");\\n        }\\n        let downloadlazy = $.toString(解析);\\n        var doList = [];\\n        d.push({\\n            title: '““””<b><span style=\\\"color: #1aad19\\\">📥下载</span></b>',\\n            url: \\\"hiker://page/download.view#noRecordHistory##noRefresh#?rule=某聚合\\\",\\n            col_type: \\\"text_2\\\",\\n            extra: {\\n                chapterList: doList,\\n                info: {\\n                    bookName: pd,\\n                    ruleName: \\\"18H漫画\\\",\\n                    bookTopPic: pic + '_001.jpg',\\n                    parseCode: downloadlazy\\n                },\\n                defaultView: \\\"1\\\"\\n            }\\n        });\\n        d.push({\\n            title: '‘‘’’<strong><font color= \\\"#098AC1\\\">' + \\\"🗳书架\\\" + '</front></strong>',\\n            url: \\\"hiker://page/Bookrack.view?rule=某聚合&ruleName=18H漫画\\\",\\n            col_type: \\\"text_2\\\",\\n        });\\n        doList.push({\\n            title: \\\"第一话\\\",\\n            url: MY_URL,\\n        })\\n        for (var i = 1; i <= p; i++) {\\n            if (i < 10) {\\n                var pp = pic + '_00' + i + '.jpg'\\n            }\\n            if (i < 100 && i > 9) {\\n                var pp = pic + '_0' + i + '.jpg'\\n            }\\n            if (i > 99) {\\n                var pp = pic + '_' + i + '.jpg'\\n            }\\n            pics.push(pp)\\n        }\\n\\n        d.push({\\n            title: '第一话',\\n            url: \\\"pics://\\\" + pics.join(\\\"&&\\\"),\\n            col_type: \\\"text_2\\\",\\n        })\\n        setResult(d);\\n    })\\n} //二级解析\\n\\nvar list = parseDomForArray(html, '.posts&&.post');\\nfor (var j in list) {\\n    var t = parseDomForHtml(list[j], 'h3&&Text');\\n    d.push({\\n        title: t,\\n        desc: t.substr(-7, 7).match(/\\\\((.*)\\\\)/)[1].replace(/[^0-9]/ig, \\\"\\\") + 'p',\\n        pic_url: parseDom(list[j], \\\"img&&src\\\"),\\n        url: play(pdfh(list[j], 'a&&href')),\\n        col_type: \\\"movie_3\\\"\\n    });\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"a2.wnacg\",\"path\":\"wnacg\",\"rule\":\"js:\\nvar d = [];\\nconst page = MY_PAGE;\\nsetPageTitle(\\\"wnacg漫画\\\");\\nlet dataType = getVar(\\\"Warehouse.type\\\", \\\"albums-index-cate-1\\\");\\nlet href = 'http://www.wnacg.com/' + dataType + '-page-' + page + '.html';\\naddListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n}));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\nvar html = fetch(href)\\n\\nif (page == 1) {\\n    tab([\\n        [\\\"同人志(汉化)\\\", \\\"albums-index-cate-1\\\"],\\n        [\\\"单行本(汉化)\\\", \\\"albums-index-cate-9\\\"],\\n        [\\\"短篇(汉化)\\\", \\\"albums-index-cate-10\\\"],\\n        [\\\"韩漫(汉化)\\\", \\\"albums-index-cate-20\\\"],\\n        [\\\"最新\\\", \\\"albums-index\\\"],\\n        [\\\"同人志\\\", \\\"albums-index-cate-5\\\"],\\n        [\\\"单行本\\\", \\\"albums-index-cate-6\\\"],\\n        [\\\"短篇\\\", \\\"albums-index-cate-7\\\"],\\n        [\\\"韩漫\\\", \\\"albums-index-cate-19\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n    d.push({\\n        title: \\\"🔍\\\",\\n        url: $.toString((r) => {\\n            putMyVar('keyword', input);\\n            return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=wnacg&kw=\\\" + input;\\n        }, MY_RULE.title),\\n        desc: '搜索',\\n        col_type: \\\"input\\\"\\n    });\\n}\\n\\nvar list = pdfa(html, '#classify_container&&li');\\nfor (var j in list) {\\n    var title = pdfh(list[j], '.txtA&&Text');\\n    d.push({\\n        title: title,\\n        url: 'hiker://page/wnacg二级?url=http://www.wnacg.com' + pdfh(list[j], 'a&&href') + '#gameTheme##noRecordHistory#',\\n        pic_url: 'http:' + pdfh(list[j], 'img&&src'),\\n        desc: pdfh(list[j], '.info&&Text'),\\n        col_type: \\\"movie_3\\\",\\n        extra: {\\n            longClick: [{\\n                title: '刷新',\\n                js: $.toString(() => {\\n                    refreshPage();\\n                    return \\\"hiker://empty\\\";\\n                })\\n            }, {\\n                title: '快速搜索',\\n                js: $.toString((title, rule) => {\\n                    return \\\"hiker://search?s=\\\" + title + \\\"&rule=\\\" + rule;\\n                }, title, MY_RULE.title)\\n\\n            }]\\n        }\\n    })\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"a2.wnacg二级\",\"path\":\"wnacg二级\",\"rule\":\"js:\\nvar d = [];\\nvar html = fetch(MY_URL)\\n\\nvar desc = [];\\nvar dd = pdfa(html, '.sub_r&&p')\\nfor (var i in dd) {\\n    desc.push(pdfh(dd[i], 'p&&Text'))\\n}\\n\\nvar title = pdfh(html, '.pic&&img&&title');\\nsetPageTitle(title);\\nd.push({\\n    title: '‘‘’’<font color=\\\"black\\\">作者/作品名：' + '\\\\n' + title + '</font>',\\n    desc: '‘‘’’<font color=\\\"black\\\">' + desc.join(\\\"\\\\n\\\") + '</font>',\\n    url: pd(html, '.pic&&img&&src'),\\n    col_type: \\\"movie_1_vertical_pic_blur\\\",\\n    pic_url: pd(html, '.pic&&img&&src'),\\n    extra: {\\n        gradient: true\\n    }\\n});\\n\\nvar tags = pdfa(html, '.txtDesc&&a');\\nif (tags.length > 0) {\\n    for (var p in tags) {\\n        var tag = pdfh(tags[p], 'a&&Text');\\n        d.push({\\n            title: tag,\\n            url: \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=wnacg&kw=\\\" + tag,\\n            col_type: \\\"scroll_button\\\",\\n        })\\n    }\\n}\\n\\n\\nfunction download(Url) {\\n    return $(Url).rule(() => {\\n        var d = [];\\n        let t = getPageTitle().replace(\\\"-下载zip\\\", \\\"\\\");\\n        setPageTitle(t);\\n        var htmls = fetch(MY_URL);\\n        var list = pdfh(htmls, 'body&&script&&Html').match(/tips\\\\[0\\\\] = '(.*)\\\\';/)[1];\\n        let img = 'https://files.yande.re/jpeg/06cd840ee00f182b8e84cdabdcfca4e5/yande.re%201073809%20angel%20bandages%20bikini%20blue_archive%20feet%20garter%20horns%20kelemi_mi%20loli%20see_through%20swimsuits%20thong%20wallpaper%20waraku_chise%20wet.jpg';\\n        d.push({\\n            pic_url: img,\\n            url: img,\\n            col_type: \\\"pic_1_full\\\",\\n        });\\n        d.push({\\n            col_type: \\\"line_blank\\\"\\n        });\\n        var l = pdfa(list, '#adsbox&&a');\\n        for (var j in l) {\\n            d.push({\\n                title: pdfh(l[j], 'span&&Text'),\\n                url: 'download://http:' + pdfh(l[j], 'a&&href'),\\n                col_type: \\\"text_2\\\",\\n            })\\n        }\\n        setResult(d);\\n    })\\n}\\n\\nlet yuedu = MY_URL.replace(\\\"index\\\", \\\"slide\\\");\\nlet href = MY_URL.replace(\\\"photos\\\", \\\"download\\\");\\n\\nfunction player(Url) {\\n    return $(Url).rule(() => {\\n        var d = [];\\n        d.push({\\n            url: MY_URL.replace(\\\"#gameTheme#\\\", \\\"\\\"),\\n            col_type: \\\"x5_webview_single\\\",\\n            desc: \\\"float&&100%\\\",\\n            extra: {\\n                blockRules: [\\\"*img4*\\\"]\\n            }\\n        });\\n        setResult(d);\\n    })\\n}\\nd.push({\\n    title: \\\"第一话(x5)\\\",\\n    url: player(yuedu),\\n    col_type: \\\"text_2\\\",\\n}, {\\n    title: \\\"下载zip\\\",\\n    url: download(href),\\n    col_type: \\\"text_2\\\",\\n})\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"#长按\",\"path\":\"longPress.js\",\"rule\":\"js:\\n$.exports = {\\n    deleteFileForBook(path) {\\n        //return $(\\\"所有的 漫画/小说 章节将被删除\\\\m确认删除？\\\").confirm((path) => {\\n        const File = $.require(\\\"hiker://page/File.js\\\");\\n        if (File.deleteFiles(path)) {\\n            deleteItem(path)\\n            return \\\"toast://删除成功\\\";\\n        } else {\\n            return \\\"toast://删除失败\\\";\\n        }\\n        //}, path);\\n    },\\n    deleteFileForTxt(path) {\\n        const File = $.require(\\\"hiker://page/File.js\\\");\\n        if (File.deleteFiles(path)) {\\n            if (fileExist(\\\"file://\\\" + path + \\\".json\\\")) {\\n                File.deleteFiles(path + \\\".json\\\");\\n            }\\n            deleteItem(path);\\n            return \\\"toast://删除成功\\\";\\n        } else {\\n            return \\\"toast://删除失败\\\";\\n        }\\n    }\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"a3.spankbang\",\"path\":\"spankbang\",\"rule\":\"js:\\nvar d = [];\\nconst page = MY_PAGE;\\nlet dataType = getVar(\\\"Warehouse.type\\\", \\\"/new_videos/\\\");\\nlet href = 'https://spankbang.party' + dataType + page + '/';\\naddListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n}));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\nvar html = fetch(href)\\n\\nif (page == 1) {\\n    tab([\\n        [\\\"最新\\\", \\\"/new_videos/\\\"],\\n        [\\\"热门\\\", \\\"/most_popular/\\\"],\\n        [\\\"javhd\\\", \\\"/6w/channel/javhd/\\\"],\\n        [\\\"麻豆\\\", \\\"/fy/channel/model+media+asia/\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\n\\n    d.push({\\n        title: \\\"🔍\\\",\\n        url: $.toString((r) => {\\n            putMyVar('keyword', input);\\n            return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=spankbang&kw=\\\" + input;\\n        }, MY_RULE.title),\\n        desc: '搜索',\\n        col_type: \\\"input\\\"\\n    });\\n}\\n\\nfunction player(Url) {\\n    return $(Url).lazyRule(() => {\\n        var html = fetch(input);\\n        var list = pdfa(html, '#inner_content&&script');\\n        for (var j in list) {\\n            var video1 = pdfh(list[j], 'script&&Html');\\n            if (video1.includes('contentUrl')) {\\n                var video = video1.match(/contentUrl\\\": \\\"(.*)\\\\\\\",/)[1];\\n                return video;\\n            }\\n        }\\n    })\\n}\\n\\nvar list = pdfa(html, '.video-list&&.video-item');\\nfor (var j in list) {\\n    d.push({\\n        title: pdfh(list[j], 'h4&&Text'),\\n        pic_url: pdfh(list[j], 'img&&data-src'),\\n        url: player('https://spankbang.party' + pdfh(list[j], 'a&&href')),\\n        desc: \\\"观看次数：\\\" + pdfh(list[j], '.v&&Text'),\\n        col_type: 'movie_2',\\n        extra: {\\n            longClick: [{\\n                title: '刷新',\\n                js: $.toString(() => {\\n                    refreshPage();\\n                    return \\\"hiker://empty\\\";\\n                })\\n            }]\\n        }\\n    });\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"#聚合搜索\",\"path\":\"Search.view\",\"rule\":\"js:\\nconst File = $.require(\\\"hiker://page/File.js?rule=\\\" + MY_RULE._title);\\nconst Config = $.require(\\\"hiker://page/Config.json?rule=\\\" + MY_RULE._title);\\nlet comicRuleDirs = File.getFilePath(Config[getParam(\\\"type\\\") + \\\"Path\\\"], \\\"dir\\\");\\nif (getParam(\\\"isAll\\\") === \\\"1\\\") {\\n    comicRuleDirs = comicRuleDirs.filter(item => item.name === MY_RULE.title);\\n}\\n\\nlet searchResult = [];\\nlet searchTerms= getParam(\\\"searchTerms\\\");\\nlet searchTest;\\n\\nif (!getSearchMode()) {\\n    let termsArr = searchTerms.split(\\\"\\\").map(t => t.replace(/\\\\*|\\\\.|\\\\?|\\\\+|\\\\$|\\\\^|\\\\[|\\\\]|\\\\(|\\\\)|\\\\{|\\\\}|\\\\||\\\\/|\\\\\\\\/g, k => \\\"\\\\\\\\\\\" + k));\\n    let reg = new RegExp(termsArr.join(\\\".*\\\"), \\\"i\\\");\\n    searchTest = text => reg.test(text);\\n} else {\\n    searchTest = text => searchContains(text, searchTerms, false);\\n}\\n\\nlet pageUrl = getParam(\\\"type\\\") === \\\"novel\\\" ? \\\"hiker://page/NovelBrowser.view\\\" : \\\"hiker://page/ComicBrowser.view\\\";\\nfor (let sonDir of comicRuleDirs) {\\n    let comicList = File.getFilePath(sonDir.path, \\\"dir\\\");\\n    for (let comic of comicList) {\\n        if (searchTest(comic.name)) {\\n            searchResult.push({\\n                title: comic.name,\\n                pic_url: comic.path + \\\"/\\\" + comic.name + \\\".jpg\\\",\\n                url: pageUrl + \\\"?rule=\\\" + MY_RULE._title,\\n                desc: sonDir.name,\\n                extra: comic\\n            });\\n        }\\n    }\\n\\n}\\nsetResult(searchResult);\"},{\"col_type\":\"movie_3\",\"name\":\"#设置\",\"path\":\"Setting/More.view\",\"rule\":\"js:\\nconst File = $.require(\\\"hiker://page/File.js\\\");\\nconst Config = $.require(\\\"hiker://page/Config.json\\\");\\n\\nconst settingType = MY_PARAMS.settingType || getParam(\\\"settingType\\\");\\n\\nlet layout = [];\\nlet id = \\\"#\\\" + new Date().getTime();\\nswitch (settingType) {\\n\\n    case \\\"contents\\\":\\n        let f = require(\\\"http://hiker.nokia.press/hikerule/rulelist.json?id=5099\\\");\\n        setPageTitle(\\\"目录设置|设置\\\");\\n        layout.push({\\n            title: \\\"选择文件夹\\\",\\n            url: JSON.stringify(f.fileSelectionUri({\\n                callback: $.toString((id) => {\\n                    let target = findItem(id).extra;\\n                    updateItem(id, {\\n                        extra: Object.assign(target, {\\n                            defaultValue: PATH\\n                        })\\n                    });\\n                    return true;\\n                }, id),\\n                initialPath: Config.homePath,\\n                requireUrl: \\\"http://hiker.nokia.press/hikerule/rulelist.json?id=5099\\\",\\n                pattern: 1\\n            })),\\n            col_type: \\\"input\\\",\\n            desc: \\\"支持hiker://files路径(该操作不会初始化目录)\\\",\\n            extra: {\\n                defaultValue: Config.homePath,\\n                onChange: $.toString((id) => {\\n                    putMyVar(id, input);\\n                }, id),\\n                id: id\\n            }\\n        });\\n        layout.push({\\n            col_type: \\\"line_blank\\\"\\n        });\\n        layout.push({\\n            title: \\\"确认\\\",\\n            url: $(\\\"#noLoading#\\\").lazyRule((id) => {\\n                let input = getMyVar(id, findItem(id).extra.defaultValue || \\\"\\\");\\n                const Config = $.require(\\\"hiker://page/Config.json\\\");\\n                if (input.startsWith(\\\"hiker://files/\\\")) input = getPath(input).slice(7);\\n                if (input.endsWith(\\\"/\\\")) input = input.replace(/\\\\/$/, \\\"\\\");\\n                if (Config.homePath == input) return \\\"toast://已经是当前目录\\\";\\n                Config = JSON.parse(readFile(\\\"config.json\\\", 0) || \\\"{}\\\");\\n                Config.homePath = input;\\n                saveFile(\\\"config.json\\\", JSON.stringify(Config), 0);\\n                back();\\n                return \\\"toast://已保存\\\";\\n            }, id),\\n            col_type: \\\"text_center_1\\\",\\n        });\\n        layout.push({\\n            title: `\\n        <ul>\\n         <li><font color=\\\"blue\\\">改变目录路径后原先缓存的漫画不会自动移动到新目录，需要自己移动，所以建议不要乱改动目录，如果想移动到系统相册等软件读取得到（相册有显示），目录可以改成<a href=\\\"copy:///storage/emulated/0/漫画\\\"><u>/storage/emulated/0/漫画</u></a>，需要给海阔读取存储权限，不然读不到数据</font></li>\\n         <li><font color=\\\"blue\\\">改完下载保存目录后，缓存漫画看不了请给软件读取存储权限，也可以改回<a href=\\\"copy:///storage/emulated/0/Android/data/com.example.hikerview/files/Documents/ComicsBookShelf\\\"><u>/storage/emulated/0/Android/data/com.example.hikerview/files/Documents/ComicsBookShelf</u></a></font></li>\\n        </ul>\\n    `,\\n            col_type: \\\"rich_text\\\",\\n        });\\n        layout.push({\\n            col_type: \\\"line_blank\\\"\\n        });\\n        layout.push({\\n            title: \\\"<strong>漫画阅读器设置</strong>\\\".big(),\\n            col_type: \\\"rich_text\\\"\\n        });\\n        layout.push({\\n            col_type: \\\"line\\\"\\n        });\\n        layout.push({\\n            col_type: \\\"line\\\"\\n        });\\n        layout.push({\\n            title: \\\"兼容模式\\\",\\n            url: $(\\\"#noLoading#\\\").lazyRule((def_isComicCompatible) => {\\n                let Config = JSON.parse(readFile(\\\"config.json\\\", 0) || \\\"{}\\\");\\n\\n                Config.def_isComicCompatible = def_isComicCompatible === \\\"0\\\" ? \\\"1\\\" : \\\"0\\\";\\n\\n                saveFile(\\\"config.json\\\", JSON.stringify(Config), 0);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, Config.def_isComicCompatible),\\n            desc: Config.def_isComicCompatible === \\\"0\\\" ? \\\"不开启\\\" : \\\"开启\\\",\\n            col_type: \\\"text_1\\\"\\n        });\\n        layout.push({\\n            col_type: \\\"line_blank\\\"\\n        });\\n        layout.push({\\n            title: \\\"<strong>下载器设置</strong>\\\".big(),\\n            col_type: \\\"rich_text\\\"\\n        });\\n        layout.push({\\n            col_type: \\\"line\\\"\\n        });\\n        layout.push({\\n            col_type: \\\"line\\\"\\n        });\\n\\n        function setNum(key, test) {\\n            let Config = JSON.parse(readFile(\\\"config.json\\\", 0) || \\\"{}\\\");\\n            input = parseInt(input);\\n            if (Number.isNaN(input)) return \\\"toast://请输入数字\\\";\\n            if (!test(input)) return \\\"toast://不符合条件\\\";\\n            Config[key] = input;\\n            saveFile(\\\"config.json\\\", JSON.stringify(Config), 0);\\n            refreshPage(false);\\n            return \\\"toast://修改成功\\\";\\n        }\\n        layout.push({\\n            title: \\\"log数\\\",\\n            url: $(Config.logNum, \\\"0<N<100\\\").input(setNum, \\\"logNum\\\", it => it > 0 && it < 100),\\n            desc: \\\"\\\" + Config.logNum,\\n            col_type: \\\"text_1\\\"\\n        });\\n\\n        layout.push({\\n            title: \\\"分批下载数(0不开启)\\\",\\n            url: $(\\\"\\\" + Config.threadNum, \\\"N>-1\\\").input(setNum, \\\"threadNum\\\", it => it > -1),\\n            desc: \\\"\\\" + Config.threadNum,\\n            col_type: \\\"text_1\\\",\\n            extra: {\\n                lineVisible: false,\\n            }\\n        });\\n        layout.push({\\n            col_type: \\\"line_blank\\\"\\n        });\\n        layout.push({\\n            title: \\\"<strong>其他设置</strong>\\\".big(),\\n            col_type: \\\"rich_text\\\"\\n        });\\n        layout.push({\\n            col_type: \\\"line\\\"\\n        });\\n        layout.push({\\n            col_type: \\\"line\\\"\\n        });\\n        layout.push({\\n            title: \\\"清理缓存\\\",\\n            url: \\\"hiker://page/Setting/More.view#noRecordHistory##noHistory#?settingType=cache\\\",\\n            col_type: \\\"text_1\\\"\\n        });\\n        break;\\n    case \\\"cache\\\":\\n        setPageTitle(\\\"清除缓存|设置\\\");\\n        const knownList = new Map([\\n            [File.getName(Config.comicPath), \\\"#管理器#漫画缓存目录[不建议清除]\\\"],\\n            [File.getName(Config.novelFullPath), \\\"#管理器#小说合并目录[可以清除]\\\"],\\n            [\\\"dr章节缓存\\\", \\\"道长模板临时缓存[建议清除]\\\"]\\n        ]);\\n\\n        let cacheDir = File.getFilePath(Config.homePath, \\\"dir\\\");\\n\\n        function cleanCache(path) {\\n            const File = $.require(\\\"hiker://page/File.js\\\");\\n            if (File.deleteFiles(path)) {\\n                refreshPage(false);\\n                return \\\"toast://清除完成\\\";\\n            } else {\\n                return \\\"toast://清除失败\\\";\\n            }\\n        }\\n        for (let cache of cacheDir) {\\n            layout.push({\\n                title: cache.name,\\n                desc: \\\"大小：\\\" + File.getFileSize(cache.path) + \\\"\\\\n描述：\\\" + (knownList.get(cache.name) || \\\"未知目录[风险未知]\\\"),\\n                col_type: \\\"text_1\\\",\\n                url: $(\\\"确认清除 \\\" + cache.name + \\\" ?\\\").confirm(cleanCache, cache.path)\\n            });\\n        }\\n        layout.push({\\n            col_type: \\\"line_blank\\\"\\n        });\\n        layout.push({\\n            title: \\\"全部清除(\\\" + File.getFileSize(Config.homePath) + \\\")\\\",\\n            col_type: \\\"text_center_1\\\",\\n            url: $(\\\"确认清除全部缓存数据?\\\").confirm(cleanCache, Config.homePath)\\n        });\\n        break;\\n}\\nsetResult(layout);\"},{\"col_type\":\"movie_3\",\"name\":\"#漫画兼容\",\"path\":\"comicCompatible.view\",\"rule\":\"js:\\nconst File = $.require(\\\"hiker://page/File.js\\\");\\nsetPageTitle($.log(MY_PARAMS.title));\\nlet filelist = File.getFilePath(MY_PARAMS.path);\\nlet piclist = filelist.map((item, i) => ({\\n    col_type: \\\"pic_1_full\\\",\\n    url: \\\"hiker://empty\\\",\\n    pic_url: MY_PARAMS.path + \\\"/\\\" + (i + 1) + \\\".jpg\\\"\\n}));\\n\\nsetResult(piclist);\"},{\"col_type\":\"movie_3\",\"name\":\"a4.hitxhot\",\"path\":\"hitxhot\",\"rule\":\"js:\\nvar d = [];\\nconst page = MY_PAGE;\\nlet dataType = getVar(\\\"Warehouse.type\\\", \\\"\\\");\\nlet href = 'https://www.hitxhot.org/'+dataType+'?m=1&page=' + page;\\naddListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n}));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\nvar html = fetch(href)\\n\\nif (page == 1) {\\n    tab([\\n        [\\\"最新\\\", \\\"\\\"],\\n [\\\"热门\\\", \\\"hot\\\"]\\n    ], \\\"Warehouse.type\\\", dataType);\\nd.push({\\n        title: \\\"🔍\\\",\\n        url: $.toString((r) => {\\n            putMyVar('keyword', input);\\n            return \\\"hiker://page/search?p=#noHistory##fullTheme##noRecordHistory#fypage&type=hitxhot&kw=\\\" + input;\\n        }, MY_RULE.title),\\n        desc: '搜索',\\n        col_type: \\\"input\\\"\\n    });\\n}\\n\\nvar list = pdfa(html, '.videos&&.contentme');\\nfor (var j in list) {\\n    d.push({\\n        title: pdfh(list[j], 'a&&title'),\\n        img: pdfh(list[j], '.xld&&src'),\\n        url: 'hiker://page/hitxhot二级?url=https://www.hitxhot.org' + pdfh(list[j], 'a&&href'),\\n        col_type: 'movie_3',\\n        extra: {\\n            longClick: [{\\n                title: '刷新',\\n                js: $.toString(() => {\\n                    refreshPage();\\n                    return \\\"hiker://empty\\\";\\n                })\\n            }]\\n        }\\n    });\\n}\\nsetResult(d)\"},{\"col_type\":\"movie_3\",\"name\":\"a4.hitxhot二级\",\"path\":\"hitxhot二级\",\"rule\":\"js:\\nvar d = [];\\nif(MY_URL.match(/page/)){\\nMY_URL = MY_URL.replace(/\\\\&page(.*)/g,'');\\n}\\nvar html = fetch(MY_URL);\\nvar img = pdfh(html, '.contentme&&img&&src');\\nvar title = pdfh(html, '.logo&&Text').replace(\\\"Hit-x-Hot: \\\", \\\"\\\");\\nd.push({\\n    title: '作品名：' + '\\\\n' + title.replace(/ \\\\|(.*)/,\\\"\\\"),\\n    desc: ((Number(title.split(\\\"/\\\")[1])-1)*10)+\\\"P+\\\",\\n    url: img,\\n    col_type: \\\"movie_1_vertical_pic_blur\\\",\\n    pic_url: img,\\n});\\n\\nfunction 解析() {\\n    var pics = [];\\n    var html = fetch(input);\\n    var list = pdfa(html, '.contentme&&img');\\n    for (var j in list) {\\n        var img = pdfh(list[j], 'img&&src');\\n        pics.push(img)\\n    }\\n    return \\\"pics://\\\" + pics.join(\\\"&&\\\");\\n}\\n\\nlet lazy = $(\\\"\\\").lazyRule(解析);\\nlet downloadlazy = $.toString(解析);\\nvar doList = [];\\nd.push({\\n    title: '““””<b><span style=\\\"color: #1aad19\\\">📥下载</span></b>',\\n    url: \\\"hiker://page/download.view#noRecordHistory##noRefresh#?rule=某聚合\\\",\\n    col_type: \\\"text_2\\\",\\n    extra: {\\n        chapterList: doList,\\n        info: {\\n            bookName: title,\\n            ruleName: \\\"hitxhot\\\",\\n            bookTopPic: img,\\n            parseCode: downloadlazy\\n        },\\n        defaultView: \\\"1\\\"\\n    }\\n});\\nd.push({\\n    title: '‘‘’’<strong><font color= \\\"#098AC1\\\">' + \\\"🗳书架\\\" + '</front></strong>',\\n    url: \\\"hiker://page/Bookrack.view?rule=某聚合&ruleName=hitxhot\\\",\\n    col_type: \\\"text_2\\\",\\n});\\n\\nvar page = title.split(\\\"/\\\")[1];\\nif (page == null) {\\n    doList.push({\\n        title: \\\"第1页\\\",\\n        url: MY_URL,\\n    })\\n    d.push({\\n        title: \\\"第1页\\\",\\n        url: MY_URL + lazy,\\n        col_type: 'text_3',\\n    });\\n} else {\\n    for (var i = 1; i <= page; i++) {\\n        doList.push({\\n            title: \\\"第\\\" + i + \\\"页\\\",\\n            url: MY_URL + '&page=' + i,\\n        })\\n    }\\n    for (var j = 1; j <= page; j++) {\\n        d.push({\\n            title: \\\"第\\\" + j + \\\"页\\\",\\n            url: MY_URL + '&page=' + j + lazy,\\n            col_type: 'text_3',\\n        });\\n    }\\n}\\nsetResult(d)\"},{\"col_type\":\"movie_3\",\"name\":\"a6.pornhub\",\"path\":\"pornhub\",\"rule\":\"js:\\nvar d = [];\\nconst page = MY_PAGE;\\nlet dataType = getVar(\\\"Warehouse.type\\\", \\\"/language/chinese\\\");\\nlet Type1 = getVar(\\\"type1\\\", \\\"\\\");\\nif (Type1==='') {\\n    var href = 'https://cn.pornhub.com' + dataType + Type1 + '?page=' + page;\\n} else {\\n    href = 'https://cn.pornhub.com' + dataType + Type1 + '&page=' + page;\\n}\\naddListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n    clearVar(\\\"type1\\\");\\n}));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\n\\nif (page == 1) {\\n    tab([\\n        [\\\"Porn in chinese\\\", \\\"/language/chinese\\\"],\\n        [\\\"推荐视频\\\", \\\"/recommended\\\"],\\n        [\\\"全部\\\", \\\"/video\\\"]\\n    ], \\\"Warehouse.type\\\", dataType)\\nif(dataType!==\\\"/recommended\\\"){\\nclearVar(\\\"type1\\\");\\ntab([\\n        [\\\"全部\\\", \\\"\\\"],\\n        [\\\"最热门\\\", \\\"?o=ht\\\"],\\n        [\\\"最高分\\\", \\\"?o=tr\\\"],\\n        [\\\"最多次观看\\\", \\\"?o=mv\\\"],\\n        [\\\"最新\\\", \\\"?o=cm\\\"]\\n    ], \\\"type1\\\", Type1)\\n}else{\\nclearVar(\\\"type1\\\");\\ntab([\\n        [\\\"最相关\\\", \\\"\\\"],\\n        [\\\"最新\\\", \\\"?o=time\\\"]\\n    ], \\\"type1\\\", Type1)\\n}\\n\\n    d.push({\\n        title: \\\"🔍\\\",\\n        url: $.toString((r) => {\\n            putMyVar('keyword', input);\\n            return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=pornhub&kw=\\\" + input;\\n        }, MY_RULE.title),\\n        desc: '搜索',\\n        col_type: \\\"input\\\"\\n    });\\n}\\nvar html = fetch(href)\\n\\nfunction player(Url) {\\n    return $(Url).lazyRule(() => {\\n        var html = fetch(input);\\n        var list = pdfa(html, '#mobileContainer&&script');\\n        for (var j in list) {\\n            var video1 = pdfh(list[j], 'script&&Html');\\n            if (video1.match(/1080P/)) {\\n                var video = video1.match(/videoUrl\\\":\\\"(.*)\\\\\\\",\\\"quality\\\":\\\"1080/)[1];\\n                var video2 = video1.match(/true,\\\"format\\\":\\\"hls\\\",\\\"videoUrl\\\":\\\"(.*)\\\\\\\",\\\"quality\\\":\\\"720/)[1];\\nvar video3 = video1.match(/240\\\"},{\\\"defaultQuality\\\":false,\\\"format\\\":\\\"hls\\\",\\\"videoUrl\\\":\\\"(.*)\\\\\\\",\\\"quality\\\":\\\"480/)[1];\\n                return \\\"{urls:['\\\" + video.replace(/\\\\\\\\/g, \\\"\\\") + \\\"','\\\" + video2.replace(/\\\\\\\\/g, \\\"\\\")+\\\"','\\\"+ video3.replace(/\\\\\\\\/g, \\\"\\\") + \\\"'],names:['1080P','720P','480P']}\\\"\\n            } else if (!video1.match(/1080P/) && video1.match(/720P/)) {\\n                video = video1.match(/true,\\\"format\\\":\\\"hls\\\",\\\"videoUrl\\\":\\\"(.*)\\\\\\\",\\\"quality\\\":\\\"720/)[1];\\n                video2 = video1.match(/240\\\"},{\\\"defaultQuality\\\":false,\\\"format\\\":\\\"hls\\\",\\\"videoUrl\\\":\\\"(.*)\\\\\\\",\\\"quality\\\":\\\"480/)[1];\\n                return \\\"{urls:['\\\" + video.replace(/\\\\\\\\/g, \\\"\\\") + \\\"','\\\" + video2.replace(/\\\\\\\\/g, \\\"\\\") + \\\"'],names:['720P','480P']}\\\"\\n            } else if (!video1.match(/720P/) && video1.match(/480P/)) {\\n                video = video1.match(/240\\\"},{\\\"defaultQuality\\\":false,\\\"format\\\":\\\"hls\\\",\\\"videoUrl\\\":\\\"(.*)\\\\\\\",\\\"quality\\\":\\\"480/)[1];\\n                video2 = video1.match(/videoUrl\\\":\\\"(.*)\\\\\\\",\\\"quality\\\":\\\"240/)[1];\\n                return \\\"{urls:['\\\" + video.replace(/\\\\\\\\/g, \\\"\\\") + \\\"','\\\" + video2.replace(/\\\\\\\\/g, \\\"\\\") + \\\"'],names:['480P','240P']}\\\"\\n            } else {\\n                video = video1.match(/videoUrl\\\":\\\"(.*)\\\\\\\",\\\"quality\\\":\\\"240/)[1];\\n                return video.replace(/\\\\\\\\/g, \\\"\\\")\\n            }\\n        }\\n    })\\n}\\n\\nvar list = pdfa(html, '.videoList&&.videoWrapper');\\nfor (var j in list) {\\n    d.push({\\n        title: pdfh(list[j], '.title&&Text'),\\n        desc: pdfh(list[j], '.views&&Text') + \\\" | \\\" + pdfh(list[j], '.time&&Text'),\\n        url: player('https://cn.pornhub.com' + pdfh(list[j], 'a,1&&href')),\\n        pic_url: pdfh(list[j], 'img&&src'),\\n        col_type: 'movie_2',\\n        extra: {\\n            longClick: [{\\n                title: '刷新',\\n                js: $.toString(() => {\\n                    refreshPage();\\n                    return \\\"hiker://empty\\\";\\n                })\\n            }]\\n        }\\n    });\\n}\\nsetResult(d)\"},{\"col_type\":\"movie_3\",\"name\":\"a7.e-hentai\",\"path\":\"ehentai\",\"rule\":\"js:\\nvar d = [];\\nvar page = getVar(\\\"page\\\", \\\"\\\");\\nlet dataType = getVar(\\\"Warehouse.type\\\", \\\"\\\");\\naddListener('onClose', $.toString(() => {\\n    clearVar(\\\"Warehouse.type\\\");\\n    clearVar(\\\"page\\\");\\n}));\\n\\nfunction tab(arr, type, contrast) {\\n    for (let item of arr) {\\n        d.push({\\n            title: item[1] === contrast ? \\\"““\\\" + item[0] + \\\"””\\\" : item[0],\\n            url: $(\\\"#noLoading#\\\").lazyRule((key, type) => {\\n                putVar(type, key);\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\";\\n            }, item[1], type),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    }\\n    d.push({\\n        col_type: \\\"blank_block\\\"\\n    });\\n}\\n\\n\\nif (MY_PAGE == 1 || dataType == 'popular') {\\n    var href = \\\"https://e-hentai.org/\\\" + dataType;\\n    tab([\\n        [\\\"全部\\\", \\\"\\\"],\\n        [\\\"同人志\\\", \\\"doujinshi\\\"],\\n        [\\\"漫画\\\", \\\"manga\\\"],\\n        [\\\"Artist CG\\\", \\\"artistcg\\\"],\\n        [\\\"Game CG\\\", \\\"gamecg\\\"],\\n        [\\\"Western\\\", \\\"western\\\"],\\n        [\\\"Non-H\\\", \\\"non-h\\\"],\\n        [\\\"Image Set\\\", \\\"imageset\\\"],\\n        [\\\"Cosplay\\\", \\\"cosplay\\\"],\\n        [\\\"Asian Porn\\\", \\\"asianporn\\\"],\\n        [\\\"Misc\\\", \\\"misc\\\"],\\n        [\\\"popular\\\", \\\"popular\\\"]\\n    ], \\\"Warehouse.type\\\", dataType)\\n    d.push({\\n        title: \\\"🔍\\\",\\n        url: $.toString((r) => {\\n            putMyVar('keyword', input);\\n            return \\\"hiker://page/search?p=#noHistory##noRecordHistory#fypage&type=ehentai&kw=\\\" + input;\\n        }, MY_RULE.title),\\n        desc: '搜索(英文)',\\n        col_type: \\\"input\\\"\\n    });\\n} else {\\n    href = \\\"https://e-hentai.org/\\\" + dataType + \\\"?next=\\\" + page\\n}\\n    var html = fetch(href)\\n    let page1 = pdfh(html, '#unext&&href').split(\\\"next=\\\")[1];\\n    putVar(\\\"page\\\", page1);\\n    var list = pdfa(html, 'body&&.glthumb');\\n    for (var j in list) {\\n        d.push({\\n            title: pdfh(list[j], 'img&&title'),\\n            url: 'hiker://page/ehentai二级?url=' + pdfh(list[j], '.glthumb&&Html').match(/popUp\\\\('(.*)\\\\&amp;act/)[1].replace(/amp;/g, \\\"\\\").replace(\\\"allerypopups.php?gid=\\\", \\\"/\\\").replace(\\\"&t=\\\", \\\"/\\\"),\\n            pic_url: pdfh(list[j], 'img&&data-src||src'),\\n            desc: pdfh(list[j], '.cn&&Text'),\\n            col_type: \\\"movie_3_marquee\\\"\\n        })\\n    }\\nif(list.length == 0){\\n    setResult([{\\n        title: pdfh(html,'body&&Text'),\\n        col_type: 'rich_text'\\n    }])\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"a7.e-hentai二级\",\"path\":\"ehentai二级\",\"rule\":\"js:\\nvar d = [];\\nvar html = fetch(MY_URL)\\nvar desc = [];\\nlet list = pdfa(html,'#gdd--tr,1--tr,1--tr,2&&tr');\\nfor(var k in list){\\ndesc.push(pdfh(list[k],'Text'))\\n}\\nlet title= pdfh(html,'#gd2&&h1&&Text');\\nlet hh= pdfh(html,'#gdt&&.gdtm&&a&&href');\\nlet htmll = fetch(hh);\\nlet pic = pdfh(htmll,'#i3&&img&&src');\\nd.push({\\ntitle: title,\\ndesc: desc.join('\\\\n'),\\npic_url: pic,\\nurl: pic,\\ncol_type: 'movie_1_vertical_pic_blur'\\n})\\nfunction 解析() {\\n    var html = fetch(input)\\n    var list = pdfa(html, '#gdt&&.gdtm');\\n    var imgs = [];\\n    for (var j in list) {\\n        var img_href = pdfh(list[j], 'a&&href');\\n        var hh = fetch(img_href)\\n        var img = pdfh(hh, '#i3&&img&&src')\\n        imgs.push(img)\\n    }\\n    return 'pics://' + imgs.join('&&')\\n}\\nlet lazy = $(\\\"\\\").lazyRule(解析);\\nlet downloadlazy = $.toString(解析);\\nvar doList = [];\\nd.push({\\n    title: '““””<b><span style=\\\"color: #1aad19\\\">📥下载</span></b>',\\n    url: \\\"hiker://page/download.view#noRecordHistory##noRefresh#?rule=某聚合\\\",\\n    col_type: \\\"text_2\\\",\\n    extra: {\\n        chapterList: doList,\\n        info: {\\n            bookName: title,\\n            ruleName: \\\"e-hentai\\\",\\n            bookTopPic: pic,\\n            parseCode: downloadlazy\\n        },\\n        defaultView: \\\"1\\\"\\n    }\\n});\\nd.push({\\n    title: '‘‘’’<strong><font color= \\\"#098AC1\\\">' + \\\"🗳书架\\\" + '</front></strong>',\\n    url: \\\"hiker://page/Bookrack.view?rule=某聚合&ruleName=e-hentai\\\",\\n    col_type: \\\"text_2\\\",\\n});\\ndoList.push({\\n    title: \\\"第1页\\\",\\n    url: MY_URL,\\n})\\n\\nd.push({\\n    title: '第1页',\\n    url: MY_URL + lazy,\\n    col_type: 'text_3'\\n})\\nvar page = pdfh(html, 'body&&tbody,-1&&td,-2&&a&&Text');\\nif (page != 1) {\\n    for (var i = 1; i < page; i++) {\\n        var href = MY_URL + '?p=' + i;\\n        doList.push({\\n            title: '第' + (Number(i) + 1) + '页',\\n            url: href,\\n        })\\n        d.push({\\n            title: '第' + (Number(i) + 1) + '页',\\n            url: href + lazy,\\n            col_type: 'text_3'\\n        })\\n    }\\n}\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"a8.fikfap\",\"path\":\"fikfap\",\"rule\":\"js:\\nsetResult([{\\n    url: \\\"https://fikfap.com/\\\",\\n       col_type: \\\"x5_webview_single\\\",\\n    desc: 'float&&100%',\\n       extra: {       \\n    }\\n}]);\"},{\"col_type\":\"movie_3\",\"name\":\"错误图片修复\",\"path\":\"errorpic\",\"rule\":\"var errorpic = \\\"zKr2KNs|ied0BhH|2IBAq0S|4BzQHJa|9nFlatH|WVBgZaq|9b5IUFB|V3J6clr|QxJhV1G|BIlgtWb|WSlaUMz|ik8at2M|NdPwXkU|hRQBekV|HeXZxeW|5VCUsTs|sgE49VT|hgLpOYI|3fYJ7N7|2fuftnT|VWcbihz|X7Iu0rk|mnGE446|eSOgJv0|AvMNSGl|bS3ZX8W|Mtv8xQ0|mHrZIKJ|W4M5yai|dpEB8mn|8dIoEng|3ihtxNF|BKsyUu8|GRsRg2a|HFq1Gzs|kfbAouz|tzXecaA|nZFo6Dk|GhBtoTQ|ab9Y7dJ|zwGRvf2|TzrkbR6|j7DSgxp|LfiXucQ|Q4hrSoI|pFdr5Cx|5BWtQMj|Aik6BI8|FR2Uxv9|09dg9V2|vMVKePe|0MqPeqc|6XrF1DM|Bnrt0p6|Fvl3YRb|qsBhqzZ|7N19ors|ro6LxmG|BT3suC3|5ABgrJx|6qVviPI|lyfPrdX|Fvl3YRb|38OsLek\\\";\"}]","icon":"https://lanmeiguojiang.com/tubiao/q/4.png","proxy":""}
海阔视界规则分享，当前分享的是：小程序￥home_rule_v2￥base64://@某聚合@eyJsYXN0X2NoYXB0ZXJfcnVsZSI6IiIsInRpdGxlIjoi5p+Q6IGa5ZCIIiwiYXV0aG9yIjoiTMOtbiIsInVybCI6Imhpa2VyOi8vZW1wdHkiLCJ2ZXJzaW9uIjoxLCJjb2xfdHlwZSI6Im1vdmllXzMiLCJjbGFzc19uYW1lIjoiIiwidHlwZSI6InZpZGVvIiwiY2xhc3NfdXJsIjoiIiwiYXJlYV9uYW1lIjoiIiwiYXJlYV91cmwiOiIiLCJzb3J0X25hbWUiOiIiLCJ5ZWFyX25hbWUiOiIiLCJzb3J0X3VybCI6IiIsInllYXJfdXJsIjoiIiwiZmluZF9ydWxlIjoianM6XG5pZiAoIWdldEl0ZW0oXCI6Zmlyc3RVc2VcIiwgZmFsc2UpKSB7XG4gICAgY29uZmlybSh7XG4gICAgICAgIHRpdGxlOiBcIuaPkOmGklwiLFxuICAgICAgICBjb250ZW50OiBcIui/meaYr+S4gOS4quaegeW6puWNsemZqeeahOmbhuWQiO+8jOS4jeimgeS5seWIhuS6q++8jOS4jeimgeS5seWIhuS6q++8jOS4jeimgeS5seWIhuS6q++8ge+8ge+8gVwiLFxuICAgICAgICBjb25maXJtOiBcInNldEl0ZW0oJzpmaXJzdFVzZScsICcxJyk7cmVmcmVzaFBhZ2UoKVwiLFxuICAgICAgICBjYW5jZWw6IFwiJ3RvYXN0Oi8v5b6I6YGX5oa+77yM5LiN6IO95Li65oKo5pyN5Yqh44CCXFxcXG7plb/mjInmoIfpopjlj6/liKDpmaTjgIInXCJcbiAgICB9KTtcbiAgICBzZXRSZXN1bHQoW10pO1xufWVsc2UgaWYgKE1ZX1JVTEUudGl0bGUgIT09IFwi5p+Q6IGa5ZCIXCIpIHtcbiAgICBjb25maXJtKHtcbiAgICAgICAgdGl0bGU6IFwi6K2m5ZGK4pqgXCIsXG4gICAgICAgIGNvbnRlbnQ6IFwi5LiN6IO95pS55ZCN77yM5LiN54S25b2x5ZON5L2/55So77yB77yB77yBXCIsXG4gICAgICAgIGNvbmZpcm06ICQudG9TdHJpbmcoKCkgPT4ge1xuICAgICAgICAgICAgTVlfUlVMRS50aXRsZSA9IFwi5p+Q6IGa5ZCIXCI7XG4gICAgICAgICAgICB0b2FzdChcIuW3suW4ruS9oOaUueWbnuWOn+WQje+8jOivt+mHjeaWsOWvvOWFpVwiKTtcbiAgICAgICAgICAgIHJldHVybiBcInJ1bGU6Ly9cIiArIGJhc2U2NEVuY29kZShcIua1t+mYlOinhueVjO+/pWhvbWVfcnVsZe+/pVwiICsgSlNPTi5zdHJpbmdpZnkoTVlfUlVMRSkpO1xuICAgICAgICB9KSxcbiAgICAgICAgY2FuY2VsOiBcIid0b2FzdDovL+W+iOmBl+aGvu+8jOS4jeiDveS4uuaCqOacjeWKoeOAglxcXFxu6ZW/5oyJ5qCH6aKY5Y+v5Yig6Zmk44CCJ1wiXG4gICAgfSk7XG4gICAgc2V0UmVzdWx0KFtdKTtcbn1cbmV2YWwoSlNPTi5wYXJzZShyZXF1ZXN0KCdoaWtlcjovL3BhZ2UvdmlldycpKS5ydWxlKTtcbnNldFJlc3VsdChkKTsiLCJzZWFyY2hfdXJsIjoiaGlrZXI6Ly9lbXB0eT9rdz0qKiIsImdyb3VwIjoi772e772e772eIiwic2VhcmNoRmluZCI6ImpzOlxuc2V0UmVzdWx0KFt7XG4gICAgICAgIHRpdGxlOiBcImhhbmltZTHliqjmvKtcIixcbiAgICAgICAgdXJsOiBcImhpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU9aGFuaW1lMeWKqOa8qyZrdz1cIiArIGdldFBhcmFtKFwia3dcIilcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGl0bGU6IFwiaGFuaW1lMea8q+eUu1wiLFxuICAgICAgICB1cmw6IFwiaGlrZXI6Ly9wYWdlL3NlYXJjaD9wPSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNmeXBhZ2UmdHlwZT1oYW5pbWUx5ryr55S7Jmt3PVwiICsgZ2V0UGFyYW0oXCJrd1wiKVxuICAgIH0sXG4gICAge1xuICAgICAgICB0aXRsZTogXCLpurvosYZcIixcbiAgICAgICAgdXJsOiBcImhpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU96bq76LGGJmt3PVwiICsgZ2V0UGFyYW0oXCJrd1wiKVxuICAgIH0sXG4gICAge1xuICAgICAgICB0aXRsZTogXCLpurvosYZjbHViXCIsXG4gICAgICAgIHVybDogXCJoaWtlcjovL3BhZ2Uvc2VhcmNoP3A9I25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5I2Z5cGFnZSZ0eXBlPem6u+ixhmNsdWIma3c9XCIgKyBnZXRQYXJhbShcImt3XCIpXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpdGxlOiBcIuWwj+m7hOS5plwiLFxuICAgICAgICB1cmw6IFwiaGlrZXI6Ly9wYWdlL3NlYXJjaD9wPSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNmeXBhZ2UmdHlwZT3lsI/pu4TkuaYma3c9XCIgKyBnZXRQYXJhbShcImt3XCIpXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpdGxlOiBcInJ1bGUzNHZpZGVvXCIsXG4gICAgICAgIHVybDogXCJoaWtlcjovL3BhZ2Uvc2VhcmNoP3A9I25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5I2Z5cGFnZSZ0eXBlPXJ1bGUzNHZpZGVvJmt3PVwiICsgZ2V0UGFyYW0oXCJrd1wiKVxuICAgIH0sXG4gICAge1xuICAgICAgICB0aXRsZTogXCJ5YW5kZVwiLFxuICAgICAgICB1cmw6IFwiaGlrZXI6Ly9wYWdlL3NlYXJjaD9wPSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNmeXBhZ2UmdHlwZT15YW5kZSZrdz1cIiArIGdldFBhcmFtKFwia3dcIilcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGl0bGU6IFwieHZpZGVvXCIsXG4gICAgICAgIHVybDogXCJoaWtlcjovL3BhZ2Uvc2VhcmNoP3A9I25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5I2Z5cGFnZSZ0eXBlPXh2aWRlbyZrdz1cIiArIGdldFBhcmFtKFwia3dcIilcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGl0bGU6IFwiamFibGVcIixcbiAgICAgICAgdXJsOiBcImhpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU9amFibGUma3c9XCIgKyBnZXRQYXJhbShcImt3XCIpXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpdGxlOiBcInduYWNnXCIsXG4gICAgICAgIHVybDogXCJoaWtlcjovL3BhZ2Uvc2VhcmNoP3A9I25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5I2Z5cGFnZSZ0eXBlPXduYWNnJmt3PVwiICsgZ2V0UGFyYW0oXCJrd1wiKVxuICAgIH0sXG4gICAge1xuICAgICAgICB0aXRsZTogXCJzcGFua2JhbmdcIixcbiAgICAgICAgdXJsOiBcImhpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU9c3BhbmtiYW5nJmt3PVwiICsgZ2V0UGFyYW0oXCJrd1wiKVxuICAgIH0sXG4gICAge1xuICAgICAgICB0aXRsZTogXCJub29kbGVtYWdhemluZVwiLFxuICAgICAgICB1cmw6IFwiaGlrZXI6Ly9wYWdlL3NlYXJjaD9wPSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNmeXBhZ2UmdHlwZT1ub29kbGVtYWdhemluZSjnuq/mkJzntKIpJmt3PVwiICsgZ2V0UGFyYW0oXCJrd1wiKVxuICAgIH0sXG4gICAge1xuICAgICAgICB0aXRsZTogXCJoaXR4aG90XCIsXG4gICAgICAgIHVybDogXCJoaWtlcjovL3BhZ2Uvc2VhcmNoP3A9I25vSGlzdG9yeSMjZnVsbFRoZW1lIyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU9aGl0eGhvdCZrdz1cIiArIGdldFBhcmFtKFwia3dcIilcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdGl0bGU6IFwicG9ybmh1YlwiLFxuICAgICAgICB1cmw6IFwiaGlrZXI6Ly9wYWdlL3NlYXJjaD9wPSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNmeXBhZ2UmdHlwZT1wb3JuaHViJmt3PVwiICsgZ2V0UGFyYW0oXCJrd1wiKVxuICAgIH0sXG4gICAge1xuICAgICAgICB0aXRsZTogXCJlLWhlbnRhaVwiLFxuICAgICAgICB1cmw6IFwiaGlrZXI6Ly9wYWdlL3NlYXJjaD9wPSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNmeXBhZ2UmdHlwZT1laGVudGFpJmt3PVwiICsgZ2V0UGFyYW0oXCJrd1wiKVxuICAgIH1cbl0pIiwiZGV0YWlsX2NvbF90eXBlIjoibW92aWVfMSIsImRldGFpbF9maW5kX3J1bGUiOiIiLCJzZGV0YWlsX2NvbF90eXBlIjoibW92aWVfMSIsInNkZXRhaWxfZmluZF9ydWxlIjoiIiwidWEiOiJtb2JpbGUiLCJwcmVSdWxlIjoibGV0IGRheSA9IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpICsgJyc7XG5sZXQgb2xkID0gcmVhZEZpbGUoXCJkYXkudHh0XCIsIDApO1xuaWYgKG9sZCAhPSBkYXkpIHtcbiAgICB0b2FzdCgn5q2j5Zyo5qOA5p+l5q+P5pel5pu05paw77yB77yB77yBJyk7XG4gICAgZXZhbFByaXZhdGVKUygna2gva1EwUmthSmFWYm5QaG9sSVJ4KzAzeGxKclhSRkIvcHdrTVZxODYveEUwaFdhUlN3SVZGaHI0blRvYXRVc21HSFNhRUhYaEY0YTA2NXp1TVhaR1U3YkhOc2lSRTlDNDdrSWtXVVRkWFNMWU1PSHFVU01WdW5PaE14dHpNWDInKTtcbiAgICB2YXIgdSA9IHBkZmgoaHRtbCwgJ2JvZHkmJmgzJiZUZXh0Jyk7XG4gICAgdmFyIG4gPSBbXTtcbiAgICB2YXIgaDQgPSBwZGZhKGh0bWwsICdib2R5JiZoNCcpO1xuICAgIGZvciAobGV0IGogaW4gaDQpIHtcbiAgICAgICAgbi5wdXNoKHBkZmgoaDRbal0sICdoNCYmVGV4dCcpKVxuICAgIH1cbiAgICBpZiAodSAhPSBNWV9SVUxFLnZlcnNpb24pIHtcbiAgICAgICAgZXZhbFByaXZhdGVKUygnMnpJN0t0aU9KVlhNVDdOdWVKSzI0ZTAzeGxKclhSRkIvcHdrTVZxODYveEUwaFdhUlN3SVZGaHI0blRvYXRVc21HSFNhRUhYaEY0YTA2NXp1TVhaR1VIQi9RMkRuK1EyVDBzNjR2OTIyQTliL1diYTdxMG1ZdzRWMnlwRmZ0NjJnU0pHcmJ3T3JhZUFoT2NDQWVna3NnPT0nKTtcbiAgICAgICAgY29uZmlybSh7XG4gICAgICAgICAgICB0aXRsZTogXCLmm7TmlrDlhoXlrrlcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IG4uam9pbihcIlxcblwiKSxcbiAgICAgICAgICAgIGNvbmZpcm06ICQudG9TdHJpbmcoKGRheSwgaHJlZikgPT4ge1xuICAgICAgICAgICAgICAgIHNhdmVGaWxlKFwiZGF5LnR4dFwiLCBkYXksIDApO1xuICAgICAgICAgICAgICAgIHJldHVybiBocmVmXG4gICAgICAgICAgICB9LCBkYXksIGhyZWYpLFxuICAgICAgICAgICAgY2FuY2VsOiAkLnRvU3RyaW5nKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0b2FzdChcIuivt+WvvOWFpeaWsOeJiOacrFwiKTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICAgICAgc2V0UmVzdWx0KFtdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0b2FzdChcIuW9k+WJjeaYr+acgOaWsOeJiO+8jOaBreWWnOaBreWWnFwiKTtcbiAgICAgICAgc2F2ZUZpbGUoXCJkYXkudHh0XCIsIGRheSwgMCk7XG4gICAgfVxufVxuLy/mr4/lpKnmo4DmtYvkuIDpgY3mm7TmlrAiLCJwYWdlcyI6Ilt7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiMS7liqjmvKvliIbnsbtcIixcInBhdGhcIjpcImNhcnRvb25cIixcInJ1bGVcIjpcImxldCBkYXRhVHlwZSA9IGdldFZhcihcXFwiV2FyZWhvdXNlLnR5cGVcXFwiLCBcXFwi5YWo6YOoXFxcIik7XFxubGV0IG9yZGVyID0gZ2V0VmFyKFxcXCJXYXJlaG91c2Uub3JkZXJcXFwiLCBcXFwi5YWo6YOoXFxcIik7XFxubGV0IHNvcnQgPSBnZXRWYXIoXFxcIldhcmVob3VzZS5zb3J0XFxcIiwgXFxcIlxcXCIpO1xcbmxldCBnb29kID0gZ2V0VmFyKFxcXCJXYXJlaG91c2UuZ29vZFxcXCIsIFxcXCJcXFwiKTtcXG5sZXQgaHJlZiA9ICdodHRwczovL2hhbmltZTEubWUvc2VhcmNoP3F1ZXJ5PScgKyBnb29kICsgJyZwYWdlPScgKyBwYWdlICsgJyZnZW5yZT0nICsgZGF0YVR5cGUgKyAnJnNvcnQ9JyArIG9yZGVyICsgJyZ5ZWFyPScgKyBzb3J0O1xcbmV2YWwoSlNPTi5wYXJzZShyZXF1ZXN0KCdoaWtlcjovL3BhZ2UvY29tbW9uJykpLnJ1bGUpO1xcbmlmIChwYWdlID09IDEpIHtcXG4gICAgaWYgKOW9k+WJjeaKmOWPoOeKtuaAgSA9PSBcXFwiMFxcXCIpIHtcXG4gICAgICAgIHRhYihbXFxuICAgICAgICAgICAgW1xcXCLlhajpg6hcXFwiLCBcXFwiXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLnhKHnorxcXFwiLCBcXFwi54Sh56K8XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCJBSeino+eivFxcXCIsIFxcXCJBSeino+eivFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5Lit5paH5a2X5bmVXFxcIiwgXFxcIuS4reaWh+Wtl+W5lVxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwiMTA4MHBcXFwiLCBcXFwiMTA4MHBcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIjYwRlBTXFxcIiwgXFxcIjYwRlBTXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLov5HopqpcXFwiLCBcXFwi6L+R6KaqXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLlp5BcXFwiLCBcXFwi5aeQXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLlprlcXFwiLCBcXFwi5aa5XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLmr41cXFwiLCBcXFwi5q+NXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLlpbPlhZJcXFwiLCBcXFwi5aWz5YWSXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLluKvnlJ9cXFwiLCBcXFwi5bir55SfXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLmg4XkvrZcXFwiLCBcXFwi5oOF5L62XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLpnZLmooXnq7nppqxcXFwiLCBcXFwi6Z2S5qKF56u56aasXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCJKS1xcXCIsIFxcXCJKS1xcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi6JmV5aWzXFxcIiwgXFxcIuiZleWls1xcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5b6h5aeQXFxcIiwgXFxcIuW+oeWnkFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi54af5aWzXFxcIiwgXFxcIueGn+Wls1xcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5Lq65aa7XFxcIiwgXFxcIuS6uuWmu1xcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi6ICB5birXFxcIiwgXFxcIuiAgeW4q1xcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5aWz6Yar6K235aOrXFxcIiwgXFxcIuWls+mGq+itt+Wjq1xcXCJdLFxcbiAgICAgICAgICAgIFtcXFwiT0xcXFwiLCBcXFwiT0xcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWkp+Wwj+WnkFxcXCIsIFxcXCLlpKflsI/lp5BcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWBtuWDj1xcXCIsIFxcXCLlgbblg49cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWls+WDlVxcXCIsIFxcXCLlpbPlg5VcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuW3q+Wls1xcXCIsIFxcXCLlt6vlpbNcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuS/ruWls1xcXCIsIFxcXCLkv67lpbNcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIumiqOS/l+WomFxcXCIsIFxcXCLpoqjkv5flqJhcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWFrOS4u1xcXCIsIFxcXCLlhazkuLtcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWls+aIsOWjq1xcXCIsIFxcXCLlpbPmiLDlo6tcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIumtlOazleWwkeWls1xcXCIsIFxcXCLprZTms5XlsJHlpbNcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIueVsOeoruaXj1xcXCIsIFxcXCLnlbDnqK7ml49cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWmlueyvlxcXCIsIFxcXCLlppbnsr5cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIumtlOeJqeWomFxcXCIsIFxcXCLprZTnianlqJhcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIueNuOWomFxcXCIsIFxcXCLnjbjlqJhcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIueip+axoFxcXCIsIFxcXCLnoqfmsaBcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIueXtOWls1xcXCIsIFxcXCLnl7TlpbNcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuS4jeiJr+WwkeWls1xcXCIsIFxcXCLkuI3oia/lsJHlpbNcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWCsuWsjFxcXCIsIFxcXCLlgrLlrIxcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIueXheWsjFxcXCIsIFxcXCLnl4XlrIxcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIueEoeWPo1xcXCIsIFxcXCLnhKHlj6NcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWBveWomFxcXCIsIFxcXCLlgb3lqJhcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuaJtuS7llxcXCIsIFxcXCLmibbku5ZcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuefremrrlxcXCIsIFxcXCLnn63pq65cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIummrOWwvlxcXCIsIFxcXCLppqzlsL5cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIumbmemmrOWwvlxcXCIsIFxcXCLpm5nppqzlsL5cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuW3qOS5s1xcXCIsIFxcXCLlt6jkubNcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuiyp+S5s1xcXCIsIFxcXCLosqfkubNcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIum7keearuiGmlxcXCIsIFxcXCLpu5Hnmq7ohppcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuecvOmPoeWomFxcXCIsIFxcXCLnnLzpj6HlqJhcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIueNuOiAs1xcXCIsIFxcXCLnjbjogLNcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIue+juS6uueXo1xcXCIsIFxcXCLnvo7kurrnl6NcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuiCjOiCieWls1xcXCIsIFxcXCLogozogonlpbNcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIueZveiZjlxcXCIsIFxcXCLnmb3omY5cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWkp+WxjFxcXCIsIFxcXCLlpKflsYxcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuawtOaJi+acjVxcXCIsIFxcXCLmsLTmiYvmnI1cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIumrlOaTjeacjVxcXCIsIFxcXCLpq5Tmk43mnI1cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuazs+ijnVxcXCIsIFxcXCLms7Poo51cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuavlOWfuuWwvFxcXCIsIFxcXCLmr5Tln7rlsLxcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWSjOacjVxcXCIsIFxcXCLlkozmnI1cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWFlOWls+mDjlxcXCIsIFxcXCLlhZTlpbPpg45cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWcjeijmVxcXCIsIFxcXCLlnI3oo5lcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWVpuWVpumailxcXCIsIFxcXCLllabllabpmopcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuaXl+iijVxcXCIsIFxcXCLml5fooo1cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIue1suilqlxcXCIsIFxcXCLntbLopapcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWQiuilquW4tlxcXCIsIFxcXCLlkIroparluLZcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIueGseikslxcXCIsIFxcXCLnhrHopLJcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIui/t+S9oOijmVxcXCIsIFxcXCLov7fkvaDoo5lcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuaAp+aEn+WFp+iho1xcXCIsIFxcXCLmgKfmhJ/lhafooaNcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuS4geWtl+ikslxcXCIsIFxcXCLkuIHlrZfopLJcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIumrmOi3n+mei1xcXCIsIFxcXCLpq5jot5/pnotcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIua3q+e0i1xcXCIsIFxcXCLmt6vntItcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIue0lOaEm1xcXCIsIFxcXCLntJTmhJtcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuaIgOaEm+WWnOWKh1xcXCIsIFxcXCLmiIDmhJvllpzliodcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuW+jOWurlxcXCIsIFxcXCLlvozlrq5cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIumWi+Wkp+i7ilxcXCIsIFxcXCLplovlpKfou4pcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWFrOecvuWgtOWQiFxcXCIsIFxcXCLlhaznnL7loLTlkIhcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIk5UUlxcXCIsIFxcXCJOVFJcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIueyvuelnuaOp+WItlxcXCIsIFxcXCLnsr7npZ7mjqfliLZcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuiXpeeJqVxcXCIsIFxcXCLol6XnialcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIueXtOa8olxcXCIsIFxcXCLnl7TmvKJcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIumYv+WYv+mhj1xcXCIsIFxcXCLpmL/lmL/poY9cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIueyvuelnuW0qea9sFxcXCIsIFxcXCLnsr7npZ7ltKnmvbBcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIueNteWlh1xcXCIsIFxcXCLnjbXlpYdcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIkJEU01cXFwiLCBcXFwiQkRTTVxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi57aR57aBXFxcIiwgXFxcIue2kee2gVxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi55y8572pXFxcIiwgXFxcIuecvOe9qVxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi6aCF5ZyIXFxcIiwgXFxcIumgheWciFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi6Kq/5pWZXFxcIiwgXFxcIuiqv+aVmVxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi55Ww54mp5o+S5YWlXFxcIiwgXFxcIueVsOeJqeaPkuWFpVxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi6IKJ5L6/5ZmoXFxcIiwgXFxcIuiCieS+v+WZqFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi6IOD5Ye4XFxcIiwgXFxcIuiDg+WHuFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5by35Yi2XFxcIiwgXFxcIuW8t+WItlxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi6YCG5by35Yi2XFxcIiwgXFxcIumAhuW8t+WItlxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5aWz546L5qijXFxcIiwgXFxcIuWls+eOi+aoo1xcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5q+N5aWz5Li8XFxcIiwgXFxcIuavjeWls+S4vFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5aeQ5aa55Li8XFxcIiwgXFxcIuWnkOWmueS4vFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5YeM6L6xXFxcIiwgXFxcIuWHjOi+sVxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5Ye66LuMXFxcIiwgXFxcIuWHuui7jFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5pSd5b2xXFxcIiwgXFxcIuaUneW9sVxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5oCn6L2J5o+bXFxcIiwgXFxcIuaAp+i9ieaPm1xcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi55m+5ZCIXFxcIiwgXFxcIueZvuWQiFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi6IC9576OXFxcIiwgXFxcIuiAvee+jlxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi55Ww5LiW55WMXFxcIiwgXFxcIueVsOS4lueVjFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5oCq5424XFxcIiwgXFxcIuaAqueNuFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5LiW55WM5pyr5pelXFxcIiwgXFxcIuS4lueVjOacq+aXpVxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5omL5LqkXFxcIiwgXFxcIuaJi+S6pFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5oyH5LqkXFxcIiwgXFxcIuaMh+S6pFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5Lmz5LqkXFxcIiwgXFxcIuS5s+S6pFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi6IKb5LqkXFxcIiwgXFxcIuiCm+S6pFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi6IWz5LqkXFxcIiwgXFxcIuiFs+S6pFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwi5ouz5LqkXFxcIiwgXFxcIuaLs+S6pFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwiM1BcXFwiLCBcXFwiM1BcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIue+pOS6pFxcXCIsIFxcXCLnvqTkuqRcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWPo+S6pFxcXCIsIFxcXCLlj6PkuqRcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWPo+eIhlxcXCIsIFxcXCLlj6PniIZcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWQnueyvlxcXCIsIFxcXCLlkJ7nsr5cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuiIlOibi+ibi1xcXCIsIFxcXCLoiJTom4vom4tcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuiIlOeptFxcXCIsIFxcXCLoiJTnqbRcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIjY5XFxcIiwgXFxcIjY5XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLoh6rmhbBcXFwiLCBcXFwi6Ieq5oWwXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLohYvmr5tcXFwiLCBcXFwi6IWL5q+bXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLohYvkuqRcXFwiLCBcXFwi6IWL5LqkXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLoiJTohYvkuItcXFwiLCBcXFwi6IiU6IWL5LiLXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLlhaflsIRcXFwiLCBcXFwi5YWn5bCEXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLpoY/lsIRcXFwiLCBcXFwi6aGP5bCEXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLpm5nmtJ7pvYrkuItcXFwiLCBcXFwi6ZuZ5rSe6b2K5LiLXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLmh7flrZVcXFwiLCBcXFwi5oe35a2VXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLlmbTlpbZcXFwiLCBcXFwi5Zm05aW2XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLmlL7lsL9cXFwiLCBcXFwi5pS+5bC/XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLmjpLkvr9cXFwiLCBcXFwi5o6S5L6/XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLpoY/pnaLpqI7kuZhcXFwiLCBcXFwi6aGP6Z2i6aiO5LmYXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLou4rpnIdcXFwiLCBcXFwi6LuK6ZyHXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLmgKfnjqnlhbdcXFwiLCBcXFwi5oCn546p5YW3XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLmr5Lpvo3pkb1cXFwiLCBcXFwi5q+S6b6N6ZG9XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLop7jmiYtcXFwiLCBcXFwi6Ke45omLXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLpoLjmiYvmnrdcXFwiLCBcXFwi6aC45omL5p63XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLmlrDnlarpooTlkYpcXFwiLCBcXFwi5paw55Wq6aKE5ZGKXFxcIl1cXG4gICAgICAgIF0sIFxcXCJXYXJlaG91c2UuZ29vZFxcXCIsIGdvb2QpO1xcbiAgICB9XFxufVxcbmV2YWwoSlNPTi5wYXJzZShyZXF1ZXN0KCdoaWtlcjovL3BhZ2UvY29tbW9uangnKSkucnVsZSk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCIxLuWKqOa8q+S6jOe6p+ino+aekFwiLFwicGF0aFwiOlwiamlleGlcIixcInJ1bGVcIjpcImpzOlxcbnZhciBkID0gW107XFxudmFyIGh0bWwgPSBmZXRjaChNWV9VUkwsIHtcXG4gICAgaGVhZGVyczoge1xcbiAgICAgICAgQ29va2llOiByZWFkRmlsZShcXFwiQ29va2llLnR4dFxcXCIsIDApXFxuICAgIH0sXFxufSlcXG5cXG5mdW5jdGlvbiBwbGF5ZXIoVXJsKSB7XFxuICAgIHJldHVybiAkKFVybCkubGF6eVJ1bGUoKCkgPT4ge1xcbiAgICAgICAgdmFyIGh0bWwgPSBmZXRjaChpbnB1dCwge1xcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcXG4gICAgICAgICAgICAgICAgQ29va2llOiByZWFkRmlsZShcXFwiQ29va2llLnR4dFxcXCIsIDApXFxuICAgICAgICAgICAgfSxcXG4gICAgICAgIH0pO1xcbiAgICAgICAgcmV0dXJuIHBkZmgoaHRtbCwgJyN2aWRlby1zZCYmdmFsdWUnKVxcbiAgICB9KVxcbn0gLy/op6PmnpBcXG5cXG5zZXRQYWdlVGl0bGUoJycpO1xcbnZhciBwaWMgPSBwZGZoKGh0bWwsICcuZGVza3RvcC1pbmxpbmUtbW9iaWxlLWJsb2NrJiZpbWcsMCYmc3JjJyk7XFxudmFyIOagh+mimCA9IHBkZmgoaHRtbCwgJyN2aWRlby1wbGF5bGlzdC13cmFwcGVyJiZoNCYmVGV4dCcpO1xcbnZhciDmj4/ov7AgPSAn57G75Z6LOicgKyBwZGZoKGh0bWwsICcuZGVza3RvcC1pbmxpbmUtbW9iaWxlLWJsb2NrJiYuaGlkZGVuLXhzJiZUZXh0Jyk7XFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6ICfigJjigJjigJnigJk8Zm9udCBjb2xvcj1cXFwiYmxhY2tcXFwiPuS9nOiAhS/kvZzlk4HlkI3vvJonICsgJ1xcXFxuJyArIOagh+mimCArICc8L2ZvbnQ+JyxcXG4gICAgdXJsOiBwaWMsXFxuICAgIGNvbF90eXBlOiBcXFwibW92aWVfMV92ZXJ0aWNhbF9waWNfYmx1clxcXCIsXFxuICAgIGRlc2M6ICfigJjigJjigJnigJk8Zm9udCBjb2xvcj1cXFwiYmxhY2tcXFwiPicgKyDmj4/ov7AgKyAnPC9mb250PicsXFxuICAgIHBpY191cmw6IHBpYyxcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIGdyYWRpZW50OiB0cnVlXFxuICAgIH1cXG59KTtcXG5cXG5cXG5sZXQgY29udGVudHMgPSBwZGZoKGh0bWwsICcudmlkZW8tY2FwdGlvbi10ZXh0JiZUZXh0Jyk7XFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6ICfigJjigJjigJnigJk8Zm9udCBjb2xvcj1cXFwiIzA5OEFDMVxcXCI+5Ymn5oOF566A5LuLPC9mb250PicsXFxuICAgIGRlc2M6ICfigJjigJjigJnigJk8Zm9udCBjb2xvcj1cXFwiYmxhY2tcXFwiPicgKyBjb250ZW50cy5zdWJzdHIoMCwgNTApICsgJzwvZm9udD4nICsgJzxzbWFsbD48Zm9udCBjb2xvcj1cXFwicmVkXFxcIj7ngrnlh7vmn6XnnIvor6bmg4U8L2ZvbnQ+PC9zbWFsbD4nLFxcbiAgICBjb2xfdHlwZTogJ3RleHRfMScsXFxuICAgIGV4dHJhOiB7XFxuICAgICAgICBsaW5lVmlzaWJsZTogZmFsc2VcXG4gICAgfSxcXG4gICAgdXJsOiAkKCkucnVsZSgodGV4dCkgPT4ge1xcbiAgICAgICAgc2V0UmVzdWx0KFt7XFxuICAgICAgICAgICAgdGl0bGU6IHRleHQsXFxuICAgICAgICAgICAgY29sX3R5cGU6ICdsb25nX3RleHQnLFxcbiAgICAgICAgfV0pXFxuICAgIH0sIGNvbnRlbnRzKVxcbn0pO1xcblxcbmxldCB0ID0gcGRmaChodG1sLCAnI3ZpZGVvLXRpdGxlJiZ2YWx1ZScpLnJlcGxhY2UoXFxcIiAoemgtQ0hTKVxcXCIsIFxcXCJcXFwiKTtcXG5kLnB1c2goe1xcbiAgICB0aXRsZTogJ+KAmOKAmOKAmeKAmTxzbWFsbD48Zm9udCBjb2xvcj1cXFwicmVkXFxcIj7ngrnlh7vmkq3mlL7wn5GJ8J+PuzwvZm9udD48L3NtYWxsPicsXFxuICAgIHVybDogJ3RvYXN0Oi8v54K55LqG5Lmf5rKh55SoJyxcXG4gICAgY29sX3R5cGU6IFxcXCJzY3JvbGxfYnV0dG9uXFxcIixcXG59LCB7XFxuICAgIHVybDogcGRmaChodG1sLCAnI3ZpZGVvLXNkJiZ2YWx1ZScpLFxcbiAgICB0aXRsZTogJ+KAmOKAmOKAmeKAmTxmb250IGNvbG9yPVxcXCIjZmJhNDE0XFxcIj4nICsgdCArICc8L2ZvbnQ+JyxcXG4gICAgY29sX3R5cGU6IFxcXCJzY3JvbGxfYnV0dG9uXFxcIixcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIGNsczogJ3BsYXlsaXN0IHIxJyxcXG4gICAgfVxcbn0sIHtcXG4gICAgY29sX3R5cGU6IFxcXCJibGFua19ibG9ja1xcXCJcXG59KTtcXG5cXG52YXIgY29taWMgPSBwZGZhKGh0bWwsICdib2R5JiYjdmlkZW8tY29taWMtYnRuJyk7XFxuaWYgKGNvbWljLmxlbmd0aCA+IDApIHtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBcXFwi5ryr55S75Y6f5L2cXFxcIixcXG4gICAgICAgIHVybDogJ2hpa2VyOi8vcGFnZS9jb21pY2ppZXhpP3VybD0nICsgcGRmaChodG1sLCAnLnZpZGVvLWJ1dHRvbnMtd3JhcHBlciYmYSYmaHJlZicpLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJzY3JvbGxfYnV0dG9uXFxcIlxcbiAgICB9LCB7XFxuICAgICAgICBjb2xfdHlwZTogXFxcImJsYW5rX2Jsb2NrXFxcIlxcbiAgICB9KTtcXG59XFxuXFxudmFyIGNvbyA9IHBkZmEoaHRtbCwgJ2JvZHktLS5zaW5nbGUtdmlkZW8tdGFnLC0xLS0uc2luZ2xlLXZpZGVvLXRhZywtMSYmLnNpbmdsZS12aWRlby10YWcnKTtcXG5mb3IgKHZhciBpIGluIGNvbykge1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IHBkZmgoY29vW2ldLCAnVGV4dCcpLFxcbiAgICAgICAgdXJsOiBcXFwiaGlrZXI6Ly9wYWdlL3NlYXJjaD9wPSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNmeXBhZ2UmdHlwZT1oYW5pbWUx5Yqo5ryrJmt3PVxcXCIgKyBwZGZoKGNvb1tpXSwgJ1RleHQnKSxcXG4gICAgICAgIGNvbF90eXBlOiAnc2Nyb2xsX2J1dHRvbidcXG4gICAgfSlcXG59XFxuXFxudmFyIGxpc3QgPSBwZGZhKGh0bWwsICcjcGxheWxpc3Qtc2Nyb2xsJiYucmVsYXRlZC13YXRjaC13cmFwJykucmV2ZXJzZSgpO1xcbmZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICB2YXIgaW1nID0gcGRmaChsaXN0W2pdLCAnaW1nLDEmJnNyYycpLnJlcGxhY2UoXFxcImwuanBnXFxcIiwgXFxcImguanBnXFxcIik7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogcGRmaChsaXN0W2pdLCAnaW1nLDEmJmFsdCcpLFxcbiAgICAgICAgZGVzYzogXFxcIuingueci+asoeaVsO+8mlxcXCIgKyBwZGZoKGxpc3Rbal0sICcuY2FyZC1tb2JpbGUtZHVyYXRpb24sLTEmJlRleHQnKSArIFxcXCIgfCDml7bplb/vvJpcXFwiICsgcGRmaChsaXN0W2pdLCAnLmNhcmQtbW9iaWxlLWR1cmF0aW9uJiZUZXh0JyksXFxuICAgICAgICBwaWNfdXJsOiBpbWcsXFxuICAgICAgICB1cmw6IHBsYXllcihwZGZoKGxpc3Rbal0sICdhJiZocmVmJykpLFxcbiAgICAgICAgY29sX3R5cGU6ICdtb3ZpZV8xX2xlZnRfcGljJyxcXG4gICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgbGluZVZpc2libGU6IGZhbHNlLFxcbiAgICAgICAgfVxcbiAgICB9KVxcbn1cXG5zZXRSZXN1bHQoZCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCIxLua8q+eUu+WIhuexu1wiLFwicGF0aFwiOlwiY29taWNcIixcInJ1bGVcIjpcImxldCBkYXRhVHlwZSA9IGdldFZhcihcXFwiV2FyZWhvdXNlLnR5cGVcXFwiLCBcXFwiXFxcIik7XFxubGV0IGhyZWYgPSAnaHR0cHM6Ly9oYW5pbWUxLm1lL2NvbWljcy9zZWFyY2g/c29ydD0nICsgZGF0YVR5cGUgKyAnJnBhZ2U9JyArIHBhZ2U7XFxuZXZhbChKU09OLnBhcnNlKHJlcXVlc3QoJ2hpa2VyOi8vcGFnZS9jb21pY2d0JykpLnJ1bGUpXCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCIxLua8q+eUu+S6jOe6p+ino+aekFwiLFwicGF0aFwiOlwiY29taWNqaWV4aVwiLFwicnVsZVwiOlwianM6XFxudmFyIGQgPSBbXTtcXG52YXIgaHRtbCA9IGZldGNoKE1ZX1VSTCwge1xcbiAgICBoZWFkZXJzOiB7XFxuICAgICAgICBDb29raWU6IHJlYWRGaWxlKFxcXCJDb29raWUudHh0XFxcIiwgMClcXG4gICAgfSxcXG59KVxcblxcbnZhciB0aXRsZSA9IHBkZmgoaHRtbCwgJy5jb21pY3MtbWV0YWRhdGEtdG9wLXJvdyYmVGV4dCcpO1xcbnNldFBhZ2VUaXRsZSh0aXRsZSk7XFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6ICfkvZzogIUv5L2c5ZOB5ZCN77yaJyArICdcXFxcbicgKyB0aXRsZSxcXG4gICAgdXJsOiBwZGZoKGh0bWwsICcuY29sLW1kLTQmJmltZyYmZGF0YS1zcmNzZXQnKSxcXG4gICAgY29sX3R5cGU6IFxcXCJtb3ZpZV8xX3ZlcnRpY2FsX3BpY19ibHVyXFxcIixcXG4gICAgZGVzYzogcGRmaChodG1sLCAnLmNvbC1tZC04JiZoNSwtMiYmVGV4dCcpICsgJ1xcXFxuJyArIHBkZmgoaHRtbCwgJy5jb2wtbWQtOCYmaDUsLTEmJlRleHQnKSxcXG4gICAgcGljX3VybDogcGRmaChodG1sLCAnLmNvbC1tZC00JiZpbWcmJnNyYycpLFxcbn0pO1xcblxcbmZ1bmN0aW9uIOino+aekCgpIHtcXG4gICAgdmFyIHBpY3MgPSBbXTtcXG4gICAgdmFyIGh0bWwgPSBmZXRjaChpbnB1dCwge1xcbiAgICAgICAgaGVhZGVyczoge1xcbiAgICAgICAgICAgIENvb2tpZTogcmVhZEZpbGUoXFxcIkNvb2tpZS50eHRcXFwiLCAwKVxcbiAgICAgICAgfSxcXG4gICAgfSk7XFxuICAgIHZhciBsaXN0MSA9IHBkZmEoaHRtbCwgJy5jb21pYy1yb3dzLXdyYXBwZXImJi5ob3Zlci1saWdodGVyJyk7XFxuICAgIGZvciAodmFyIGogaW4gbGlzdDEpIHtcXG4gICAgICAgIHBpY3MucHVzaChwZGZoKGxpc3QxW2pdLCAnaW1nJiZkYXRhLXNyY3NldCcpLnJlcGxhY2UoXFxcInQublxcXCIsIFxcXCJpLm5cXFwiKS5yZXBsYWNlKFxcXCJ0LmpcXFwiLCBcXFwiLmpcXFwiKS5yZXBsYWNlKFxcXCJ0LnBcXFwiLCBcXFwiLnBcXFwiKSlcXG4gICAgfVxcbiAgICByZXR1cm4gXFxcInBpY3M6Ly9cXFwiICsgcGljcy5qb2luKFxcXCImJlxcXCIpO1xcbn1cXG5sZXQgZG93bmxvYWRsYXp5ID0gJC50b1N0cmluZyjop6PmnpApO1xcbnZhciBkb0xpc3QgPSBbXTtcXG5kLnB1c2goe1xcbiAgICB0aXRsZTogJ+KAnOKAnOKAneKAnTxiPjxzcGFuIHN0eWxlPVxcXCJjb2xvcjogIzFhYWQxOVxcXCI+8J+TpeS4i+i9vTwvc3Bhbj48L2I+JyxcXG4gICAgdXJsOiBcXFwiaGlrZXI6Ly9wYWdlL2Rvd25sb2FkLnZpZXcjbm9SZWNvcmRIaXN0b3J5IyNub1JlZnJlc2gjP3J1bGU95p+Q6IGa5ZCIXFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzJcXFwiLFxcbiAgICBleHRyYToge1xcbiAgICAgICAgY2hhcHRlckxpc3Q6IGRvTGlzdCxcXG4gICAgICAgIGluZm86IHtcXG4gICAgICAgICAgICBib29rTmFtZTogdGl0bGUsXFxuICAgICAgICAgICAgcnVsZU5hbWU6IFxcXCJoYW5pbWUx5ryr55S7XFxcIixcXG4gICAgICAgICAgICBib29rVG9wUGljOiBwZGZoKGh0bWwsICcuY29taWMtcm93cy13cmFwcGVyJiYuaG92ZXItbGlnaHRlciYmaW1nJiZkYXRhLXNyY3NldCcpLFxcbiAgICAgICAgICAgIHBhcnNlQ29kZTogZG93bmxvYWRsYXp5XFxuICAgICAgICB9LFxcbiAgICAgICAgZGVmYXVsdFZpZXc6IFxcXCIxXFxcIlxcbiAgICB9XFxufSk7XFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6ICfigJjigJjigJnigJk8c3Ryb25nPjxmb250IGNvbG9yPSBcXFwiIzA5OEFDMVxcXCI+JyArIFxcXCLwn5ez5Lmm5p62XFxcIiArICc8L2Zyb250Pjwvc3Ryb25nPicsXFxuICAgIHVybDogXFxcImhpa2VyOi8vcGFnZS9Cb29rcmFjay52aWV3P3J1bGU95p+Q6IGa5ZCIJnJ1bGVOYW1lPWhhbmltZTHmvKvnlLtcXFwiLFxcbiAgICBjb2xfdHlwZTogXFxcInRleHRfMlxcXCIsXFxufSk7XFxuZG9MaXN0LnB1c2goe1xcbiAgICB0aXRsZTogXFxcIuesrOS4gOivnVxcXCIsXFxuICAgIHVybDogTVlfVVJMLFxcbn0pXFxuc2V0U2VhcmNoTW9kZSgwKTtcXG52YXIgdGFncyA9IHBkZmEoaHRtbCwgJy5jb2wtbWQtOC0tYSwtMSYmYScpO1xcbmZvciAodmFyIGkgaW4gdGFncykge1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IHBkZmgodGFnc1tpXSwgJ2EmJlRleHQnKSxcXG4gICAgICAgIHVybDogXFxcImhpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU9aGFuaW1lMea8q+eUuyZrdz1cXFwiICsgcGRmaCh0YWdzW2ldLCAnYSYmVGV4dCcpLFxcbiAgICAgICAgY29sX3R5cGU6ICdzY3JvbGxfYnV0dG9uJ1xcbiAgICB9KVxcbn1cXG52YXIgcGljcyA9IFtdO1xcbnZhciBsaXN0MSA9IHBkZmEoaHRtbCwgJy5jb21pYy1yb3dzLXdyYXBwZXImJi5ob3Zlci1saWdodGVyJyk7XFxuZm9yICh2YXIgaiBpbiBsaXN0MSkge1xcbiAgICBwaWNzLnB1c2gocGRmaChsaXN0MVtqXSwgJ2ltZyYmZGF0YS1zcmNzZXQnKS5yZXBsYWNlKFxcXCJ0Lm5cXFwiLCBcXFwiaS5uXFxcIikucmVwbGFjZShcXFwidC5qXFxcIiwgXFxcIi5qXFxcIikucmVwbGFjZShcXFwidC5wXFxcIiwgXFxcIi5wXFxcIikpXFxufVxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwi56ys5LiA6K+dXFxcIixcXG4gICAgdXJsOiBcXFwicGljczovL1xcXCIgKyBwaWNzLmpvaW4oXFxcIiYmXFxcIiksXFxuICAgIGNvbF90eXBlOiAndGV4dF8yJ1xcbn0pXFxuc2V0UmVzdWx0KGQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5pCc57SiXCIsXCJwYXRoXCI6XCJzZWFyY2hcIixcInJ1bGVcIjpcImpzOlxcbnZhciBkID0gW107XFxuY29uc3QgcGFnZSA9IE1ZX1BBR0U7XFxudmFyIGt3ID0gZ2V0UGFyYW0oXFxcImt3XFxcIilcXG52YXIgdHlwZSA9IGdldFBhcmFtKFxcXCJ0eXBlXFxcIilcXG5zZXRQYWdlVGl0bGUoXFxcIuaQnOe0oi0tXFxcIiArIGt3KTtcXG52YXIga3UgPSBnZXRWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIiwgXFxcImhhbmltZTHliqjmvKtcXFwiKTtcXG5hZGRMaXN0ZW5lcignb25DbG9zZScsICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICBjbGVhclZhcihcXFwiV2FyZWhvdXNlLnR5cGVcXFwiKTtcXG59KSk7XFxuXFxuZnVuY3Rpb24gdGFiKGFyciwgdHlwZTEsIGNvbnRyYXN0KSB7XFxuICAgIGZvciAobGV0IGl0ZW0gb2YgYXJyKSB7XFxuICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBpdGVtWzFdID09PSBjb250cmFzdCA/IFxcXCLigJzigJxcXFwiICsgaXRlbVswXSArIFxcXCLigJ3igJ1cXFwiIDogaXRlbVswXSxcXG4gICAgICAgICAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoKGtleSwgdHlwZTEsIGt3KSA9PiB7XFxuICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gXFxcImhpdHhob3RcXFwiKSByZXR1cm4gJ2hpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNmdWxsVGhlbWUjI25vUmVjb3JkSGlzdG9yeSNmeXBhZ2UmdHlwZT1oaXR4aG90Jmt3PScgKyBrdztcXG4gICAgICAgICAgICAgICAgcHV0VmFyKHR5cGUxLCBrZXksIGt3KTtcXG4gICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcbiAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgIH0sIGl0ZW1bMV0sIHR5cGUxKSxcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcInNjcm9sbF9idXR0b25cXFwiXFxuICAgICAgICB9KTtcXG4gICAgfVxcbiAgICBkLnB1c2goe1xcbiAgICAgICAgY29sX3R5cGU6IFxcXCJibGFua19ibG9ja1xcXCJcXG4gICAgfSk7XFxufVxcblxcbmlmIChNWV9QQUdFID09IDEgJiYgdHlwZSA9PSAn5YWo6YOoJykge1xcbiAgICB0YWIoW1xcbiAgICAgICAgW1xcXCJoYW5pbWUx5Yqo5ryrXFxcIiwgXFxcImhhbmltZTHliqjmvKtcXFwiXSxcXG4gICAgICAgIFtcXFwiaGFuaW1lMea8q+eUu1xcXCIsIFxcXCJoYW5pbWUx5ryr55S7XFxcIl0sXFxuICAgICAgICBbXFxcIum6u+ixhlxcXCIsIFxcXCLpurvosYZcXFwiXSxcXG4gICAgICAgIFtcXFwi6bq76LGGY2x1YlxcXCIsIFxcXCLpurvosYZjbHViXFxcIl0sXFxuICAgICAgICBbXFxcIuWwj+m7hOS5plxcXCIsIFxcXCLlsI/pu4TkuaZcXFwiXSxcXG4gICAgICAgIFtcXFwicnVsZTM0dmlkZW9cXFwiLCBcXFwicnVsZTM0dmlkZW9cXFwiXSxcXG4gICAgICAgIFtcXFwieWFuZGVcXFwiLCBcXFwieWFuZGVcXFwiXSxcXG4gICAgICAgIFtcXFwieHZpZGVvXFxcIiwgXFxcInh2aWRlb1xcXCJdLFxcbiAgICAgICAgW1xcXCJqYWJsZVxcXCIsIFxcXCJqYWJsZVxcXCJdLFxcbiAgICAgICAgW1xcXCJwb3JuaHViXFxcIiwgXFxcInBvcm5odWJcXFwiXSxcXG4gICAgICAgIFtcXFwiaGl0eGhvdFxcXCIsIFxcXCJoaXR4aG90XFxcIl0sXFxuICAgICAgICBbXFxcIm5vb2RsZW1hZ2F6aW5lXFxcIiwgXFxcIm5vb2RsZW1hZ2F6aW5lKOe6r+aQnOe0oilcXFwiXSxcXG4gICAgICAgIFtcXFwic3BhbmtiYW5nXFxcIiwgXFxcInNwYW5rYmFuZ1xcXCJdLFxcbiAgICAgICAgW1xcXCJlLWhlbnRhaVxcXCIsIFxcXCJlaGVudGFpXFxcIl0sXFxuICAgICAgICBbXFxcInduYWNnXFxcIiwgXFxcInduYWNnXFxcIl1cXG4gICAgXSwgXFxcIldhcmVob3VzZS50eXBlXFxcIiwga3UpO1xcbn1cXG5pZiAodHlwZSA9PSAnaGFuaW1lMeWKqOa8qycgfHwgKGt1ID09ICdoYW5pbWUx5Yqo5ryrJyAmJiB0eXBlID09ICflhajpg6gnKSkge1xcbiAgICBsZXQgZGF0YVR5cGUgPSBnZXRWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIiwgXFxcIuWFqOmDqFxcXCIpO1xcbiAgICBsZXQgb3JkZXIgPSBnZXRWYXIoXFxcIldhcmVob3VzZS5vcmRlclxcXCIsIFxcXCLlhajpg6hcXFwiKTtcXG4gICAgbGV0IHNvcnQgPSBnZXRWYXIoXFxcIldhcmVob3VzZS5zb3J0XFxcIiwgXFxcIlxcXCIpO1xcbiAgICBsZXQgaHJlZiA9ICdodHRwczovL2hhbmltZTEubWUvc2VhcmNoP3F1ZXJ5PScgKyBrdyArICcmcGFnZT0nICsgcGFnZSArICcmZ2VucmU9JyArIGRhdGFUeXBlICsgJyZzb3J0PScgKyBvcmRlciArICcmeWVhcj0nICsgc29ydDtcXG4gICAgdmFyIGdldFJhbmRvbUNvbG9yID0gZnVuY3Rpb24oKSB7XFxuICAgICAgICByZXR1cm4gJyMnICsgKE1hdGgucmFuZG9tKCkgKiAweGZmZmZmZiA8PCAwKS50b1N0cmluZygxNik7XFxuICAgIH1cXG4gICAgdmFyIGNvbG9yID0gZ2V0UmFuZG9tQ29sb3IoKTtcXG4gICAgZXZhbChKU09OLnBhcnNlKHJlcXVlc3QoJ2hpa2VyOi8vcGFnZS9jb21tb24nKSkucnVsZSk7XFxuICAgIGV2YWwoSlNPTi5wYXJzZShyZXF1ZXN0KCdoaWtlcjovL3BhZ2UvY29tbW9uangnKSkucnVsZSk7XFxufVxcbmlmICh0eXBlID09ICdoYW5pbWUx5ryr55S7JyB8fCBrdSA9PSAnaGFuaW1lMea8q+eUuycpIHtcXG4gICAgbGV0IGRhdGFUeXBlID0gZ2V0VmFyKFxcXCJXYXJlaG91c2UudHlwZVxcXCIsIFxcXCJcXFwiKTtcXG4gICAgbGV0IGhyZWYgPSAnaHR0cHM6Ly9oYW5pbWUxLm1lL2NvbWljcy9zZWFyY2g/c29ydD0nICsgZGF0YVR5cGUgKyAnJnF1ZXJ5PScgKyBrdyArICcmcGFnZT0nICsgcGFnZTtcXG4gICAgZXZhbChKU09OLnBhcnNlKHJlcXVlc3QoJ2hpa2VyOi8vcGFnZS9jb21pY2d0JykpLnJ1bGUpXFxufVxcbmlmICh0eXBlID09ICfpurvosYYnIHx8IGt1ID09ICfpurvosYYnKSB7XFxuICAgIGxldCBocmVmID0gJ2h0dHBzOi8vOTFtZC5tZS9pbmRleC5waHAvdm9kL3NlYXJjaC9wYWdlLycgKyBwYWdlICsgJy93ZC8nICsga3cgKyAnLmh0bWwnO1xcbiAgICB2YXIgaHRtbCA9IGZldGNoKGhyZWYpO1xcblxcbiAgICBmdW5jdGlvbiBwbGF5ZXIoVXJsKSB7XFxuICAgICAgICByZXR1cm4gJChVcmwpLmxhenlSdWxlKCgpID0+IHtcXG4gICAgICAgICAgICB2YXIgaHRtbCA9IGZldGNoKGlucHV0KTtcXG4gICAgICAgICAgICB2YXIgdmlkZW8gPSBwZGZoKGh0bWwsICcjYm9mYW5nX2JveCYmc2NyaXB0JiZIdG1sJykubWF0Y2goL3VybFxcXCI6XFxcIiguKilcXFxcXFxcIixcXFwidXJsX24vKVsxXTtcXG4gICAgICAgICAgICByZXR1cm4gdmlkZW8ucmVwbGFjZSgvXFxcXFxcXFwvZywgXFxcIlxcXCIpO1xcbiAgICAgICAgfSlcXG4gICAgfVxcbiAgICB2YXIgbGlzdCA9IHBhcnNlRG9tRm9yQXJyYXkoaHRtbCwgJy52aWRlby1saXN0JiYudmlkZW8taXRlbScpO1xcbiAgICBmb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IHBhcnNlRG9tRm9ySHRtbChsaXN0W2pdLCAnLnRpdGxlJiZUZXh0JyksXFxuICAgICAgICAgICAgZGVzYzogcGFyc2VEb21Gb3JIdG1sKGxpc3Rbal0sICcudGltZSYmVGV4dCcpLFxcbiAgICAgICAgICAgIHBpY191cmw6IHBhcnNlRG9tKGxpc3Rbal0sICdpbWcmJnNyYycpLFxcbiAgICAgICAgICAgIHVybDogcGxheWVyKCdodHRwczovLzkxbWQubWUnICsgcGRmaChsaXN0W2pdLCAnYSwwJiZocmVmJykpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiAnbW92aWVfMidcXG4gICAgICAgIH0pO1xcbiAgICB9XFxufVxcbmlmICh0eXBlID09ICfpurvosYZjbHViJyB8fCBrdSA9PSAn6bq76LGGY2x1YicpIHtcXG4gICAgbGV0IGhyZWYgPSAnaHR0cHM6Ly9tYWRvdS5jbHViL3BhZ2UvJyArIHBhZ2UgKyAnP3M9JyArIGt3O1xcbiAgICB2YXIgaHRtbCA9IGZldGNoQ29kZUJ5V2ViVmlldyhocmVmKTtcXG5cXG4gICAgZnVuY3Rpb24gcGxheWVyKFVybCkge1xcbiAgICAgICAgcmV0dXJuICQoVXJsKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgICAgICAgdmFyIGh0bWwgPSBmZXRjaChpbnB1dCk7XFxuICAgICAgICAgICAgdmFyIGhyZWYgPSBwZGZoKGh0bWwsICcuYXJ0aWNsZS1jb250ZW50JiZpZnJhbWUmJnNyYycpO1xcbiAgICAgICAgICAgIHZhciBodG1sbCA9IGZldGNoKGhyZWYpO1xcbiAgICAgICAgICAgIHZhciB2aWRlbzEgPSBwZGZoKGh0bWxsLCAnYm9keSYmc2NyaXB0LC0xJiZIdG1sJylcXG4gICAgICAgICAgICB2YXIgdmlkZW8gPSB2aWRlbzEubWF0Y2goL3Rva2VuID0gXFxcIiguKilcXFxcXFxcIjsvKVsxXTtcXG4gICAgICAgICAgICByZXR1cm4gaHJlZi5yZXBsYWNlKFxcXCJzaGFyZVxcXCIsIFxcXCJ2aWRlb3NcXFwiKSArIFxcXCIvaW5kZXgubTN1OD90b2tlbj1cXFwiICsgdmlkZW87XFxuICAgICAgICB9KVxcbiAgICB9XFxuICAgIHZhciBsaXN0ID0gcGFyc2VEb21Gb3JBcnJheShodG1sLCAnLmV4Y2VycHRzJiYuZXhjZXJwdCcpO1xcbiAgICBmb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IHBhcnNlRG9tRm9ySHRtbChsaXN0W2pdLCAnaDImJlRleHQnKSxcXG4gICAgICAgICAgICBwaWNfdXJsOiBwYXJzZURvbShsaXN0W2pdLCAnaW1nJiZkYXRhLXNyYycpLFxcbiAgICAgICAgICAgIHVybDogcGxheWVyKHBkZmgobGlzdFtqXSwgJ2EmJmhyZWYnKSksXFxuICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgYmxvY2tSdWxlczogWycucG5nJywgJy5qcGcnXVxcbiAgICAgICAgICAgIH0sXFxuICAgICAgICAgICAgZGVzYzogcGRmaChsaXN0W2pdLCAnLnBvc3QtdmlldyYmVGV4dCcpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiAnbW92aWVfMicsXFxuICAgICAgICB9KTtcXG4gICAgfVxcbn1cXG5pZiAodHlwZSA9PSAn5bCP6buE5LmmJyB8fCBrdSA9PSAn5bCP6buE5LmmJykge1xcbiAgICBsZXQgaHJlZiA9ICdodHRwczovL3hjaGluYS5jby9waG90b3Mva2V5d29yZC0nICsga3cgKyAnLycgKyBwYWdlICsgJy5odG1sJztcXG4gICAgdmFyIGh0bWwgPSBmZXRjaChocmVmKTtcXG4gICAgdmFyIGxpc3QgPSBwZGZhKGh0bWwsICcubGlzdCYmLml0ZW0nKTtcXG4gICAgZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBwZGZoKGxpc3Rbal0sICdpbWcmJmFsdCcpLFxcbiAgICAgICAgICAgIGRlc2M6IHBkZmgobGlzdFtqXSwgJy50YWcmJlRleHQnKSxcXG4gICAgICAgICAgICBpbWc6IHBkKGxpc3Rbal0sICdpbWcmJnNyYycpLFxcbiAgICAgICAgICAgIHVybDogJ2hpa2VyOi8vcGFnZS/lsI/pu4Tkuabkuoznuqc/dXJsPScgKyAnaHR0cHM6Ly94Y2hpbmEuY28nICsgcGRmaChsaXN0W2pdLCAnYSYmaHJlZicpXFxuICAgICAgICB9KTtcXG4gICAgfVxcbn1cXG5pZiAodHlwZSA9PSAncnVsZTM0dmlkZW8nIHx8IGt1ID09ICdydWxlMzR2aWRlbycpIHtcXG4gICAgbGV0IGhyZWYgPSAnaHR0cHM6Ly9ydWxlMzR2aWRlby5jb20vc2VhcmNoLycgKyBrdyArICcvP21vZGU9YXN5bmMmZnVuY3Rpb249Z2V0X2Jsb2NrJmJsb2NrX2lkPWN1c3RvbV9saXN0X3ZpZGVvc192aWRlb3NfbGlzdF9zZWFyY2gmcT0nICsga3cgKyAnJmNhdGVnb3J5X2lkcz0mc29ydF9ieT1wb3N0X2RhdGUmZnJvbV92aWRlb3M9JyArIHBhZ2UgKyAnJmZyb21fYWxidW1zPScgKyBwYWdlICsgJyZfPTE2NzUzOTQyNTM4MDEnO1xcbiAgICB2YXIgaHRtbCA9IGZldGNoKGhyZWYpO1xcblxcbiAgICBmdW5jdGlvbiBwbGF5ZXIoVXJsKSB7XFxuICAgICAgICByZXR1cm4gJChVcmwpLmxhenlSdWxlKCgpID0+IHtcXG4gICAgICAgICAgICB2YXIgaHRtbCA9IGZldGNoKGlucHV0KTtcXG4gICAgICAgICAgICB2YXIgdmlkZW9zID0gW107XFxuICAgICAgICAgICAgdmFyIHRpdGxlcyA9IFtdO1xcbiAgICAgICAgICAgIHZhciBsaXN0ID0gcGRmYShodG1sLCAnYm9keSYmLnJvdywzJiZhJyk7XFxuICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgICAgICAgICAgICAgIHZpZGVvcy5wdXNoKCdcXFwiJyArIHBkZmgobGlzdFtqXSwgJ2EmJmhyZWYnKSArICdcXFwiJylcXG4gICAgICAgICAgICAgICAgdGl0bGVzLnB1c2goJ1xcXCInICsgcGRmaChsaXN0W2pdLCAnYSYmVGV4dCcpLnJlcGxhY2UoXFxcIk1QNCBcXFwiLCBcXFwiXFxcIikgKyAnXFxcIicpXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIHJldHVybiBcXFwie3VybHM6W1xcXCIgKyB2aWRlb3MgKyBcXFwiXSxuYW1lczpbXFxcIiArIHRpdGxlcyArIFxcXCJdfVxcXCJcXG4gICAgICAgIH0pXFxuICAgIH1cXG4gICAgdmFyIGxpc3QgPSBwYXJzZURvbUZvckFycmF5KGh0bWwsICcudGh1bWJzJiYuaXRlbScpO1xcbiAgICBmb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgICAgIHZhciBsaiA9IHBkZmgobGlzdFtqXSwgJ2EmJmhyZWYnKTtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IHBhcnNlRG9tRm9ySHRtbChsaXN0W2pdLCAnLnRodW1iX3RpdGxlJiZUZXh0JyksXFxuICAgICAgICAgICAgcGljX3VybDogcGFyc2VEb20obGlzdFtqXSwgJ2ltZyYmZGF0YS1vcmlnaW5hbCcpLFxcbiAgICAgICAgICAgIHVybDogcGxheWVyKGxqKSxcXG4gICAgICAgICAgICBkZXNjOiBwZGZoKGxpc3Rbal0sICcuYWRkZWQmJlRleHQnKSxcXG4gICAgICAgICAgICBjb2xfdHlwZTogJ21vdmllXzInLFxcbiAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgIGxvbmdDbGljazogW3tcXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5Yi35pawJyxcXG4gICAgICAgICAgICAgICAgICAgIGpzOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgICAgICB9LCB7XFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+iOt+WPluagh+etvicsXFxuICAgICAgICAgICAgICAgICAgICBqczogJC50b1N0cmluZygodSkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHUpLmxhenlSdWxlKCgpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSBmZXRjaChpbnB1dClcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IEFydGlzdCA9IHBkZmgoaHRtbCwgJ2JvZHkmJi5yb3csMiYmLm5hbWUmJlRleHQnKS5yZXBsYWNlKC8gL2csIFxcXCItXFxcIik7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSBbQXJ0aXN0XTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QgPSBwZGZhKGh0bWwsICdib2R5JiYucm93LDQtLWEsLTEmJmEnKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWcucHVzaChwZGZoKGxpc3Rbal0sICdhJiZUZXh0JykucmVwbGFjZSgvIC9nLCBcXFwiLVxcXCIpKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRhZy5tYXAodiA9PiB2KSkuc2VsZWN0KChuYW1lKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU9cnVsZTM0dmlkZW8ma3c9XFxcIiArIGlucHV0XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICAgICAgICAgIH0sIGxqKVxcbiAgICAgICAgICAgICAgICB9XVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pO1xcbiAgICB9XFxufVxcbmlmICh0eXBlID09ICd5YW5kZScgfHwga3UgPT0gJ3lhbmRlJykge1xcbiAgICBsZXQgaHJlZiA9ICdodHRwczovL3lhbmRlLnJlL3Bvc3Q/dGFncz0nICsga3cgKyAnJnBhZ2U9JyArIHBhZ2U7XFxuICAgIHZhciBodG1sID0gZmV0Y2goaHJlZik7XFxuICAgIHZhciBsaXN0ID0gcGRmYShodG1sLCAnI3Bvc3QtbGlzdC1wb3N0cyYmbGknKTtcXG4gICAgZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgICAgICB2YXIgaW1nID0gJ2h0dHBzOi8veWFuZGUucmUnICsgcGRmaChsaXN0W2pdLCAnYSYmaHJlZicpO1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogcGRmaChsaXN0W2pdLCAnLmRpcmVjdGxpbmstcmVzJiZUZXh0JyksXFxuICAgICAgICAgICAgaW1nOiBwZChsaXN0W2pdLCAnaW1nJiZzcmMnKSxcXG4gICAgICAgICAgICB1cmw6IHBkZmgobGlzdFtqXSwgJ2EsMSYmaHJlZicpICsgJ0BsYXp5UnVsZT0uanM6aW5wdXQnLFxcbiAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgIGxvbmdDbGljazogW3tcXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5Yi35pawJyxcXG4gICAgICAgICAgICAgICAgICAgIGpzOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgICAgICB9LCB7XFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+iOt+WPluagh+etvicsXFxuICAgICAgICAgICAgICAgICAgICBqczogJC50b1N0cmluZygoaW1nKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQoaW1nKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBodG1sID0gZmV0Y2goaW5wdXQpXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSBbXTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QgPSBwZGZhKGh0bWwsICcjdGFnLXNpZGViYXImJmxpJyk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnLnB1c2gocGRmaChsaXN0W2pdLCAnYSwxJiZUZXh0JykucmVwbGFjZSgvIC9nLCBcXFwiX1xcXCIpKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRhZy5tYXAodiA9PiB2KSkuc2VsZWN0KChuYW1lKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU9eWFuZGUma3c9XFxcIiArIGlucHV0XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICAgICAgICAgIH0sIGltZylcXG4gICAgICAgICAgICAgICAgfV1cXG4gICAgICAgICAgICB9XFxuICAgICAgICB9KTtcXG4gICAgfTtcXG59XFxuaWYgKHR5cGUgPT0gJ3h2aWRlbycgfHwga3UgPT0gJ3h2aWRlbycpIHtcXG4gICAgbGV0IGRhdGFUeXBlID0gZ2V0VmFyKFxcXCJXYXJlaG91c2UudHlwZVxcXCIsIFxcXCJhbGxkdXJhdGlvblxcXCIpO1xcbiAgICBsZXQgaHJlZiA9ICdodHRwczovL3d3dy54dmlkZW9zLmNvbS8/az0nICsga3cgKyAnJmR1cmY9JyArIGRhdGFUeXBlICsgJyZwPScgKyBwYWdlO1xcbiAgICBhZGRMaXN0ZW5lcignb25DbG9zZScsICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgY2xlYXJWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIik7XFxuICAgIH0pKTtcXG5cXG4gICAgZnVuY3Rpb24gdGFiKGFyciwgdHlwZSwgY29udHJhc3QpIHtcXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgYXJyKSB7XFxuICAgICAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICAgICAgdGl0bGU6IGl0ZW1bMV0gPT09IGNvbnRyYXN0ID8gXFxcIuKAnOKAnFxcXCIgKyBpdGVtWzBdICsgXFxcIuKAneKAnVxcXCIgOiBpdGVtWzBdLFxcbiAgICAgICAgICAgICAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoKGtleSwgdHlwZSkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgcHV0VmFyKHR5cGUsIGtleSk7XFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgICAgICB9LCBpdGVtWzFdLCB0eXBlKSxcXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJzY3JvbGxfYnV0dG9uXFxcIlxcbiAgICAgICAgICAgIH0pO1xcbiAgICAgICAgfVxcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcImJsYW5rX2Jsb2NrXFxcIlxcbiAgICAgICAgfSk7XFxuICAgIH1cXG4gICAgdmFyIGh0bWwgPSBmZXRjaChocmVmKVxcblxcbiAgICBpZiAocGFnZSA9PSAxKSB7XFxuICAgICAgICB0YWIoW1xcbiAgICAgICAgICAgIFtcXFwi5YWo6YOoXFxcIiwgXFxcImFsbGR1cmF0aW9uXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCIxLTPliIbpkJhcXFwiLCBcXFwiMS0zbWluXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCIzLTEw5YiG6ZCYXFxcIiwgXFxcIjMtMTBtaW5cXFwiXSxcXG4gICAgICAgICAgICBbXFxcIuWkp+aWvDEw5YiG6ZCYXFxcIiwgXFxcIjEwbWluX21vcmVcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIjEwLTIwIOWIhumSn1xcXCIsIFxcXCIxMC0yMG1pblxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwiMjAg5YiG6ZKf5Lul5LiKXFxcIiwgXFxcIjIwbWluX21vcmVcXFwiXVxcbiAgICAgICAgXSwgXFxcIldhcmVob3VzZS50eXBlXFxcIiwgZGF0YVR5cGUpO1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogXFxcIvCflI1cXFwiLFxcbiAgICAgICAgICAgIHVybDogJC50b1N0cmluZygocikgPT4ge1xcbiAgICAgICAgICAgICAgICBwdXRNeVZhcigna2V5d29yZCcsIGlucHV0KTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL3BhZ2Uvc2VhcmNoP3A9I25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5I2Z5cGFnZSZ0eXBlPXh2aWRlbyZrdz1cXFwiICsgaW5wdXQ7XFxuICAgICAgICAgICAgfSwgTVlfUlVMRS50aXRsZSksXFxuICAgICAgICAgICAgZGVzYzogJ+aQnOe0oicsXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJpbnB1dFxcXCJcXG4gICAgICAgIH0pO1xcbiAgICB9XFxuXFxuICAgIGZ1bmN0aW9uIHBsYXllcihVcmwpIHtcXG4gICAgICAgIHJldHVybiAkKFVybCkubGF6eVJ1bGUoKCkgPT4ge1xcbiAgICAgICAgICAgIHZhciBodG1sID0gZmV0Y2goaW5wdXQpO1xcbiAgICAgICAgICAgIHZhciBsaXN0ID0gcGRmYShodG1sLCAnYm9keSYmc2NyaXB0Jyk7XFxuICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgICAgICAgICAgICAgIHZhciB2aWRlbzEgPSBwZGZoKGxpc3Rbal0sICdzY3JpcHQmJkh0bWwnKVxcbiAgICAgICAgICAgICAgICBpZiAodmlkZW8xLmluY2x1ZGVzKCdodG1sNXBsYXllci5zZXRWaWRlb0hMUycpKSB7XFxuICAgICAgICAgICAgICAgICAgICB2YXIgdmlkZW8gPSB2aWRlbzEubWF0Y2goL2h0bWw1cGxheWVyLnNldFZpZGVvSExTXFxcXCgnKC4qKVxcXFwnXFxcXCk7LylbMV07XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmlkZW87XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuICAgICAgICB9KVxcbiAgICB9XFxuICAgIHZhciBsaXN0ID0gcGRmYShodG1sLCAnI2NvbnRlbnQmJi50aHVtYi11bmRlcicpO1xcbiAgICB2YXIgbGlzdDEgPSBwZGZhKGh0bWwsICcjY29udGVudCYmLnRodW1iJyk7XFxuICAgIGZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogcGRmaChsaXN0W2pdLCAnYSYmdGl0bGUnKSxcXG4gICAgICAgICAgICBkZXNjOiBwZGZoKGxpc3QxW2pdLCAnLnZpZGVvLWhkLW1hcmsmJlRleHQnKSxcXG4gICAgICAgICAgICBpbWc6IHBkKGxpc3QxW2pdLCAnaW1nJiZkYXRhLXNyYycpLFxcbiAgICAgICAgICAgIHVybDogcGxheWVyKCdodHRwczovL3d3dy54dmlkZW9zLmNvbScgKyBwZGZoKGxpc3Rbal0sICdhJiZocmVmJykpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiAnbW92aWVfMidcXG4gICAgICAgIH0pO1xcbiAgICB9XFxufVxcbmlmICh0eXBlID09ICdqYWJsZScgfHwga3UgPT0gJ2phYmxlJykge1xcbiAgICBsZXQgaHJlZiA9ICdodHRwczovL2phYmxlLnR2L3NlYXJjaC8nICsga3cgKyAnLz9tb2RlPWFzeW5jJmZ1bmN0aW9uPWdldF9ibG9jayZibG9ja19pZD1saXN0X3ZpZGVvc192aWRlb3NfbGlzdF9zZWFyY2hfcmVzdWx0JnE9JyArIGt3ICsgJyZzb3J0X2J5PSZmcm9tX3ZpZGVvcz0nICsgcGFnZSArICcmZnJvbV9hbGJ1bXM9JyArIHBhZ2UgKyAnJl89MTY3NzkzMTk2ODMxNyc7XFxuICAgIHZhciBodG1sID0gZmV0Y2goaHJlZik7XFxuXFxuICAgIGZ1bmN0aW9uIHBsYXllcihVcmwpIHtcXG4gICAgICAgIHJldHVybiAkKFVybCkubGF6eVJ1bGUoKCkgPT4ge1xcbiAgICAgICAgICAgIHZhciBodG1sID0gZmV0Y2goaW5wdXQpO1xcbiAgICAgICAgICAgIHZhciBsaXN0ID0gcGRmYShodG1sLCAnYm9keSYmc2NyaXB0Jyk7XFxuICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgICAgICAgICAgICAgIHZhciB2aWRlbzEgPSBwZGZoKGxpc3Rbal0sICdzY3JpcHQmJkh0bWwnKTtcXG4gICAgICAgICAgICAgICAgaWYgKHZpZGVvMS5pbmNsdWRlcygnaGxzVXJsJykpIHtcXG4gICAgICAgICAgICAgICAgICAgIHZhciB2aWRlbyA9IHZpZGVvMS5tYXRjaCgvaGxzVXJsID0gJyguKilcXFxcJzsvKVsxXTtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2aWRlbztcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pXFxuICAgIH1cXG4gICAgdmFyIGxpc3QgPSBwYXJzZURvbUZvckFycmF5KGh0bWwsICcucGItZS1sZy00MCYmLmNvbC1zbS00Jyk7XFxuICAgIGZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogcGFyc2VEb21Gb3JIdG1sKGxpc3Rbal0sICdoNiYmVGV4dCcpLFxcbiAgICAgICAgICAgIHBpY191cmw6IHBhcnNlRG9tKGxpc3Rbal0sICdpbWcmJmRhdGEtc3JjJyksXFxuICAgICAgICAgICAgdXJsOiBwbGF5ZXIocGFyc2VEb21Gb3JIdG1sKGxpc3Rbal0sICdhJiZocmVmJykpLFxcbiAgICAgICAgICAgIGRlc2M6IHBkZmgobGlzdFtqXSwgJy5sYWJlbCYmVGV4dCcpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiAnbW92aWVfMicsXFxuICAgICAgICB9KTtcXG4gICAgfVxcbn1cXG5pZiAodHlwZSA9PSAnd25hY2cnIHx8IGt1ID09ICd3bmFjZycpIHtcXG4gICAgbGV0IGhyZWYgPSAnaHR0cDovL3d3dy53bmFjZy5jb20vcS9pbmRleC5waHA/cT0nICsga3cgKyAnJm09JmY9X2FsbCZzeW49eWVzJnM9Y3JlYXRlX3RpbWVfREVTQyZwPScgKyBwYWdlO1xcbiAgICB2YXIgaHRtbCA9IGZldGNoKGhyZWYpO1xcbiAgICB2YXIgbGlzdCA9IHBkZmEoaHRtbCwgJyNjbGFzc2lmeV9jb250YWluZXImJmxpJyk7XFxuICAgIGZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogcGRmaChsaXN0W2pdLCAnLnR4dEEmJlRleHQnKSxcXG4gICAgICAgICAgICB1cmw6ICdoaWtlcjovL3BhZ2Uvd25hY2fkuoznuqc/dXJsPWh0dHA6Ly93d3cud25hY2cuY29tJyArIHBkZmgobGlzdFtqXSwgJ2EmJmhyZWYnKSxcXG4gICAgICAgICAgICBwaWNfdXJsOiAnaHR0cDonICsgcGRmaChsaXN0W2pdLCAnaW1nJiZzcmMnKSxcXG4gICAgICAgICAgICBkZXNjOiBwZGZoKGxpc3Rbal0sICcuaW5mbyYmVGV4dCcpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwibW92aWVfM1xcXCIsXFxuICAgICAgICB9KVxcbiAgICB9XFxufVxcbmlmICh0eXBlID09ICdzcGFua2JhbmcnIHx8IGt1ID09ICdzcGFua2JhbmcnKSB7XFxuICAgIGxldCBocmVmID0gJ2h0dHBzOi8vc3BhbmtiYW5nLnBhcnR5L3MvJyArIGt3ICsgJy8nICsgcGFnZSArICcvP289YWxsJztcXG4gICAgdmFyIGh0bWwgPSBmZXRjaChocmVmKTtcXG5cXG4gICAgZnVuY3Rpb24gcGxheWVyKFVybCkge1xcbiAgICAgICAgcmV0dXJuICQoVXJsKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgICAgICAgdmFyIGh0bWwgPSBmZXRjaChpbnB1dCk7XFxuICAgICAgICAgICAgdmFyIGxpc3QgPSBwZGZhKGh0bWwsICcjaW5uZXJfY29udGVudCYmc2NyaXB0Jyk7XFxuICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgICAgICAgICAgICAgIHZhciB2aWRlbzEgPSBwZGZoKGxpc3Rbal0sICdzY3JpcHQmJkh0bWwnKTtcXG4gICAgICAgICAgICAgICAgaWYgKHZpZGVvMS5pbmNsdWRlcygnY29udGVudFVybCcpKSB7XFxuICAgICAgICAgICAgICAgICAgICB2YXIgdmlkZW8gPSB2aWRlbzEubWF0Y2goL2NvbnRlbnRVcmxcXFwiOiBcXFwiKC4qKVxcXFxcXFwiLC8pWzFdO1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpZGVvO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSlcXG4gICAgfVxcblxcbiAgICB2YXIgbGlzdCA9IHBkZmEoaHRtbCwgJy52aWRlby1saXN0JiYudmlkZW8taXRlbScpO1xcbiAgICBmb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IHBkZmgobGlzdFtqXSwgJ2g0JiZUZXh0JyksXFxuICAgICAgICAgICAgcGljX3VybDogcGRmaChsaXN0W2pdLCAnaW1nJiZkYXRhLXNyYycpLFxcbiAgICAgICAgICAgIHVybDogcGxheWVyKCdodHRwczovL3NwYW5rYmFuZy5wYXJ0eScgKyBwZGZoKGxpc3Rbal0sICdhJiZocmVmJykpLFxcbiAgICAgICAgICAgIGRlc2M6IFxcXCLop4LnnIvmrKHmlbDvvJpcXFwiICsgcGRmaChsaXN0W2pdLCAnLnYmJlRleHQnKSxcXG4gICAgICAgICAgICBjb2xfdHlwZTogJ21vdmllXzInLFxcbiAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgIGxvbmdDbGljazogW3tcXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5Yi35pawJyxcXG4gICAgICAgICAgICAgICAgICAgIGpzOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgICAgICB9XVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pO1xcbiAgICB9XFxufVxcbmlmICh0eXBlID09ICdub29kbGVtYWdhemluZSjnuq/mkJzntKIpJyB8fCBrdSA9PSAnbm9vZGxlbWFnYXppbmUo57qv5pCc57SiKScpIHtcXG4gICAgbGV0IGhyZWYgPSAnaHR0cHM6Ly9ub29kbGVtYWdhemluZS5jb20vdmlkZW8vJyArIGt3ICsgJz9wPScgKyAocGFnZSAtIDEpO1xcbiAgICB2YXIgaHRtbCA9IGZldGNoKGhyZWYpO1xcblxcbiAgICBmdW5jdGlvbiBwbGF5ZXIoVXJsKSB7XFxuICAgICAgICByZXR1cm4gJChVcmwpLmxhenlSdWxlKCgpID0+IHtcXG4gICAgICAgICAgICB2YXIgaHRtbCA9IGZldGNoKGlucHV0KTtcXG4gICAgICAgICAgICB2YXIgaHJlZiA9ICdodHRwczovL25tY29ycC52aWRlbycgKyBwZGZoKGh0bWwsICcjaXBsYXllciYmc3JjJykucmVwbGFjZShcXFwicGxheWVyXFxcIiwgXFxcInBsYXlsaXN0XFxcIik7XFxuICAgICAgICAgICAgdmFyIGh0bWxsID0gZmV0Y2goaHJlZik7XFxuICAgICAgICAgICAgdmFyIHZpZGVvMSA9IHBkZmgoaHRtbGwsICdib2R5JiZIdG1sJyk7XFxuICAgICAgICAgICAgaWYgKHZpZGVvMS5pbmNsdWRlcygnMjQwJykgJiYgIXZpZGVvMS5pbmNsdWRlcygnMzYwJykpIHtcXG4gICAgICAgICAgICAgICAgdmFyIHZpZGVvID0gdmlkZW8xLm1hdGNoKC9cXFwiZmlsZVxcXCI6IFxcXCIoLiopXFxcXFxcXCIsIFxcXCJsYWJlbFxcXCI6IFxcXCIyNDBcXFwiLylbMV0gKyBcXFwiI2lzVmlkZW89dHJ1ZSNcXFwiO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBpZiAodmlkZW8xLmluY2x1ZGVzKCczNjAnKSAmJiAhdmlkZW8xLmluY2x1ZGVzKCc0ODAnKSkge1xcbiAgICAgICAgICAgICAgICB2aWRlbyA9IHZpZGVvMS5tYXRjaCgvXFxcImZpbGVcXFwiOiBcXFwiKC4qKVxcXFxcXFwiLCBcXFwibGFiZWxcXFwiOiBcXFwiMzYwXFxcIi8pWzFdICsgXFxcIiNpc1ZpZGVvPXRydWUjXFxcIjtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgaWYgKHZpZGVvMS5pbmNsdWRlcygnNDgwJykgJiYgIXZpZGVvMS5pbmNsdWRlcygnNzIwJykpIHtcXG4gICAgICAgICAgICAgICAgdmlkZW8gPSB2aWRlbzEubWF0Y2goL1xcXCJmaWxlXFxcIjogXFxcIiguKilcXFxcXFxcIiwgXFxcImxhYmVsXFxcIjogXFxcIjQ4MFxcXCIvKVsxXSArIFxcXCIjaXNWaWRlbz10cnVlI1xcXCI7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIGlmICh2aWRlbzEuaW5jbHVkZXMoJzcyMCcpKSB7XFxuICAgICAgICAgICAgICAgIHZpZGVvID0gdmlkZW8xLm1hdGNoKC9cXFwiZmlsZVxcXCI6IFxcXCIoLiopXFxcXFxcXCIsIFxcXCJsYWJlbFxcXCI6IFxcXCI3MjBcXFwiLylbMV0gKyBcXFwiI2lzVmlkZW89dHJ1ZSNcXFwiO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBpZiAodmlkZW8uaW5jbHVkZXMoJyZhbXAnKSkge1xcbiAgICAgICAgICAgICAgICB2aWRlbyA9IHZpZGVvLnJlcGxhY2UoL2FtcDsvZywgXFxcIlxcXCIpXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIHJldHVybiB2aWRlb1xcbiAgICAgICAgfSlcXG4gICAgfVxcblxcbiAgICB2YXIgbGlzdCA9IHBkZmEoaHRtbCwgJy5saXN0X3ZpZGVvcyYmLml0ZW0nKTtcXG4gICAgZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBwZGZoKGxpc3Rbal0sICcudGl0bGUmJlRleHQnKSxcXG4gICAgICAgICAgICBwaWNfdXJsOiBwZGZoKGxpc3Rbal0sICdpbWcmJmRhdGEtc3JjJyksXFxuICAgICAgICAgICAgdXJsOiBwbGF5ZXIoJ2h0dHBzOi8vbm9vZGxlbWFnYXppbmUuY29tJyArIHBkZmgobGlzdFtqXSwgJ2EmJmhyZWYnKSksXFxuICAgICAgICAgICAgZGVzYzogXFxcIuaXtumVv++8mlxcXCIgKyBwZGZoKGxpc3Rbal0sICcubV90aW1lJiZUZXh0JyksXFxuICAgICAgICAgICAgY29sX3R5cGU6ICdtb3ZpZV8yJyxcXG4gICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICBsb25nQ2xpY2s6IFt7XFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+WIt+aWsCcsXFxuICAgICAgICAgICAgICAgICAgICBqczogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICAgICAgfV1cXG4gICAgICAgICAgICB9XFxuICAgICAgICB9KTtcXG4gICAgfVxcbn1cXG5pZiAodHlwZSA9PSAnaGl0eGhvdCcgfHwga3UgPT0gJ2hpdHhob3QnKSB7XFxuICAgIHZhciBocmVmID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20vc2VhcmNoP3NpdGVzZWFyY2g9d3d3LmhpdHhob3Qub3JnJnE9JyArIGt3O1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgY29sX3R5cGU6IFxcXCJ4NV93ZWJ2aWV3X3NpbmdsZVxcXCIsXFxuICAgICAgICB1cmw6IGhyZWYsXFxuICAgICAgICBkZXNjOiBcXFwiZmxvYXQmJjEwMCVcXFwiLFxcbiAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICBjYW5CYWNrOiB0cnVlLFxcbiAgICAgICAgICAgIHVybEludGVyY2VwdG9yOiAkLnRvU3RyaW5nKChydWxlKSA9PiB7XFxuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5tYXRjaCgvZ2FsbGVyeXMvKSkge1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQudG9TdHJpbmcoKHVybCwgcnVsZSkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGZiYS5vcGVuKEpTT04uc3RyaW5naWZ5KHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZTogcnVsZSxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IG5hbWUsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJ2hpa2VyOi8vcGFnZS9oaXR4aG905LqM57qnP3VybD0nICsgdXJsICsgXFxcIiZydWxlPVxcXCIgKyBydWxlXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xcbiAgICAgICAgICAgICAgICAgICAgfSwgaW5wdXQsIHJ1bGUpXFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9LCBNWV9SVUxFLnRpdGxlKSxcXG4gICAgICAgICAgICBibG9ja1J1bGVzOiBbJyddLFxcbiAgICAgICAgICAgIHVhOiBNT0JJTEVfVUFcXG4gICAgICAgIH1cXG4gICAgfSk7XFxufVxcbmlmICh0eXBlID09ICdwb3JuaHViJyB8fCBrdSA9PSAncG9ybmh1YicpIHtcXG4gICAgdmFyIGhyZWYgPSAnaHR0cHM6Ly9jbi5wb3JuaHViLmNvbS92aWRlby9zZWFyY2g/c2VhcmNoPScgKyBrdyArICcmcGFnZT0nICsgcGFnZTtcXG4gICAgdmFyIGh0bWwgPSBmZXRjaChocmVmKTtcXG5cXG4gICAgZnVuY3Rpb24gcGxheWVyKFVybCkge1xcbiAgICAgICAgcmV0dXJuICQoVXJsKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgICAgICAgdmFyIGh0bWwgPSBmZXRjaChpbnB1dCk7XFxuICAgICAgICAgICAgdmFyIGxpc3QgPSBwZGZhKGh0bWwsICcjbW9iaWxlQ29udGFpbmVyJiZzY3JpcHQnKTtcXG4gICAgICAgICAgICBmb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgICAgICAgICAgICAgdmFyIHZpZGVvMSA9IHBkZmgobGlzdFtqXSwgJ3NjcmlwdCYmSHRtbCcpO1xcbiAgICAgICAgICAgICAgICBpZiAodmlkZW8xLm1hdGNoKC8xMDgwUC8pKSB7XFxuICAgICAgICAgICAgICAgICAgICB2YXIgdmlkZW8gPSB2aWRlbzEubWF0Y2goL3ZpZGVvVXJsXFxcIjpcXFwiKC4qKVxcXFxcXFwiLFxcXCJxdWFsaXR5XFxcIjpcXFwiMTA4MC8pWzFdO1xcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvMiA9IHZpZGVvMS5tYXRjaCgvdHJ1ZSxcXFwiZm9ybWF0XFxcIjpcXFwiaGxzXFxcIixcXFwidmlkZW9VcmxcXFwiOlxcXCIoLiopXFxcXFxcXCIsXFxcInF1YWxpdHlcXFwiOlxcXCI3MjAvKVsxXTtcXG4gICAgICAgICAgICAgICAgICAgIHZhciB2aWRlbzMgPSB2aWRlbzEubWF0Y2goLzI0MFxcXCJ9LHtcXFwiZGVmYXVsdFF1YWxpdHlcXFwiOmZhbHNlLFxcXCJmb3JtYXRcXFwiOlxcXCJobHNcXFwiLFxcXCJ2aWRlb1VybFxcXCI6XFxcIiguKilcXFxcXFxcIixcXFwicXVhbGl0eVxcXCI6XFxcIjQ4MC8pWzFdO1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJ7dXJsczpbJ1xcXCIgKyB2aWRlby5yZXBsYWNlKC9cXFxcXFxcXC9nLCBcXFwiXFxcIikgKyBcXFwiJywnXFxcIiArIHZpZGVvMi5yZXBsYWNlKC9cXFxcXFxcXC9nLCBcXFwiXFxcIikgKyBcXFwiJywnXFxcIiArIHZpZGVvMy5yZXBsYWNlKC9cXFxcXFxcXC9nLCBcXFwiXFxcIikgKyBcXFwiJ10sbmFtZXM6WycxMDgwUCcsJzcyMFAnLCc0ODBQJ119XFxcIlxcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF2aWRlbzEubWF0Y2goLzEwODBQLykgJiYgdmlkZW8xLm1hdGNoKC83MjBQLykpIHtcXG4gICAgICAgICAgICAgICAgICAgIHZpZGVvID0gdmlkZW8xLm1hdGNoKC90cnVlLFxcXCJmb3JtYXRcXFwiOlxcXCJobHNcXFwiLFxcXCJ2aWRlb1VybFxcXCI6XFxcIiguKilcXFxcXFxcIixcXFwicXVhbGl0eVxcXCI6XFxcIjcyMC8pWzFdO1xcbiAgICAgICAgICAgICAgICAgICAgdmlkZW8yID0gdmlkZW8xLm1hdGNoKC8yNDBcXFwifSx7XFxcImRlZmF1bHRRdWFsaXR5XFxcIjpmYWxzZSxcXFwiZm9ybWF0XFxcIjpcXFwiaGxzXFxcIixcXFwidmlkZW9VcmxcXFwiOlxcXCIoLiopXFxcXFxcXCIsXFxcInF1YWxpdHlcXFwiOlxcXCI0ODAvKVsxXTtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwie3VybHM6WydcXFwiICsgdmlkZW8ucmVwbGFjZSgvXFxcXFxcXFwvZywgXFxcIlxcXCIpICsgXFxcIicsJ1xcXCIgKyB2aWRlbzIucmVwbGFjZSgvXFxcXFxcXFwvZywgXFxcIlxcXCIpICsgXFxcIiddLG5hbWVzOlsnNzIwUCcsJzQ4MFAnXX1cXFwiXFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXZpZGVvMS5tYXRjaCgvNzIwUC8pICYmIHZpZGVvMS5tYXRjaCgvNDgwUC8pKSB7XFxuICAgICAgICAgICAgICAgICAgICB2aWRlbyA9IHZpZGVvMS5tYXRjaCgvMjQwXFxcIn0se1xcXCJkZWZhdWx0UXVhbGl0eVxcXCI6ZmFsc2UsXFxcImZvcm1hdFxcXCI6XFxcImhsc1xcXCIsXFxcInZpZGVvVXJsXFxcIjpcXFwiKC4qKVxcXFxcXFwiLFxcXCJxdWFsaXR5XFxcIjpcXFwiNDgwLylbMV07XFxuICAgICAgICAgICAgICAgICAgICB2aWRlbzIgPSB2aWRlbzEubWF0Y2goL3ZpZGVvVXJsXFxcIjpcXFwiKC4qKVxcXFxcXFwiLFxcXCJxdWFsaXR5XFxcIjpcXFwiMjQwLylbMV07XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcInt1cmxzOlsnXFxcIiArIHZpZGVvLnJlcGxhY2UoL1xcXFxcXFxcL2csIFxcXCJcXFwiKSArIFxcXCInLCdcXFwiICsgdmlkZW8yLnJlcGxhY2UoL1xcXFxcXFxcL2csIFxcXCJcXFwiKSArIFxcXCInXSxuYW1lczpbJzQ4MFAnLCcyNDBQJ119XFxcIlxcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgdmlkZW8gPSB2aWRlbzEubWF0Y2goL3ZpZGVvVXJsXFxcIjpcXFwiKC4qKVxcXFxcXFwiLFxcXCJxdWFsaXR5XFxcIjpcXFwiMjQwLylbMV07XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmlkZW8ucmVwbGFjZSgvXFxcXFxcXFwvZywgXFxcIlxcXCIpXFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuICAgICAgICB9KVxcbiAgICB9XFxuICAgIHZhciBsaXN0ID0gcGRmYShodG1sLCAnLnZpZGVvTGlzdCYmLnZpZGVvV3JhcHBlcicpO1xcbiAgICBmb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IHBkZmgobGlzdFtqXSwgJy50aXRsZSYmVGV4dCcpLFxcbiAgICAgICAgICAgIGRlc2M6IHBkZmgobGlzdFtqXSwgJy52aWV3cyYmVGV4dCcpICsgXFxcIiB8IFxcXCIgKyBwZGZoKGxpc3Rbal0sICcudGltZSYmVGV4dCcpLFxcbiAgICAgICAgICAgIGltZzogcGRmaChsaXN0W2pdLCAnaW1nJiZzcmMnKSxcXG4gICAgICAgICAgICB1cmw6IHBsYXllcignaHR0cHM6Ly9jbi5wb3JuaHViLmNvbScgKyBwZGZoKGxpc3Rbal0sICcudGl0bGUmJmEmJmhyZWYnKSksXFxuICAgICAgICAgICAgY29sX3R5cGU6ICdtb3ZpZV8yJyxcXG4gICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICBsb25nQ2xpY2s6IFt7XFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+WIt+aWsCcsXFxuICAgICAgICAgICAgICAgICAgICBqczogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICAgICAgfV1cXG4gICAgICAgICAgICB9XFxuICAgICAgICB9KTtcXG4gICAgfVxcbn1cXG5pZiAodHlwZSA9PSAnZWhlbnRhaScgfHwga3UgPT0gJ2VoZW50YWknKSB7XFxuICAgIHZhciBzcGFnZSA9IGdldFZhcihcXFwic3BhZ2VcXFwiLCBcXFwiXFxcIik7XFxuICAgIGlmIChNWV9QQUdFID09IDEpIHtcXG4gICAgICAgIHZhciBocmVmID0gXFxcImh0dHBzOi8vZS1oZW50YWkub3JnLz9mX3NlYXJjaD1cXFwiICsga3dcXG4gICAgfSBlbHNlIHtcXG4gICAgICAgIGhyZWYgPSBcXFwiaHR0cHM6Ly9lLWhlbnRhaS5vcmcvP2Zfc2VhcmNoPVxcXCIgKyBrdyArIFxcXCImbmV4dD1cXFwiICsgc3BhZ2VcXG4gICAgfVxcbiAgICB2YXIgaHRtbCA9IGZldGNoKGhyZWYpXFxuICAgIGxldCBwYWdlMSA9IHBkZmgoaHRtbCwgJyN1bmV4dCYmaHJlZicpLnNwbGl0KFxcXCJuZXh0PVxcXCIpWzFdO1xcbiAgICBwdXRWYXIoXFxcInNwYWdlXFxcIiwgcGFnZTEpO1xcbiAgICB2YXIgbGlzdCA9IHBkZmEoaHRtbCwgJ2JvZHkmJi5nbHRodW1iJyk7XFxuICAgIGZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogcGRmaChsaXN0W2pdLCAnaW1nJiZ0aXRsZScpLFxcbiAgICAgICAgICAgIHVybDogJ2hpa2VyOi8vcGFnZS9laGVudGFp5LqM57qnP3VybD0nICsgcGRmaChsaXN0W2pdLCAnLmdsdGh1bWImJkh0bWwnKS5tYXRjaCgvcG9wVXBcXFxcKCcoLiopXFxcXCZhbXA7YWN0LylbMV0ucmVwbGFjZSgvYW1wOy9nLCBcXFwiXFxcIikucmVwbGFjZShcXFwiYWxsZXJ5cG9wdXBzLnBocD9naWQ9XFxcIiwgXFxcIi9cXFwiKS5yZXBsYWNlKFxcXCImdD1cXFwiLCBcXFwiL1xcXCIpLFxcbiAgICAgICAgICAgIHBpY191cmw6IHBkZmgobGlzdFtqXSwgJ2ltZyYmZGF0YS1zcmN8fHNyYycpLFxcbiAgICAgICAgICAgIGRlc2M6IHBkZmgobGlzdFtqXSwgJy5jbiYmVGV4dCcpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwibW92aWVfM19tYXJxdWVlXFxcIlxcbiAgICAgICAgfSlcXG4gICAgfVxcbn1cXG5zZXRSZXN1bHQoZCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCIxLmhhbm1pZemmlumhtVwiLFwicGF0aFwiOlwibWFpblwiLFwicnVsZVwiOlwianM6XFxudmFyIGQgPSBbXTtcXG5zZXRQYWdlVGl0bGUoJ2hhbmltZTEnKTtcXG52YXIgaW5kZXggPSBzdG9yYWdlMC5nZXRNeVZhcignaW5kZXgnLCAwKTtcXG5hZGRMaXN0ZW5lcignb25DbG9zZScsICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICBjbGVhck15VmFyKFxcXCJpbmRleFxcXCIpO1xcbn0pKTtcXG5pZiAoTVlfUEFHRSA9PSAxKSB7XFxuICAgIHZhciBnZXRSYW5kb21Db2xvciA9IGZ1bmN0aW9uKCkge1xcbiAgICAgICAgcmV0dXJuICcjJyArIChNYXRoLnJhbmRvbSgpICogMHhmZmZmZmYgPDwgMCkudG9TdHJpbmcoMTYpO1xcbiAgICB9XFxuICAgIHZhciBjb2xvciA9IGdldFJhbmRvbUNvbG9yKCk7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogaW5kZXggPT0gJzAnID8gJ+KAnOKAnOKAneKAnScgKyBgPGZvbnQgY29sb3IgPSBcXFwiJHtnZXRSYW5kb21Db2xvcigpfVxcXCIgPmAgKyAn5Li76aG1PC9mb250PicgOiAn5Li76aG1JyxcXG4gICAgICAgIHBpY191cmw6ICdodHRwczovL2xhbm1laWd1b2ppYW5nLmNvbS90dWJpYW8vbW9yZS80Ny5wbmcnLFxcbiAgICAgICAgdXJsOiAkKCcnKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgICAgICAgc3RvcmFnZTAucHV0TXlWYXIoJ2luZGV4JywgMClcXG4gICAgICAgICAgICByZWZyZXNoUGFnZSgpXFxuICAgICAgICAgICAgcmV0dXJuICdoaWtlcjovL2VtcHR5J1xcbiAgICAgICAgfSksXFxuICAgICAgICBjb2xfdHlwZTogXFxcImljb25fNFxcXCIsXFxuICAgIH0sIHtcXG4gICAgICAgIHRpdGxlOiBpbmRleCA9PSAnMScgPyAn4oCc4oCc4oCd4oCdJyArIGA8Zm9udCBjb2xvciA9IFxcXCIke2dldFJhbmRvbUNvbG9yKCl9XFxcIiA+YCArICfliqjmvKs8L2ZvbnQ+JyA6ICfliqjmvKsnLFxcbiAgICAgICAgcGljX3VybDogJ2h0dHBzOi8vbGFubWVpZ3VvamlhbmcuY29tL3R1Ymlhby9tb3JlLzEyNC5wbmcnLFxcbiAgICAgICAgdXJsOiAkKCcnKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgICAgICAgc3RvcmFnZTAucHV0TXlWYXIoJ2luZGV4JywgMSlcXG4gICAgICAgICAgICByZWZyZXNoUGFnZSgpXFxuICAgICAgICAgICAgcmV0dXJuICdoaWtlcjovL2VtcHR5J1xcbiAgICAgICAgfSksXFxuICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgIGxvbmdDbGljazogW3tcXG4gICAgICAgICAgICAgICAgdGl0bGU6ICforr7nva7pu5jorqTmipjlj6DmlrnlvI8nLFxcbiAgICAgICAgICAgICAgICBqczogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICB2YXIg5oqY5Y+gID0gW1xcXCLlsZXlvIBcXFwiLCBcXFwi5oqY5Y+gXFxcIl07XFxuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGdldEl0ZW0oXFxcIuaKmOWPoDFcXFwiLFxcXCLmipjlj6BcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKOaKmOWPoC5tYXAodiA9PiB2ID09PSBuYW1lID8gJ+KAnOKAnCcgKyB2ICsgJ+KAneKAnScgOiB2KSkuc2VsZWN0KChuYW1lKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC/igJzigJwuKj/igJ3igJ0vLnRlc3QoaW5wdXQpKSByZXR1cm47XFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0ID09PSAn5bGV5byAJyl7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEl0ZW0oXFxcIum7mOiupOaKmOWPoOaooeW8j1xcXCIsXFxcIjBcXFwiKSAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SXRlbShcXFwi6buY6K6k5oqY5Y+g5qih5byPXFxcIixcXFwiMVxcXCIpXFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEl0ZW0oXFxcIuaKmOWPoDFcXFwiLCBpbnB1dCk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3QoXFxcIuWIh+aNouaIkOWKn1xcXCIpXFxuICAgICAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgIH1dXFxuICAgICAgICB9LFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJpY29uXzRcXFwiLFxcbiAgICB9LCB7XFxuICAgICAgICB0aXRsZTogaW5kZXggPT0gJzInID8gJ+KAnOKAnOKAneKAnScgKyBgPGZvbnQgY29sb3IgPSBcXFwiJHtnZXRSYW5kb21Db2xvcigpfVxcXCIgPmAgKyAn5ryr55S7PC9mb250PicgOiAn5ryr55S7JyxcXG4gICAgICAgIHBpY191cmw6ICdodHRwczovL2xhbm1laWd1b2ppYW5nLmNvbS90dWJpYW8vbW9yZS8xNjQucG5nJyxcXG4gICAgICAgIHVybDogJCgnJykubGF6eVJ1bGUoKCkgPT4ge1xcbiAgICAgICAgICAgIHN0b3JhZ2UwLnB1dE15VmFyKCdpbmRleCcsIDIpXFxuICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKVxcbiAgICAgICAgICAgIHJldHVybiAnaGlrZXI6Ly9lbXB0eSdcXG4gICAgICAgIH0pLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJpY29uXzRcXFwiLFxcbiAgICB9LCB7XFxuICAgICAgICB0aXRsZTogJ+S5puaeticsXFxuICAgICAgICBwaWNfdXJsOiAnaHR0cHM6Ly9sYW5tZWlndW9qaWFuZy5jb20vdHViaWFvL21vcmUvMTczLnBuZycsXFxuICAgICAgICB1cmw6IFxcXCJoaWtlcjovL3BhZ2UvQm9va3JhY2sudmlldz9ydWxlPeafkOiBmuWQiCZydWxlTmFtZT0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjaGFuaW1lMea8q+eUu1xcXCIsXFxuICAgICAgICBjb2xfdHlwZTogXFxcImljb25fNFxcXCIsXFxuICAgIH0pO1xcbn1cXG5jb25zdCBwYWdlID0gTVlfUEFHRTtcXG5zd2l0Y2ggKHBhcnNlSW50KGluZGV4KSkge1xcbiAgICBjYXNlIDA6XFxuICAgICAgICBldmFsKEpTT04ucGFyc2UocmVxdWVzdCgnaGlrZXI6Ly9wYWdlL2hhbmltZTEnKSkucnVsZSk7XFxuICAgICAgICBicmVhaztcXG4gICAgY2FzZSAxOlxcbiAgICAgICAgZXZhbChKU09OLnBhcnNlKHJlcXVlc3QoJ2hpa2VyOi8vcGFnZS9jYXJ0b29uJykpLnJ1bGUpXFxuICAgICAgICBicmVhaztcXG4gICAgY2FzZSAyOlxcbiAgICAgICAgZXZhbChKU09OLnBhcnNlKHJlcXVlc3QoJ2hpa2VyOi8vcGFnZS9jb21pYycpKS5ydWxlKVxcbiAgICAgICAgYnJlYWs7XFxufVxcblxcbnNldFJlc3VsdChkKTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIjEu5Yqo5ryr5pCc57Si5YWx5ZCM6YOo5YiG5Luj56CBXCIsXCJwYXRoXCI6XCJjb21tb25cIixcInJ1bGVcIjpcImFkZExpc3RlbmVyKCdvbkNsb3NlJywgJC50b1N0cmluZygoKSA9PiB7XFxuICAgIGNsZWFyVmFyKFxcXCJXYXJlaG91c2UudHlwZVxcXCIpO1xcbiAgICBjbGVhclZhcihcXFwiV2FyZWhvdXNlLm9yZGVyXFxcIik7XFxuICAgIGNsZWFyVmFyKFxcXCJXYXJlaG91c2Uuc29ydFxcXCIpO1xcbiAgICBjbGVhclZhcihcXFwiV2FyZWhvdXNlLmdvb2RcXFwiKTtcXG4gICAgY2xlYXJWYXIoXFxcImhlYWRlci5mb2xkXFxcIik7XFxufSkpO1xcbmNvbnN0IOW9k+WJjeaKmOWPoOeKtuaAgSA9IGdldFZhcignaGVhZGVyLmZvbGQnLCBnZXRJdGVtKFxcXCLpu5jorqTmipjlj6DmqKHlvI9cXFwiLFxcXCIxXFxcIikpO1xcblxcbmZ1bmN0aW9uIHRhYihhcnIsIHR5cGUsIGNvbnRyYXN0KSB7XFxuICAgIGZvciAobGV0IGl0ZW0gb2YgYXJyKSB7XFxuICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBpdGVtWzFdID09PSBjb250cmFzdCA/ICfigJzigJzigJ3igJ0nK2A8Zm9udCBjb2xvciA9IFxcXCIke2NvbG9yfVxcXCIgPmAgKyBpdGVtWzBdICsgJzwvZm9udD4nIDogaXRlbVswXSxcXG4gICAgICAgICAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoKGtleSwgdHlwZSkgPT4ge1xcbiAgICAgICAgICAgICAgICBwdXRWYXIodHlwZSwga2V5KTtcXG4gICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcbiAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgIH0sIGl0ZW1bMV0sIHR5cGUpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCJcXG4gICAgICAgIH0pO1xcbiAgICB9XFxuICAgIGQucHVzaCh7XFxuICAgICAgICBjb2xfdHlwZTogXFxcImJsYW5rX2Jsb2NrXFxcIlxcbiAgICB9KTtcXG59XFxuaWYgKHBhZ2UgPT0gMSkge1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFxcXCLwn5SNXFxcIixcXG4gICAgICAgIHVybDogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgcHV0TXlWYXIoJ2tleXdvcmQnLCBpbnB1dCk7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL3BhZ2Uvc2VhcmNoP3A9I25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5I2Z5cGFnZSZ0eXBlPWhhbmltZTHliqjmvKsma3c9XFxcIiArIGlucHV0O1xcbiAgICAgICAgfSksXFxuICAgICAgICBkZXNjOiAn5pCc57SiaGFuaW1lMeWKqOa8qycsXFxuICAgICAgICBjb2xfdHlwZTogXFxcImlucHV0XFxcIlxcbiAgICB9KTtcXG5cXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiDlvZPliY3mipjlj6DnirbmgIEgPT0gXFxcIjFcXFwiID8gJ+KAnOKAnOKAneKAnScrYDxmb250IGNvbG9yID0gXFxcIiR7Y29sb3J9XFxcIiA+YCsn4pa8PC9mb250PicgOiAn4oCc4oCc4oCd4oCdJytgPGZvbnQgY29sb3IgPSBcXFwiJHtjb2xvcn1cXFwiID5gKyfilrI8L2ZvbnQ+JyxcXG4gICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCIsXFxuICAgICAgICB1cmw6ICQoKS5sYXp5UnVsZSgo6buY6K6k5oqY5Y+gKSA9PiB7XFxuICAgICAgICAgICAgcHV0VmFyKCdoZWFkZXIuZm9sZCcsIGdldFZhcignaGVhZGVyLmZvbGQnLCDpu5jorqTmipjlj6ApID09ICcxJyA/ICcwJyA6ICcxJylcXG4gICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIlxcbiAgICAgICAgfSwg5b2T5YmN5oqY5Y+g54q25oCBKVxcbiAgICB9KTtcXG4gICAgdGFiKFtcXG4gICAgICAgIFtcXFwi5YWo6YOoXFxcIiwgXFxcIuWFqOmDqFxcXCJdLFxcbiAgICAgICAgW1xcXCLoo4/nlapcXFwiLCBcXFwi6KOP55WqXFxcIl0sXFxuICAgICAgICBbXFxcIuazoemdoueVqlxcXCIsIFxcXCLms6HpurXnlapcXFwiXSxcXG4gICAgICAgIFtcXFwiM0Tli5XnlatcXFwiLCBcXFwiM0Tli5XnlatcXFwiXSxcXG4gICAgICAgIFtcXFwi5ZCM5Lq65L2c5ZOBXFxcIiwgXFxcIuWQjOS6uuS9nOWTgVxcXCJdLFxcbiAgICAgICAgW1xcXCJNb3Rpb24gQW5pbWVcXFwiLCBcXFwiTW90aW9uK0FuaW1lXFxcIl0sXFxuICAgICAgICBbXFxcIkNvc3BsYXlcXFwiLCBcXFwiQ29zcGxheVxcXCJdXFxuICAgIF0sIFxcXCJXYXJlaG91c2UudHlwZVxcXCIsIGRhdGFUeXBlKTtcXG4gICAgaWYgKOW9k+WJjeaKmOWPoOeKtuaAgSA9PSBcXFwiMFxcXCIpIHtcXG4gICAgICAgIHRhYihbXFxuICAgICAgICAgICAgW1xcXCLlhajpg6hcXFwiLCBcXFwi5YWo6YOoXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLmnIDmlrDkuIrluIJcXFwiLCBcXFwi5pyA5paw5LiK5biCXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLmnIDmlrDkuIrlgrNcXFwiLCBcXFwi5pyA5paw5LiK5YKzXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLmnKzml6XmjpLooYxcXFwiLCBcXFwi5pys5pel5o6S6KGMXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLmnKzpgLHmjpLooYxcXFwiLCBcXFwi5pys6YCx5o6S6KGMXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLmnKzmnIjmjpLooYxcXFwiLCBcXFwi5pys5pyI5o6S6KGMXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLop4DnnIvmrKHmlbhcXFwiLCBcXFwi6KeA55yL5qyh5pW4XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCLku5blgJHlnKjnnItcXFwiLCBcXFwi5LuW5YCR5Zyo55yLXFxcIl1cXG4gICAgICAgIF0sIFxcXCJXYXJlaG91c2Uub3JkZXJcXFwiLCBvcmRlcik7XFxuICAgICAgICB0YWIoW1xcbiAgICAgICAgICAgIFtcXFwi5YWo6YOoXFxcIiwgXFxcIlxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwiMjAyM1xcXCIsIFxcXCIyMDIzXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCIyMDIyXFxcIiwgXFxcIjIwMjJcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIjIwMjFcXFwiLCBcXFwiMjAyMVxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwiMjAyMFxcXCIsIFxcXCIyMDIwXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCIyMDE5XFxcIiwgXFxcIjIwMTlcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIjIwMThcXFwiLCBcXFwiMjAxOFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwiMjAxN1xcXCIsIFxcXCIyMDE3XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCIyMDE2XFxcIiwgXFxcIjIwMTZcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIjIwMTVcXFwiLCBcXFwiMjAxNVxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwiMjAxNFxcXCIsIFxcXCIyMDE0XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCIyMDEzXFxcIiwgXFxcIjIwMTNcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIjIwMTJcXFwiLCBcXFwiMjAxMlxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwiMjAxMVxcXCIsIFxcXCIyMDExXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCIyMDEwXFxcIiwgXFxcIjIwMTBcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIjIwMDlcXFwiLCBcXFwiMjAwOVxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwiMjAwOFxcXCIsIFxcXCIyMDA4XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCIyMDA3XFxcIiwgXFxcIjIwMDdcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIjIwMDZcXFwiLCBcXFwiMjAwNlxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwiMjAwNVxcXCIsIFxcXCIyMDA1XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCIyMDA0XFxcIiwgXFxcIjIwMDRcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIjIwMDNcXFwiLCBcXFwiMjAwM1xcXCJdLFxcbiAgICAgICAgICAgIFtcXFwiMjAwMlxcXCIsIFxcXCIyMDAyXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCIyMDAxXFxcIiwgXFxcIjIwMDFcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIjIwMDBcXFwiLCBcXFwiMjAwMFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwiMTk5OVxcXCIsIFxcXCIxOTk5XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCIxOTk4XFxcIiwgXFxcIjE5OThcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIjE5OTdcXFwiLCBcXFwiMTk5N1xcXCJdLFxcbiAgICAgICAgICAgIFtcXFwiMTk5NlxcXCIsIFxcXCIxOTk2XFxcIl0sXFxuICAgICAgICAgICAgW1xcXCIxOTk1XFxcIiwgXFxcIjE5OTVcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIjE5OTRcXFwiLCBcXFwiMTk5NFxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwiMTk5M1xcXCIsIFxcXCIxOTkzXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCIxOTkyXFxcIiwgXFxcIjE5OTJcXFwiXSxcXG4gICAgICAgICAgICBbXFxcIjE5OTFcXFwiLCBcXFwiMTk5MVxcXCJdLFxcbiAgICAgICAgICAgIFtcXFwiMTk5MFxcXCIsIFxcXCIxOTkwXFxcIl1cXG4gICAgICAgIF0sIFxcXCJXYXJlaG91c2Uuc29ydFxcXCIsIHNvcnQpO1xcblxcbiAgICB9XFxufVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiMS7liqjmvKvmkJzntKLkuIDnuqfop6PmnpBcIixcInBhdGhcIjpcImNvbW1vbmp4XCIsXCJydWxlXCI6XCJ2YXIgaHRtbCA9IGZldGNoKGhyZWYsIHtcXG4gICAgaGVhZGVyczoge1xcbiAgICAgICAgQ29va2llOiByZWFkRmlsZShcXFwiQ29va2llLnR4dFxcXCIsIDApXFxuICAgIH0sXFxuICAgIHJlZGlyZWN0OiBmYWxzZVxcbn0pO1xcblxcbnRyeSB7XFxuICAgIHZhciBsaXN0MSA9IHBkZmEoaHRtbCwgJy5uby1ndXR0ZXImJi5jb2wteHMtMTInKTtcXG4gICAgZm9yICh2YXIgaSBpbiBsaXN0MSkge1xcbiAgICAgICAgdmFyIGltZyA9IHBkZmgobGlzdDFbaV0sICdpbWcsMSYmc3JjJykucmVwbGFjZShcXFwibC5qcGdcXFwiLCBcXFwiaC5qcGdcXFwiKTtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IHBkZmgobGlzdDFbaV0sICcuY2FyZC1tb2JpbGUtdGl0bGUmJlRleHQnKSxcXG4gICAgICAgICAgICBkZXNjOiAn6KeC55yL5qyh5pWw77yaJyArIHBkZmgobGlzdDFbaV0sICcuY2FyZC1tb2JpbGUtZHVyYXRpb24sMSYmVGV4dCcpLFxcbiAgICAgICAgICAgIHBpY191cmw6IGltZyxcXG4gICAgICAgICAgICB1cmw6ICdoaWtlcjovL3BhZ2UvamlleGk/dXJsPScgKyBwZGZoKGxpc3QxW2ldLCAnYSwwJiZocmVmJykgKyAnI2dhbWVUaGVtZSMjbm9SZWNvcmRIaXN0b3J5IycsXFxuICAgICAgICAgICAgY29sX3R5cGU6ICdtb3ZpZV8yJyxcXG4gICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICBsb25nQ2xpY2s6IFt7XFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+WIt+aWsCcsXFxuICAgICAgICAgICAgICAgICAgICBqczogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICAgICAgfV1cXG4gICAgICAgICAgICB9XFxuICAgICAgICB9KTtcXG4gICAgfVxcbn0gY2F0Y2ggKGUpIHt9XFxuXFxuXFxudHJ5IHtcXG4gICAgdmFyIGxpc3QgPSBwZGZhKGh0bWwsICcuaG9tZS1yb3dzLXZpZGVvcy13cmFwcGVyJiZhJyk7XFxuICAgIGZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogcGRmaChsaXN0W2pdLCAnVGV4dCcpLFxcbiAgICAgICAgICAgIHBpY191cmw6IHBkZmgobGlzdFtqXSwgJ2ltZyYmc3JjJyksXFxuICAgICAgICAgICAgdXJsOiAnaGlrZXI6Ly9wYWdlL2ppZXhpP3VybD0nICsgcGRmaChsaXN0W2pdLCAnYSYmaHJlZicpICsgJyNnYW1lVGhlbWUjI25vUmVjb3JkSGlzdG9yeSMnLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiAnbW92aWVfM19tYXJxdWVlJyxcXG4gICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICBsb25nQ2xpY2s6IFt7XFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+WIt+aWsCcsXFxuICAgICAgICAgICAgICAgICAgICBqczogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICAgICAgfV1cXG4gICAgICAgICAgICB9XFxuICAgICAgICB9KTtcXG4gICAgfVxcbn0gY2F0Y2ggKGUpIHt9XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCIxLua8q+eUu+aQnOe0ouWFseWQjOWPiuS4gOe6p+ino+aekFwiLFwicGF0aFwiOlwiY29taWNndFwiLFwicnVsZVwiOlwiYWRkTGlzdGVuZXIoJ29uQ2xvc2UnLCAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgY2xlYXJWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIik7XFxufSkpO1xcblxcbmZ1bmN0aW9uIHRhYihhcnIsIHR5cGUsIGNvbnRyYXN0KSB7XFxuICAgIGZvciAobGV0IGl0ZW0gb2YgYXJyKSB7XFxuICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBpdGVtWzFdID09PSBjb250cmFzdCA/IFxcXCLigJzigJxcXFwiICsgaXRlbVswXSArIFxcXCLigJ3igJ1cXFwiIDogaXRlbVswXSxcXG4gICAgICAgICAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoKGtleSwgdHlwZSkgPT4ge1xcbiAgICAgICAgICAgICAgICBwdXRWYXIodHlwZSwga2V5KTtcXG4gICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcbiAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgIH0sIGl0ZW1bMV0sIHR5cGUpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCJcXG4gICAgICAgIH0pO1xcbiAgICB9XFxuICAgIGQucHVzaCh7XFxuICAgICAgICBjb2xfdHlwZTogXFxcImJsYW5rX2Jsb2NrXFxcIlxcbiAgICB9KTtcXG59XFxudmFyIGh0bWwgPSBmZXRjaChocmVmLCB7XFxuICAgIGhlYWRlcnM6IHtcXG4gICAgICAgIENvb2tpZTogcmVhZEZpbGUoXFxcIkNvb2tpZS50eHRcXFwiLCAwKVxcbiAgICB9LFxcbn0pXFxuXFxuaWYgKHBhZ2UgPT0gMSkge1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFxcXCLwn5SNXFxcIixcXG4gICAgICAgIHVybDogJC50b1N0cmluZygocikgPT4ge1xcbiAgICAgICAgICAgIHB1dE15VmFyKCdrZXl3b3JkJywgaW5wdXQpO1xcbiAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9wYWdlL3NlYXJjaD9wPSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNmeXBhZ2UmdHlwZT1oYW5pbWUx5ryr55S7Jmt3PVxcXCIgKyBpbnB1dDtcXG4gICAgICAgIH0sIE1ZX1JVTEUudGl0bGUpLFxcbiAgICAgICAgZGVzYzogJ+aQnOe0omhhbmltZTHmvKvnlLsnLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJpbnB1dFxcXCJcXG4gICAgfSk7XFxuICAgIHRhYihbXFxuICAgICAgICBbXFxcIuacgOaWsFxcXCIsIFxcXCJcXFwiXSxcXG4gICAgICAgIFtcXFwi5pys5pel5o6S6KGMXFxcIiwgXFxcInBvcHVsYXItdG9kYXlcXFwiXSxcXG4gICAgICAgIFtcXFwi5pys5ZGo5o6S6KGMXFxcIiwgXFxcInBvcHVsYXItd2Vla1xcXCJdLFxcbiAgICAgICAgW1xcXCLmgLvmjpLooYxcXFwiLCBcXFwicG9wdWxhclxcXCJdXFxuICAgIF0sIFxcXCJXYXJlaG91c2UudHlwZVxcXCIsIGRhdGFUeXBlKTtcXG59XFxudmFyIGxpc3QgPSBwZGZhKGh0bWwsICcuY29taWNzLXBhbmVsLW1hcmdpbiYmLmNvbWljLXJvd3MtdmlkZW9zLWRpdicpO1xcbmZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICB2YXIgdGl0bGUgPSBwZGZoKGxpc3Rbal0sICdUZXh0Jyk7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogdGl0bGUsXFxuICAgICAgICBwaWNfdXJsOiBwZGZoKGxpc3Rbal0sICdpbWcmJmRhdGEtc3Jjc2V0JyksXFxuICAgICAgICB1cmw6ICdoaWtlcjovL3BhZ2UvY29taWNqaWV4aT91cmw9JyArIHBkZmgobGlzdFtqXSwgJ2EmJmhyZWYnKSxcXG4gICAgICAgIGNvbF90eXBlOiAnbW92aWVfM19tYXJxdWVlJyxcXG4gICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgbG9uZ0NsaWNrOiBbe1xcbiAgICAgICAgICAgICAgICB0aXRsZTogJ+WIt+aWsCcsXFxuICAgICAgICAgICAgICAgIGpzOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKCk7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgIH0sIHtcXG4gICAgICAgICAgICAgICAgdGl0bGU6ICflv6vpgJ/mkJzntKInLFxcbiAgICAgICAgICAgICAgICBqczogJC50b1N0cmluZygodGl0bGUsIHJ1bGUpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9zZWFyY2g/cz1cXFwiICsgdGl0bGUgKyBcXFwiJnJ1bGU9XFxcIiArIHJ1bGU7XFxuICAgICAgICAgICAgICAgIH0sIHRpdGxlLCBNWV9SVUxFLnRpdGxlKVxcbiAgICAgICAgICAgIH1dXFxuICAgICAgICB9XFxuICAgIH0pO1xcbn1cIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzJcIixcIm5hbWVcIjpcIjIu6bq76LGGXCIsXCJwYXRoXCI6XCJtYWRvdV9tYWluXCIsXCJydWxlXCI6XCJqczpcXG52YXIgZCA9IFtdO1xcbmNvbnN0IHBhZ2UgPSBNWV9QQUdFO1xcbmxldCBkYXRhVHlwZSA9IGdldFZhcihcXFwiV2FyZWhvdXNlLnR5cGVcXFwiLCBcXFwiXFxcIik7XFxudmFyIGhyZWYgPSAnaHR0cHM6Ly85MW1kLm1lL2luZGV4LnBocC92b2QvdHlwZS9pZC8nICsgZGF0YVR5cGUgKyAnL3BhZ2UvJyArIHBhZ2UgKyAnLmh0bWwnO1xcbmlmIChkYXRhVHlwZSA9PSBcXFwiXFxcIiAmJiBwYWdlID09IDEpIHtcXG4gICAgaHJlZiA9ICdodHRwczovLzkxbWQubWUnXFxufVxcbmFkZExpc3RlbmVyKCdvbkNsb3NlJywgJC50b1N0cmluZygoKSA9PiB7XFxuICAgIGNsZWFyVmFyKFxcXCJXYXJlaG91c2UudHlwZVxcXCIpO1xcbn0pKTtcXG5cXG5mdW5jdGlvbiB0YWIoYXJyLCB0eXBlLCBjb250cmFzdCkge1xcbiAgICBmb3IgKGxldCBpdGVtIG9mIGFycikge1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogaXRlbVsxXSA9PT0gY29udHJhc3QgPyBcXFwi4oCc4oCcXFxcIiArIGl0ZW1bMF0gKyBcXFwi4oCd4oCdXFxcIiA6IGl0ZW1bMF0sXFxuICAgICAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChrZXksIHR5cGUpID0+IHtcXG4gICAgICAgICAgICAgICAgcHV0VmFyKHR5cGUsIGtleSk7XFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgICAgICB9LCBpdGVtWzFdLCB0eXBlKSxcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcInNjcm9sbF9idXR0b25cXFwiXFxuICAgICAgICB9KTtcXG4gICAgfVxcbiAgICBkLnB1c2goe1xcbiAgICAgICAgY29sX3R5cGU6IFxcXCJibGFua19ibG9ja1xcXCJcXG4gICAgfSk7XFxufVxcbnZhciBodG1sID0gZmV0Y2goaHJlZilcXG5cXG5mdW5jdGlvbiBwbGF5ZXIoVXJsKSB7XFxuICAgIHJldHVybiAkKFVybCkubGF6eVJ1bGUoKCkgPT4ge1xcbiAgICAgICAgdmFyIGh0bWwgPSBmZXRjaChpbnB1dCk7XFxuICAgICAgICB2YXIgdmlkZW8gPSBwZGZoKGh0bWwsICcjYm9mYW5nX2JveCYmc2NyaXB0JiZIdG1sJykubWF0Y2goL3VybFxcXCI6XFxcIiguKilcXFxcXFxcIixcXFwidXJsX24vKVsxXTtcXG4gICAgICAgIHJldHVybiB2aWRlby5yZXBsYWNlKC9cXFxcXFxcXC9nLCcnKTtcXG4gICAgfSlcXG59XFxuXFxuaWYgKHBhZ2UgPT0gMSkge1xcbiAgICB0YWIoW1xcbiAgICAgICAgW1xcXCLpppbpobVcXFwiLCBcXFwiXFxcIl0sXFxuICAgICAgICBbXFxcIum6u+ixhuinhumikVxcXCIsIFxcXCIxXFxcIl0sXFxuICAgICAgICBbXFxcIjkx5Yi254mH5Y6CXFxcIiwgXFxcIjJcXFwiXSxcXG4gICAgICAgIFtcXFwi5aSp576O5Lyg5aqSXFxcIiwgXFxcIjNcXFwiXSxcXG4gICAgICAgIFtcXFwi6Jyc5qGD5Lyg5aqSXFxcIiwgXFxcIjRcXFwiXSxcXG4gICAgICAgIFtcXFwi55qH5a625Y2O5Lq6XFxcIiwgXFxcIjVcXFwiXSxcXG4gICAgICAgIFtcXFwi5pif56m65Lyg5aqSXFxcIiwgXFxcIjZcXFwiXSxcXG4gICAgICAgIFtcXFwi57K+5Lic5b2x5LiaXFxcIiwgXFxcIjdcXFwiXSxcXG4gICAgICAgIFtcXFwi5LmQ5pKt5Lyg5aqSXFxcIiwgXFxcIjhcXFwiXSxcXG4gICAgICAgIFtcXFwi5oiQ5Lq65aS05p2hXFxcIiwgXFxcIjlcXFwiXSxcXG4gICAgICAgIFtcXFwi5LmM6bim5Lyg5aqSXFxcIiwgXFxcIjEwXFxcIl0sXFxuICAgICAgICBbXFxcIuWFlOWtkOWFiOeUn1xcXCIsIFxcXCIyMFxcXCJdLFxcbiAgICAgICAgW1xcXCLmnY/lkKfljp/liJtcXFwiLCBcXFwiMjFcXFwiXSxcXG4gICAgICAgIFtcXFwi546p5YG25aeQ5aeQXFxcIiwgXFxcIjIyXFxcIl0sXFxuICAgICAgICBbXFxcIm1pbmnkvKDlqpJcXFwiLCBcXFwiMjNcXFwiXSxcXG4gICAgICAgIFtcXFwi5aSn6LGh5Lyg5aqSXFxcIiwgXFxcIjI0XFxcIl0sXFxuICAgICAgICBbXFxcIuW8gOW/g+msvOS8oOWqklxcXCIsIFxcXCIyNVxcXCJdLFxcbiAgICAgICAgW1xcXCLokJ3ojonnpL5cXFwiLCBcXFwiMjlcXFwiXSxcXG4gICAgICAgIFtcXFwiUHN5Y2hvUG9yblxcXCIsIFxcXCIyNlxcXCJdLFxcbiAgICAgICAgW1xcXCLns5blv4NWbG9nXFxcIiwgXFxcIjI3XFxcIl0sXFxuICAgICAgICBbXFxcIuaAp+inhueVjFxcXCIsIFxcXCIzMFxcXCJdXFxuICAgIF0sIFxcXCJXYXJlaG91c2UudHlwZVxcXCIsIGRhdGFUeXBlKTtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBcXFwi8J+UjVxcXCIsXFxuICAgICAgICB1cmw6ICQudG9TdHJpbmcoKHIpID0+IHtcXG4gICAgICAgICAgICBwdXRNeVZhcigna2V5d29yZCcsIGlucHV0KTtcXG4gICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU96bq76LGGJmt3PVxcXCIgKyBpbnB1dDtcXG4gICAgICAgIH0sIE1ZX1JVTEUudGl0bGUpLFxcbiAgICAgICAgZGVzYzogJ+aQnOe0oicsXFxuICAgICAgICBjb2xfdHlwZTogXFxcImlucHV0XFxcIlxcbiAgICB9KTtcXG59XFxuXFxudmFyIGxpdCA9IHBkZmEoaHRtbCwgJ2JvZHkmJi52aWRlby1saXN0Jyk7XFxuaWYgKGxpdC5sZW5ndGggPiAxKSB7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogJ+acgOaWsOW9seeJhycsXFxuICAgICAgICB1cmw6ICd0b2FzdDovL+eCueS6huS5n+ayoeeUqCcsXFxuICAgICAgICBjb2xfdHlwZTogJ3RleHRfMSdcXG4gICAgfSk7XFxuICAgIHZhciBsaXN0MSA9IHBkZmEoaHRtbCwgJy52aWRlby1saXN0LDEmJi52aWRlby1pdGVtJyk7XFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgODsgaSsrKSB7XFxuICAgICAgICB2YXIgdGl0bGUgPSBwZGZoKGxpc3QxW2ldLCAnLnRpdGxlJiZUZXh0Jyk7XFxuICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcXG4gICAgICAgICAgICBkZXNjOiBwZGZoKGxpc3QxW2ldLCAnLnRpbWUmJlRleHQnKSxcXG4gICAgICAgICAgICBpbWc6IHBkKGxpc3QxW2ldLCAnaW1nJiZzcmMnKSArICdAUmVmZXJlcj0nLFxcbiAgICAgICAgICAgIHVybDogcGxheWVyKCdodHRwczovLzkxbWQubWUnICsgcGRmaChsaXN0MVtpXSwgJ2EmJmhyZWYnKSksXFxuICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgbG9uZ0NsaWNrOiBbe1xcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfliLfmlrAnLFxcbiAgICAgICAgICAgICAgICAgICAganM6ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKCk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgICAgICAgICAgICAgIH0pXFxuICAgICAgICAgICAgICAgIH0sIHtcXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5b+r6YCf5pCc57SiJyxcXG4gICAgICAgICAgICAgICAgICAgIGpzOiAkLnRvU3RyaW5nKCh0aXRsZSwgcnVsZSkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9zZWFyY2g/cz1cXFwiICsgdGl0bGUgKyBcXFwiJnJ1bGU9XFxcIiArIHJ1bGU7XFxuICAgICAgICAgICAgICAgICAgICB9LCB0aXRsZSwgTVlfUlVMRS50aXRsZSlcXG4gICAgICAgICAgICAgICAgfV1cXG4gICAgICAgICAgICB9XFxuICAgICAgICB9KTtcXG4gICAgfVxcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6ICfigJjigJjigJnigJk8Zm9udCBjb2xvcj1cXFwiIzA5OEFDMVxcXCI+5LuW5Lus5Zyo55yLPC9mb250PicgKyBgJHtcXFwiXFxcXHRcXFwiLnJlcGVhdCgzNyl9YCArICc8c21hbGw+PGZvbnQgY29sb3I9XFxcInJlZFxcXCI+W+WIt+aWsF08L2ZvbnQ+PC9zbWFsbD4nLFxcbiAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKCgpID0+IHtcXG4gICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgIH0pLFxcbiAgICAgICAgY29sX3R5cGU6ICd0ZXh0XzEnXFxuICAgIH0pO1xcbn1cXG52YXIgbGlzdCA9IHBkZmEoaHRtbCwgJy52aWRlby1saXN0JiYudmlkZW8taXRlbScpO1xcbmZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICB2YXIgdGl0bGUgPSBwZGZoKGxpc3Rbal0sICcudGl0bGUmJlRleHQnKTtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiB0aXRsZSxcXG4gICAgICAgIGRlc2M6IHBkZmgobGlzdFtqXSwgJy50aW1lJiZUZXh0JyksXFxuICAgICAgICBpbWc6IHBkKGxpc3Rbal0sICdpbWcmJnNyYycpICsgJ0BSZWZlcmVyPScsXFxuICAgICAgICB1cmw6IHBsYXllcignaHR0cHM6Ly85MW1kLm1lJyArIHBkZmgobGlzdFtqXSwgJ2EmJmhyZWYnKSksXFxuICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgIGxvbmdDbGljazogW3tcXG4gICAgICAgICAgICAgICAgdGl0bGU6ICfliLfmlrAnLFxcbiAgICAgICAgICAgICAgICBqczogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICB9LCB7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiAn5b+r6YCf5pCc57SiJyxcXG4gICAgICAgICAgICAgICAganM6ICQudG9TdHJpbmcoKHRpdGxlLCBydWxlKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vc2VhcmNoP3M9XFxcIiArIHRpdGxlICsgXFxcIiZydWxlPVxcXCIgKyBydWxlO1xcbiAgICAgICAgICAgICAgICB9LCB0aXRsZSwgTVlfUlVMRS50aXRsZSlcXG4gICAgICAgICAgICB9XVxcbiAgICAgICAgfVxcbiAgICB9KTtcXG59XFxuc2V0UmVzdWx0KGQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiNC7lsI/pu4TkuaZcIixcInBhdGhcIjpcIuWwj+m7hOS5plwiLFwicnVsZVwiOlwianM6XFxudmFyIGQgPSBbXTtcXG5jb25zdCBwYWdlID0gTVlfUEFHRTtcXG5sZXQgZGF0YVR5cGUgPSBnZXRWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIiwgXFxcImtpbmQtMVxcXCIpO1xcbmxldCBocmVmID0gJ2h0dHBzOi8veGNoaW5hLmNvL3Bob3Rvcy8nICsgZGF0YVR5cGUgKyAnLycgKyBwYWdlICsgJy5odG1sJztcXG5hZGRMaXN0ZW5lcignb25DbG9zZScsICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICBjbGVhclZhcihcXFwiV2FyZWhvdXNlLnR5cGVcXFwiKTtcXG59KSk7XFxuXFxuZnVuY3Rpb24gdGFiKGFyciwgdHlwZSwgY29udHJhc3QpIHtcXG4gICAgZm9yIChsZXQgaXRlbSBvZiBhcnIpIHtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IGl0ZW1bMV0gPT09IGNvbnRyYXN0ID8gXFxcIuKAnOKAnFxcXCIgKyBpdGVtWzBdICsgXFxcIuKAneKAnVxcXCIgOiBpdGVtWzBdLFxcbiAgICAgICAgICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZSgoa2V5LCB0eXBlKSA9PiB7XFxuICAgICAgICAgICAgICAgIHB1dFZhcih0eXBlLCBrZXkpO1xcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgfSwgaXRlbVsxXSwgdHlwZSksXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJzY3JvbGxfYnV0dG9uXFxcIlxcbiAgICAgICAgfSk7XFxuICAgIH1cXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIGNvbF90eXBlOiBcXFwiYmxhbmtfYmxvY2tcXFwiXFxuICAgIH0pO1xcbn1cXG52YXIgaHRtbCA9IGZldGNoKGhyZWYpXFxuXFxuaWYgKHBhZ2UgPT0gMSkge1xcbiAgICB0YWIoW1xcbiAgICAgICAgW1xcXCLlhajpg6jmgKfmhJ/lhpnnnJ9cXFwiLCBcXFwia2luZC0xXFxcIl0sXFxuICAgICAgICBbXFxcIuWFqOmDqOS6uuS9k+aRhOW9sVxcXCIsIFxcXCJraW5kLTJcXFwiXSxcXG4gICAgICAgIFtcXFwi5pyq5YiG57G75Lq65L2T5pGE5b2xXFxcIiwgXFxcInNlcmllcy02MThlNDkwOWVhOWI2XFxcIl0sXFxuICAgICAgICBbXFxcIuacquWIhuexu+aAp+aEn+WGmeecn1xcXCIsIFxcXCJzZXJpZXMtNjE4ZTQ4ZTM4MWVkZlxcXCJdXFxuICAgIF0sIFxcXCJXYXJlaG91c2UudHlwZVxcXCIsIGRhdGFUeXBlKTtcXG4gICAgdGFiKFtcXG4gICAgICAgIFtcXFwi56eA5Lq6572R5bC65bqm5Li76aKYXFxcIiwgXFxcImFsYnVtLTFcXFwiXSxcXG4gICAgICAgIFtcXFwi5aSn5bC65bqm5Li76aKYXFxcIiwgXFxcImFsYnVtLTJcXFwiXSxcXG4gICAgICAgIFtcXFwi5oCn54ix5Li76aKYXFxcIiwgXFxcImFsYnVtLTNcXFwiXSxcXG4gICAgICAgIFtcXFwi6Zyy5Ye65Li76aKYXFxcIiwgXFxcImFsYnVtLTRcXFwiXSxcXG4gICAgICAgIFtcXFwiQ29zcGxheeS4u+mimFxcXCIsIFxcXCJhbGJ1bS01XFxcIl0sXFxuICAgICAgICBbXFxcIumBk+WFt+S4u+mimFxcXCIsIFxcXCJhbGJ1bS02XFxcIl0sXFxuICAgICAgICBbXFxcIuaNhue7keS4u+mimFxcXCIsIFxcXCJhbGJ1bS03XFxcIl0sXFxuICAgICAgICBbXFxcIueZveiZjuS4u+mimFxcXCIsIFxcXCJhbGJ1bS04XFxcIl0sXFxuICAgICAgICBbXFxcIuWls+WQjOS4u+mimFxcXCIsIFxcXCJhbGJ1bS05XFxcIl1cXG4gICAgXSwgXFxcIldhcmVob3VzZS50eXBlXFxcIiwgZGF0YVR5cGUpO1xcbiAgICB0YWIoW1xcbiAgICAgICAgW1xcXCLkuL3lm74xMDBcXFwiLCBcXFwic2VyaWVzLTVmMWQ3ODQ5OTU4NjVcXFwiXSxcXG4gICAgICAgIFtcXFwiUEFOU+aWsOeJiFxcXCIsIFxcXCJzZXJpZXMtNjMxMGNlOWI5MDA1NlxcXCJdLFxcbiAgICAgICAgW1xcXCLmkYTlvbHluIjkvZzlk4FcXFwiLCBcXFwic2VyaWVzLTYzOTVhMWU5MjlmMjNcXFwiXSxcXG4gICAgICAgIFtcXFwiQ0hPS21vc29u6ISx56WeXFxcIiwgXFxcInNlcmllcy02M2M3Y2NjMzQ3YTY4XFxcIl0sXFxuICAgICAgICBbXFxcIueOi+WKqOS9nOWTgVxcXCIsIFxcXCJzZXJpZXMtNWYyNmE1YzFkMzllOVxcXCJdLFxcbiAgICAgICAgW1xcXCLpo47lkJ/puJ/llLFcXFwiLCBcXFwic2VyaWVzLTYzYjU0ZTgwNGE2OTRcXFwiXSxcXG4gICAgICAgIFtcXFwi5a6H6Iiq5ZGYXFxcIiwgXFxcInNlcmllcy02M2I1NDg2MjNiMTBkXFxcIl0sXFxuICAgICAgICBbXFxcIuWUkOWFtFxcXCIsIFxcXCJzZXJpZXMtNjNiZGNjMTAwN2Y4N1xcXCJdLFxcbiAgICAgICAgW1xcXCJUSUFOIFdFTu+8iOmzvOWym++8iVxcXCIsIFxcXCJzZXJpZXMtNjNiZGNiZGIzOGYyYVxcXCJdLFxcbiAgICAgICAgW1xcXCJMLlAuVklTSU9OXFxcIiwgXFxcInNlcmllcy02M2IxNGU1NzE1MjFkXFxcIl0sXFxuICAgICAgICBbXFxcIui9sOi2tOeMq1xcXCIsIFxcXCJzZXJpZXMtNWYxYWU2Y2FhZTkyMlxcXCJdLFxcbiAgICAgICAgW1xcXCLnm7jnuqbkuK3lm71cXFwiLCBcXFwic2VyaWVzLTVmMWRjZGVhZWU1ODJcXFwiXSxcXG4gICAgICAgIFtcXFwi5r2Y5aSa5ouJXFxcIiwgXFxcInNlcmllcy01ZjIzYzQ0Y2Q2NmJkXFxcIl0sXFxuICAgICAgICBbXFxcIumfqeWbveaooeeJueWFu+aIkFxcXCIsIFxcXCJzZXJpZXMtNWYxZDM0NWJmMmExZFxcXCJdLFxcbiAgICAgICAgW1xcXCLmjqjlpbPpg45cXFwiLCBcXFwic2VyaWVzLTVmMTRhNWViNWIwZDdcXFwiXSxcXG4gICAgICAgIFtcXFwi5peg5b+M5b2x56S+XFxcIiwgXFxcInNlcmllcy02MTlhOTJhYTFmYTdhXFxcIl0sXFxuICAgICAgICBbXFxcIkpWSURcXFwiLCBcXFwic2VyaWVzLTYzN2IyMDI5ZDIzNDdcXFwiXSxcXG4gICAgICAgIFtcXFwi5rex5aSc5LyB5YiSXFxcIiwgXFxcInNlcmllcy02MzhlNWE2MGIxNzcwXFxcIl0sXFxuICAgICAgICBbXFxcIuWMl+S6rOWkqeS9v1xcXCIsIFxcXCJzZXJpZXMtNjIyYzdmOTUyMjBhNFxcXCJdLFxcbiAgICAgICAgW1xcXCJBNFVcXFwiLCBcXFwic2VyaWVzLTVmNjBiOTgyNDhhODFcXFwiXSxcXG4gICAgICAgIFtcXFwiRERZXFxcIiwgXFxcInNlcmllcy01ZjE1ZjcyN2RmMzkzXFxcIl0sXFxuICAgICAgICBbXFxcIuS4nOiOnlblpbPpg45cXFwiLCBcXFwic2VyaWVzLTVmMjJlYTQyMjIyMWNcXFwiXSxcXG4gICAgICAgIFtcXFwiRmFudGFzeSBGYWN0b3J5XFxcIiwgXFxcInNlcmllcy01Zjg4OWFmYjM3NjE5XFxcIl0sXFxuICAgICAgICBbXFxcIlRQaW1hZ2VcXFwiLCBcXFwic2VyaWVzLTVmN2EwYTgwZDNkNjZcXFwiXSxcXG4gICAgICAgIFtcXFwiU0vkuJ3lupNcXFwiLCBcXFwic2VyaWVzLTVmMzgyYmE4OTRhZjRcXFwiXSxcXG4gICAgICAgIFtcXFwiTG9venlcXFwiLCBcXFwic2VyaWVzLTYyODg4YWZhZDQxNmJcXFwiXSxcXG4gICAgICAgIFtcXFwi576O5bCk572RXFxcIiwgXFxcInNlcmllcy01ZjIzYzhhMTA3MDhhXFxcIl0sXFxuICAgICAgICBbXFxcIlN1cGVyIFBvc2UgQm9va1xcXCIsIFxcXCJzZXJpZXMtNjJhMGExNTkxMWYxNlxcXCJdLFxcbiAgICAgICAgW1xcXCJIVDk1XFxcIiwgXFxcInNlcmllcy02MDMwZWNhOWVmZTQzXFxcIl0sXFxuICAgICAgICBbXFxcIuS8iueUuOWbreWGmeecn1xcXCIsIFxcXCJzZXJpZXMtNjNjZjk2NjZhOTIzOVxcXCJdLFxcbiAgICAgICAgW1xcXCLnp4DkurrnvZHml5fkuItcXFwiLCBcXFwic2VyaWVzLTYzOTU5YjljODcxNDlcXFwiXSxcXG4gICAgICAgIFtcXFwi56eA5Lq6572RXFxcIiwgXFxcInNlcmllcy01ZjE0NzY3ODFlYWI0XFxcIl0sXFxuICAgICAgICBbXFxcIueIseicnOekvlxcXCIsIFxcXCJzZXJpZXMtNWY3MWFmYzkyZDhhYlxcXCJdLFxcbiAgICAgICAgW1xcXCLmqKHojIPlrabpmaJcXFwiLCBcXFwic2VyaWVzLTVmMTgxNjI1OTY2YTZcXFwiXSxcXG4gICAgICAgIFtcXFwi6Iqx5ry+XFxcIiwgXFxcInNlcmllcy01ZmM0Y2U0MDM4NmFmXFxcIl0sXFxuICAgICAgICBbXFxcIue+juWqm+mmhlxcXCIsIFxcXCJzZXJpZXMtNWYxNDk1ZGJkYTRkZVxcXCJdLFxcbiAgICAgICAgW1xcXCLor63nlLvnlYxcXFwiLCBcXFwic2VyaWVzLTYwMWVmODA5OTc4NDVcXFwiXSxcXG4gICAgICAgIFtcXFwi5bCk6Jyc6I2fXFxcIiwgXFxcInNlcmllcy01ZjE4NGZmNTUxODg4XFxcIl0sXFxuICAgICAgICBbXFxcIuWwpOeJqemmhlxcXCIsIFxcXCJzZXJpZXMtNjA2NzNiZWM5ZGQxMVxcXCJdLFxcbiAgICAgICAgW1xcXCLonJzmoYPnpL5cXFwiLCBcXFwic2VyaWVzLTVmMWRkNWE3ZWJlOWFcXFwiXSxcXG4gICAgICAgIFtcXFwi55Ge5Lid6aaGXFxcIiwgXFxcInNlcmllcy02MTI2M2RlMjg3ZTJmXFxcIl0sXFxuICAgICAgICBbXFxcIkZFSUxJTuWXsuWboeWboVxcXCIsIFxcXCJzZXJpZXMtNWYxNGEzMTA1ZDNlOFxcXCJdLFxcbiAgICAgICAgW1xcXCLniLHlsKTnialcXFwiLCBcXFwic2VyaWVzLTVmMTQ4MDQ2Y2IyYzdcXFwiXSxcXG4gICAgICAgIFtcXFwi5pif6aKc56S+XFxcIiwgXFxcInNlcmllcy02MTQxYzg4ODgyYTM2XFxcIl0sXFxuICAgICAgICBbXFxcIuW9seengeiNn1xcXCIsIFxcXCJzZXJpZXMtNjNkNDM1MzUyODA4Y1xcXCJdLFxcbiAgICAgICAgW1xcXCLprYXlpo3npL5cXFwiLCBcXFwic2VyaWVzLTYwZjQ2OTFkZDJmMmRcXFwiXSxcXG4gICAgICAgIFtcXFwi5qih54m56IGU55ufXFxcIiwgXFxcInNlcmllcy02MjE4Y2ZiODJiNmNkXFxcIl0sXFxuICAgICAgICBbXFxcIkFydEdyYXZpYVxcXCIsIFxcXCJzZXJpZXMtNjBhNGE5NTNjYTU2M1xcXCJdLFxcbiAgICAgICAgW1xcXCLniLHkuJ1cXFwiLCBcXFwic2VyaWVzLTVmMTVmMzg5ZTk5M2VcXFwiXSxcXG4gICAgICAgIFtcXFwi5p6c5Zui572RXFxcIiwgXFxcInNlcmllcy01ZjE4MTdiNDI3NzJiXFxcIl0sXFxuICAgICAgICBbXFxcIlBBTlPlhpnnnJ9cXFwiLCBcXFwic2VyaWVzLTVmMTQ4MmIzYTY4ZDZcXFwiXSxcXG4gICAgICAgIFtcXFwi5aaW57K+56S+XFxcIiwgXFxcInNlcmllcy01ZjRiNWY0ZWI4YjcxXFxcIl0sXFxuICAgICAgICBbXFxcIuicnOS4nVxcXCIsIFxcXCJzZXJpZXMtNWYyMDg5NTY0YzZjMlxcXCJdLFxcbiAgICAgICAgW1xcXCLlpLTmnaHlpbPnpZ5cXFwiLCBcXFwic2VyaWVzLTVmMTQ4MDY1ODViZWZcXFwiXSxcXG4gICAgICAgIFtcXFwiUHVyZSBNZWRpYVxcXCIsIFxcXCJzZXJpZXMtNjIyNGU3NTVlMjFmNFxcXCJdLFxcbiAgICAgICAgW1xcXCLlsKTnvo5cXFwiLCBcXFwic2VyaWVzLTYxYjk5NzcyODA0M2JcXFwiXSxcXG4gICAgICAgIFtcXFwiU0xBRFnnjI7lpbPnpZ5cXFwiLCBcXFwic2VyaWVzLTYwNWVkNTIzM2NhNTdcXFwiXSxcXG4gICAgICAgIFtcXFwi5o6o5aWz56WeXFxcIiwgXFxcInNlcmllcy01ZjIwMzI0Y2FkNjFkXFxcIl1cXG4gICAgXSwgXFxcIldhcmVob3VzZS50eXBlXFxcIiwgZGF0YVR5cGUpO1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFxcXCLwn5SNXFxcIixcXG4gICAgICAgIHVybDogJC50b1N0cmluZygocikgPT4ge1xcbiAgICAgICAgICAgIHB1dE15VmFyKCdrZXl3b3JkJywgaW5wdXQpO1xcbiAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9wYWdlL3NlYXJjaD9wPSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNmeXBhZ2UmdHlwZT3lsI/pu4TkuaYma3c9XFxcIiArIGlucHV0O1xcbiAgICAgICAgfSwgTVlfUlVMRS50aXRsZSksXFxuICAgICAgICBkZXNjOiAn5pCc57SiJyxcXG4gICAgICAgIGNvbF90eXBlOiBcXFwiaW5wdXRcXFwiXFxuICAgIH0pO1xcbn1cXG52YXIgbGlzdCA9IHBkZmEoaHRtbCwgJy5saXN0LS0uaXRlbSw2JiYuaXRlbScpO1xcbmZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICB2YXIgZGVzYyA9IHBkZmgobGlzdFtqXSwgJy50YWcmJlRleHQnKTtcXG4gICAgdmFyIHRpdGxlID0gcGRmaChsaXN0W2pdLCAnaW1nJiZhbHQnKTtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiB0aXRsZSxcXG4gICAgICAgIGRlc2M6IGRlc2MsXFxuICAgICAgICBpbWc6IHBkKGxpc3Rbal0sICdpbWcmJnNyYycpLFxcbiAgICAgICAgdXJsOiAnaGlrZXI6Ly9wYWdlL+Wwj+m7hOS5puS6jOe6pz91cmw9JyArICdodHRwczovL3hjaGluYS5jbycgKyBwZGZoKGxpc3Rbal0sICdhJiZocmVmJyksXFxuICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgIGxvbmdDbGljazogW3tcXG4gICAgICAgICAgICAgICAgdGl0bGU6ICfliLfmlrAnLFxcbiAgICAgICAgICAgICAgICBqczogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICB9LCB7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiAn5b+r6YCf5pCc57SiJyxcXG4gICAgICAgICAgICAgICAganM6ICQudG9TdHJpbmcoKHRpdGxlLCBydWxlKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vc2VhcmNoP3M9XFxcIiArIHRpdGxlICsgXFxcIiZydWxlPVxcXCIgKyBydWxlO1xcbiAgICAgICAgICAgICAgICB9LCB0aXRsZSwgTVlfUlVMRS50aXRsZSlcXG4gICAgICAgICAgICB9XVxcbiAgICAgICAgfVxcbiAgICB9KTtcXG59XFxuc2V0UmVzdWx0KGQpXCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8yXCIsXCJuYW1lXCI6XCIzLum6u+ixhmNsdWJcIixcInBhdGhcIjpcIm1hZG91Y2x1YlwiLFwicnVsZVwiOlwianM6XFxudmFyIGQgPSBbXTtcXG5jb25zdCBwYWdlID0gTVlfUEFHRTtcXG5sZXQgZGF0YVR5cGUgPSBnZXRWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIiwgXFxcIi9cXFwiKTtcXG5sZXQgaHJlZiA9ICdodHRwczovL21hZG91LmNsdWIvJyArIGRhdGFUeXBlICsgJy9wYWdlLycgKyBwYWdlO1xcbmFkZExpc3RlbmVyKCdvbkNsb3NlJywgJC50b1N0cmluZygoKSA9PiB7XFxuICAgIGNsZWFyVmFyKFxcXCJXYXJlaG91c2UudHlwZVxcXCIpO1xcbn0pKTtcXG5cXG5mdW5jdGlvbiB0YWIoYXJyLCB0eXBlLCBjb250cmFzdCkge1xcbiAgICBmb3IgKGxldCBpdGVtIG9mIGFycikge1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogaXRlbVsxXSA9PT0gY29udHJhc3QgPyBcXFwi4oCc4oCcXFxcIiArIGl0ZW1bMF0gKyBcXFwi4oCd4oCdXFxcIiA6IGl0ZW1bMF0sXFxuICAgICAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChrZXksIHR5cGUpID0+IHtcXG4gICAgICAgICAgICAgICAgcHV0VmFyKHR5cGUsIGtleSk7XFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgICAgICB9LCBpdGVtWzFdLCB0eXBlKSxcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcInNjcm9sbF9idXR0b25cXFwiXFxuICAgICAgICB9KTtcXG4gICAgfVxcbiAgICBkLnB1c2goe1xcbiAgICAgICAgY29sX3R5cGU6IFxcXCJibGFua19ibG9ja1xcXCJcXG4gICAgfSk7XFxufVxcbnZhciBodG1sID0gZmV0Y2hDb2RlQnlXZWJWaWV3KGhyZWYpXFxuXFxuaWYgKHBhZ2UgPT0gMSkge1xcbiAgICB0YWIoW1xcbiAgICAgICAgW1xcXCLpppbpobVcXFwiLCBcXFwiL1xcXCJdLFxcbiAgICAgICAgW1xcXCLpurvosYbkvKDlqpJcXFwiLCBcXFwiY2F0ZWdvcnkvJWU5JWJhJWJiJWU4JWIxJTg2JWU0JWJjJWEwJWU1JWFhJTkyXFxcIl0sXFxuICAgICAgICBbXFxcIum6u+ixhueVquWkluevh1xcXCIsIFxcXCJjYXRlZ29yeS8lZTklYmElYmIlZTglYjElODYlZTclOTUlYWElZTUlYTQlOTYlZTclYWYlODdcXFwiXSxcXG4gICAgICAgIFtcXFwi6bq76LGG6Iqx57WuXFxcIiwgXFxcImNhdGVnb3J5LyVlOSViYSViYiVlOCViMSU4NiVlOCU4YSViMSVlNyViNSVhZVxcXCJdLFxcbiAgICAgICAgW1xcXCLlhbbku5bljp/liJsv5LyB5YiSXFxcIiwgXFxcIiNcXFwiXSxcXG4gICAgICAgIFtcXFwiSG9uZ0tvbmdEb2xsXFxcIiwgXFxcImNhdGVnb3J5L2hvbmdrb25nZG9sbFxcXCJdLFxcbiAgICAgICAgW1xcXCJQc3ljaG9wb3JuVFdcXFwiLCBcXFwiY2F0ZWdvcnkvcHN5Y2hvcG9ybnR3XFxcIl0sXFxuICAgICAgICBbXFxcIjkx5Yi254mH5Y6CXFxcIiwgXFxcImNhdGVnb3J5LzkxJWU1JTg4JWI2JWU3JTg5JTg3JWU1JThlJTgyXFxcIl0sXFxuICAgICAgICBbXFxcIuaenOWGu+S8oOWqklxcXCIsIFxcXCJjYXRlZ29yeS8lZTYlOWUlOWMlZTUlODYlYmIlZTQlYmMlYTAlZTUlYWElOTJcXFwiXSxcXG4gICAgICAgIFtcXFwi6Jyc5qGD5b2x5YOPXFxcIiwgXFxcImNhdGVnb3J5LyVlOCU5YyU5YyVlNiVhMSU4MyVlNSViZCViMSVlNSU4MyU4ZlxcXCJdLFxcbiAgICAgICAgW1xcXCLlpKnnvo7kvKDlqpJcXFwiLCBcXFwiY2F0ZWdvcnkvJWU1JWE0JWE5JWU3JWJlJThlJWU0JWJjJWEwJWU1JWFhJTkyXFxcIl0sXFxuICAgICAgICBbXFxcIueyvuS4nOW9seS4mlxcXCIsIFxcXCJjYXRlZ29yeS8lZTclYjIlYmUlZTQlYjglOWMlZTUlYmQlYjElZTQlYjglOWFcXFwiXSxcXG4gICAgICAgIFtcXFwi5pif56m65peg6ZmQ5Lyg5aqSXFxcIiwgXFxcImNhdGVnb3J5LyVlNiU5OCU5ZiVlNyVhOSViYSVlNiU5NyVhMCVlOSU5OSU5MCVlNCViYyVhMCVlNSVhYSU5MlxcXCJdLFxcbiAgICAgICAgW1xcXCLmnY/lkKdcXFwiLCBcXFwiY2F0ZWdvcnkvJWU2JTlkJThmJWU1JTkwJWE3XFxcIl0sXFxuICAgICAgICBbXFxcIueah+WutuWNjuS6ulxcXCIsIFxcXCJjYXRlZ29yeS8lZTclOWElODclZTUlYWUlYjYlZTUlOGQlOGUlZTQlYmElYmFcXFwiXSxcXG4gICAgICAgIFtcXFwi5LmQ5pKt5Lyg5aqSXFxcIiwgXFxcImNhdGVnb3J5LyVlNCViOSU5MCVlNiU5MiVhZCVlNCViYyVhMCVlNSVhYSU5MlxcXCJdLFxcbiAgICAgICAgW1xcXCLnjKvniKrlvbHlg49cXFwiLCBcXFwiY2F0ZWdvcnkvJWU3JThjJWFiJWU3JTg4JWFhJWU1JWJkJWIxJWU1JTgzJThmXFxcIl0sXFxuICAgICAgICBbXFxcIueIseixhlxcXCIsIFxcXCJjYXRlZ29yeS8lZTclODglYjElZTglYjElODZcXFwiXSxcXG4gICAgICAgIFtcXFwi6I2J6I6TXFxcIiwgXFxcImNhdGVnb3J5LyVlOCU4ZCU4OSVlOCU4ZSU5M1xcXCJdLFxcbiAgICAgICAgW1xcXCLmipbpmLRcXFwiLCBcXFwiY2F0ZWdvcnkvJWU2JThhJTk2JWU5JTk4JWI0XFxcIl0sXFxuICAgICAgICBbXFxcIum6u+ixhuWvvOa8lOezu+WIl1xcXCIsIFxcXCJjYXRlZ29yeS8lZTklYmElYmIlZTglYjElODYlZTUlYWYlYmMlZTYlYmMlOTQlZTclYjMlYmIlZTUlODglOTdcXFwiXSxcXG4gICAgICAgIFtcXFwi5YWU5a2Q5YWI55SfXFxcIiwgXFxcImNhdGVnb3J5LyVlNSU4NSU5NCVlNSVhZCU5MCVlNSU4NSU4OCVlNyU5NCU5ZlxcXCJdLFxcbiAgICAgICAgW1xcXCJTQeWbvemZheS8oOWqklxcXCIsIFxcXCJjYXRlZ29yeS9zYSVlNSU5YiViZCVlOSU5OSU4NSVlNCViYyVhMCVlNSVhYSU5MlxcXCJdLFxcbiAgICAgICAgW1xcXCLotbfngrnkvKDlqpIv5oCn6KeG55WM5Lyg5aqSXFxcIiwgXFxcImNhdGVnb3J5LyVlOCViNSViNyVlNyU4MiViOSVlNCViYyVhMCVlNSVhYSU5Mi0lZTYlODAlYTclZTglYTclODYlZTclOTUlOGMlZTQlYmMlYTAlZTUlYWElOTJcXFwiXSxcXG4gICAgICAgIFtcXFwi5LmM5omY6YKmXFxcIiwgXFxcImNhdGVnb3J5LyVlNCViOSU4YyVlNiU4OSU5OCVlOSU4MiVhNlxcXCJdLFxcbiAgICAgICAgW1xcXCLlpKfpuJ/ljYHlhatcXFwiLCBcXFwiY2F0ZWdvcnkvJWU1JWE0JWE3JWU5JWI4JTlmJWU1JThkJTgxJWU1JTg1JWFiXFxcIl0sXFxuICAgICAgICBbXFxcIuWwj+m5j+Wlh+WVquihjFxcXCIsIFxcXCJjYXRlZ29yeS8lZTUlYjAlOGYlZTklYjklOGYlZTUlYTUlODclZTUlOTUlYWElZTglYTElOGNcXFwiXSxcXG4gICAgICAgIFtcXFwi5aWz5LyY5rer5aiD5Z+56K6t6JClXFxcIiwgXFxcImNhdGVnb3J5LyVlNSVhNSViMyVlNCViYyU5OCVlNiViNyVhYiVlNSVhOCU4MyVlNSU5ZiViOSVlOCVhZSVhZCVlOCU5MCVhNVxcXCJdLFxcbiAgICAgICAgW1xcXCLmt6vmrLLmuLjmiI/njotcXFwiLCBcXFwiY2F0ZWdvcnkvJWU2JWI3JWFiJWU2JWFjJWIyJWU2JWI4JWI4JWU2JTg4JThmJWU3JThlJThiXFxcIl0sXFxuICAgICAgICBbXFxcIuWls+elnue+nue+nueglOeptuaJgFxcXCIsIFxcXCJjYXRlZ29yeS8lZTUlYTUlYjMlZTclYTUlOWUlZTclYmUlOWUlZTclYmUlOWUlZTclYTAlOTQlZTclYTklYjYlZTYlODklODBcXFwiXSxcXG4gICAgICAgIFtcXFwi56qB6KKt5aWz5LyY5a62XFxcIiwgXFxcImNhdGVnb3J5LyVlNyVhYSU4MSVlOCVhMiVhZCVlNSVhNSViMyVlNCViYyU5OCVlNSVhZSViNlxcXCJdLFxcbiAgICAgICAgW1xcXCLmg4XotqNL5q2M5oi/XFxcIiwgXFxcImNhdGVnb3J5LyVlNiU4MyU4NSVlOCViNiVhM2slZTYlYWQlOGMlZTYlODglYmZcXFwiXSxcXG4gICAgICAgIFtcXFwiS0lTU+ezluaenOWxi1xcXCIsIFxcXCJjYXRlZ29yeS9raXNzJWU3JWIzJTk2JWU2JTllJTljJWU1JWIxJThiXFxcIl1cXG4gICAgXSwgXFxcIldhcmVob3VzZS50eXBlXFxcIiwgZGF0YVR5cGUpO1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFxcXCLwn5SNXFxcIixcXG4gICAgICAgIHVybDogJC50b1N0cmluZygocikgPT4ge1xcbiAgICAgICAgICAgIHB1dE15VmFyKCdrZXl3b3JkJywgaW5wdXQpO1xcbiAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9wYWdlL3NlYXJjaD9wPSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNmeXBhZ2UmdHlwZT3purvosYZjbHViJmt3PVxcXCIgKyBpbnB1dDtcXG4gICAgICAgIH0sIE1ZX1JVTEUudGl0bGUpLFxcbiAgICAgICAgZGVzYzogJ+aQnOe0oicsXFxuICAgICAgICBjb2xfdHlwZTogXFxcImlucHV0XFxcIlxcbiAgICB9KTtcXG59XFxuXFxuZnVuY3Rpb24gcGxheWVyKFVybCkge1xcbiAgICByZXR1cm4gJChVcmwpLmxhenlSdWxlKCgpID0+IHtcXG4gICAgICAgIHZhciBodG1sID0gZmV0Y2goaW5wdXQpO1xcbiAgICAgICAgdmFyIGhyZWYgPSBwZGZoKGh0bWwsICcuYXJ0aWNsZS1jb250ZW50JiZpZnJhbWUmJnNyYycpO1xcbiAgICAgICAgcmV0dXJuICQoaHJlZikubGF6eVJ1bGUoKCkgPT4ge1xcbiAgICAgICAgICAgIHZhciBodG1sbCA9IGZldGNoKGlucHV0KTtcXG4gICAgICAgICAgICB2YXIgdmlkZW8xID0gcGRmaChodG1sbCwgJ2JvZHkmJnNjcmlwdCwtMSYmSHRtbCcpXFxuICAgICAgICAgICAgdmFyIHZpZGVvID0gdmlkZW8xLm1hdGNoKC90b2tlbiA9IFxcXCIoLiopXFxcXFxcXCI7LylbMV07XFxuICAgICAgICAgICAgcmV0dXJuIGlucHV0LnJlcGxhY2UoXFxcInNoYXJlXFxcIiwgXFxcInZpZGVvc1xcXCIpICsgXFxcIi9pbmRleC5tM3U4P3Rva2VuPVxcXCIgKyB2aWRlbztcXG4gICAgICAgIH0pXFxuICAgIH0pXFxufVxcblxcbnZhciBsaXN0ID0gcGRmYShodG1sLCAnLmV4Y2VycHRzJiYuZXhjZXJwdCcpO1xcbmZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICB2YXIgdGl0bGUgPSBwZGZoKGxpc3Rbal0sICdoMiYmVGV4dCcpO1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IHRpdGxlLFxcbiAgICAgICAgZGVzYzogcGRmaChsaXN0W2pdLCAnLnBvc3QtdmlldyYmVGV4dCcpLFxcbiAgICAgICAgaW1nOiBwZChsaXN0W2pdLCAnaW1nJiZkYXRhLXNyYycpICsgJ0BSZWZlcmVyPScsXFxuICAgICAgICB1cmw6IHBsYXllcihwZGZoKGxpc3Rbal0sICdhJiZocmVmJykpLFxcbiAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICBsb25nQ2xpY2s6IFt7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiAn5Yi35pawJyxcXG4gICAgICAgICAgICAgICAganM6ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgICAgIH0pXFxuICAgICAgICAgICAgfSwge1xcbiAgICAgICAgICAgICAgICB0aXRsZTogJ+W/q+mAn+aQnOe0oicsXFxuICAgICAgICAgICAgICAgIGpzOiAkLnRvU3RyaW5nKCh0aXRsZSwgcnVsZSkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL3NlYXJjaD9zPVxcXCIgKyB0aXRsZSArIFxcXCImcnVsZT1cXFwiICsgcnVsZTtcXG4gICAgICAgICAgICAgICAgfSwgdGl0bGUsIE1ZX1JVTEUudGl0bGUpXFxuICAgICAgICAgICAgfV1cXG4gICAgICAgIH1cXG4gICAgfSk7XFxufVxcbnNldFJlc3VsdChkKTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIjQu5bCP6buE5Lmm5LqM57qnXCIsXCJwYXRoXCI6XCLlsI/pu4TkuabkuoznuqdcIixcInJ1bGVcIjpcImpzOlxcbnZhciBkID0gW107XFxudmFyIGh0bWwgPSBmZXRjaChNWV9VUkwpO1xcblxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiAn5L2c5ZOB5ZCN77yaJyArICdcXFxcbicgKyBwZGZoKGh0bWwsICcuYnJlYWRjcnVtYiYmYSwtMSYmVGV4dCcpLFxcbiAgICB1cmw6IHBkZmgoaHRtbCwgJ2hlYWQmJm1ldGEsLTMmJmNvbnRlbnQnKSxcXG4gICAgY29sX3R5cGU6IFxcXCJtb3ZpZV8xX3ZlcnRpY2FsX3BpY19ibHVyXFxcIixcXG4gICAgZGVzYzogcGRmaChodG1sLCAnLmluZm8mJlRleHQnKSxcXG4gICAgcGljX3VybDogcGRmaChodG1sLCAnaGVhZCYmbWV0YSwtMyYmY29udGVudCcpLnJlcGxhY2UoXFxcIi5qcGdcXFwiLCBcXFwiXzMwMHgwLmpwZ1xcXCIpLFxcbn0pO1xcblxcbmZ1bmN0aW9uIOino+aekCgpIHtcXG4gICAgdmFyIHBpY3MgPSBbXTtcXG4gICAgdmFyIGh0bWwgPSBmZXRjaChpbnB1dCk7XFxuICAgIHZhciBsaXN0ID0gcGRmYShodG1sLCAnLnBob3RvcyYmaW1nJyk7XFxuICAgIGlmIChsaXN0Lmxlbmd0aCA+IDQpIHtcXG4gICAgICAgIHZhciBsaXN0MSA9IHBkZmEoaHRtbCwgJy5waG90b3MtLWltZyw0JiZpbWcnKTtcXG4gICAgICAgIGZvciAodmFyIGogaW4gbGlzdDEpIHtcXG4gICAgICAgICAgICBwaWNzLnB1c2gocGRmaChsaXN0MVtqXSwgJ2ltZyYmc3JjJykucmVwbGFjZShcXFwiXzYwMHgwXFxcIiwgXFxcIlxcXCIpKVxcbiAgICAgICAgfVxcbiAgICB9IGVsc2Uge1xcbiAgICAgICAgZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgICAgICAgICAgcGljcy5wdXNoKHBkZmgobGlzdFtqXSwgJ2ltZyYmc3JjJykucmVwbGFjZShcXFwiXzYwMHgwXFxcIiwgXFxcIlxcXCIpKVxcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIHJldHVybiBcXFwicGljczovL1xcXCIgKyBwaWNzLmpvaW4oXFxcIiYmXFxcIik7XFxufVxcbmxldCBsYXp5ID0gJChcXFwiXFxcIikubGF6eVJ1bGUo6Kej5p6QKTtcXG5sZXQgZG93bmxvYWRsYXp5ID0gJC50b1N0cmluZyjop6PmnpApO1xcbnZhciBkb0xpc3QgPSBbXTtcXG5kLnB1c2goe1xcbiAgICB0aXRsZTogJ+KAnOKAnOKAneKAnTxiPjxzcGFuIHN0eWxlPVxcXCJjb2xvcjogIzFhYWQxOVxcXCI+8J+TpeS4i+i9vTwvc3Bhbj48L2I+JyxcXG4gICAgdXJsOiBcXFwiaGlrZXI6Ly9wYWdlL2Rvd25sb2FkLnZpZXcjbm9SZWNvcmRIaXN0b3J5IyNub1JlZnJlc2gjP3J1bGU95p+Q6IGa5ZCIXFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzJcXFwiLFxcbiAgICBleHRyYToge1xcbiAgICAgICAgY2hhcHRlckxpc3Q6IGRvTGlzdCxcXG4gICAgICAgIGluZm86IHtcXG4gICAgICAgICAgICBib29rTmFtZTogcGRmaChodG1sLCAnLmJyZWFkY3J1bWImJmEsLTEmJlRleHQnKSxcXG4gICAgICAgICAgICBydWxlTmFtZTogXFxcIuWwj+m7hOS5plxcXCIsXFxuICAgICAgICAgICAgYm9va1RvcFBpYzogcGRmaChodG1sLCAnaGVhZCYmbWV0YSwtMyYmY29udGVudCcpLFxcbiAgICAgICAgICAgIHBhcnNlQ29kZTogZG93bmxvYWRsYXp5XFxuICAgICAgICB9LFxcbiAgICAgICAgZGVmYXVsdFZpZXc6IFxcXCIxXFxcIlxcbiAgICB9XFxufSk7XFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6ICfigJjigJjigJnigJk8c3Ryb25nPjxmb250IGNvbG9yPSBcXFwiIzA5OEFDMVxcXCI+JyArIFxcXCLwn5ez5Lmm5p62XFxcIiArICc8L2Zyb250Pjwvc3Ryb25nPicsXFxuICAgIHVybDogXFxcImhpa2VyOi8vcGFnZS9Cb29rcmFjay52aWV3P3J1bGU95p+Q6IGa5ZCIJnJ1bGVOYW1lPeWwj+m7hOS5plxcXCIsXFxuICAgIGNvbF90eXBlOiBcXFwidGV4dF8yXFxcIixcXG59KTtcXG52YXIgdmlkZW8gPSBwZGZhKGh0bWwsICdib2R5JiYjdmlkZW8nKTtcXG5pZiAodmlkZW8ubGVuZ3RoID4gMCkge1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6ICfigJzigJzop4bpopHigJ3igJ0nLFxcbiAgICAgICAgdXJsOiAndmlkZW86Ly8nICsgTVlfVVJMLFxcbiAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICBibG9ja1J1bGVzOiBbJy5wbmcnLCAnLmpwZycsICcvYWQvJ10sXFxuICAgICAgICAgICAgdmlkZW9SdWxlczogWycqczEucGxheWhscy5jb20vKiddLFxcbiAgICAgICAgICAgIGNsczogJ3BsYXlsaXN0IHIxJ1xcbiAgICAgICAgfSxcXG4gICAgICAgIGNvbF90eXBlOiAndGV4dF8zJyxcXG4gICAgfSk7XFxufVxcbmxldCBjbyA9IHBkZmEoaHRtbCwgJy5wYWdlciYmYScpO1xcbmlmIChjby5sZW5ndGggPiAwKSB7XFxuICAgIHZhciBsaXN0ID0gcGRmaChodG1sLCAnLnBhZ2VyJiZhLC0yJiZUZXh0Jyk7XFxuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IGxpc3Q7IGkrKykge1xcbiAgICAgICAgZG9MaXN0LnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBcXFwi56ysXFxcIiArIGkgKyBcXFwi6aG1XFxcIixcXG4gICAgICAgICAgICB1cmw6IE1ZX1VSTC5yZXBsYWNlKFxcXCIuaHRtbFxcXCIsIFxcXCIvXFxcIikgKyBpICsgXFxcIi5odG1sXFxcIixcXG4gICAgICAgIH0pXFxuICAgIH1cXG4gICAgZm9yICh2YXIgaiA9IDE7IGogPD0gbGlzdDsgaisrKSB7XFxuICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBcXFwi56ysXFxcIiArIGogKyBcXFwi6aG1XFxcIixcXG4gICAgICAgICAgICB1cmw6IE1ZX1VSTC5yZXBsYWNlKFxcXCIuaHRtbFxcXCIsIFxcXCIvXFxcIikgKyBqICsgXFxcIi5odG1sXFxcIiArIGxhenksXFxuICAgICAgICAgICAgY29sX3R5cGU6ICd0ZXh0XzMnLFxcbiAgICAgICAgfSk7XFxuICAgIH1cXG59IGVsc2Uge1xcbiAgICBkb0xpc3QucHVzaCh7XFxuICAgICAgICB0aXRsZTogXFxcIuesrDHpobVcXFwiLFxcbiAgICAgICAgdXJsOiBNWV9VUkwsXFxuICAgIH0pXFxuICAgIHZhciBwaWNzID0gW107XFxuICAgIHZhciBsaXN0MSA9IHBkZmEoaHRtbCwgJy5waG90b3MtLWltZyw0JiZpbWcnKTtcXG4gICAgZm9yICh2YXIgaiBpbiBsaXN0MSkge1xcbiAgICAgICAgcGljcy5wdXNoKHBkZmgobGlzdDFbal0sICdpbWcmJnNyYycpLnJlcGxhY2UoXFxcIl82MDB4MFxcXCIsIFxcXCJcXFwiKSlcXG4gICAgfVxcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFxcXCLnrKwx6aG1XFxcIixcXG4gICAgICAgIHVybDogXFxcInBpY3M6Ly9cXFwiICsgcGljcy5qb2luKFxcXCImJlxcXCIpLFxcbiAgICAgICAgY29sX3R5cGU6ICd0ZXh0XzMnLFxcbiAgICB9KTtcXG59XFxuc2V0UmVzdWx0KGQpXCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCI1LnJ1bGUzNHZpZGVvXCIsXCJwYXRoXCI6XCJydWxlMzR2aWRlb1wiLFwicnVsZVwiOlwianM6XFxudmFyIGQgPSBbXTtcXG5jb25zdCBwYWdlID0gTVlfUEFHRTtcXG5sZXQgZGF0YVR5cGUgPSBnZXRWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIiwgXFxcInBvc3RfZGF0ZVxcXCIpO1xcbmxldCBUeXBlMSA9IGdldFZhcihcXFwiV2FyZWhvdXNlLnR5cGUxXFxcIiwgXFxcIlxcXCIpO1xcbmlmIChUeXBlMSA9PSAnJykge1xcbiAgICB2YXIgaHJlZiA9ICdodHRwczovL3J1bGUzNHZpZGVvLmNvbS8nICsgVHlwZTEgKyAnP21vZGU9YXN5bmMmZnVuY3Rpb249Z2V0X2Jsb2NrJmJsb2NrX2lkPWN1c3RvbV9saXN0X3ZpZGVvc19tb3N0X3JlY2VudF92aWRlb3Mmc29ydF9ieT0nICsgZGF0YVR5cGUgKyAnJmZyb209JyArIHBhZ2UgKyAnJl89MTY3OTAyNjQ3NjYyNidcXG59IGVsc2Uge1xcbiAgICBocmVmID0gJ2h0dHBzOi8vcnVsZTM0dmlkZW8uY29tLycgKyBUeXBlMSArICc/bW9kZT1hc3luYyZmdW5jdGlvbj1nZXRfYmxvY2smYmxvY2tfaWQ9Y3VzdG9tX2xpc3RfdmlkZW9zX2NvbW1vbl92aWRlb3Mmc29ydF9ieT0nICsgZGF0YVR5cGUgKyAnJmZyb209JyArIHBhZ2UgKyAnJl89MTY3OTAyNjQ3NjYyNidcXG59XFxuYWRkTGlzdGVuZXIoJ29uQ2xvc2UnLCAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgY2xlYXJWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIik7XFxufSkpO1xcblxcbmZ1bmN0aW9uIHRhYihhcnIsIHR5cGUsIGNvbnRyYXN0KSB7XFxuICAgIGZvciAobGV0IGl0ZW0gb2YgYXJyKSB7XFxuICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBpdGVtWzFdID09PSBjb250cmFzdCA/IFxcXCLigJzigJxcXFwiICsgaXRlbVswXSArIFxcXCLigJ3igJ1cXFwiIDogaXRlbVswXSxcXG4gICAgICAgICAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoKGtleSwgdHlwZSkgPT4ge1xcbiAgICAgICAgICAgICAgICBwdXRWYXIodHlwZSwga2V5KTtcXG4gICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcbiAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgIH0sIGl0ZW1bMV0sIHR5cGUpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCJcXG4gICAgICAgIH0pO1xcbiAgICB9XFxuICAgIGQucHVzaCh7XFxuICAgICAgICBjb2xfdHlwZTogXFxcImJsYW5rX2Jsb2NrXFxcIlxcbiAgICB9KTtcXG59XFxudmFyIGh0bWwgPSBmZXRjaChocmVmKVxcblxcbmlmIChwYWdlID09IDEpIHtcXG4gICAgdGFiKFtcXG4gICAgICAgIFtcXFwi5pyA5pawXFxcIiwgXFxcInBvc3RfZGF0ZVxcXCJdLFxcbiAgICAgICAgW1xcXCLmnIDpq5jor4Tku7dcXFwiLCBcXFwicmF0aW5nXFxcIl0sXFxuICAgICAgICBbXFxcIuacgOWPl+asoui/ju+8muWFqOmDqFxcXCIsIFxcXCJ2aWRlb192aWV3ZWRcXFwiXSxcXG4gICAgICAgIFtcXFwi5pyIXFxcIiwgXFxcInZpZGVvX3ZpZXdlZF9tb250aFxcXCJdLFxcbiAgICAgICAgW1xcXCLlkahcXFwiLCBcXFwidmlkZW9fdmlld2VkX3dlZWtcXFwiXSxcXG4gICAgICAgIFtcXFwi5pelXFxcIiwgXFxcInZpZGVvX3ZpZXdlZF90b2RheVxcXCJdXFxuICAgIF0sIFxcXCJXYXJlaG91c2UudHlwZVxcXCIsIGRhdGFUeXBlKTtcXG4gICAgdGFiKFtcXG4gICAgICAgIFtcXFwi5YWo6YOoXFxcIiwgXFxcIlxcXCJdLFxcbiAgICAgICAgW1xcXCLprLznga1cXFwiLCBcXFwiY2F0ZWdvcmllcy9raW1ldHN1LW5vLXlhaWJhL1xcXCJdLFxcbiAgICAgICAgW1xcXCIyZFxcXCIsIFxcXCJjYXRlZ29yaWVzLzJkL1xcXCJdLFxcbiAgICAgICAgW1xcXCIzZFxcXCIsIFxcXCJjYXRlZ29yaWVzLzNkL1xcXCJdLFxcbiAgICAgICAgW1xcXCLmnIDnu4jlubvmg7NcXFwiLCBcXFwiY2F0ZWdvcmllcy9maW5hbC1mYW50YXN5L1xcXCJdLFxcbiAgICAgICAgW1xcXCLpvpnnj6BcXFwiLCBcXFwiY2F0ZWdvcmllcy9kcmFnb24tYmFsbC9cXFwiXSxcXG4gICAgICAgIFtcXFwi5Y6f56WeXFxcIiwgXFxcImNhdGVnb3JpZXMvZ2Vuc2hpbi1pbXBhY3QvXFxcIl0sXFxuICAgICAgICBbXFxcImhlbnRhaVxcXCIsIFxcXCJjYXRlZ29yaWVzL2hlbnRhaS9cXFwiXSxcXG4gICAgICAgIFtcXFwiMjA3N1xcXCIsIFxcXCJjYXRlZ29yaWVzL2N5YmVycHVuay0yMDc3L1xcXCJdXFxuICAgIF0sIFxcXCJXYXJlaG91c2UudHlwZTFcXFwiLCBUeXBlMSk7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogXFxcIvCflI1cXFwiLFxcbiAgICAgICAgdXJsOiAkLnRvU3RyaW5nKChyKSA9PiB7XFxuICAgICAgICAgICAgcHV0TXlWYXIoJ2tleXdvcmQnLCBpbnB1dCk7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL3BhZ2Uvc2VhcmNoP3A9I25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5I2Z5cGFnZSZ0eXBlPXJ1bGUzNHZpZGVvJmt3PVxcXCIgKyBpbnB1dDtcXG4gICAgICAgIH0sIE1ZX1JVTEUudGl0bGUpLFxcbiAgICAgICAgZGVzYzogJ+aQnOe0oijoi7HmlocpLy/plb/mjInlm77niYfmnInmg4rllpwnLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJpbnB1dFxcXCJcXG4gICAgfSk7XFxufVxcblxcbmZ1bmN0aW9uIHBsYXllcihVcmwpIHtcXG4gICAgcmV0dXJuICQoVXJsKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgICB2YXIgaHRtbCA9IGZldGNoKGlucHV0KTtcXG4gICAgICAgIHZhciB2aWRlb3MgPSBbXTtcXG4gICAgICAgIHZhciB0aXRsZXMgPSBbXTtcXG4gICAgICAgIHZhciBsaXN0ID0gcGRmYShodG1sLCAnYm9keSYmLnJvdywzJiZhJyk7XFxuICAgICAgICBmb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgICAgICAgICB2aWRlb3MucHVzaCgnXFxcIicgKyBwZGZoKGxpc3Rbal0sICdhJiZocmVmJykgKyAnXFxcIicpXFxuICAgICAgICAgICAgdGl0bGVzLnB1c2goJ1xcXCInICsgcGRmaChsaXN0W2pdLCAnYSYmVGV4dCcpLnJlcGxhY2UoXFxcIk1QNCBcXFwiLCBcXFwiXFxcIikgKyAnXFxcIicpXFxuICAgICAgICB9XFxuICAgICAgICByZXR1cm4gXFxcInt1cmxzOltcXFwiICsgdmlkZW9zICsgXFxcIl0sbmFtZXM6W1xcXCIgKyB0aXRsZXMgKyBcXFwiXX1cXFwiXFxuICAgIH0pXFxufVxcblxcbnZhciBsaXN0ID0gcGFyc2VEb21Gb3JBcnJheShodG1sLCAnLnRodW1icyYmLml0ZW0nKTtcXG5mb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgdmFyIGxqID0gcGRmaChsaXN0W2pdLCAnYSYmaHJlZicpO1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IHBhcnNlRG9tRm9ySHRtbChsaXN0W2pdLCAnLnRodW1iX3RpdGxlJiZUZXh0JyksXFxuICAgICAgICBwaWNfdXJsOiBwYXJzZURvbShsaXN0W2pdLCAnaW1nJiZkYXRhLW9yaWdpbmFsJyksXFxuICAgICAgICB1cmw6IHBsYXllcihsaiksXFxuICAgICAgICBkZXNjOiBwZGZoKGxpc3Rbal0sICcuYWRkZWQmJlRleHQnKSxcXG4gICAgICAgIGNvbF90eXBlOiAnbW92aWVfMicsXFxuICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgIGxvbmdDbGljazogW3tcXG4gICAgICAgICAgICAgICAgdGl0bGU6ICfliLfmlrAnLFxcbiAgICAgICAgICAgICAgICBqczogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICB9LCB7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiAn6I635Y+W5qCH562+JyxcXG4gICAgICAgICAgICAgICAganM6ICQudG9TdHJpbmcoKHUpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHUpLmxhenlSdWxlKCgpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IGZldGNoKGlucHV0KVxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBBcnRpc3QgPSBwZGZoKGh0bWwsICdib2R5JiYucm93LDImJi5uYW1lJiZUZXh0JykucmVwbGFjZSgvIC9nLCBcXFwiLVxcXCIpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSBbQXJ0aXN0XTtcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IHBkZmEoaHRtbCwgJ2JvZHkmJi5yb3csNC0tYSwtMSYmYScpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWcucHVzaChwZGZoKGxpc3Rbal0sICdhJiZUZXh0JykucmVwbGFjZSgvIC9nLCBcXFwiLVxcXCIpKVxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCh0YWcubWFwKHYgPT4gdikpLnNlbGVjdCgobmFtZSkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU9cnVsZTM0dmlkZW8ma3c9XFxcIiArIGlucHV0XFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICAgICAgICAgIH0pXFxuICAgICAgICAgICAgICAgIH0sIGxqKVxcbiAgICAgICAgICAgIH1dXFxuICAgICAgICB9XFxuICAgIH0pO1xcbn1cXG5zZXRSZXN1bHQoZClcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIjYueWFuZGVcIixcInBhdGhcIjpcInlhbmRlXCIsXCJydWxlXCI6XCJqczpcXG52YXIgZCA9IFtdO1xcbmNvbnN0IHBhZ2UgPSBNWV9QQUdFO1xcbmxldCBkYXRhVHlwZSA9IGdldFZhcihcXFwiV2FyZWhvdXNlLnR5cGVcXFwiLCBcXFwiXFxcIik7XFxubGV0IGhyZWYgPSAnaHR0cHM6Ly95YW5kZS5yZS9wb3N0P3RhZ3M9JyArIGRhdGFUeXBlICsgJyZwYWdlPScgKyBwYWdlO1xcbmFkZExpc3RlbmVyKCdvbkNsb3NlJywgJC50b1N0cmluZygoKSA9PiB7XFxuICAgIGNsZWFyVmFyKFxcXCJXYXJlaG91c2UudHlwZVxcXCIpO1xcbn0pKTtcXG5cXG5mdW5jdGlvbiB0YWIoYXJyLCB0eXBlLCBjb250cmFzdCkge1xcbiAgICBmb3IgKGxldCBpdGVtIG9mIGFycikge1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogaXRlbVsxXSA9PT0gY29udHJhc3QgPyBcXFwi4oCc4oCcXFxcIiArIGl0ZW1bMF0gKyBcXFwi4oCd4oCdXFxcIiA6IGl0ZW1bMF0sXFxuICAgICAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChrZXksIHR5cGUpID0+IHtcXG4gICAgICAgICAgICAgICAgcHV0VmFyKHR5cGUsIGtleSk7XFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgICAgICB9LCBpdGVtWzFdLCB0eXBlKSxcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcInNjcm9sbF9idXR0b25cXFwiXFxuICAgICAgICB9KTtcXG4gICAgfVxcbiAgICBkLnB1c2goe1xcbiAgICAgICAgY29sX3R5cGU6IFxcXCJibGFua19ibG9ja1xcXCJcXG4gICAgfSk7XFxufVxcbnZhciBodG1sID0gZmV0Y2goaHJlZilcXG5cXG5pZiAocGFnZSA9PSAxKSB7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogJ3lhbmRl5o6S6KGMJyxcXG4gICAgICAgIHVybDogXFxcImhpa2VyOi8vcGFnZS95YW5kZeaOkuihjD91cmw9aGlrZXI6Ly9lbXB0eSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNcXFwiLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJpY29uXzJcXFwiLFxcbiAgICB9LCB7XFxuICAgICAgICB0aXRsZTogJ+S7iuaXpeeDremXqOagh+etvicsXFxuICAgICAgICB1cmw6IFxcXCJoaWtlcjovL3BhZ2UveWFuZGV0YWdzI25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5I1xcXCIsXFxuICAgICAgICBjb2xfdHlwZTogXFxcImljb25fMlxcXCIsXFxuICAgIH0pXFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogXFxcIvCflI1cXFwiLFxcbiAgICAgICAgdXJsOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICBwdXRNeVZhcigna2V5d29yZCcsIGlucHV0KTtcXG4gICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU9eWFuZGUma3c9XFxcIiArIGlucHV0O1xcbiAgICAgICAgfSwgTVlfUlVMRS50aXRsZSksXFxuICAgICAgICBkZXNjOiAn5pCc57SiKOiLseaWhykvL+mVv+aMieWbvueJh+acieaDiuWWnCcsXFxuICAgICAgICBjb2xfdHlwZTogXFxcImlucHV0XFxcIlxcbiAgICB9KTtcXG4gICAgdGFiKFtcXG4gICAgICAgIFtcXFwi5YWo6YOoXFxcIiwgXFxcIlxcXCJdLFxcbiAgICAgICAgW1xcXCLoo7jkvZNcXFwiLCBcXFwibmFrZWRcXFwiXSxcXG4gICAgICAgIFtcXFwi5YmRXFxcIiwgXFxcInN3b3JkXFxcIl0sXFxuICAgICAgICBbXFxcIue6puaImFxcXCIsIFxcXCJkYXRlX2FfbGl2ZVxcXCJdLFxcbiAgICAgICAgW1xcXCLnoLTooaPmnI1cXFwiLCBcXFwidG9ybl9jbG90aGVzXFxcIl0sXFxuICAgICAgICBbXFxcImZhdGVcXFwiLCBcXFwiZmF0ZS9ncmFuZF9vcmRlclxcXCJdLFxcbiAgICAgICAgW1xcXCJrb25cXFwiLCBcXFwiay1vblxcXCJdLFxcbiAgICAgICAgW1xcXCLmjaLoo4XkurrlgbZcXFwiLCBcXFwic29ub19iaXNxdWVfZG9sbF93YV9rb2lfd29fc3VydVxcXCJdLFxcbiAgICAgICAgW1xcXCJtYXJpbmVzbm93XFxcIiwgXFxcIm1hcmluZXNub3dcXFwiXSxcXG4gICAgICAgIFtcXFwi6I6J5Y+vXFxcIiwgXFxcImx5Y29yaXNfcmVjb2lsXFxcIl0sXFxuICAgICAgICBbXFxcIuWxgeiCoVxcXCIsIFxcXCJhc3NcXFwiXSxcXG4gICAgICAgIFtcXFwi5Lya6ZW/5ZGK55m9XFxcIiwgXFxcImthZ3V5YS1zYW1hX3dhX2tva3VyYXNldGFpX350ZW5zYWktdGFjaGlfbm9fcmVuYWlfenVub3VzZW5+XFxcIl0sXFxuICAgICAgICBbXFxcImZhdGVcXFwiLCBcXFwiZmF0ZS9zdGF5X25pZ2h0XFxcIl0sXFxuICAgICAgICBbXFxcIuWIgOWJkVxcXCIsIFxcXCJTQU9cXFwiXSxcXG4gICAgICAgIFtcXFwi5Lmz5aS0XFxcIiwgXFxcIm5pcHBsZXNcXFwiXSxcXG4gICAgICAgIFtcXFwi5rKh6IO4572pXFxcIiwgXFxcIm5vX2JyYVxcXCJdLFxcbiAgICAgICAgW1xcXCLljp/npZ5cXFwiLCBcXFwiZ2Vuc2hpbl9pbXBhY3RcXFwiXSxcXG4gICAgICAgIFtcXFwi5pyq57uP5a6h5qC4XFxcIiwgXFxcInVuY2Vuc29yZWRcXFwiXSxcXG4gICAgICAgIFtcXFwi6Ze06LCNXFxcIiwgXFxcInNweV94X2ZhbWlseVxcXCJdLFxcbiAgICAgICAgW1xcXCLotZvljZpcXFwiLCBcXFwiY3liZXJwdW5rOl9lZGdlcnVubmVyc1xcXCJdLFxcbiAgICAgICAgW1xcXCLnjKtcXFwiLCBcXFwicHVzc3lcXFwiXSxcXG4gICAgICAgIFtcXFwi6KO45L2TXFxcIiwgXFxcImxvbGlcXFwiXSxcXG4gICAgICAgIFtcXFwi6Zi06IyOXFxcIiwgXFxcInBlbmlzXFxcIl0sXFxuICAgICAgICBbXFxcIuWPo+S6pFxcXCIsIFxcXCJmZWxsYXRpb1xcXCJdLFxcbiAgICAgICAgW1xcXCLpgJrov4flrqHmn6VcXFwiLCBcXFwiY2Vuc29yZWRcXFwiXSxcXG4gICAgICAgIFtcXFwi5Yqo54mp6ICz5py1XFxcIiwgXFxcImFuaW1hbF9lYXJzXFxcIl0sXFxuICAgICAgICBbXFxcIuaBtumtlOmrmOagoVxcXCIsIFxcXCJoaWdoc2Nob29sX2R4ZFxcXCJdLFxcbiAgICAgICAgW1xcXCLmlrnoiJ9cXFwiLCBcXFwiYXJrbmlnaHRzXFxcIl0sXFxuICAgICAgICBbXFxcIueip+iTneiIque6v1xcXCIsIFxcXCJhenVyX2xhbmVcXFwiXSxcXG4gICAgICAgIFtcXFwi56Kn5qGjXFxcIiwgXFxcImJsdWVfYXJjaGl2ZVxcXCJdLFxcbiAgICAgICAgW1xcXCLnv4XohoBcXFwiLCBcXFwid2luZ3NcXFwiXSxcXG4gICAgICAgIFtcXFwi5Lic5pa5XFxcIiwgXFxcInRvdWhvdVxcXCJdLFxcbiAgICAgICAgW1xcXCLov57ooaPoo5lcXFwiLCBcXFwiZHJlc3NcXFwiXSxcXG4gICAgICAgIFtcXFwi5aOB57q4XFxcIiwgXFxcIndhbGxwYXBlclxcXCJdLFxcbiAgICAgICAgW1xcXCLomZrmi5/lgbblg49cXFwiLCBcXFwidm9jYWxvaWRcXFwiXSxcXG4gICAgICAgIFtcXFwi5Yid6Z+zXFxcIiwgXFxcImhhdHN1bmVfbWlrdVxcXCJdXFxuICAgIF0sIFxcXCJXYXJlaG91c2UudHlwZVxcXCIsIGRhdGFUeXBlKTtcXG59XFxudmFyIGxpc3QgPSBwZGZhKGh0bWwsICcjcG9zdC1saXN0LXBvc3RzJiZsaScpO1xcbmZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICBsZXQgaW1nID0gJ2h0dHBzOi8veWFuZGUucmUnICsgcGRmaChsaXN0W2pdLCAnYSYmaHJlZicpO1xcbiAgICBsZXQgaW1nMSA9IHBkZmgobGlzdFtqXSwgJ2EsMSYmaHJlZicpO1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IHBkZmgobGlzdFtqXSwgJy5kaXJlY3RsaW5rLXJlcyYmVGV4dCcpLFxcbiAgICAgICAgaW1nOiBwZChsaXN0W2pdLCAnaW1nJiZzcmMnKSxcXG4gICAgICAgIHVybDogaW1nMSArICdAbGF6eVJ1bGU9LmpzOmlucHV0JyxcXG4gICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgbG9uZ0NsaWNrOiBbe1xcbiAgICAgICAgICAgICAgICB0aXRsZTogJ+WIt+aWsCcsXFxuICAgICAgICAgICAgICAgIGpzOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKCk7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgIH0sIHtcXG4gICAgICAgICAgICAgICAgdGl0bGU6ICfojrflj5bmoIfnrb4nLFxcbiAgICAgICAgICAgICAgICBqczogJC50b1N0cmluZygodSkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQodSkubGF6eVJ1bGUoKCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBodG1sID0gZmV0Y2goaW5wdXQpXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IFtdO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gcGRmYShodG1sLCAnI3RhZy1zaWRlYmFyJiZsaScpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWcucHVzaChwZGZoKGxpc3Rbal0sICdhLDEmJlRleHQnKS5yZXBsYWNlKC8gL2csIFxcXCJfXFxcIikpXFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRhZy5tYXAodiA9PiB2KSkuc2VsZWN0KChuYW1lKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9wYWdlL3NlYXJjaD9wPSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNmeXBhZ2UmdHlwZT15YW5kZSZrdz1cXFwiICsgaW5wdXRcXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICAgICAgfSwgaW1nKVxcbiAgICAgICAgICAgIH0sIHtcXG4gICAgICAgICAgICAgICAgdGl0bGU6ICfkv53lrZjljp/lm74nLFxcbiAgICAgICAgICAgICAgICBqczogJC50b1N0cmluZygodSkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XFxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF5ID0gbm93LmdldERhdGUoKSArICcnO1xcbiAgICAgICAgICAgICAgICAgICAgdmFyIHllYXIgPSBub3cuZ2V0RnVsbFllYXIoKSArICcnO1xcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnRoID0gKG5vdy5nZXRNb250aCgpICsgMSkgKyAnJztcXG4gICAgICAgICAgICAgICAgICAgIHZhciBob3VyID0gbm93LmdldEhvdXJzKCkgKyAnJztcXG4gICAgICAgICAgICAgICAgICAgIHZhciBtaW51dGUgPSBub3cuZ2V0TWludXRlcygpICsgJyc7XFxuICAgICAgICAgICAgICAgICAgICB2YXIgc2Vjb25kID0gbm93LmdldFNlY29uZHMoKSArICcnO1xcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGUgPSB5ZWFyICsgJy0nICsgbW9udGggKyAnLScgKyBkYXkgKyAnLScgKyBob3VyICsgJzonICsgbWludXRlICsgJzonICsgc2Vjb25kO1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNhdmVJbWFnZSh1LCAnZmlsZTovLy9zdG9yYWdlL2VtdWxhdGVkLzAvUGljdHVyZXMvJytkYXRlKycuanBnJylcXG4gICAgICAgICAgICAgICAgfSwgaW1nMSlcXG4gICAgICAgICAgICB9XVxcbiAgICAgICAgfVxcbiAgICB9KTtcXG59O1xcbnNldFJlc3VsdChkKVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiNi55YW5kZeaOkuihjFwiLFwicGF0aFwiOlwieWFuZGXmjpLooYxcIixcInJ1bGVcIjpcImpzOlxcbnZhciBkID0gW107XFxuc2V0UGFnZVRpdGxlKCd5YW5kZeaOkuihjCcpO1xcblxcbnZhciBub3cgPSBuZXcgRGF0ZSgpO1xcbnZhciBkYXkgPSBub3cuZ2V0RGF0ZSgpICsgJyc7XFxudmFyIHllYXIgPSBub3cuZ2V0RnVsbFllYXIoKSArICcnO1xcbnZhciBtb250aCA9IChub3cuZ2V0TW9udGgoKSArIDEpICsgJyc7XFxuXFxubGV0IGRhdGFUeXBlID0gZ2V0VmFyKFxcXCJXYXJlaG91c2UudHlwZVxcXCIsIFxcXCJwb3B1bGFyX2J5X2RheVxcXCIpO1xcbmxldCBUeXBlMSA9IGdldFZhcihcXFwiV2FyZWhvdXNlLnR5cGUxXFxcIiwgeWVhcik7XFxubGV0IFR5cGUyID0gZ2V0VmFyKFxcXCJXYXJlaG91c2UudHlwZTJcXFwiLCBtb250aCk7XFxubGV0IFR5cGUzID0gZ2V0VmFyKFxcXCJXYXJlaG91c2UudHlwZTNcXFwiLCBkYXkpO1xcbmxldCBocmVmID0gJ2h0dHBzOi8veWFuZGUucmUvcG9zdC8nICsgZGF0YVR5cGUgKyAnP2RheT0nICsgVHlwZTMgKyAnJm1vbnRoPScgKyBUeXBlMiArICcmeWVhcj0nICsgVHlwZTE7XFxuYWRkTGlzdGVuZXIoJ29uQ2xvc2UnLCAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgY2xlYXJWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIik7XFxuICAgIGNsZWFyVmFyKFxcXCJXYXJlaG91c2UudHlwZTFcXFwiKTtcXG4gICAgY2xlYXJWYXIoXFxcIldhcmVob3VzZS50eXBlMlxcXCIpO1xcbiAgICBjbGVhclZhcihcXFwiV2FyZWhvdXNlLnR5cGUzXFxcIik7XFxufSkpO1xcblxcbmZ1bmN0aW9uIHRhYihhcnIsIHR5cGUsIGNvbnRyYXN0KSB7XFxuICAgIGZvciAobGV0IGl0ZW0gb2YgYXJyKSB7XFxuICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBpdGVtWzFdID09PSBjb250cmFzdCA/IFxcXCLigJzigJxcXFwiICsgaXRlbVswXSArIFxcXCLigJ3igJ1cXFwiIDogaXRlbVswXSxcXG4gICAgICAgICAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoKGtleSwgdHlwZSkgPT4ge1xcbiAgICAgICAgICAgICAgICBwdXRWYXIodHlwZSwga2V5KTtcXG4gICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcbiAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgIH0sIGl0ZW1bMV0sIHR5cGUpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCJcXG4gICAgICAgIH0pO1xcbiAgICB9XFxuICAgIGQucHVzaCh7XFxuICAgICAgICBjb2xfdHlwZTogXFxcImJsYW5rX2Jsb2NrXFxcIlxcbiAgICB9KTtcXG59XFxudmFyIGh0bWwgPSBmZXRjaChocmVmKVxcblxcbnRhYihbXFxuICAgIFtcXFwi5oyJ5pel5o6S6KGMXFxcIiwgXFxcInBvcHVsYXJfYnlfZGF5XFxcIl0sXFxuICAgIFtcXFwi5oyJ5ZGo5o6S6KGMXFxcIiwgXFxcInBvcHVsYXJfYnlfd2Vla1xcXCJdLFxcbiAgICBbXFxcIuaMieaciOaOkuihjFxcXCIsIFxcXCJwb3B1bGFyX2J5X21vbnRoXFxcIl1cXG5dLCBcXFwiV2FyZWhvdXNlLnR5cGVcXFwiLCBkYXRhVHlwZSk7XFxudGFiKFtcXG4gICAgW1xcXCIyMDIzXFxcIiwgXFxcIjIwMjNcXFwiXSxcXG4gICAgW1xcXCIyMDIyXFxcIiwgXFxcIjIwMjJcXFwiXSxcXG4gICAgW1xcXCIyMDIxXFxcIiwgXFxcIjIwMjFcXFwiXSxcXG4gICAgW1xcXCIyMDIwXFxcIiwgXFxcIjIwMjBcXFwiXSxcXG4gICAgW1xcXCIyMDE5XFxcIiwgXFxcIjIwMTlcXFwiXSxcXG4gICAgW1xcXCIyMDE4XFxcIiwgXFxcIjIwMThcXFwiXSxcXG4gICAgW1xcXCIyMDE3XFxcIiwgXFxcIjIwMTdcXFwiXSxcXG4gICAgW1xcXCIyMDE2XFxcIiwgXFxcIjIwMTZcXFwiXSxcXG4gICAgW1xcXCIyMDE1XFxcIiwgXFxcIjIwMTVcXFwiXSxcXG4gICAgW1xcXCIyMDE0XFxcIiwgXFxcIjIwMTRcXFwiXSxcXG4gICAgW1xcXCIyMDEzXFxcIiwgXFxcIjIwMTNcXFwiXSxcXG4gICAgW1xcXCIyMDEyXFxcIiwgXFxcIjIwMTJcXFwiXSxcXG4gICAgW1xcXCIyMDExXFxcIiwgXFxcIjIwMTFcXFwiXSxcXG4gICAgW1xcXCIyMDEwXFxcIiwgXFxcIjIwMTBcXFwiXSxcXG4gICAgW1xcXCIyMDA5XFxcIiwgXFxcIjIwMDlcXFwiXSxcXG4gICAgW1xcXCIyMDA4XFxcIiwgXFxcIjIwMDhcXFwiXSxcXG4gICAgW1xcXCIyMDA3XFxcIiwgXFxcIjIwMDdcXFwiXVxcbl0sIFxcXCJXYXJlaG91c2UudHlwZTFcXFwiLCBUeXBlMSk7XFxudGFiKFtcXG4gICAgW1xcXCIxXFxcIiwgXFxcIjFcXFwiXSxcXG4gICAgW1xcXCIyXFxcIiwgXFxcIjJcXFwiXSxcXG4gICAgW1xcXCIzXFxcIiwgXFxcIjNcXFwiXSxcXG4gICAgW1xcXCI0XFxcIiwgXFxcIjRcXFwiXSxcXG4gICAgW1xcXCI1XFxcIiwgXFxcIjVcXFwiXSxcXG4gICAgW1xcXCI2XFxcIiwgXFxcIjZcXFwiXSxcXG4gICAgW1xcXCI3XFxcIiwgXFxcIjdcXFwiXSxcXG4gICAgW1xcXCI4XFxcIiwgXFxcIjhcXFwiXSxcXG4gICAgW1xcXCI5XFxcIiwgXFxcIjlcXFwiXSxcXG4gICAgW1xcXCIxMFxcXCIsIFxcXCIxMFxcXCJdLFxcbiAgICBbXFxcIjExXFxcIiwgXFxcIjExXFxcIl0sXFxuICAgIFtcXFwiMTJcXFwiLCBcXFwiMTJcXFwiXVxcbl0sIFxcXCJXYXJlaG91c2UudHlwZTJcXFwiLCBUeXBlMik7XFxudGFiKFtcXG4gICAgW1xcXCIxXFxcIiwgXFxcIjFcXFwiXSxcXG4gICAgW1xcXCIyXFxcIiwgXFxcIjJcXFwiXSxcXG4gICAgW1xcXCIzXFxcIiwgXFxcIjNcXFwiXSxcXG4gICAgW1xcXCI0XFxcIiwgXFxcIjRcXFwiXSxcXG4gICAgW1xcXCI1XFxcIiwgXFxcIjVcXFwiXSxcXG4gICAgW1xcXCI2XFxcIiwgXFxcIjZcXFwiXSxcXG4gICAgW1xcXCI3XFxcIiwgXFxcIjdcXFwiXSxcXG4gICAgW1xcXCI4XFxcIiwgXFxcIjhcXFwiXSxcXG4gICAgW1xcXCI5XFxcIiwgXFxcIjlcXFwiXSxcXG4gICAgW1xcXCIxMFxcXCIsIFxcXCIxMFxcXCJdLFxcbiAgICBbXFxcIjExXFxcIiwgXFxcIjExXFxcIl0sXFxuICAgIFtcXFwiMTJcXFwiLCBcXFwiMTJcXFwiXSxcXG4gICAgW1xcXCIxM1xcXCIsIFxcXCIxM1xcXCJdLFxcbiAgICBbXFxcIjE0XFxcIiwgXFxcIjE0XFxcIl0sXFxuICAgIFtcXFwiMTVcXFwiLCBcXFwiMTVcXFwiXSxcXG4gICAgW1xcXCIxNlxcXCIsIFxcXCIxNlxcXCJdLFxcbiAgICBbXFxcIjE3XFxcIiwgXFxcIjE3XFxcIl0sXFxuICAgIFtcXFwiMThcXFwiLCBcXFwiMThcXFwiXSxcXG4gICAgW1xcXCIxOVxcXCIsIFxcXCIxOVxcXCJdLFxcbiAgICBbXFxcIjIwXFxcIiwgXFxcIjIwXFxcIl0sXFxuICAgIFtcXFwiMjFcXFwiLCBcXFwiMjFcXFwiXSxcXG4gICAgW1xcXCIyMlxcXCIsIFxcXCIyMlxcXCJdLFxcbiAgICBbXFxcIjIzXFxcIiwgXFxcIjIzXFxcIl0sXFxuICAgIFtcXFwiMjRcXFwiLCBcXFwiMjRcXFwiXSxcXG4gICAgW1xcXCIyNVxcXCIsIFxcXCIyNVxcXCJdLFxcbiAgICBbXFxcIjI2XFxcIiwgXFxcIjI2XFxcIl0sXFxuICAgIFtcXFwiMjdcXFwiLCBcXFwiMjdcXFwiXSxcXG4gICAgW1xcXCIyOFxcXCIsIFxcXCIyOFxcXCJdLFxcbiAgICBbXFxcIjI5XFxcIiwgXFxcIjI5XFxcIl0sXFxuICAgIFtcXFwiMzBcXFwiLCBcXFwiMzBcXFwiXSxcXG4gICAgW1xcXCIzMVxcXCIsIFxcXCIzMVxcXCJdXFxuXSwgXFxcIldhcmVob3VzZS50eXBlM1xcXCIsIFR5cGUzKTtcXG5cXG52YXIgbGlzdCA9IHBkZmEoaHRtbCwgJyNwb3N0LWxpc3QtcG9zdHMmJmxpJyk7XFxuZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxudmFyIGltZyA9ICdodHRwczovL3lhbmRlLnJlJytwZGZoKGxpc3Rbal0sICdhJiZocmVmJyk7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogcGRmaChsaXN0W2pdLCAnLmRpcmVjdGxpbmstcmVzJiZUZXh0JyksXFxuICAgICAgICBpbWc6IHBkKGxpc3Rbal0sICdpbWcmJnNyYycpLFxcbiAgICAgICAgdXJsOiBwZGZoKGxpc3Rbal0sICdhLDEmJmhyZWYnKSArICdAbGF6eVJ1bGU9LmpzOmlucHV0JyxcXG4gICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgbG9uZ0NsaWNrOiBbe1xcbiAgICAgICAgICAgICAgICB0aXRsZTogJ+WIt+aWsCcsXFxuICAgICAgICAgICAgICAgIGpzOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKCk7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgICB9LCB7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiAn6I635Y+W5qCH562+JyxcXG4gICAgICAgICAgICAgICAganM6ICQudG9TdHJpbmcoKGltZykgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQoaW1nKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSBmZXRjaChpbnB1dClcXG52YXIgdGFnID0gW107XFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QgPSBwZGZhKGh0bWwsICcjdGFnLXNpZGViYXImJmxpJyk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZy5wdXNoKHBkZmgobGlzdFtqXSwgJ2EsMSYmVGV4dCcpLnJlcGxhY2UoLyAvZyxcXFwiX1xcXCIpKVxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCh0YWcubWFwKHYgPT4gdikpLnNlbGVjdCgobmFtZSkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU9eWFuZGUma3c9XFxcIiArIGlucHV0XFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICAgICAgICAgIH0pXFxuICAgICAgICAgICAgICAgIH0sIGltZylcXG4gICAgICAgICAgICB9XVxcbiAgICAgICAgfVxcbiAgICB9KTtcXG59XFxuXFxuaWYgKGxpc3QubGVuZ3RoID09IDApIHtcXG4gICAgaWYgKFR5cGUzID09IGRheSkge1xcbiAgICAgICAgY29uZmlybSh7XFxuICAgICAgICAgICAgdGl0bGU6IFxcXCLmj5DnpLpcXFwiLFxcbiAgICAgICAgICAgIGNvbnRlbnQ6IFxcXCLku4rml6Xov5jmsqHmnInmlbDmja7vvIzmmK/lkKbmmL7npLrmmKjml6XmjpLooYzvvJ9cXFwiLFxcbiAgICAgICAgICAgIGNvbmZpcm06ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgICAgICAgICB2YXIgZGF5cyA9IChuZXcgRGF0ZSgpLmdldERhdGUoKSAtIDEpICsgJyc7XFxuICAgICAgICAgICAgICAgIHB1dFZhcihcXFwiV2FyZWhvdXNlLnR5cGUzXFxcIiwgZGF5cyk7XFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKCk7XFxuICAgICAgICAgICAgfSksXFxuICAgICAgICAgICAgY2FuY2VsOiBcXFwiJ3RvYXN0Oi8v6K+36Ieq5bex6YCJ5oup5pel5pyfZGVhdGgnXFxcIlxcbiAgICAgICAgfSk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgICBpZiAoVHlwZTEgPT0geWVhcikge1xcbiAgICAgICAgICAgIHRvYXN0KCflloLlloLvvIzov5nkuIDlpKnliLDkuoblkJfvvIEnKTtcXG4gICAgICAgIH1cXG4gICAgfVxcbn1cXG5zZXRSZXN1bHQoZClcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIjYueWFuZGXng63pl6h0YWdzXCIsXCJwYXRoXCI6XCJ5YW5kZXRhZ3NcIixcInJ1bGVcIjpcImpzOlxcbnZhciBkID0gW107XFxuc2V0UGFnZVRpdGxlKFxcXCLku4rml6Xng63pl6jmoIfnrb5cXFwiKTtcXG52YXIgaHJlZiA9ICdodHRwczovL3lhbmRlLnJlL3RhZy9wb3B1bGFyX2J5X2RheSc7XFxudmFyIGh0bWwgPSBmZXRjaChocmVmKTtcXG5sZXQgbGlzdCA9IHBkZmEoaHRtbCwgJyN0YWctbGlzdC0tYS0tYSYmYScpO1xcbmZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IHBkZmgobGlzdFtqXSwgJ2EmJlRleHQnKSxcXG4gICAgICAgIHVybDogXFxcImhpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU9eWFuZGUma3c9XFxcIiArIHBkZmgobGlzdFtqXSwgJ2EmJlRleHQnKSxcXG4gICAgICAgIGNvbF90eXBlOiAndGV4dF9jZW50ZXJfMSdcXG4gICAgfSlcXG59XFxuc2V0UmVzdWx0KGQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiNy54dmlkZW9cIixcInBhdGhcIjpcInh2aWRlb1wiLFwicnVsZVwiOlwianM6XFxudmFyIGQgPSBbXTtcXG5jb25zdCBwYWdlID0gTVlfUEFHRTtcXG5sZXQgZGF0YVR5cGUgPSBnZXRWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIiwgXFxcIi9uZXdcXFwiKTtcXG5sZXQgaHJlZiA9ICdodHRwczovL3d3dy54dmlkZW9zLmNvbScgKyBkYXRhVHlwZSArICcvJyArIHBhZ2U7XFxuYWRkTGlzdGVuZXIoJ29uQ2xvc2UnLCAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgY2xlYXJWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIik7XFxufSkpO1xcblxcbmZ1bmN0aW9uIHRhYihhcnIsIHR5cGUsIGNvbnRyYXN0KSB7XFxuICAgIGZvciAobGV0IGl0ZW0gb2YgYXJyKSB7XFxuICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBpdGVtWzFdID09PSBjb250cmFzdCA/IFxcXCLigJzigJxcXFwiICsgaXRlbVswXSArIFxcXCLigJ3igJ1cXFwiIDogaXRlbVswXSxcXG4gICAgICAgICAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoKGtleSwgdHlwZSkgPT4ge1xcbiAgICAgICAgICAgICAgICBwdXRWYXIodHlwZSwga2V5KTtcXG4gICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcbiAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgIH0sIGl0ZW1bMV0sIHR5cGUpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCJcXG4gICAgICAgIH0pO1xcbiAgICB9XFxuICAgIGQucHVzaCh7XFxuICAgICAgICBjb2xfdHlwZTogXFxcImJsYW5rX2Jsb2NrXFxcIlxcbiAgICB9KTtcXG59XFxudmFyIGh0bWwgPSBmZXRjaChocmVmKVxcblxcbmlmIChwYWdlID09IDEpIHtcXG4gICAgdGFiKFtcXG4gICAgICAgIFtcXFwi5pyA5pawXFxcIiwgXFxcIi9uZXdcXFwiXSxcXG4gICAgICAgIFtcXFwi5Lit5paHXFxcIiwgXFxcIi9sYW5nL2NoaW5lc2VcXFwiXSxcXG4gICAgICAgIFtcXFwiM2RcXFwiLCBcXFwiLz9rPTNkJnRvcFxcXCJdLFxcbiAgICAgICAgW1xcXCLpmL/mi4nkvK9cXFwiLCBcXFwiL2MvQXJhYi0xNTlcXFwiXSxcXG4gICAgICAgIFtcXFwi5oyJ5pGpXFxcIiwgXFxcIi8/az0lRTYlOEMlODklRTYlOTElQTkmdG9wXFxcIl0sXFxuICAgICAgICBbXFxcIueZveiZjlxcXCIsIFxcXCIvP2s9JUU3JTk5JUJEJUU4JTk5JThFJnRvcFxcXCJdLFxcbiAgICAgICAgW1xcXCLnmb3kuJ1cXFwiLCBcXFwiLz9rPSVFNyU5OSVCRCVFNCVCOCU5RCZ0b3BcXFwiXSxcXG4gICAgICAgIFtcXFwi5oiQ54afXFxcIiwgXFxcIi9jL01hdHVyZS0zOFxcXCJdLFxcbiAgICAgICAgW1xcXCLlh7rovajog4zlj5sv54Gr6L6j5aa75a2QXFxcIiwgXFxcIi9jL0N1Y2tvbGQtMjM3XFxcIl0sXFxuICAgICAgICBbXFxcIuiwg+aVmVxcXCIsIFxcXCIvYy9GZW1kb20tMjM1XFxcIl0sXFxuICAgICAgICBbXFxcIuWKqOa8q1xcXCIsIFxcXCIvP2s9JUU1JThBJUE4JUU2JUJDJUFCJnRvcFxcXCJdLFxcbiAgICAgICAgW1xcXCLogpvkuqRcXFwiLCBcXFwiL2MvQW5hbC0xMlxcXCJdLFxcbiAgICAgICAgW1xcXCLlm73kuqdcXFwiLCBcXFwiLz9rPSVFNSU5QiVCRCVFNCVCQSVBNyZ0b3BcXFwiXSxcXG4gICAgICAgIFtcXFwi6KSQ5Y+RXFxcIiwgXFxcIi9jL0JydW5ldHRlLTI1XFxcIl0sXFxuICAgICAgICBbXFxcIum7keS6ulxcXCIsIFxcXCIvYy9CbGFja19Xb21hbi0zMFxcXCJdLFxcbiAgICAgICAgW1xcXCLpu5HkuJ1cXFwiLCBcXFwiLz9rPSVFOSVCQiU5MSVFNCVCOCU5RCZ0b3BcXFwiXSxcXG4gICAgICAgIFtcXFwi57SF6auuXFxcIiwgXFxcIi9jL1JlZGhlYWQtMzFcXFwiXSxcXG4gICAgICAgIFtcXFwi5a625bqt5Lmx5pCeXFxcIiwgXFxcIi9jL0Z1Y2tlZF9VcF9GYW1pbHktODFcXFwiXSxcXG4gICAgICAgIFtcXFwi6YeR6auuXFxcIiwgXFxcIi9jL0Jsb25kZS0yMFxcXCJdLFxcbiAgICAgICAgW1xcXCLlt6jlsYxcXFwiLCBcXFwiL2MvQmlnX0NvY2stMzRcXFwiXSxcXG4gICAgICAgIFtcXFwi5beo5LmzXFxcIiwgXFxcIi8/az0lRTUlQjclQTglRTQlQjklQjMmdG9wXFxcIl0sXFxuICAgICAgICBbXFxcIuW3qOS5s1xcXCIsIFxcXCIvYy9CaWdfVGl0cy0yM1xcXCJdLFxcbiAgICAgICAgW1xcXCLlt6joh4BcXFwiLCBcXFwiL2MvQmlnX0Fzcy0yNFxcXCJdLFxcbiAgICAgICAgW1xcXCLlj6PkuqRcXFwiLCBcXFwiL2MvQmxvd2pvYi0xNVxcXCJdLFxcbiAgICAgICAgW1xcXCLmi4nkuIHoo5RcXFwiLCBcXFwiL2MvTGF0aW5hLTE2XFxcIl0sXFxuICAgICAgICBbXFxcIui+o+WqvVxcXCIsIFxcXCIvYy9NaWxmLTE5XFxcIl0sXFxuICAgICAgICBbXFxcIuiAgeW4iFxcXCIsIFxcXCIvP2s9JUU4JTgwJTgxJUU1JUI4JTg4JnRvcFxcXCJdLFxcbiAgICAgICAgW1xcXCLoo4LlvIBcXFwiLCBcXFwiL2MvR2FwZXMtMTY3XFxcIl0sXFxuICAgICAgICBbXFxcIuWmiOWmiFxcXCIsIFxcXCIvP2s9JUU1JUE2JTg4JUU1JUE2JTg4JnRvcFxcXCJdLFxcbiAgICAgICAgW1xcXCLpurvosYZcXFwiLCBcXFwiLz9rPSVFOSVCQSVCQiVFOCVCMSU4NiZ0b3BcXFwiXSxcXG4gICAgICAgIFtcXFwi576O6IeAXFxcIiwgXFxcIi9jL0Fzcy0xNFxcXCJdLFxcbiAgICAgICAgW1xcXCLnlLflkIxcXFwiLCBcXFwiL2dheT9mbWM9MVxcXCJdLFxcbiAgICAgICAgW1xcXCLlhoXlsIRcXFwiLCBcXFwiLz9rPSVFNSU4NiU4NSVFNSVCMCU4NCZ0b3BcXFwiXSxcXG4gICAgICAgIFtcXFwi5aWz5ZCMXFxcIiwgXFxcIi9jL0xlc2JpYW4tMjZcXFwiXSxcXG4gICAgICAgIFtcXFwi6IOW5aWzXFxcIiwgXFxcIi9jL2Jidy01MVxcXCJdLFxcbiAgICAgICAgW1xcXCLllrflh7pcXFwiLCBcXFwiL2MvU3F1aXJ0aW5nLTU2XFxcIl0sXFxuICAgICAgICBbXFxcIuaLs+S6pFxcXCIsIFxcXCIvYy9GaXN0aW5nLTE2NVxcXCJdLFxcbiAgICAgICAgW1xcXCLnvqPkuqRcXFwiLCBcXFwiL2MvR2FuZ2JhbmctNjlcXFwiXSxcXG4gICAgICAgIFtcXFwi5Lq65aaWXFxcIiwgXFxcIi9zaGVtYWxlP2ZtYz0xXFxcIl0sXFxuICAgICAgICBbXFxcIuaXpeacrFxcXCIsIFxcXCIvP2s9JUU2JTk3JUE1JUU2JTlDJUFDJnRvcFxcXCJdLFxcbiAgICAgICAgW1xcXCLlsJHlpbNcXFwiLCBcXFwiL2MvVGVlbi0xM1xcXCJdLFxcbiAgICAgICAgW1xcXCLlsITpoY9cXFwiLCBcXFwiL2MvQ3Vtc2hvdC0xOFxcXCJdLFxcbiAgICAgICAgW1xcXCLmkYTlg4/poK1cXFwiLCBcXFwiL2MvQ2FtX1Bvcm4tNThcXFwiXSxcXG4gICAgICAgIFtcXFwi6ZuZ5oCn5oiAXFxcIiwgXFxcIi9jL0JpX1NleHVhbC02MlxcXCJdLFxcbiAgICAgICAgW1xcXCLntbLopapcXFwiLCBcXFwiL2MvU3RvY2tpbmdzLTI4XFxcIl0sXFxuICAgICAgICBbXFxcIuWBt+aLjVxcXCIsIFxcXCIvP2s9JUU1JTgxJUI3JUU2JThCJThEJnRvcFxcXCJdLFxcbiAgICAgICAgW1xcXCLloZfmsrlcXFwiLCBcXFwiL2MvT2lsZWQtMjJcXFwiXSxcXG4gICAgICAgIFtcXFwi5oCn5oSf5YaF6KGjXFxcIiwgXFxcIi9jL0xpbmdlcmllLTgzXFxcIl0sXFxuICAgICAgICBbXFxcIuS6nua0sueahFxcXCIsIFxcXCIvYy9Bc2lhbl9Xb21hbi0zMlxcXCJdLFxcbiAgICAgICAgW1xcXCLkuJrkvZlcXFwiLCBcXFwiL2MvQW1hdGV1ci02NVxcXCJdLFxcbiAgICAgICAgW1xcXCLnlbDml49cXFwiLCBcXFwiL2MvSW50ZXJyYWNpYWwtMjdcXFwiXSxcXG4gICAgICAgIFtcXFwi5Y2w5bqm55qEXFxcIiwgXFxcIi9jL0luZGlhbi04OVxcXCJdLFxcbiAgICAgICAgW1xcXCLkuK3lh7pcXFwiLCBcXFwiL2MvQ3JlYW1waWUtNDBcXFwiXSxcXG4gICAgICAgIFtcXFwi6Ieq5oWwXFxcIiwgXFxcIi8/az0lRTglODclQUElRTYlODUlQjAmdG9wXFxcIl0sXFxuICAgICAgICBbXFxcIuiHquaFsFxcXCIsIFxcXCIvYy9Tb2xvX2FuZF9NYXN0dXJiYXRpb24tMzNcXFwiXSxcXG4gICAgICAgIFtcXFwi6Laz5LqkXFxcIiwgXFxcIi8/az0lRTglQjYlQjMlRTQlQkElQTQmdG9wXFxcIl0sXFxuICAgICAgICBbXFxcIkFTTVJcXFwiLCBcXFwiL2MvQVNNUi0yMjlcXFwiXSxcXG4gICAgICAgIFtcXFwiQ29zXFxcIiwgXFxcIi8/az1jb3MmdG9wXFxcIl0sXFxuICAgICAgICBbXFxcIkNvc3BsYXlcXFwiLCBcXFwiLz9rPWNvc3BsYXkmdG9wXFxcIl0sXFxuICAgICAgICBbXFxcIkN1cmlvdXMgd2lmZSBubyBwYW50aWVzXFxcIiwgXFxcIi8/az1jdXJpb3VzK3dpZmUrbm8rcGFudGllcyZ0b3BcXFwiXSxcXG4gICAgICAgIFtcXFwiSmtcXFwiLCBcXFwiLz9rPWprJnRvcFxcXCJdLFxcbiAgICAgICAgW1xcXCLlkIzmgKfoppbpoLtcXFwiLCBcXFwiL2dheT9mbWM9MVxcXCJdLFxcbiAgICAgICAgW1xcXCLkurrlppboibLmg4VcXFwiLCBcXFwiL3NoZW1hbGU/Zm1jPTFcXFwiXVxcbiAgICBdLCBcXFwiV2FyZWhvdXNlLnR5cGVcXFwiLCBkYXRhVHlwZSk7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogXFxcIvCflI1cXFwiLFxcbiAgICAgICAgdXJsOiAkLnRvU3RyaW5nKChyKSA9PiB7XFxuICAgICAgICAgICAgcHV0TXlWYXIoJ2tleXdvcmQnLCBpbnB1dCk7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL3BhZ2Uvc2VhcmNoP3A9I25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5I2Z5cGFnZSZ0eXBlPXh2aWRlbyZrdz1cXFwiICsgaW5wdXQ7XFxuICAgICAgICB9LCBNWV9SVUxFLnRpdGxlKSxcXG4gICAgICAgIGRlc2M6ICfmkJzntKInLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJpbnB1dFxcXCJcXG4gICAgfSk7XFxufVxcblxcbmZ1bmN0aW9uIHBsYXllcihVcmwpIHtcXG4gICAgcmV0dXJuICQoVXJsKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgICB2YXIgaHRtbCA9IGZldGNoKGlucHV0KTtcXG4gICAgICAgIHZhciBsaXN0ID0gcGRmYShodG1sLCAnYm9keSYmc2NyaXB0Jyk7XFxuICAgICAgICBmb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgICAgICAgICB2YXIgdmlkZW8xID0gcGRmaChsaXN0W2pdLCAnc2NyaXB0JiZIdG1sJylcXG4gICAgICAgICAgICBpZiAodmlkZW8xLmluY2x1ZGVzKCdodG1sNXBsYXllci5zZXRWaWRlb0hMUycpKSB7XFxuICAgICAgICAgICAgICAgIHZhciB2aWRlbyA9IHZpZGVvMS5tYXRjaCgvaHRtbDVwbGF5ZXIuc2V0VmlkZW9ITFNcXFxcKCcoLiopXFxcXCdcXFxcKTsvKVsxXTtcXG4gICAgICAgICB2YXIgdmlkZW8xID0gdmlkZW8xLm1hdGNoKC9odG1sNXBsYXllci5zZXRWaWRlb1VybEhpZ2hcXFxcKCcoLiopXFxcXCdcXFxcKTsvKVsxXTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJ7dXJsczpbJ1xcXCIrdmlkZW8rXFxcIicsJ1xcXCIrdmlkZW8xK1xcXCInXSxuYW1lczpbJ+WOn+eUuycsJ+mprOi1m+WFiyddfVxcXCJcXG4gICAgICAgICAgICAgICAvLyByZXR1cm4gdmlkZW9cXG5cXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgIH0pXFxufVxcbnZhciBsaXN0ID0gcGRmYShodG1sLCAnI2NvbnRlbnQmJi50aHVtYi11bmRlcicpO1xcbnZhciBsaXN0MSA9IHBkZmEoaHRtbCwgJyNjb250ZW50JiYudGh1bWInKTtcXG5mb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBwZGZoKGxpc3Rbal0sICdhJiZ0aXRsZScpLFxcbiAgICAgICAgZGVzYzogcGRmaChsaXN0MVtqXSwgJy52aWRlby1oZC1tYXJrJiZUZXh0JyksXFxuICAgICAgICBpbWc6IHBkKGxpc3QxW2pdLCAnaW1nJiZkYXRhLXNyYycpLFxcbiAgICAgICAgdXJsOiBwbGF5ZXIoJ2h0dHBzOi8vd3d3Lnh2aWRlb3MuY29tJyArIHBkZmgobGlzdFtqXSwgJ2EmJmhyZWYnKSksXFxuICAgICAgICBjb2xfdHlwZTogJ21vdmllXzInLFxcbiAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICBsb25nQ2xpY2s6IFt7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiAn5Yi35pawJyxcXG4gICAgICAgICAgICAgICAganM6ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgICAgIH0pXFxuICAgICAgICAgICAgfV1cXG4gICAgICAgIH1cXG4gICAgfSk7XFxufVxcbnNldFJlc3VsdChkKVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiOC5qYWJsZVwiLFwicGF0aFwiOlwiamFibGVcIixcInJ1bGVcIjpcImpzOlxcbnZhciBkID0gW107XFxuY29uc3QgcGFnZSA9IE1ZX1BBR0U7XFxubGV0IGRhdGFUeXBlID0gZ2V0VmFyKFxcXCJXYXJlaG91c2UudHlwZVxcXCIsIFxcXCIvbmV3LXJlbGVhc2UvXFxcIik7XFxubGV0IGhyZWYgPSAnaHR0cHM6Ly9qYWJsZS50dicgKyBkYXRhVHlwZSArIHBhZ2UgKyAnLyc7XFxuYWRkTGlzdGVuZXIoJ29uQ2xvc2UnLCAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgY2xlYXJWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIik7XFxufSkpO1xcblxcbmZ1bmN0aW9uIHRhYihhcnIsIHR5cGUsIGNvbnRyYXN0KSB7XFxuICAgIGZvciAobGV0IGl0ZW0gb2YgYXJyKSB7XFxuICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBpdGVtWzFdID09PSBjb250cmFzdCA/IFxcXCLigJzigJxcXFwiICsgaXRlbVswXSArIFxcXCLigJ3igJ1cXFwiIDogaXRlbVswXSxcXG4gICAgICAgICAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoKGtleSwgdHlwZSkgPT4ge1xcbiAgICAgICAgICAgICAgICBwdXRWYXIodHlwZSwga2V5KTtcXG4gICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcbiAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgIH0sIGl0ZW1bMV0sIHR5cGUpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCJcXG4gICAgICAgIH0pO1xcbiAgICB9XFxuICAgIGQucHVzaCh7XFxuICAgICAgICBjb2xfdHlwZTogXFxcImJsYW5rX2Jsb2NrXFxcIlxcbiAgICB9KTtcXG59XFxudmFyIGh0bWwgPSBmZXRjaChocmVmKVxcblxcbmlmIChwYWdlID09IDEpIHtcXG4gICAgdGFiKFtcXG4gICAgICAgIFtcXFwi5pyA5pawXFxcIiwgXFxcIi9uZXctcmVsZWFzZS9cXFwiXSxcXG4gICAgICAgIFtcXFwi5pyA6L+R5pu05pawXFxcIiwgXFxcIi9sYXRlc3QtdXBkYXRlcy9cXFwiXSxcXG4gICAgICAgIFtcXFwi54Ot6ZeoXFxcIiwgXFxcIi9ob3QvXFxcIl1cXG4gICAgXSwgXFxcIldhcmVob3VzZS50eXBlXFxcIiwgZGF0YVR5cGUpO1xcbiAgICB0YWIoW1xcbiAgICAgICAgW1xcXCLkuLvlpbToqr/mlZlcXFwiLCBcXFwiL2NhdGVnb3JpZXMvYmRzbS9cXFwiXSxcXG4gICAgICAgIFtcXFwi55u05o6l6ZaL5ZWqXFxcIiwgXFxcIi9jYXRlZ29yaWVzL3NleC1vbmx5L1xcXCJdLFxcbiAgICAgICAgW1xcXCLkuK3mloflrZfluZVcXFwiLCBcXFwiL2NhdGVnb3JpZXMvY2hpbmVzZS1zdWJ0aXRsZS9cXFwiXSxcXG4gICAgICAgIFtcXFwi5YeM6L6x5by35pq0XFxcIiwgXFxcIi9jYXRlZ29yaWVzL3JhcGUvXFxcIl0sXFxuICAgICAgICBbXFxcIuWItuacjeiqmOaDkVxcXCIsIFxcXCIvY2F0ZWdvcmllcy91bmlmb3JtL1xcXCJdLFxcbiAgICAgICAgW1xcXCLop5LoibLliofmg4VcXFwiLCBcXFwiL2NhdGVnb3JpZXMvcm9sZXBsYXkvXFxcIl0sXFxuICAgICAgICBbXFxcIuebnOaUneWBt+aLjVxcXCIsIFxcXCIvY2F0ZWdvcmllcy9oaWRkZW4tY2FtL1xcXCJdLFxcbiAgICAgICAgW1xcXCLnhKHnorzop6PmlL5cXFwiLCBcXFwiL2NhdGVnb3JpZXMvdW5jZW5zb3JlZC9cXFwiXSxcXG4gICAgICAgIFtcXFwi55S35Y+L6KaW6KeSXFxcIiwgXFxcIi9jYXRlZ29yaWVzL3Bvdi9cXFwiXSxcXG4gICAgICAgIFtcXFwi5aSaUOe+pOS6pFxcXCIsIFxcXCIvY2F0ZWdvcmllcy9ncm91cHNleC9cXFwiXSxcXG4gICAgICAgIFtcXFwi57Wy6KWq576O6IW/XFxcIiwgXFxcIi9jYXRlZ29yaWVzL3BhbnR5aG9zZS9cXFwiXSxcXG4gICAgICAgIFtcXFwi5aWz5ZCM5q2h5oSJXFxcIiwgXFxcIi9jYXRlZ29yaWVzL2xlc2JpYW4vXFxcIl1cXG4gICAgXSwgXFxcIldhcmVob3VzZS50eXBlXFxcIiwgZGF0YVR5cGUpO1xcbiAgICB0YWIoW1xcbiAgICAgICAgW1xcXCLpu5HntbJcXFwiLCBcXFwiL3RhZ3MvYmxhY2stcGFudHlob3NlL1xcXCJdLFxcbiAgICAgICAgW1xcXCLpgY7ohp3opapcXFwiLCBcXFwiL3RhZ3Mva25lZS1zb2Nrcy9cXFwiXSxcXG4gICAgICAgIFtcXFwi6YGL5YuV6KOdXFxcIiwgXFxcIi90YWdzL3Nwb3J0c3dlYXIvXFxcIl0sXFxuICAgICAgICBbXFxcIuiCiee1slxcXCIsIFxcXCIvdGFncy9mbGVzaC10b25lZC1wYW50eWhvc2UvXFxcIl0sXFxuICAgICAgICBbXFxcIue1suilqlxcXCIsIFxcXCIvdGFncy9wYW50eWhvc2UvXFxcIl0sXFxuICAgICAgICBbXFxcIuecvOmPoeWomFxcXCIsIFxcXCIvdGFncy9nbGFzc2VzL1xcXCJdLFxcbiAgICAgICAgW1xcXCLnjbjogLNcXFwiLCBcXFwiL3RhZ3Mva2Vtb25vbWltaS9cXFwiXSxcXG4gICAgICAgIFtcXFwi5ryB57ayXFxcIiwgXFxcIi90YWdzL2Zpc2huZXRzL1xcXCJdLFxcbiAgICAgICAgW1xcXCLmsLTnnYBcXFwiLCBcXFwiL3RhZ3Mvc3dpbXN1aXQvXFxcIl0sXFxuICAgICAgICBbXFxcIuagoeacjVxcXCIsIFxcXCIvdGFncy9zY2hvb2wtdW5pZm9ybS9cXFwiXSxcXG4gICAgICAgIFtcXFwi5peX6KKNXFxcIiwgXFxcIi90YWdzL2NoZW9uZ3NhbS9cXFwiXSxcXG4gICAgICAgIFtcXFwi5ama57SXXFxcIiwgXFxcIi90YWdzL3dlZGRpbmctZHJlc3MvXFxcIl0sXFxuICAgICAgICBbXFxcIuWls+WDlVxcXCIsIFxcXCIvdGFncy9tYWlkL1xcXCJdLFxcbiAgICAgICAgW1xcXCLlkozmnI1cXFwiLCBcXFwiL3RhZ3Mva2ltb25vL1xcXCJdLFxcbiAgICAgICAgW1xcXCLlkIrluLbopapcXFwiLCBcXFwiL3RhZ3Mvc3RvY2tpbmdzL1xcXCJdLFxcbiAgICAgICAgW1xcXCLlhZTlpbPpg45cXFwiLCBcXFwiL3RhZ3MvYnVubnktZ2lybC9cXFwiXSxcXG4gICAgICAgIFtcXFwiQ29zcGxheVxcXCIsIFxcXCIvdGFncy9Db3NwbGF5L1xcXCJdLFxcbiAgICAgICAgW1xcXCLpu5HogolcXFwiLCBcXFwiL3RhZ3Mvc3VudGFuL1xcXCJdLFxcbiAgICAgICAgW1xcXCLplbfouqtcXFwiLCBcXFwiL3RhZ3MvdGFsbC9cXFwiXSxcXG4gICAgICAgIFtcXFwi6Luf6auUXFxcIiwgXFxcIi90YWdzL2ZsZXhpYmxlLWJvZHkvXFxcIl0sXFxuICAgICAgICBbXFxcIuiyp+S5s1xcXCIsIFxcXCIvdGFncy9zbWFsbC10aXRzL1xcXCJdLFxcbiAgICAgICAgW1xcXCLomL/ojolcXFwiLCBcXFwiL3RhZ3MvbG9saS9cXFwiXSxcXG4gICAgICAgIFtcXFwi576O6IW/XFxcIiwgXFxcIi90YWdzL2JlYXV0aWZ1bC1sZWcvXFxcIl0sXFxuICAgICAgICBbXFxcIue+juWwu1xcXCIsIFxcXCIvdGFncy9iZWF1dGlmdWwtYnV0dC9cXFwiXSxcXG4gICAgICAgIFtcXFwi57SL6LqrXFxcIiwgXFxcIi90YWdzL3RhdHRvby9cXFwiXSxcXG4gICAgICAgIFtcXFwi55+t6auuXFxcIiwgXFxcIi90YWdzL3Nob3J0LWhhaXIvXFxcIl0sXFxuICAgICAgICBbXFxcIueZveiZjlxcXCIsIFxcXCIvdGFncy9oYWlybGVzcy1wdXNzeS9cXFwiXSxcXG4gICAgICAgIFtcXFwi54af5aWzXFxcIiwgXFxcIi90YWdzL21hdHVyZS13b21hbi9cXFwiXSxcXG4gICAgICAgIFtcXFwi5beo5LmzXFxcIiwgXFxcIi90YWdzL2JpZy10aXRzL1xcXCJdLFxcbiAgICAgICAgW1xcXCLlsJHlpbNcXFwiLCBcXFwiL3RhZ3MvZ2lybC9cXFwiXSxcXG4gICAgICAgIFtcXFwi6aGP5bCEXFxcIiwgXFxcIi90YWdzL2ZhY2lhbC9cXFwiXSxcXG4gICAgICAgIFtcXFwi6IWz5LqkXFxcIiwgXFxcIi90YWdzL2Zvb3Rqb2IvXFxcIl0sXFxuICAgICAgICBbXFxcIuiCm+S6pFxcXCIsIFxcXCIvdGFncy9hbmFsLXNleC9cXFwiXSxcXG4gICAgICAgIFtcXFwi55eZ5pSjXFxcIiwgXFxcIi90YWdzL3NwYXNtcy9cXFwiXSxcXG4gICAgICAgIFtcXFwi5r2u5ZC5XFxcIiwgXFxcIi90YWdzL3NxdWlydGluZy9cXFwiXSxcXG4gICAgICAgIFtcXFwi5rex5ZaJXFxcIiwgXFxcIi90YWdzL2RlZXAtdGhyb2F0L1xcXCJdLFxcbiAgICAgICAgW1xcXCLmjqXlkLtcXFwiLCBcXFwiL3RhZ3Mva2lzcy9cXFwiXSxcXG4gICAgICAgIFtcXFwi5Y+j54iGXFxcIiwgXFxcIi90YWdzL2N1bS1pbi1tb3V0aC9cXFwiXSxcXG4gICAgICAgIFtcXFwi5Y+j5LqkXFxcIiwgXFxcIi90YWdzL2Jsb3dqb2IvXFxcIl0sXFxuICAgICAgICBbXFxcIuS5s+S6pFxcXCIsIFxcXCIvdGFncy90aXQtd2Fuay9cXFwiXSxcXG4gICAgICAgIFtcXFwi5Lit5Ye6XFxcIiwgXFxcIi90YWdzL2NyZWFtcGllL1xcXCJdLFxcbiAgICAgICAgW1xcXCLpnLLlh7pcXFwiLCBcXFwiL3RhZ3Mvb3V0ZG9vci9cXFwiXSxcXG4gICAgICAgIFtcXFwi6Lyq5aemXFxcIiwgXFxcIi90YWdzL2dhbmctcmFwZS9cXFwiXSxcXG4gICAgICAgIFtcXFwi6Kq/5pWZXFxcIiwgXFxcIi90YWdzL3R1bmUvXFxcIl0sXFxuICAgICAgICBbXFxcIue2kee2gVxcXCIsIFxcXCIvdGFncy9ib25kYWdlL1xcXCJdLFxcbiAgICAgICAgW1xcXCLnnqzplpPmj5LlhaVcXFwiLCBcXFwiL3RhZ3MvcXVpY2tpZS9cXFwiXSxcXG4gICAgICAgIFtcXFwi55e05ryiXFxcIiwgXFxcIi90YWdzL2NoaWthbi9cXFwiXSxcXG4gICAgICAgIFtcXFwi55e05aWzXFxcIiwgXFxcIi90YWdzL2NoaXp5by9cXFwiXSxcXG4gICAgICAgIFtcXFwi55S3TVxcXCIsIFxcXCIvdGFncy9tYXNvY2hpc20tZ3V5L1xcXCJdLFxcbiAgICAgICAgW1xcXCLms6XpholcXFwiLCBcXFwiL3RhZ3MvY3JhcHVsZW5jZS9cXFwiXSxcXG4gICAgICAgIFtcXFwi5rOh5aesXFxcIiwgXFxcIi90YWdzL3NvYXBsYW5kL1xcXCJdLFxcbiAgICAgICAgW1xcXCLmr43kubNcXFwiLCBcXFwiL3RhZ3MvYnJlYXN0LW1pbGsvXFxcIl0sXFxuICAgICAgICBbXFxcIuaUvuWwv1xcXCIsIFxcXCIvdGFncy9waXNzL1xcXCJdLFxcbiAgICAgICAgW1xcXCLmjInmkalcXFwiLCBcXFwiL3RhZ3MvbWFzc2FnZS9cXFwiXSxcXG4gICAgICAgIFtcXFwi5by35aemXFxcIiwgXFxcIi90YWdzL3JhcGUvXFxcIl0sXFxuICAgICAgICBbXFxcIuWkmlBcXFwiLCBcXFwiL3RhZ3MvZ2FuZ2JhbmcvXFxcIl0sXFxuICAgICAgICBbXFxcIuWIkeWFt1xcXCIsIFxcXCIvdGFncy90b3J0dXJlL1xcXCJdLFxcbiAgICAgICAgW1xcXCLlh4zovrFcXFwiLCBcXFwiL3RhZ3MvaW5zdWx0L1xcXCJdLFxcbiAgICAgICAgW1xcXCLkuIDml6XljYHlm55cXFwiLCBcXFwiL3RhZ3MvMTAtdGltZXMtYS1kYXkvXFxcIl0sXFxuICAgICAgICBbXFxcIjNQXFxcIiwgXFxcIi90YWdzLzNwL1xcXCJdLFxcbiAgICAgICAgW1xcXCLpu5HkurpcXFwiLCBcXFwiL3RhZ3MvYmxhY2svXFxcIl0sXFxuICAgICAgICBbXFxcIumGnOeUt1xcXCIsIFxcXCIvdGFncy91Z2x5LW1hbi9cXFwiXSxcXG4gICAgICAgIFtcXFwi6KqY5oORXFxcIiwgXFxcIi90YWdzL3RlbXB0YXRpb24vXFxcIl0sXFxuICAgICAgICBbXFxcIuerpeiynlxcXCIsIFxcXCIvdGFncy92aXJnaW5pdHkvXFxcIl0sXFxuICAgICAgICBbXFxcIuaZgumWk+WBnOatolxcXCIsIFxcXCIvdGFncy90aW1lLXN0b3AvXFxcIl0sXFxuICAgICAgICBbXFxcIuW+qeS7h1xcXCIsIFxcXCIvdGFncy9hdmVuZ2UvXFxcIl0sXFxuICAgICAgICBbXFxcIuW5tOm9oeW3rlxcXCIsIFxcXCIvdGFncy9hZ2UtZGlmZmVyZW5jZS9cXFwiXSxcXG4gICAgICAgIFtcXFwi5beo5ryiXFxcIiwgXFxcIi90YWdzL2dpYW50L1xcXCJdLFxcbiAgICAgICAgW1xcXCLlqprol6VcXFwiLCBcXFwiL3RhZ3MvbG92ZS1wb3Rpb24vXFxcIl0sXFxuICAgICAgICBbXFxcIuWkq+ebruWJjeeKr1xcXCIsIFxcXCIvdGFncy9zZXgtYmVzaWRlLWh1c2JhbmQvXFxcIl0sXFxuICAgICAgICBbXFxcIuWHuui7jFxcXCIsIFxcXCIvdGFncy9hZmZhaXIvXFxcIl0sXFxuICAgICAgICBbXFxcIuWCrOecoFxcXCIsIFxcXCIvdGFncy9oeXBub3Npcy9cXFwiXSxcXG4gICAgICAgIFtcXFwi5YG35ouNXFxcIiwgXFxcIi90YWdzL2hpZGRlbi1jYW0vXFxcIl0sXFxuICAgICAgICBbXFxcIuS4jeWAq1xcXCIsIFxcXCIvdGFncy9pbmNlc3QvXFxcIl0sXFxuICAgICAgICBbXFxcIuS4i+mbqOWkqVxcXCIsIFxcXCIvdGFncy9yYWlueS1kYXkvXFxcIl0sXFxuICAgICAgICBbXFxcIk5UUlxcXCIsIFxcXCIvdGFncy9udHIvXFxcIl0sXFxuICAgICAgICBbXFxcIumiqOS/l+WomFxcXCIsIFxcXCIvdGFncy9jbHViLWhvc3Rlc3MtYW5kLXNleC13b3JrZXIvXFxcIl0sXFxuICAgICAgICBbXFxcIumGq+eUn1xcXCIsIFxcXCIvdGFncy9kb2N0b3IvXFxcIl0sXFxuICAgICAgICBbXFxcIumAg+eKr1xcXCIsIFxcXCIvdGFncy9mdWdpdGl2ZS9cXFwiXSxcXG4gICAgICAgIFtcXFwi6K235aOrXFxcIiwgXFxcIi90YWdzL251cnNlL1xcXCJdLFxcbiAgICAgICAgW1xcXCLogIHluKtcXFwiLCBcXFwiL3RhZ3MvdGVhY2hlci9cXFwiXSxcXG4gICAgICAgIFtcXFwi56m65aeQXFxcIiwgXFxcIi90YWdzL2ZsaWdodC1hdHRlbmRhbnQvXFxcIl0sXFxuICAgICAgICBbXFxcIueQg+maiue2k+eQhlxcXCIsIFxcXCIvdGFncy90ZWFtLW1hbmFnZXIvXFxcIl0sXFxuICAgICAgICBbXFxcIuacquS6oeS6ulxcXCIsIFxcXCIvdGFncy93aWRvdy9cXFwiXSxcXG4gICAgICAgIFtcXFwi5pCc5p+l5a6YXFxcIiwgXFxcIi90YWdzL2RldGVjdGl2ZS9cXFwiXSxcXG4gICAgICAgIFtcXFwi5oOF5L62XFxcIiwgXFxcIi90YWdzL2NvdXBsZS9cXFwiXSxcXG4gICAgICAgIFtcXFwi5a625pS/5ammXFxcIiwgXFxcIi90YWdzL2hvdXNld2lmZS9cXFwiXSxcXG4gICAgICAgIFtcXFwi5a625bqt5pWZ5birXFxcIiwgXFxcIi90YWdzL3ByaXZhdGUtdGVhY2hlci9cXFwiXSxcXG4gICAgICAgIFtcXFwi5YG25YOPXFxcIiwgXFxcIi90YWdzL2lkb2wvXFxcIl0sXFxuICAgICAgICBbXFxcIuS6uuWmu1xcXCIsIFxcXCIvdGFncy93aWZlL1xcXCJdLFxcbiAgICAgICAgW1xcXCLkuLvmkq1cXFwiLCBcXFwiL3RhZ3MvZmVtYWxlLWFuY2hvci9cXFwiXSxcXG4gICAgICAgIFtcXFwiT0xcXFwiLCBcXFwiL3RhZ3Mvb2wvXFxcIl0sXFxuICAgICAgICBbXFxcIumtlOmPoeiZn1xcXCIsIFxcXCIvdGFncy9tYWdpYy1taXJyb3IvXFxcIl0sXFxuICAgICAgICBbXFxcIumbu+i7ilxcXCIsIFxcXCIvdGFncy90cmFtL1xcXCJdLFxcbiAgICAgICAgW1xcXCLomZXlpbNcXFwiLCBcXFwiL3RhZ3MvZmlyc3QtbmlnaHQvXFxcIl0sXFxuICAgICAgICBbXFxcIuebo+eNhFxcXCIsIFxcXCIvdGFncy9wcmlzb24vXFxcIl0sXFxuICAgICAgICBbXFxcIua6q+aziVxcXCIsIFxcXCIvdGFncy9ob3Qtc3ByaW5nL1xcXCJdLFxcbiAgICAgICAgW1xcXCLmtJfmtbTloLRcXFwiLCBcXFwiL3RhZ3MvYmF0aGluZy1wbGFjZS9cXFwiXSxcXG4gICAgICAgIFtcXFwi5rOz5rGgXFxcIiwgXFxcIi90YWdzL3N3aW1taW5nLXBvb2wvXFxcIl0sXFxuICAgICAgICBbXFxcIuaxvei7ilxcXCIsIFxcXCIvdGFncy9jYXIvXFxcIl0sXFxuICAgICAgICBbXFxcIuW7geaJgFxcXCIsIFxcXCIvdGFncy90b2lsZXQvXFxcIl0sXFxuICAgICAgICBbXFxcIuWtuOagoVxcXCIsIFxcXCIvdGFncy9zY2hvb2wvXFxcIl0sXFxuICAgICAgICBbXFxcIuWcluabuOmkqFxcXCIsIFxcXCIvdGFncy9saWJyYXJ5L1xcXCJdLFxcbiAgICAgICAgW1xcXCLlgaXouqvmiL9cXFwiLCBcXFwiL3RhZ3MvZ3ltLXJvb20vXFxcIl0sXFxuICAgICAgICBbXFxcIuS+v+WIqeW6l1xcXCIsIFxcXCIvdGFncy9zdG9yZS9cXFwiXSxcXG4gICAgICAgIFtcXFwi6YyE5YOPXFxcIiwgXFxcIi90YWdzL3ZpZGVvLXJlY29yZGluZy9cXFwiXSxcXG4gICAgICAgIFtcXFwi6JmV5aWz5L2cL+W8lemAgOS9nFxcXCIsIFxcXCIvdGFncy9kZWJ1dC1yZXRpcmVzL1xcXCJdLFxcbiAgICAgICAgW1xcXCLntpzol51cXFwiLCBcXFwiL3RhZ3MvdmFyaWV0eS1zaG93L1xcXCJdLFxcbiAgICAgICAgW1xcXCLnr4Dml6XkuLvpoYxcXFwiLCBcXFwiL3RhZ3MvZmVzdGl2YWwvXFxcIl0sXFxuICAgICAgICBbXFxcIuaEn+isneelrVxcXCIsIFxcXCIvdGFncy90aGFua3NnaXZpbmcvXFxcIl0sXFxuICAgICAgICBbXFxcIjTlsI/mmYLku6XkuIpcXFwiLCBcXFwiL3RhZ3MvbW9yZS10aGFuLTQtaG91cnMvXFxcIl1cXG4gICAgXSwgXFxcIldhcmVob3VzZS50eXBlXFxcIiwgZGF0YVR5cGUpO1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFxcXCLwn5SNXFxcIixcXG4gICAgICAgIHVybDogJC50b1N0cmluZygocikgPT4ge1xcbiAgICAgICAgICAgIHB1dE15VmFyKCdrZXl3b3JkJywgaW5wdXQpO1xcbiAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9wYWdlL3NlYXJjaD9wPSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNmeXBhZ2UmdHlwZT1qYWJsZSZrdz1cXFwiICsgaW5wdXQ7XFxuICAgICAgICB9LCBNWV9SVUxFLnRpdGxlKSxcXG4gICAgICAgIGRlc2M6ICfmkJzntKInLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJpbnB1dFxcXCJcXG4gICAgfSk7XFxufVxcblxcbmZ1bmN0aW9uIHBsYXllcihVcmwpIHtcXG4gICAgcmV0dXJuICQoVXJsKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgICB2YXIgaHRtbCA9IGZldGNoKGlucHV0KTtcXG4gICAgICAgIHZhciBsaXN0ID0gcGRmYShodG1sLCAnYm9keSYmc2NyaXB0Jyk7XFxuICAgICAgICBmb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgICAgICAgICB2YXIgdmlkZW8xID0gcGRmaChsaXN0W2pdLCAnc2NyaXB0JiZIdG1sJyk7XFxuICAgICAgICAgICAgaWYgKHZpZGVvMS5pbmNsdWRlcygnaGxzVXJsJykpIHtcXG4gICAgICAgICAgICAgICAgdmFyIHZpZGVvID0gdmlkZW8xLm1hdGNoKC9obHNVcmwgPSAnKC4qKVxcXFwnOy8pWzFdO1xcbiAgICAgICAgICAgICAgICByZXR1cm4gdmlkZW87XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICB9KVxcbn1cXG52YXIgbGlzdCA9IHBhcnNlRG9tRm9yQXJyYXkoaHRtbCwgJy5wYi1lLWxnLTQwJiYuY29sLXNtLTQnKTtcXG5mb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBwYXJzZURvbUZvckh0bWwobGlzdFtqXSwgJ2g2JiZUZXh0JyksXFxuICAgICAgICBwaWNfdXJsOiBwYXJzZURvbShsaXN0W2pdLCAnaW1nJiZkYXRhLXNyYycpLFxcbiAgICAgICAgdXJsOiBwbGF5ZXIocGFyc2VEb21Gb3JIdG1sKGxpc3Rbal0sICdhJiZocmVmJykpLFxcbiAgICAgICAgZGVzYzogcGRmaChsaXN0W2pdLCAnLmxhYmVsJiZUZXh0JyksXFxuICAgICAgICBjb2xfdHlwZTogJ21vdmllXzInLFxcbiAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICBsb25nQ2xpY2s6IFt7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiAn5Yi35pawJyxcXG4gICAgICAgICAgICAgICAganM6ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgICAgIH0pXFxuICAgICAgICAgICAgfV1cXG4gICAgICAgIH1cXG4gICAgfSk7XFxufVxcbnNldFJlc3VsdChkKTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIjAu6aaW6aG1XCIsXCJwYXRoXCI6XCJ2aWV3XCIsXCJydWxlXCI6XCJ2YXIgZCA9IFtdO1xcbmQucHVzaCh7XFxuICAgIGltZzogJ2h0dHBzOi8vbGFubWVpZ3VvamlhbmcuY29tL3R1Ymlhby9tb3JlLzM1LnBuZycsXFxuICAgIHRpdGxlOiAn5LiL6L29JyxcXG4gICAgdXJsOiBcXFwiaGlrZXI6Ly9kb3dubG9hZFxcXCIsXFxuICAgIGNvbF90eXBlOiBcXFwiaWNvbl80XFxcIlxcbn0sIHtcXG4gICAgaW1nOiAnaHR0cHM6Ly9sYW5tZWlndW9qaWFuZy5jb20vdHViaWFvL21vcmUvMTY0LnBuZycsXFxuICAgIHRpdGxlOiAn5Y6G5Y+yJyxcXG4gICAgdXJsOiBcXFwiaGlrZXI6Ly9oaXN0b3J5P3J1bGU95p+Q6IGa5ZCIXFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJpY29uXzRcXFwiXFxufSwge1xcbiAgICBpbWc6ICdodHRwczovL2xhbm1laWd1b2ppYW5nLmNvbS90dWJpYW8vbW9yZS8yNDEucG5nJyxcXG4gICAgdGl0bGU6ICfmlLbol48nLFxcbiAgICB1cmw6IFxcXCJoaWtlcjovL2NvbGxlY3Rpb24/Z3JvdXA9772e772e772eXFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJpY29uXzRcXFwiXFxufSwge1xcbiAgICBpbWc6ICdodHRwczovL2xhbm1laWd1b2ppYW5nLmNvbS90dWJpYW8vbW9yZS8xNzMucG5nJyxcXG4gICAgdGl0bGU6ICfkuabmnrYnLFxcbiAgICB1cmw6IFxcXCJoaWtlcjovL3BhZ2UvTWFpbi52aWV3I25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5I1xcXCIsXFxuICAgIGNvbF90eXBlOiBcXFwiaWNvbl80XFxcIlxcbn0pXFxuXFxubGV0IG5hbWUgPSBnZXRJdGVtKFxcXCJuYW1lXFxcIiwgXFxcImhhbmltZTHliqjmvKtcXFwiKTtcXG5sZXQgbmFtZXMgPSBbXFxcIuWFqOmDqFxcXCIsIFxcXCJoYW5pbWUx5Yqo5ryrXFxcIiwgXFxcImhhbmltZTHmvKvnlLtcXFwiLCBcXFwi6bq76LGGXFxcIiwgXFxcIum6u+ixhmNsdWJcXFwiLCBcXFwi5bCP6buE5LmmXFxcIiwgXFxcInJ1bGUzNHZpZGVvXFxcIiwgXFxcInlhbmRlXFxcIiwgXFxcInh2aWRlb1xcXCIsIFxcXCJqYWJsZVxcXCIsIFxcXCJ3bmFjZ1xcXCIsIFxcXCJzcGFua2JhbmdcXFwiLCBcXFwibm9vZGxlbWFnYXppbmUo57qv5pCc57SiKVxcXCIsIFxcXCJoaXR4aG90XFxcIiwgXFxcInBvcm5odWJcXFwiLCBcXFwiZWhlbnRhaVxcXCJdO1xcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwi8J+UjVxcXCIsXFxuICAgIHVybDogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICBwdXRNeVZhcigna2V5d29yZCcsIGlucHV0KTtcXG4gICAgICAgIGxldCBuYW1lID0gZ2V0SXRlbShcXFwibmFtZVxcXCIsIFxcXCJoYW5pbWUx5Yqo5ryrXFxcIik7XFxuICAgICAgICBpZiAobmFtZSA9PSBcXFwiaGl0eGhvdFxcXCIpIHJldHVybiAnaGlrZXI6Ly9wYWdlL3NlYXJjaD9wPSNub0hpc3RvcnkjI2Z1bGxUaGVtZSMjbm9SZWNvcmRIaXN0b3J5I2Z5cGFnZSZ0eXBlPScgKyBuYW1lICsgJyZrdz0nICsgaW5wdXQ7XFxuaWYgKG5hbWUgPT0gXFxcIuWFqOmDqFxcXCIpIHJldHVybiAnaGlrZXI6Ly9wYWdlL3NlYXJjaD9wPWhpa2VyOi8vZW1wdHkjZnlwYWdlI25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5IyZ0eXBlPeWFqOmDqCZrdz0nICsgaW5wdXQ7XFxuICAgICAgICByZXR1cm4gJ2hpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU9JyArIG5hbWUgKyAnJmt3PScgKyBpbnB1dDtcXG4gICAgfSksXFxuICAgIGRlc2M6ICflvZPliY3mkJzntKLlvJXmk446JyArIG5hbWUsXFxuICAgIGNvbF90eXBlOiBcXFwiaW5wdXRcXFwiLFxcbiAgICBleHRyYToge1xcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBnZXRNeVZhcigna2V5d29yZCcsICcnKSB8fCBcXFwiXFxcIixcXG4gICAgfVxcbn0sIHtcXG4gICAgdGl0bGU6ICfigJzigJzigJ3igJ08c21hbGw+PGZvbnQgY29sb3I9XFxcIiNmMTQ0MWRcXFwiPueCueWHu+mAieaLqeaQnOe0ouW8leaTjjwvZm9udD48L3NtYWxsPicsXFxuICAgIGNvbF90eXBlOiBcXFwidGV4dF9jZW50ZXJfMVxcXCIsXFxuICAgIHVybDogJChuYW1lcy5tYXAodiA9PiB2ID09PSBuYW1lID8gXFxcIuKAnOKAnFxcXCIgKyB2ICsgXFxcIuKAneKAnVxcXCIgOiB2KSkuc2VsZWN0KChuYW1lKSA9PiB7XFxuICAgICAgICBpZiAoL+KAnOKAnC4qP+KAneKAnS8udGVzdChpbnB1dCkpIHJldHVybjtcXG4gICAgICAgIHNldEl0ZW0oXFxcIm5hbWVcXFwiLCBpbnB1dCk7XFxuICAgICAgICByZWZyZXNoUGFnZSgpO1xcbiAgICB9KVxcbn0pO1xcblxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiAn4oCY4oCY4oCZ4oCZPGZvbnQgY29sb3I9XFxcIiMxRTRGODZcXFwiPmhhbmltZTE8L2ZvbnQ+JyArICdcXFxcbicgKyAnPHNtYWxsPjxmb250IGNvbG9yPVxcXCIjMUU0Rjg2XFxcIj4o5Y+v6ZW/5oyJKTwvZm9udD48L3NtYWxsPicsXFxuICAgIHBpY191cmw6IFxcXCJodHRwczovL2kuaW1ndXIuY29tL21JUmlJb2hnLmpwZ1xcXCIsXFxuICAgIHVybDogXFxcImhpa2VyOi8vcGFnZS9tYWluP3VybD1oaWtlcjovL2VtcHR5I2Z5cGFnZSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSMjbm9SZWZyZXNoI1xcXCIsXFxuICAgIGNvbF90eXBlOiBcXFwiY2FyZF9waWNfMl8yX2xlZnRcXFwiLFxcbiAgICBleHRyYToge1xcbiAgICAgICAgbG9uZ0NsaWNrOiBbe1xcbiAgICAgICAgICAgIHRpdGxlOiAn5a+85YWl5pyA5paw6KeE5YiZKOW8uuWItiknLFxcbiAgICAgICAgICAgIGpzOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICAgICAgZGVsZXRlRmlsZShcXFwiZGF5LnR4dFxcXCIpO1xcbiAgICAgICAgICAgICAgICBkZWxldGVGaWxlKFxcXCJ1cGRhdGUudHh0XFxcIik7XFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKCk7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgfSlcXG4gICAgICAgIH1dXFxuICAgIH1cXG5cXG59LCB7XFxuICAgIHRpdGxlOiAn4oCY4oCY4oCZ4oCZPGZvbnQgY29sb3I9XFxcIiNmMTQ0MWRcXFwiPum6u+ixhjwvZm9udD4nLFxcbiAgICBwaWNfdXJsOiBcXFwiaHR0cHM6Ly9hc3NldHMueWFuZGUucmUvZGF0YS9wcmV2aWV3LzVhL2UxLzVhZTE3YzM5NmY3MDdiMmMxYTdiYzczYzlhY2IzNDYxLmpwZ1xcXCIsXFxuICAgIHVybDogXFxcImhpa2VyOi8vcGFnZS9tYWRvdV9tYWluP3VybD1oaWtlcjovL2VtcHR5I2Z5cGFnZSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNcXFwiLFxcbiAgICBjb2xfdHlwZTogXFxcImNhcmRfcGljXzJfMlxcXCIsXFxuXFxufSwge1xcbiAgICB0aXRsZTogJ+KAmOKAmOKAmeKAmTxmb250IGNvbG9yPVxcXCIjRkZFNEUxXFxcIj7purvosYZjbHViPC9mb250PicsXFxuICAgIHBpY191cmw6IFxcXCJodHRwczovL2Fzc2V0cy55YW5kZS5yZS9kYXRhL3ByZXZpZXcvNzEvNmIvNzE2YjVlNmI3ZWQ2ZWNmZTJiZGRkZTU3ZThkZTQwOGQuanBnXFxcIixcXG4gICAgdXJsOiBcXFwiaGlrZXI6Ly9wYWdlL21hZG91Y2x1Yj91cmw9aGlrZXI6Ly9lbXB0eSNmeXBhZ2Ujbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjXFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJjYXJkX3BpY18yXzJcXFwiLFxcblxcbn0sIHtcXG4gICAgdGl0bGU6ICfigJjigJjigJnigJk8Zm9udCBjb2xvcj1cXFwiI2ZjYTEwNFxcXCI+cnVsZTM0dmlkZW88L2ZvbnQ+JyArICdcXFxcbicgKyAnPHNtYWxsPjxmb250IGNvbG9yPVxcXCIjZmNhMTA0XFxcIj4o5aSa57q/6LevKTwvZm9udD48L3NtYWxsPicsXFxuICAgIHBpY191cmw6IFxcXCJodHRwczovL2Fzc2V0cy55YW5kZS5yZS9kYXRhL3ByZXZpZXcvMWEvOTYvMWE5NmNlZDMxMzcyYjg1ZDM4OTE5MjRhZDY1ZmFmMDAuanBnXFxcIixcXG4gICAgdXJsOiBcXFwiaGlrZXI6Ly9wYWdlL3J1bGUzNHZpZGVvP3VybD1oaWtlcjovL2VtcHR5I2Z5cGFnZSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNcXFwiLFxcbiAgICBjb2xfdHlwZTogXFxcImNhcmRfcGljXzJfMl9sZWZ0XFxcIixcXG5cXG59LCB7XFxuICAgIHRpdGxlOiAn4oCY4oCY4oCZ4oCZPGZvbnQgY29sb3I9XFxcIiNmY2ExMDRcXFwiPuWwj+m7hOS5pjwvZm9udD4nLFxcbiAgICBwaWNfdXJsOiBcXFwiaHR0cHM6Ly9pbWcueGNoaW5hLnBpY3MvcGhvdG9zLzYzZWY4ZTA3ZDhiNzMvMDAwNl8zMDB4MC5qcGdcXFwiLFxcbiAgICB1cmw6IFxcXCJoaWtlcjovL3BhZ2Uv5bCP6buE5LmmP3VybD1oaWtlcjovL2VtcHR5I2Z5cGFnZSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNcXFwiLFxcbiAgICBjb2xfdHlwZTogXFxcImNhcmRfcGljXzJfMl9sZWZ0XFxcIixcXG5cXG59LCB7XFxuICAgIHRpdGxlOiAn4oCY4oCY4oCZ4oCZPGZvbnQgY29sb3I9XFxcIiNGRkU0RTFcXFwiPnh2aWRlbzwvZm9udD4nICsgJ1xcXFxuJyArICc8c21hbGw+PGZvbnQgY29sb3I9XFxcIiNGRkU0RTFcXFwiPijlpJrnur/ot68pPC9mb250Pjwvc21hbGw+JyxcXG4gICAgcGljX3VybDogXFxcImh0dHBzOi8vYXNzZXRzLnlhbmRlLnJlL2RhdGEvcHJldmlldy82Ny8xOC82NzE4Y2MzZmE4MzBlMzIxOGFkMmFjNDBiYjY2NDhlMi5qcGdcXFwiLFxcbiAgICB1cmw6IFxcXCJoaWtlcjovL3BhZ2UveHZpZGVvP3VybD1oaWtlcjovL2VtcHR5I2Z5cGFnZSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNcXFwiLFxcbiAgICBjb2xfdHlwZTogXFxcImNhcmRfcGljXzJfMlxcXCIsXFxuXFxufSwge1xcbiAgICB0aXRsZTogJ+KAmOKAmOKAmeKAmTxmb250IGNvbG9yPVxcXCIjZjE0NDFkXFxcIj55YW5kZTwvZm9udD4nLFxcbiAgICBwaWNfdXJsOiBcXFwiaHR0cHM6Ly9hc3NldHMueWFuZGUucmUvZGF0YS9wcmV2aWV3Lzg5LzhkLzg5OGQ0NzZjYjVjOWFkNjNiZTM4MTc3NDk0ZTA5MDdkLmpwZ1xcXCIsXFxuICAgIHVybDogXFxcImhpa2VyOi8vcGFnZS95YW5kZT91cmw9aGlrZXI6Ly9lbXB0eSNmeXBhZ2Ujbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjXFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJjYXJkX3BpY18yXzJcXFwiLFxcblxcbn0sIHtcXG4gICAgdGl0bGU6ICfigJjigJjigJnigJk8Zm9udCBjb2xvcj1cXFwiI2ZmZmZmZlxcXCI+amFibGU8L2ZvbnQ+JyxcXG4gICAgcGljX3VybDogXFxcImh0dHBzOi8vYXNzZXRzLnlhbmRlLnJlL2RhdGEvcHJldmlldy8wNi9jZC8wNmNkODQwZWUwMGYxODJiOGU4NGNkYWJkY2ZjYTRlNS5qcGdcXFwiLFxcbiAgICB1cmw6IFxcXCJoaWtlcjovL3BhZ2UvamFibGU/dXJsPWhpa2VyOi8vZW1wdHkjZnlwYWdlI25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5I1xcXCIsXFxuICAgIGNvbF90eXBlOiBcXFwiY2FyZF9waWNfMl8yX2xlZnRcXFwiLFxcblxcbn0sIHtcXG4gICAgdGl0bGU6ICfigJjigJjigJnigJk8Zm9udCBjb2xvcj1cXFwiI2ZhN2UyM1xcXCI+5p+Q6Imy572RPC9mb250PicsXFxuICAgIHBpY191cmw6IFxcXCJodHRwczovL2Fzc2V0cy55YW5kZS5yZS9kYXRhL3ByZXZpZXcvMjkvM2UvMjkzZTBhYzVkOTI2NmQ0OWY1MDQ2ZmZlNWMxMDYxYTMuanBnXFxcIixcXG4gICAgdXJsOiBcXFwiaGlrZXI6Ly9wYWdlL3Nld2FuZz91cmw9aGlrZXI6Ly9lbXB0eSNmeXBhZ2Ujbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjXFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJjYXJkX3BpY18yXzJfbGVmdFxcXCIsXFxuXFxufSwge1xcbiAgICB0aXRsZTogJ+KAmOKAmOKAmeKAmTxmb250IGNvbG9yPVxcXCIjZjE0NDFkXFxcIj4xOEjmvKvnlLs8L2ZvbnQ+JyArICdcXFxcbicgKyAnPHNtYWxsPjxmb250IGNvbG9yPVxcXCIjZjE0NDFkXFxcIj4o5pen57G75ryr55S7KTwvZm9udD48L3NtYWxsPicsXFxuICAgIHBpY191cmw6IFxcXCJodHRwczovL2Fzc2V0cy55YW5kZS5yZS9kYXRhL3ByZXZpZXcvMWEvOTYvMWE5NmNlZDMxMzcyYjg1ZDM4OTE5MjRhZDY1ZmFmMDAuanBnXFxcIixcXG4gICAgdXJsOiBcXFwiaGlrZXI6Ly9wYWdlLzE4SD91cmw9aGlrZXI6Ly9lbXB0eSNmeXBhZ2Ujbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjXFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJjYXJkX3BpY18yXzJcXFwiLFxcblxcbn0sIHtcXG4gICAgdGl0bGU6ICfigJjigJjigJnigJk8Zm9udCBjb2xvcj1cXFwiI2YxNDQxZFxcXCI+d25hY2fmvKvnlLs8L2ZvbnQ+JyArICdcXFxcbicgKyAnPHNtYWxsPjxmb250IGNvbG9yPVxcXCIjZjE0NDFkXFxcIj4o5Y+q6IO95LiL6L29emlwKTwvZm9udD48L3NtYWxsPicsXFxuICAgIHBpY191cmw6IFxcXCJodHRwczovL2Fzc2V0cy55YW5kZS5yZS9kYXRhL3ByZXZpZXcvMDIvNTEvMDI1MTYxYzZiZWRjOTFiNTM5M2U3N2Y1ODE5MGZiNTkuanBnXFxcIixcXG4gICAgdXJsOiBcXFwiaGlrZXI6Ly9wYWdlL3duYWNnP3VybD1oaWtlcjovL2VtcHR5I2Z5cGFnZSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNcXFwiLFxcbiAgICBjb2xfdHlwZTogXFxcImNhcmRfcGljXzJfMlxcXCIsXFxuXFxufSwge1xcbiAgICB0aXRsZTogJ+KAmOKAmOKAmeKAmTxmb250IGNvbG9yPVxcXCIjZjE0NDFkXFxcIj5zcGFua2Jhbmc8L2ZvbnQ+JyxcXG4gICAgZGVzYzogJzAnLFxcbiAgICBwaWNfdXJsOiBcXFwiaHR0cHM6Ly9maWxlcy55YW5kZS5yZS9qcGVnLzUyMjg1ZGEwNzc3NDViOGQ4ZGYzMjcxNmI0YTYxZDU5L3lhbmRlLnJlJTIwMTA3MTgzMCUyMGFuaW1hbF9lYXJzJTIwYmFuZGFpZCUyMGxldGhlXyUyOGxldGhlMTg3JTI5JTIwdGFpbC5qcGdcXFwiLFxcbiAgICB1cmw6IFxcXCJoaWtlcjovL3BhZ2Uvc3BhbmtiYW5nP3VybD1oaWtlcjovL2VtcHR5I2Z5cGFnZSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNcXFwiLFxcbiAgICBjb2xfdHlwZTogXFxcImNhcmRfcGljXzJfMl9sZWZ0XFxcIixcXG5cXG59LCB7XFxuICAgIHRpdGxlOiAn4oCY4oCY4oCZ4oCZPGZvbnQgY29sb3I9XFxcIiNmMTQ0MWRcXFwiPmUtaGVudGFpPC9mb250PicrICdcXFxcbicgKyAnPHNtYWxsPjxmb250IGNvbG9yPVxcXCIjZjE0NDFkXFxcIj4o5a655piT6KKr5bCBaXApPC9mb250Pjwvc21hbGw+JyxcXG4gICAgZGVzYzogJzAnLFxcbiAgICBwaWNfdXJsOiBcXFwiaHR0cHM6Ly9maWxlcy55YW5kZS5yZS9pbWFnZS8zMzI5OGVlMjAxZDIwNTRhYTEyODgyOTVjN2U2OTRkNC95YW5kZS5yZSUyMDEwNjkzNTElMjBhbmltYWxfZWFycyUyMGJhdGhpbmclMjBidW5ueV9lYXJzJTIwZWNob2NhbHlwc2UlMjBob3JucyUyMG5ha2VkJTIwb25zZW4lMjBwb2ludHlfZWFycyUyMHNha2UlMjBzZWVfdGhyb3VnaCUyMHN1cmFpbXVfJTI4c3VyYWltdXJhaW11JTI5JTIwdGFpbCUyMHRvd2VsJTIwd2FsbHBhcGVyJTIwd2V0JTIwd2luZ3MuanBnXFxcIixcXG4gICAgdXJsOiBcXFwiaGlrZXI6Ly9wYWdlL2VoZW50YWk/dXJsPWhpa2VyOi8vZW1wdHkjZnlwYWdlI25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5I1xcXCIsXFxuICAgIGNvbF90eXBlOiBcXFwiY2FyZF9waWNfMl8yX2xlZnRcXFwiLFxcblxcbn0sIHtcXG4gICAgdGl0bGU6ICfigJjigJjigJnigJk8Zm9udCBjb2xvcj1cXFwiI2YxNDQxZFxcXCI+ZmlrZmFwPC9mb250PicsXFxuICAgIGRlc2M6ICcwJyxcXG4gICAgcGljX3VybDogXFxcImh0dHBzOi8vZmlsZXMueWFuZGUucmUvaW1hZ2UvNzA4YTcxNTJlZTI1OWI5NGU1ZTQ1MTc3NjE3NzRhNWUveWFuZGUucmUlMjAxMDgyMzg0JTIwYW5pbWFsX2VhcnMlMjBhc3MlMjBnYXJ0ZXIlMjBub19icmElMjB0YWdtZSUyMHRhaWwlMjB0aGlnaGhpZ2hzJTIwd2V0LmpwZ1xcXCIsXFxuICAgIHVybDogXFxcImhpa2VyOi8vcGFnZS9maWtmYXA/dXJsPWhpa2VyOi8vZW1wdHkjZnlwYWdlI25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5I1xcXCIsXFxuICAgIGNvbF90eXBlOiBcXFwiY2FyZF9waWNfMlxcXCIsXFxuXFxufSwge1xcbiAgICB0aXRsZTogJ+KAmOKAmOKAmeKAmTxmb250IGNvbG9yPVxcXCIjZjE0NDFkXFxcIj5oaXR4aG90PC9mb250PicsXFxuICAgIGRlc2M6ICcwJyxcXG4gICAgcGljX3VybDogXFxcImh0dHBzOi8vZmlsZXMueWFuZGUucmUvaW1hZ2UvMTkyYTgxYTI1YTlhZDI0NTNjZTY5OGFhZTUyN2U2ZWEveWFuZGUucmUlMjAxMDc2MDkxJTIwYW5pbWFsX2VhcnMlMjBnYXJ0ZXIlMjBoYWJ1X3JpbiUyMGthcnlsXyUyOHByaW5jZXNzX2Nvbm5lY3QlMjklMjBuZWtvbWltaSUyMHByaW5jZXNzX2Nvbm5lY3QlMjBwcmluY2Vzc19jb25uZWN0JTIxX3JlJTNBZGl2ZSUyMHNraXJ0X2xpZnQlMjB0aGlnaGhpZ2hzJTIwdW5kcmVzc2luZyUyMHdhbGxwYXBlci5qcGdcXFwiLFxcbiAgICB1cmw6IFxcXCJoaWtlcjovL3BhZ2UvaGl0eGhvdD91cmw9aGlrZXI6Ly9lbXB0eSNmeXBhZ2Ujbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjXFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJjYXJkX3BpY18xXFxcIixcXG5cXG59LCB7XFxuICAgIHRpdGxlOiAn4oCY4oCY4oCZ4oCZPGZvbnQgY29sb3I9XFxcIiNmMTQ0MWRcXFwiPnBvcm5odWI8L2ZvbnQ+JyArICdcXFxcbicgKyAnPHNtYWxsPjxmb250IGNvbG9yPVxcXCIjZjE0NDFkXFxcIj4o5aSa57q/6LevKTwvZm9udD48L3NtYWxsPicsXFxuICAgIGRlc2M6ICcwJyxcXG4gICAgcGljX3VybDogXFxcImh0dHBzOi8vZmlsZXMueWFuZGUucmUvaW1hZ2UvMDIyOGQzYzM5Nzk0M2EzMTBiZGFlYmJmYjc1YmQ5MzkveWFuZGUucmUlMjAxMDc0ODU2JTIwYW5pbWFsX2VhcnMlMjBtYW9hbyUyMG5ha2VkJTIwbmVrbyUyMG5la29taW1pJTIwbmlwcGxlcyUyMHRoaWdoaGlnaHMuanBnXFxcIixcXG4gICAgdXJsOiBcXFwiaGlrZXI6Ly9wYWdlL3Bvcm5odWI/dXJsPWhpa2VyOi8vZW1wdHkjZnlwYWdlI25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5I1xcXCIsXFxuICAgIGNvbF90eXBlOiBcXFwiY2FyZF9waWNfMVxcXCIsXFxufSlcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIiPmma7pgJrkuIvovb3kuLvnqIvluo9cIixcInBhdGhcIjpcIkRvd25sb2FkLmV4ZS5qc1wiLFwicnVsZVwiOlwiY29uc3QgTWlhbiA9ICQucmVxdWlyZShcXFwibWFpbkRvd25sb2FkXFxcIik7XFxuZnVuY3Rpb24gbm92ZWwoaXRlbSwgaW5mbywgb3JkZXIsIE1ZX0lEKSB7XFxuICAgIE1pYW4ubm92ZWwoaXRlbSwgaW5mbywgb3JkZXIpO1xcbiAgICByZXR1cm4gXFxcInRvYXN0Oi8vXFxcIiArIGluZm8uYm9va05hbWUgKyBcXFwiQFxcXCIgKyBpdGVtLnRpdGxlICsgXFxcIiDkuIvovb3lrozmiJBcXFwiO1xcbn1cXG5cXG5mdW5jdGlvbiBjb21pYyhpdGVtLCBpbmZvLCBvcmRlciwgTVlfSUQpIHtcXG4gICAgTWlhbi5jb21pYyhpdGVtLCBpbmZvLCBvcmRlcik7XFxuICAgIHJldHVybiBcXFwidG9hc3Q6Ly9cXFwiICsgaW5mby5ib29rTmFtZSArIFxcXCJAXFxcIiArIGl0ZW0udGl0bGUgKyBcXFwiIOS4i+i9veWujOaIkFxcXCI7XFxufVxcbnZhciAkZXhlID0ge1xcbiAgICBjb21pYzogY29taWMsXFxuICAgIG5vdmVsOiBub3ZlbFxcbn07XFxuJC5leHBvcnRzID0gZnVuY3Rpb24oaXRlbSwgaW5mbywgb3JkZXIsIE1ZX0lEKSB7XFxuICAgIHJldHVybiAkZXhlW2luZm8udHlwZV0oaXRlbSwgaW5mbywgb3JkZXIsIE1ZX0lEKTtcXG59O1wifSx7XCJjb2xfdHlwZVwiOlwidGV4dF8yXCIsXCJuYW1lXCI6XCIj5pmu6YCa5LiL6L295YiX6KGo5Li756iL5bqPXCIsXCJwYXRoXCI6XCJkb3dubG9hZC52aWV3XCIsXCJydWxlXCI6XCJqczpcXG5jb25zdCB2aWV3Q29uZmlnID0gT2JqZWN0LmFzc2lnbih7XFxuICAgIGNoYXB0ZXJMaXN0OiBbXSxcXG4gICAgaW5mbzoge30sXFxuICAgIGRlZmF1bHRWaWV3OiBcXFwiMFxcXCJcXG59LCBNWV9QQVJBTVMpO1xcbnZpZXdDb25maWcuaW5mbyA9IE9iamVjdC5hc3NpZ24oe1xcbiAgICBydWxlTmFtZTogXFxcIlxcXCIsXFxuICAgIGJvb2tOYW1lOiBcXFwiXFxcIixcXG4gICAgYm9va1RvcFBpYzogXFxcIlxcXCIsXFxuICAgIHBhcnNlQ29kZTogXFxcIlxcXCIsXFxuICAgIGRlY29kZTogdW5kZWZpbmVkLFxcbiAgICB0eXBlOiBcXFwiY29taWNcXFwiLFxcbiAgICBjb21pY1NjaGVtZTogXFxcIjFcXFwiXFxufSwgdmlld0NvbmZpZy5pbmZvKTtcXG5sZXQge1xcbiAgICBjaGFwdGVyTGlzdCxcXG4gICAgaW5mbyxcXG4gICAgZGVmYXVsdFZpZXdcXG59ID0gdmlld0NvbmZpZztcXG5zZXRQYWdlVGl0bGUoXFxcIumAieaLqeWZqHxcXFwiICsgaW5mby5ib29rTmFtZSlcXG5cXG5jb25zdCBGaWxlID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvRmlsZS5qc1xcXCIpO1xcbmNvbnN0IFRvb2wgPSAkLnJlcXVpcmUoXFxcImhpa2VyOi8vcGFnZS9Ub29sLmpzXFxcIik7XFxuY29uc3QgQ29uZmlnID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvQ29uZmlnLmpzb25cXFwiKTtcXG5cXG52aWV3Q29uZmlnLmluZm8uYm9va05hbWU9VG9vbC50ZXh0U2hpZWxkKHZpZXdDb25maWcuaW5mby5ib29rTmFtZSk7XFxudmlld0NvbmZpZy5pbmZvLnJ1bGVOYW1lPVRvb2wudGV4dFNoaWVsZCh2aWV3Q29uZmlnLmluZm8ucnVsZU5hbWUpO1xcblxcbmNvbnN0IGRlZl9Eb1ZpX1N0eWxlID0gQ29uZmlnLmRlZl9Eb1ZpX1N0eWxlO1xcbmNvbnN0IE1ZX0lEID0gaW5mby5ydWxlTmFtZSArIFxcXCIvL1xcXCIgKyBpbmZvLmJvb2tOYW1lO1xcblxcbmxldCBpc1N0YXJ0ID0gZ2V0TXlWYXIoTVlfSUQgKyBcXFwiOmlzU3RhcnRcXFwiKTtcXG5sZXQgdmlld01vZGUgPSBnZXRNeVZhcihNWV9JRCArIFxcXCI6dmlld01vZGVcXFwiLCBkZWZhdWx0Vmlldyk7XFxubGV0IGlzUmV2ZXJzZSA9IGdldE15VmFyKE1ZX0lEICsgXFxcIjppc1JldmVyc2VcXFwiLCBcXFwiMFxcXCIpO1xcbmxldCB0YWdGaWx0ZXIgPSBnZXRNeVZhcihNWV9JRCArIFxcXCI6dGFnRmlsdGVyXFxcIiwgQ29uZmlnLmRlZl9Eb1ZpX1R5cGUpO1xcblxcbmFkZExpc3RlbmVyKFxcXCJvbkNsb3NlXFxcIiwgJC50b1N0cmluZygoTVlfSUQpID0+IHtcXG4gICAgY2xlYXJNeVZhcihNWV9JRCArIFxcXCI6bG9hZGluZ1RlYW1cXFwiKTtcXG4gICAgY2xlYXJNeVZhcihNWV9JRCArIFxcXCI6dmlld01vZGVcXFwiKTtcXG4gICAgY2xlYXJNeVZhcihNWV9JRCArIFxcXCI6Y29tcGxldGVkXFxcIik7XFxuICAgIGNsZWFyTXlWYXIoTVlfSUQgKyBcXFwiOmJhdGNoVGVhbVxcXCIpO1xcbiAgICBjbGVhck15VmFyKE1ZX0lEICsgXFxcIjp0YWdGaWx0ZXJcXFwiKTtcXG4gICAgY2xlYXJNeVZhcihNWV9JRCArIFxcXCI6cGFnZU51bVxcXCIpO1xcbn0sIE1ZX0lEKSk7XFxuXFxubGV0IGxheW91dCA9IFtdO1xcblxcbmlmIChpc1N0YXJ0ID09PSBcXFwiMVxcXCIpIHtcXG4gICAgcHV0TXlWYXIoTVlfSUQgKyBcXFwiOnZpZXdNb2RlXFxcIiwgZGVmYXVsdFZpZXcpO1xcbiAgICB2aWV3TW9kZSA9IFxcXCIxXFxcIjtcXG59XFxuXFxubGV0IGJhY2t1cENoYXB0ZXJMaXN0ID0gY2hhcHRlckxpc3Q7XFxuaWYgKHR5cGVvZiBjaGFwdGVyTGlzdCA9PT0gXFxcInN0cmluZ1xcXCIpIHtcXG4gICAgY2hhcHRlckxpc3QgPSBKU09OLnBhcnNlKHJlcXVlc3QoXFxcImZpbGU6Ly9cXFwiICsgY2hhcHRlckxpc3QpIHx8IFxcXCJbXVxcXCIpO1xcbn1cXG5sZXQgY2hhcHRlckFsbCA9IGNoYXB0ZXJMaXN0O1xcbmNoYXB0ZXJMaXN0ID0gY2hhcHRlckxpc3QubWFwKChpdGVtLCBDSUQpID0+IHtcXG4gICAgaXRlbS5DSUQgPSBDSUQ7XFxuICAgIGl0ZW0udGl0bGU9VG9vbC50ZXh0U2hpZWxkKGl0ZW0udGl0bGUpO1xcbiAgICByZXR1cm4gaXRlbTtcXG59KTtcXG5sZXQgcGFnZU51bSA9IE51bWJlcihnZXRNeVZhcihNWV9JRCArIFxcXCI6cGFnZU51bVxcXCIsIFxcXCIxXFxcIikpO1xcbmxldCBjaGFwdGVyQ2h1bmsgPSBbY2hhcHRlckxpc3RdLmNvbmNhdChUb29sLmNodW5rKGNoYXB0ZXJMaXN0LCBDb25maWcudmlld1BhZ2VTaXplKSk7XFxuY2hhcHRlckxpc3QgPSBjaGFwdGVyQ2h1bmtbcGFnZU51bV0gfHwgW107XFxuXFxuZnVuY3Rpb24gc2V0VHlwZSgpIHtcXG4gICAgbGV0IHNldCA9ICh0YWcsIHB1dCkgPT4ge1xcbiAgICAgICAgcHV0TXlWYXIocHV0LCB0YWcpO1xcbiAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcbiAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIlxcbiAgICB9O1xcbiAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICB0aXRsZTogMCA9PSBwYWdlTnVtID8gXFxcIuKAnOKAnOKAneKAnVxcXCIgKyAoXFxcIuWFqOmDqChcXFwiICsgY2hhcHRlckFsbC5sZW5ndGggKyBcXFwiKVxcXCIpLmZvbnRjb2xvcihcXFwiIzIzQUQ2RlxcXCIpIDogXFxcIuWFqOmDqChcXFwiICsgY2hhcHRlckFsbC5sZW5ndGggKyBcXFwiKVxcXCIsXFxuICAgICAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoc2V0LCAwLCBNWV9JRCArIFxcXCI6cGFnZU51bVxcXCIpLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJzY3JvbGxfYnV0dG9uXFxcIlxcbiAgICB9KTtcXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBjaGFwdGVyQ2h1bmsubGVuZ3RoOyBpKyspIHtcXG4gICAgICAgIGxldCB0YWdUZXh0ID0gKGkgLSAxKSAqIENvbmZpZy52aWV3UGFnZVNpemUgKyBcXFwiLVxcXCIgKyAoKGkgLSAxKSAqIENvbmZpZy52aWV3UGFnZVNpemUgKyBjaGFwdGVyQ2h1bmtbaV0ubGVuZ3RoKTtcXG4gICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogaSA9PSBwYWdlTnVtID8gXFxcIuKAnOKAnOKAneKAnVxcXCIgKyB0YWdUZXh0LmZvbnRjb2xvcihcXFwiIzIzQUQ2RlxcXCIpIDogdGFnVGV4dCxcXG4gICAgICAgICAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoc2V0LCBpLCBNWV9JRCArIFxcXCI6cGFnZU51bVxcXCIpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCJcXG4gICAgICAgIH0pO1xcbiAgICB9XFxuICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgIGNvbF90eXBlOiBcXFwiYmxhbmtfYmxvY2tcXFwiXFxuICAgIH0pO1xcbiAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICB0aXRsZTogdGFnRmlsdGVyID09PSBcXFwiMFxcXCIgPyBcXFwi4oCc4oCc4oCd4oCdXFxcIiArIFxcXCLlhajpg6hcXFwiLmZvbnRjb2xvcihcXFwiIzIzQUQ2RlxcXCIpIDogXFxcIuWFqOmDqFxcXCIsXFxuICAgICAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoc2V0LCBcXFwiMFxcXCIsIE1ZX0lEICsgXFxcIjp0YWdGaWx0ZXJcXFwiKSxcXG4gICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCJcXG4gICAgfSk7XFxuICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiB0YWdGaWx0ZXIgPT09IFxcXCIxXFxcIiA/IFxcXCLigJzigJzigJ3igJ1cXFwiICsgXFxcIuacquS4i+i9vVxcXCIuZm9udGNvbG9yKFxcXCIjMjNBRDZGXFxcIikgOiBcXFwi5pyq5LiL6L29XFxcIixcXG4gICAgICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZShzZXQsIFxcXCIxXFxcIiwgTVlfSUQgKyBcXFwiOnRhZ0ZpbHRlclxcXCIpLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJzY3JvbGxfYnV0dG9uXFxcIlxcbiAgICB9KTtcXG4gICAgbGF5b3V0LnB1c2goe1xcbiAgICAgICAgdGl0bGU6IHRhZ0ZpbHRlciA9PT0gXFxcIjJcXFwiID8gXFxcIuKAnOKAnOKAneKAnVxcXCIgKyBcXFwi5bey5LiL6L29XFxcIi5mb250Y29sb3IoXFxcIiMyM0FENkZcXFwiKSA6IFxcXCLlt7LkuIvovb1cXFwiLFxcbiAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKHNldCwgXFxcIjJcXFwiLCBNWV9JRCArIFxcXCI6dGFnRmlsdGVyXFxcIiksXFxuICAgICAgICBjb2xfdHlwZTogXFxcInNjcm9sbF9idXR0b25cXFwiXFxuICAgIH0pO1xcbn1cXG5sZXQgY2hhcHRlclRlYW0gPSBbXTtcXG5sZXQgcmVjb3JkID0gW107XFxuaWYgKGluZm8udHlwZSA9PT0gXFxcImNvbWljXFxcIikge1xcbiAgICBsZXQgbGF6eSA9ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoKCkgPT4ge1xcbiAgICAgICAgY29uc3QgRmlsZSA9ICQucmVxdWlyZShcXFwiaGlrZXI6Ly9wYWdlL0ZpbGUuanNcXFwiKTtcXG4gICAgICAgIGxldCBmaWxlbGlzdCA9IEZpbGUuZ2V0RmlsZVBhdGgoaW5wdXQpO1xcbiAgICAgICAgbGV0IHBpY2xpc3QgPSBmaWxlbGlzdC5tYXAoKGl0ZW0sIGkpID0+IFxcXCJmaWxlOi8vXFxcIiArIGlucHV0ICsgXFxcIi9cXFwiICsgKGkgKyAxKSArIFxcXCIuanBnXFxcIik7XFxuICAgICAgICByZXR1cm4gXFxcInBpY3M6Ly9cXFwiICsgcGljbGlzdC5qb2luKFxcXCImJlxcXCIpO1xcbiAgICB9KTtcXG5cXG4gICAgZnVuY3Rpb24gY29tRnVuKGksIGl0ZW0pIHtcXG4gICAgICAgIGxldCByb290UGF0aCA9IENvbmZpZy5jb21pY1BhdGggKyBcXFwiL1xcXCIgKyBpbmZvLnJ1bGVOYW1lICsgXFxcIi9cXFwiICsgaW5mby5ib29rTmFtZSArIFxcXCIvXFxcIiArIGkgKyBcXFwiJEEkXFxcIiArIGl0ZW0udGl0bGU7XFxuICAgICAgICByZXR1cm4ge1xcbiAgICAgICAgICAgIHRpdGxlOiBcXFwi4oCc4oCcXFxcIiArIGl0ZW0udGl0bGUgKyBcXFwi4oCd4oCdXFxcIixcXG4gICAgICAgICAgICB1cmw6IHJvb3RQYXRoICsgbGF6eSxcXG4gICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICBpZDogTVlfSUQgKyBcXFwiI1xcXCIgKyBpLFxcbiAgICAgICAgICAgIH0sXFxuICAgICAgICAgICAgY29sX3R5cGU6IGRlZl9Eb1ZpX1N0eWxlXFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgRmlsZS5nZXRGaWxlUGF0aChDb25maWdbaW5mby50eXBlICsgXFxcIlBhdGhcXFwiXSArIFxcXCIvXFxcIiArIGluZm8ucnVsZU5hbWUgKyBcXFwiL1xcXCIgKyBpbmZvLmJvb2tOYW1lLCBcXFwiZGlyXFxcIikuZm9yRWFjaCgoZmlsZSkgPT4ge1xcbiAgICAgICAgbGV0IGF0dCA9IFRvb2wuc3BsaXQoZmlsZS5uYW1lLCBcXFwiJFxcXCIsIDIpO1xcbiAgICAgICAgaWYgKGF0dC5sZW5ndGggPT09IDMgJiYgYXR0WzFdID09PSAoXFxcIkFcXFwiKSkge1xcbiAgICAgICAgICAgIHJlY29yZC5wdXNoKGF0dFsyXSk7XFxuICAgICAgICB9XFxuICAgIH0pO1xcbn0gZWxzZSB7XFxuICAgIGZ1bmN0aW9uIGNvbUZ1bihpLCBpdGVtKSB7XFxuICAgICAgICByZXR1cm4ge1xcbiAgICAgICAgICAgIHRpdGxlOiBcXFwi4oCc4oCcXFxcIiArIGl0ZW0udGl0bGUgKyBcXFwi4oCd4oCdXFxcIixcXG4gICAgICAgICAgICB1cmw6IFxcXCJoaWtlcjovL3BhZ2UvTm92ZWxNYWluQm9keSNhdXRvUGFnZSMjcmVhZFRoZW1lI1xcXCIsXFxuICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgaWQ6IE1ZX0lEICsgXFxcIiNcXFwiICsgaSxcXG4gICAgICAgICAgICAgICAgcGF0aDogQ29uZmlnLm5vdmVsUGF0aCArIFxcXCIvXFxcIiArIGluZm8ucnVsZU5hbWUgKyBcXFwiL1xcXCIgKyBpbmZvLmJvb2tOYW1lICsgXFxcIi9cXFwiICsgaSArIFxcXCIkQSRcXFwiICsgaXRlbS50aXRsZSArIFxcXCIudHh0XFxcIixcXG4gICAgICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGVcXG4gICAgICAgICAgICB9LFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBkZWZfRG9WaV9TdHlsZVxcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIEZpbGUuZ2V0RmlsZVBhdGgoQ29uZmlnW2luZm8udHlwZSArIFxcXCJQYXRoXFxcIl0gKyBcXFwiL1xcXCIgKyBpbmZvLnJ1bGVOYW1lICsgXFxcIi9cXFwiICsgaW5mby5ib29rTmFtZSwgXFxcImZpbGVcXFwiLCBcXFwiLnR4dFxcXCIpLmZvckVhY2goKGZpbGUpID0+IHtcXG4gICAgICAgIGxldCBhdHQgPSBUb29sLnNwbGl0KGZpbGUubmFtZSwgXFxcIiRcXFwiLCAyKTtcXG4gICAgICAgIGlmIChhdHQubGVuZ3RoID09PSAzICYmIGF0dFsxXSA9PT0gKFxcXCJBXFxcIikpIHtcXG4gICAgICAgICAgICByZWNvcmQucHVzaChhdHRbMl0uc2xpY2UoMCwgYXR0WzJdLmxhc3RJbmRleE9mKFxcXCIuXFxcIikpKTtcXG4gICAgICAgIH1cXG4gICAgfSk7XFxufVxcblxcbmZ1bmN0aW9uIGNsaWNrRG93bmxvYWQoaXRlbSwgaW5mbywgTVlfSUQsIGkpIHtcXG4gICAgbGV0IGxvYWRpbmdUZWFtID0gSlNPTi5wYXJzZShnZXRNeVZhcihNWV9JRCArIFxcXCI6bG9hZGluZ1RlYW1cXFwiLCBcXFwiW11cXFwiKSB8fCBcXFwiW11cXFwiKTtcXG4gICAgbGV0IEVsZW1lbnRJbmRleCA9IGxvYWRpbmdUZWFtLmluZGV4T2YoaSk7XFxuICAgIGlmIChFbGVtZW50SW5kZXggPiAtMSkgcmV0dXJuIFxcXCJ0b2FzdDovL+ato+WcqOS4i+i9vVxcXCI7XFxuXFxuICAgIGxvYWRpbmdUZWFtLnB1c2goaSk7XFxuICAgIHB1dE15VmFyKE1ZX0lEICsgXFxcIjpsb2FkaW5nVGVhbVxcXCIsIEpTT04uc3RyaW5naWZ5KGxvYWRpbmdUZWFtKSk7XFxuICAgIHVwZGF0ZUl0ZW0oe1xcbiAgICAgICAgdGl0bGU6IFxcXCLigJjigJhcXFwiICsgaXRlbS50aXRsZSArIFxcXCLigJnigJlcXFwiLFxcbiAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICBpZDogTVlfSUQgKyBcXFwiI1xcXCIgKyBpXFxuICAgICAgICB9XFxuICAgIH0pO1xcbiAgICBsZXQgcmVzdWx0ID0gXFxcInRvYXN0Oi8v5LiL6L295aSx6LSlXFxcIjtcXG4gICAgdHJ5IHtcXG4gICAgICAgIHRvYXN0KFxcXCLlvIDlp4vkuIvovb06XFxcIiArIGl0ZW0udGl0bGUpO1xcbiAgICAgICAgbGV0IGRvd25sb2FkID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvRG93bmxvYWQuZXhlLmpzXFxcIik7XFxuICAgICAgICByZXN1bHQgPSBkb3dubG9hZChpdGVtLCBpbmZvLCBpLCBNWV9JRCk7XFxuICAgICAgICB1cGRhdGVJdGVtKHtcXG4gICAgICAgICAgICB0aXRsZTogXFxcIuKAnOKAnFxcXCIgKyBpdGVtLnRpdGxlICsgXFxcIuKAneKAnVxcXCIsXFxuICAgICAgICAgICAgdXJsOiBcXFwidG9hc3Q6Ly/lt7LkuIvovb1cXFwiLFxcbiAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgIGlkOiBNWV9JRCArIFxcXCIjXFxcIiArIGlcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9KTtcXG4gICAgfSBjYXRjaCAoZSkge1xcbiAgICAgICAgdXBkYXRlSXRlbSh7XFxuICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsXFxuICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgaWQ6IE1ZX0lEICsgXFxcIiNcXFwiICsgaVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pO1xcbiAgICAgICAgbG9nKGUudG9TdHJpbmcoKSk7XFxuICAgIH0gZmluYWxseSB7XFxuICAgICAgICBsb2FkaW5nVGVhbS5zcGxpY2UoRWxlbWVudEluZGV4LCAxKTtcXG4gICAgICAgIHB1dE15VmFyKE1ZX0lEICsgXFxcIjpsb2FkaW5nVGVhbVxcXCIsIEpTT04uc3RyaW5naWZ5KGxvYWRpbmdUZWFtKSk7XFxuICAgIH1cXG4gICAgcmV0dXJuIHJlc3VsdDtcXG59XFxuXFxuZnVuY3Rpb24gc2luZ2xlVmlldygpIHtcXG4gICAgbGF5b3V0LnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFxcXCLlj43ovazliJfooahcXFwiLFxcbiAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChpc1JldmVyc2UsIE1ZX0lEKSA9PiB7XFxuICAgICAgICAgICAgcHV0TXlWYXIoTVlfSUQgKyBcXFwiOmlzUmV2ZXJzZVxcXCIsIGlzUmV2ZXJzZSA9PT0gXFxcIjBcXFwiID8gXFxcIjFcXFwiIDogXFxcIjBcXFwiKTtcXG4gICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgIH0sIGlzUmV2ZXJzZSwgTVlfSUQpLFxcbiAgICAgICAgcGljX3VybDogXFxcImh0dHBzOi8vaW1nLmljb25zOC5jb20vP2lkPTMzbnZEcWJISDdIVyZzaXplPTQ4JmZvcm1hdD1naWYmdG9rZW49XFxcIixcXG4gICAgICAgIGNvbF90eXBlOiBcXFwiaWNvbl8yXFxcIlxcbiAgICB9KTtcXG4gICAgbGF5b3V0LnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFxcXCLmibnph4/kuIvovb1cXFwiLFxcbiAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChNWV9JRCkgPT4ge1xcbiAgICAgICAgICAgIGxldCBsb2FkaW5nVGVhbSA9IEpTT04ucGFyc2UoZ2V0TXlWYXIoTVlfSUQgKyBcXFwiOmxvYWRpbmdUZWFtXFxcIiwgXFxcIltdXFxcIikgfHwgXFxcIltdXFxcIik7XFxuICAgICAgICAgICAgaWYgKGxvYWRpbmdUZWFtLmxlbmd0aCA+IDApIHJldHVybiBcXFwidG9hc3Q6Ly/ov5jmnInku7vliqHmsqHmnInlrozmiJBcXFwiO1xcbiAgICAgICAgICAgIGlmIChnZXRBcHBWZXJzaW9uKCkgPCAyNTk0KSByZXR1cm4gXFxcInRvYXN0Oi8v5pyq5byA5pS+XFxcIjtcXG4gICAgICAgICAgICBwdXRNeVZhcihNWV9JRCArIFxcXCI6dmlld01vZGVcXFwiLCBcXFwiMVxcXCIpO1xcbiAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcblxcbiAgICAgICAgfSwgTVlfSUQpLFxcbiAgICAgICAgcGljX3VybDogXFxcImh0dHBzOi8vaW1nLmljb25zOC5jb20vP2Zvcm1hdD1naWYmaWQ9MHVhZmFNTnp4ajg4JnRva2VuPVxcXCIsXFxuICAgICAgICBjb2xfdHlwZTogXFxcImljb25fMlxcXCJcXG4gICAgfSk7XFxuICAgIHNldFR5cGUoKTtcXG4gICAgbGF5b3V0LnB1c2goe1xcbiAgICAgICAgY29sX3R5cGU6IFxcXCJsaW5lX2JsYW5rXFxcIlxcbiAgICB9KTtcXG4gICAgbGV0IGxvYWRpbmdUZWFtID0gSlNPTi5wYXJzZShnZXRNeVZhcihNWV9JRCArIFxcXCI6bG9hZGluZ1RlYW1cXFwiLCBcXFwiW11cXFwiKSB8fCBcXFwiW11cXFwiKTtcXG4gICAgZm9yIChsZXQgaSA9IDAsIGl0ZW0gPSBjaGFwdGVyTGlzdFswXTsgaSA8IGNoYXB0ZXJMaXN0Lmxlbmd0aDsgaXRlbSA9IGNoYXB0ZXJMaXN0WysraV0pIHtcXG4gICAgICAgIGxldCBpc19kb3dubG9hZCA9IHJlY29yZC5pbmNsdWRlcyhpdGVtLnRpdGxlKTtcXG4gICAgICAgIGlmIChpc19kb3dubG9hZCAmJiB0YWdGaWx0ZXIgIT09IFxcXCIxXFxcIikge1xcbiAgICAgICAgICAgIGNoYXB0ZXJUZWFtLnB1c2goY29tRnVuKGl0ZW0uQ0lELCBpdGVtKSk7XFxuICAgICAgICB9IGVsc2UgaWYgKCFpc19kb3dubG9hZCAmJiB0YWdGaWx0ZXIgIT09IFxcXCIyXFxcIikge1xcbiAgICAgICAgICAgIGNoYXB0ZXJUZWFtLnB1c2goe1xcbiAgICAgICAgICAgICAgICB0aXRsZTogbG9hZGluZ1RlYW0uaW5jbHVkZXMoaXRlbS5DSUQpID8gXFxcIuKAmOKAmFxcXCIgKyBpdGVtLnRpdGxlICsgXFxcIuKAmeKAmVxcXCIgOiBpdGVtLnRpdGxlLFxcbiAgICAgICAgICAgICAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoY2xpY2tEb3dubG9hZCwgaXRlbSwgaW5mbywgTVlfSUQsIGl0ZW0uQ0lEKSxcXG4gICAgICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgICAgIGlkOiBNWV9JRCArIFxcXCIjXFxcIiArIGl0ZW0uQ0lEXFxuICAgICAgICAgICAgICAgIH0sXFxuICAgICAgICAgICAgICAgIGNvbF90eXBlOiBkZWZfRG9WaV9TdHlsZVxcbiAgICAgICAgICAgIH0pO1xcbiAgICAgICAgfVxcbiAgICB9XFxufVxcblxcbmZ1bmN0aW9uIGNsaWNrQ2hvb3NlKHRpdGxlLCBNWV9JRCwgaSkge1xcbiAgICBsZXQgaXNTdGFydCA9IGdldE15VmFyKE1ZX0lEICsgXFxcIjppc1N0YXJ0XFxcIik7XFxuICAgIGlmIChpc1N0YXJ0ID09PSBcXFwiMVxcXCIpIHJldHVybiBcXFwidG9hc3Q6Ly/mraPlnKjkuIvovb0uLi5cXFwiO1xcbiAgICBsZXQgYmF0Y2hUZWFtID0gSlNPTi5wYXJzZShnZXRNeVZhcihNWV9JRCArIFxcXCI6YmF0Y2hUZWFtXFxcIiwgXFxcIltdXFxcIikgfHwgXFxcIltdXFxcIik7XFxuICAgIGxldCBFbGVtZW50SW5kZXggPSBiYXRjaFRlYW0uaW5kZXhPZihpKTtcXG4gICAgaWYgKEVsZW1lbnRJbmRleCA+IC0xKSB7XFxuICAgICAgICB1cGRhdGVJdGVtKHtcXG4gICAgICAgICAgICB0aXRsZTogdGl0bGUsXFxuICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgaWQ6IE1ZX0lEICsgXFxcIiNcXFwiICsgaVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pO1xcbiAgICAgICAgYmF0Y2hUZWFtLnNwbGljZShFbGVtZW50SW5kZXgsIDEpO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgICAgdXBkYXRlSXRlbSh7XFxuICAgICAgICAgICAgdGl0bGU6IFxcXCLigJjigJhcXFwiICsgdGl0bGUgKyBcXFwi4oCZ4oCZXFxcIixcXG4gICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICBpZDogTVlfSUQgKyBcXFwiI1xcXCIgKyBpXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSk7XFxuICAgICAgICBiYXRjaFRlYW0ucHVzaChpKTtcXG4gICAgfVxcbiAgICBwdXRNeVZhcihNWV9JRCArIFxcXCI6YmF0Y2hUZWFtXFxcIiwgSlNPTi5zdHJpbmdpZnkoYmF0Y2hUZWFtKSk7XFxuICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxufVxcblxcbmZ1bmN0aW9uIGJhdGNoVmlldygpIHtcXG4gICAgbGF5b3V0LnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFxcXCLljZXpgInkuIvovb1cXFwiLFxcbiAgICAgICAgcGljX3VybDogXFxcImh0dHBzOi8vaW1nLmljb25zOC5jb20vP2lkPVBJaWN2RjZlYnpNbiZzaXplPTQ4JmZvcm1hdD1naWYmdG9rZW49XFxcIixcXG4gICAgICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZSgoTVlfSUQpID0+IHtcXG4gICAgICAgICAgICBpZiAoZ2V0TXlWYXIoTVlfSUQgKyBcXFwiOmlzU3RhcnRcXFwiKSA9PT0gXFxcIjFcXFwiKSByZXR1cm4gXFxcInRvYXN0Oi8v5q2j5Zyo5om56YeP5LiL6L29XFxcIjtcXG4gICAgICAgICAgICBwdXRNeVZhcihNWV9JRCArIFxcXCI6dmlld01vZGVcXFwiLCBcXFwiMFxcXCIpO1xcbiAgICAgICAgICAgIGNsZWFyTXlWYXIoTVlfSUQgKyBcXFwiOmJhdGNoVGVhbVxcXCIpO1xcbiAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgfSwgTVlfSUQpLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJpY29uX3NtYWxsXzRcXFwiXFxuICAgIH0pO1xcbiAgICBsZXQgc3RhcnQgPSBDb25maWcudmlld1BhZ2VTaXplICogTWF0aC5tYXgocGFnZU51bSAtIDEsIDApO1xcbiAgICBsZXQgZW5kID0gc3RhcnQgKyBjaGFwdGVyTGlzdC5sZW5ndGg7XFxuICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBcXFwi6YCJ5oup5YWo6YOoXFxcIixcXG4gICAgICAgIHBpY191cmw6IFxcXCJodHRwczovL2ltZy5pY29uczguY29tLz9mb3JtYXQ9Z2lmJmlkPTFIVmNITG9OenJpdCZ0b2tlbj1cXFwiLFxcbiAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChzdGFydCwgZW5kLCBNWV9JRCkgPT4ge1xcbiAgICAgICAgICAgIGlmIChnZXRNeVZhcihNWV9JRCArIFxcXCI6aXNTdGFydFxcXCIpID09PSBcXFwiMVxcXCIpIHJldHVybiBcXFwidG9hc3Q6Ly/mraPlnKjkuIvovb3lk6Z+XFxcIjtcXG4gICAgICAgICAgICBjb25zdCBUb29sID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvVG9vbC5qc1xcXCIpO1xcbiAgICAgICAgICAgIGxldCBjaG9vc2VUZWFtID0gVG9vbC5yYW5nZShzdGFydCwgZW5kKTtcXG4gICAgICAgICAgICBsZXQgYmF0Y2hUZWFtID0gSlNPTi5wYXJzZShnZXRNeVZhcihNWV9JRCArIFxcXCI6YmF0Y2hUZWFtXFxcIiwgXFxcIltdXFxcIikgfHwgXFxcIltdXFxcIik7XFxuICAgICAgICAgICAgYmF0Y2hUZWFtID0gQXJyYXkuZnJvbShuZXcgU2V0KGJhdGNoVGVhbS5jb25jYXQoY2hvb3NlVGVhbSkpKTtcXG4gICAgICAgICAgICBsZXQgY29tcGxldGVkID0gSlNPTi5wYXJzZShnZXRNeVZhcihNWV9JRCArIFxcXCI6Y29tcGxldGVkXFxcIiwgXFxcIltdXFxcIikgfHwgXFxcIltdXFxcIik7XFxuICAgICAgICAgICAgYmF0Y2hUZWFtID0gYmF0Y2hUZWFtLmZpbHRlcigoaSkgPT4gIWNvbXBsZXRlZC5pbmNsdWRlcyhpKSk7XFxuICAgICAgICAgICAgcHV0TXlWYXIoTVlfSUQgKyBcXFwiOmJhdGNoVGVhbVxcXCIsIEpTT04uc3RyaW5naWZ5KGJhdGNoVGVhbSkpO1xcbiAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiXFxuICAgICAgICB9LCBzdGFydCwgZW5kLCBNWV9JRCksXFxuICAgICAgICBjb2xfdHlwZTogXFxcImljb25fc21hbGxfNFxcXCJcXG4gICAgfSk7XFxuICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBcXFwi5Y+W5raI5YWo6YOoXFxcIixcXG4gICAgICAgIHBpY191cmw6IFxcXCJodHRwczovL2ltZy5pY29uczguY29tLz9mb3JtYXQ9Z2lmJmlkPUh6RWpQcEkzTkw4RCZ0b2tlbj1cXFwiLFxcbiAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChzdGFydCwgZW5kLCBNWV9JRCkgPT4ge1xcbiAgICAgICAgICAgIGlmIChnZXRNeVZhcihNWV9JRCArIFxcXCI6aXNTdGFydFxcXCIpID09PSBcXFwiMVxcXCIpIHJldHVybiBcXFwidG9hc3Q6Ly/mraPlnKjkuIvovb3lk6Z+XFxcIjtcXG4gICAgICAgICAgICBjb25zdCBUb29sID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvVG9vbC5qc1xcXCIpO1xcbiAgICAgICAgICAgIGxldCBjaG9vc2VUZWFtID0gbmV3IFNldChUb29sLnJhbmdlKHN0YXJ0LCBlbmQpKTtcXG4gICAgICAgICAgICBsZXQgYmF0Y2hUZWFtID0gSlNPTi5wYXJzZShnZXRNeVZhcihNWV9JRCArIFxcXCI6YmF0Y2hUZWFtXFxcIiwgXFxcIltdXFxcIikgfHwgXFxcIltdXFxcIik7XFxuICAgICAgICAgICAgYmF0Y2hUZWFtID0gYmF0Y2hUZWFtLmZpbHRlcih4ID0+ICFjaG9vc2VUZWFtLmhhcyh4KSk7XFxuICAgICAgICAgICAgcHV0TXlWYXIoTVlfSUQgKyBcXFwiOmJhdGNoVGVhbVxcXCIsIEpTT04uc3RyaW5naWZ5KGJhdGNoVGVhbSkpO1xcbiAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiXFxuICAgICAgICB9LCBzdGFydCwgZW5kLCBNWV9JRCksXFxuICAgICAgICBjb2xfdHlwZTogXFxcImljb25fc21hbGxfNFxcXCJcXG4gICAgfSk7XFxuICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBcXFwi56Gu6K6k6YCJ5LitXFxcIixcXG4gICAgICAgIHBpY191cmw6IFxcXCJodHRwczovL2ltZy5pY29uczguY29tLz9mb3JtYXQ9Z2lmJmlkPXRNcnZ0YzZUOWhWYiZ0b2tlbj1cXFwiLFxcbiAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChNWV9JRCkgPT4ge1xcbiAgICAgICAgICAgIGlmIChnZXRNeVZhcihNWV9JRCArIFxcXCI6aXNTdGFydFxcXCIsIFxcXCItMVxcXCIpICE9PSBcXFwiLTFcXFwiKSB7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/mraPlnKjkuIvovb3lk6Z+XFxcIjtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgbGV0IGJhdGNoVGVhbSA9IEpTT04ucGFyc2UoZ2V0TXlWYXIoTVlfSUQgKyBcXFwiOmJhdGNoVGVhbVxcXCIsIFxcXCJbXVxcXCIpIHx8IFxcXCJbXVxcXCIpO1xcbiAgICAgICAgICAgIHJldHVybiBiYXRjaFRlYW0ubGVuZ3RoID09PSAwID8gXFxcInRvYXN0Oi8v5L2g6L+Y5LuA5LmI6YO95rKh5pyJ6YCJXFxcIiA6IFxcXCJoaWtlcjovL3BhZ2UvQmF0Y2gudmlldyNub1JlZnJlc2gjI25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5I1xcXCI7XFxuICAgICAgICB9LCBNWV9JRCksXFxuICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgIG5ld1dpbmRvdzogdHJ1ZSxcXG4gICAgICAgICAgICB3aW5kb3dJZDogTVlfSUQgKyBcXFwiLy/mibnph4/kuIvovb1cXFwiLFxcbiAgICAgICAgICAgIE1ZX0lEOiBNWV9JRCxcXG4gICAgICAgICAgICBjaGFwdGVyTGlzdDogYmFja3VwQ2hhcHRlckxpc3QsXFxuICAgICAgICAgICAgaW5mbzogaW5mb1xcbiAgICAgICAgfSxcXG4gICAgICAgIGNvbF90eXBlOiBcXFwiaWNvbl9zbWFsbF80XFxcIlxcbiAgICB9KTtcXG4gICAgc2V0VHlwZSgpO1xcbiAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICBjb2xfdHlwZTogXFxcImxpbmVfYmxhbmtcXFwiXFxuICAgIH0pO1xcbiAgICBsZXQgYmF0Y2hUZWFtID0gSlNPTi5wYXJzZShnZXRNeVZhcihNWV9JRCArIFxcXCI6YmF0Y2hUZWFtXFxcIiwgXFxcIltdXFxcIikgfHwgXFxcIltdXFxcIik7XFxuICAgIGxldCBjb21wbGV0ZWQgPSBbXTtcXG4gICAgZm9yIChsZXQgaSA9IDAsIGl0ZW0gPSBjaGFwdGVyTGlzdFswXTsgaSA8IGNoYXB0ZXJMaXN0Lmxlbmd0aDsgaXRlbSA9IGNoYXB0ZXJMaXN0WysraV0pIHtcXG4gICAgICAgIGxldCBpc19kb3dubG9hZCA9IHJlY29yZC5pbmNsdWRlcyhpdGVtLnRpdGxlKTtcXG5cXG4gICAgICAgIGlmIChpc19kb3dubG9hZCkge1xcbiAgICAgICAgICAgIGNvbXBsZXRlZC5wdXNoKGl0ZW0uQ0lEKTtcXG4gICAgICAgICAgICBpZih0YWdGaWx0ZXIgIT09IFxcXCIxXFxcIil7XFxuICAgICAgICAgICAgICAgIGNoYXB0ZXJUZWFtLnB1c2goY29tRnVuKGl0ZW0uQ0lELCBpdGVtKSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSBlbHNlIGlmICghaXNfZG93bmxvYWQgJiYgdGFnRmlsdGVyICE9PSBcXFwiMlxcXCIpIHtcXG4gICAgICAgICAgICBjaGFwdGVyVGVhbS5wdXNoKHtcXG4gICAgICAgICAgICAgICAgdGl0bGU6IGJhdGNoVGVhbS5pbmNsdWRlcyhpdGVtLkNJRCkgPyBcXFwi4oCY4oCYXFxcIiArIGl0ZW0udGl0bGUgKyBcXFwi4oCZ4oCZXFxcIiA6IGl0ZW0udGl0bGUsXFxuICAgICAgICAgICAgICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZShjbGlja0Nob29zZSwgaXRlbS50aXRsZSwgTVlfSUQsIGl0ZW0uQ0lEKSxcXG4gICAgICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgICAgIGlkOiBNWV9JRCArIFxcXCIjXFxcIiArIGl0ZW0uQ0lEXFxuICAgICAgICAgICAgICAgIH0sXFxuICAgICAgICAgICAgICAgIGNvbF90eXBlOiBkZWZfRG9WaV9TdHlsZVxcbiAgICAgICAgICAgIH0pO1xcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIHB1dE15VmFyKE1ZX0lEICsgXFxcIjpjb21wbGV0ZWRcXFwiLCBKU09OLnN0cmluZ2lmeShjb21wbGV0ZWQpKTtcXG59XFxuc3dpdGNoICh2aWV3TW9kZSkge1xcbiAgICBjYXNlIFxcXCIwXFxcIjpcXG4gICAgICAgIHNpbmdsZVZpZXcoKTtcXG4gICAgICAgIGJyZWFrO1xcbiAgICBjYXNlIFxcXCIxXFxcIjpcXG4gICAgICAgIGJhdGNoVmlldygpO1xcbiAgICAgICAgYnJlYWs7XFxufVxcbmlmIChpc1JldmVyc2UgPT09IFxcXCIxXFxcIikge1xcbiAgICBjaGFwdGVyVGVhbS5yZXZlcnNlKCk7XFxufVxcbmxheW91dC5wdXNoLmFwcGx5KGxheW91dCwgY2hhcHRlclRlYW0pO1xcbnNldFJlc3VsdChsYXlvdXQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiI+S4i+i9veS4u+eoi+W6j1wiLFwicGF0aFwiOlwibWFpbkRvd25sb2FkXCIsXCJydWxlXCI6XCJjb25zdCBGaWxlID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvRmlsZS5qc1xcXCIpO1xcbmNvbnN0IENvbmZpZyA9ICQucmVxdWlyZShcXFwiaGlrZXI6Ly9wYWdlL0NvbmZpZy5qc29uXFxcIik7XFxuY29uc3QgVG9vbCA9ICQucmVxdWlyZShcXFwiaGlrZXI6Ly9wYWdlL1Rvb2wuanNcXFwiKTtcXG5cXG4kLmV4cG9ydHMubm92ZWwgPSBmdW5jdGlvbiBub3ZlbChpdGVtLCBpbmZvLCBvcmRlciwgTVlfSUQsIGludGVycnVwdCkge1xcbiAgICBsZXQgbWFpblBhdGggPSBDb25maWcubm92ZWxQYXRoICsgXFxcIi9cXFwiICsgaW5mby5ydWxlTmFtZSArIFxcXCIvXFxcIiArIFRvb2wudGV4dFNoaWVsZChpbmZvLmJvb2tOYW1lKSArIFxcXCIvXFxcIjtcXG4gICAgbGV0IGNoYXB0ZXJQYXRoID0gbWFpblBhdGggKyBvcmRlciArIFxcXCIkQSRcXFwiICsgVG9vbC50ZXh0U2hpZWxkKGl0ZW0udGl0bGUpICsgXFxcIi50eHRcXFwiO1xcbiAgICBsZXQgY29udGVudCA9IFxcXCJcXFwiO1xcbiAgICBpZiAoaW50ZXJydXB0ICYmIGdldE15VmFyKE1ZX0lEICsgXFxcIjpzdGF0dXNcXFwiLCBcXFwiXFxcIikgPT09IFxcXCIxXFxcIikge1xcbiAgICAgICAgcmV0dXJuIC0xO1xcbiAgICB9XFxuICAgIHRyeSB7XFxuICAgICAgICBsZXQgZ2V0Q29udGVudCA9IG5ldyBGdW5jdGlvbihcXFwiaW5wdXRcXFwiLCBcXFwidXJsXFxcIiwgXFxcInJldHVybiBcXFwiICsgaW5mby5wYXJzZUNvZGUpO1xcbiAgICAgICAgY29udGVudCA9IGdldENvbnRlbnQoaXRlbS51cmwsIGl0ZW0udXJsKSB8fCBcXFwiXFxcIjtcXG4gICAgfSBjYXRjaCAoZSkge1xcbiAgICAgICAgZS5tZXNzYWdlID0gXFxcIjzlsI/or7TmraPmlofop6PmnpDplJnor68+IFxcXCIgKyBlLm1lc3NhZ2U7XFxuICAgICAgICB0aHJvdyBlO1xcbiAgICB9XFxuICAgIGlmICghY29udGVudCkge1xcbiAgICAgICAgdG9hc3QoXFxcIuWwj+ivtOS4uuepulxcXCIpO1xcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxcXCI85bCP6K+05q2j5paH6Kej5p6Q6ZSZ6K+v77ya5q2j5paH6L+U5Zue5Li656m6PlxcXCIpO1xcbiAgICB9XFxuICAgIGlmIChpbmZvLmJvb2tUb3BQaWMpIHtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgbGV0IGJvb2tUb3BQaWMgPSBUb29sLmhpa2VyUGljKGluZm8uYm9va1RvcFBpYyk7XFxuICAgICAgICAgICAgVG9vbC5waWNEb3dubG9hZChib29rVG9wUGljWzBdLCBtYWluUGF0aCArIGluZm8uYm9va05hbWUgKyBcXFwiLmpwZ1xcXCIsIGJvb2tUb3BQaWNbMV0sIGluZm8uZGVjb2RlKTtcXG5cXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgICAgICBsb2coXFxcIjzlsIHpnaLkuIvovb3plJnor68+IFxcXCIgKyBlLm1lc3NhZ2UpO1xcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIEZpbGUuZmlsZVdyaXRlKGNoYXB0ZXJQYXRoLCBjb250ZW50LnJlcGxhY2UoLzxzY3JpcHQ+Lio/PFxcXFwvc2NyaXB0Pi9nbWksIFxcXCJcXFwiKS50cmltUmlnaHQoKSk7XFxuICAgIC8vRmlsZS5yZW5hbWVGaWxlKGNoYXB0ZXJQYXRoLCBvcmRlciArIFxcXCIkQSRcXFwiICsgaXRlbS50aXRsZSArIFxcXCIudHh0XFxcIik7XFxufVxcblxcbiQuZXhwb3J0cy5jb21pYyA9IGZ1bmN0aW9uIGNvbWljKGl0ZW0sIGluZm8sIG9yZGVyLCBNWV9JRCwgaW50ZXJydXB0KSB7XFxuICAgIGxldCBtYWluUGF0aCA9IENvbmZpZy5jb21pY1BhdGggKyBcXFwiL1xcXCIgKyBpbmZvLnJ1bGVOYW1lICsgXFxcIi9cXFwiICsgVG9vbC50ZXh0U2hpZWxkKGluZm8uYm9va05hbWUpICsgXFxcIi9cXFwiO1xcbiAgICBsZXQgY2hhcHRlclBhdGggPSBtYWluUGF0aCArIG9yZGVyICsgXFxcIiRCJFxcXCIgKyBUb29sLnRleHRTaGllbGQoaXRlbS50aXRsZSkgKyBcXFwiL1xcXCI7XFxuICAgIGxldCBwaWNMaXN0ID0gW107XFxuICAgIHRyeSB7XFxuICAgICAgICBsZXQgZ2V0UGljTGlzdCA9IG5ldyBGdW5jdGlvbihcXFwiaW5wdXRcXFwiLCBcXFwidXJsXFxcIiwgXFxcInJldHVyblxcXCIgKyBpbmZvLnBhcnNlQ29kZSk7XFxuICAgICAgICBwaWNMaXN0ID0gZ2V0UGljTGlzdChpdGVtLnVybCwgaXRlbS51cmwpO1xcbiAgICAgICAgaWYgKHR5cGVvZiBwaWNMaXN0ID09PSBcXFwic3RyaW5nXFxcIikge1xcbiAgICAgICAgICAgIHBpY0xpc3QgPSBwaWNMaXN0LnJlcGxhY2UoXFxcInBpY3M6Ly9cXFwiLCBcXFwiXFxcIikuc3BsaXQoXFxcIiYmXFxcIik7XFxuICAgICAgICB9XFxuICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgIGUubWVzc2FnZSA9IFxcXCI85ryr55S75Zu+54mH6Kej5p6Q6ZSZ6K+vPiBcXFwiICsgZS5tZXNzYWdlO1xcbiAgICAgICAgdGhyb3cgZTtcXG4gICAgfVxcbiAgICBwaWNMaXN0ID0gcGljTGlzdC5maWx0ZXIocCA9PiBwKTtcXG4gICAgY29uc3QgTCA9IHBpY0xpc3QubGVuZ3RoO1xcbiAgICBpZiAoTCA9PT0gMCkge1xcbiAgICAgICAgdG9hc3QoXFxcIuWbvueJh+mTvuaOpeS4uuepulxcXCIpO1xcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxcXCI85ryr55S75Zu+54mH6Kej5p6Q6ZSZ6K+v77ya5Zu+54mH6ZO+5o6l6L+U5Zue5Li656m6PlxcXCIpO1xcbiAgICB9XFxuICAgIGlmIChpbmZvLmJvb2tUb3BQaWMpIHtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgbGV0IGJvb2tUb3BQaWMgPSBUb29sLmhpa2VyUGljKGluZm8uYm9va1RvcFBpYyk7XFxuICAgICAgICAgICAgVG9vbC5waWNEb3dubG9hZChib29rVG9wUGljWzBdLCBtYWluUGF0aCArIGluZm8uYm9va05hbWUgKyBcXFwiLmpwZ1xcXCIsIGJvb2tUb3BQaWNbMV0sIGluZm8uZGVjb2RlKTtcXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgICAgICBsb2coXFxcIjzlsIHpnaLkuIvovb3plJnor68+IFxcXCIgKyBlLm1lc3NhZ2UpO1xcbiAgICAgICAgfVxcbiAgICB9XFxuXFxuICAgIGxldCBlcnJvck51bSA9IDA7XFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTDsgaSsrKSB7XFxuICAgICAgICB0cnkge1xcbiAgICAgICAgICAgIGxldCBwaWMgPSBUb29sLmhpa2VyUGljKHBpY0xpc3RbaV0pO1xcbiAgICAgICAgICAgIFRvb2wucGljRG93bmxvYWQocGljWzBdLCBjaGFwdGVyUGF0aCArIChpICsgMSkgKyBcXFwiLmpwZ1xcXCIsIHBpY1sxXSwgaW5mby5kZWNvZGUpO1xcbiAgICAgICAgICAgIGlmIChpbnRlcnJ1cHQgJiYgZ2V0TXlWYXIoTVlfSUQgKyBcXFwiOnN0YXR1c1xcXCIsIFxcXCJcXFwiKSA9PT0gXFxcIjFcXFwiKSB7XFxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgZXJyb3JOdW0gPSAwO1xcbiAgICAgICAgfSBjYXRjaCAoZSkge1xcbiAgICAgICAgICAgIGlmIChlcnJvck51bSA8IDEwKSB7XFxuICAgICAgICAgICAgICAgIGktLTtcXG4gICAgICAgICAgICAgICAgZXJyb3JOdW0rKztcXG4gICAgICAgICAgICAgICAgY29udGludWU7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgIH1cXG5cXG4gICAgRmlsZS5yZW5hbWVGaWxlKGNoYXB0ZXJQYXRoLCBvcmRlciArIFxcXCIkQSRcXFwiICsgVG9vbC50ZXh0U2hpZWxkKGl0ZW0udGl0bGUpKTtcXG59XFxuXCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCIj5om56YeP5LiL6L2957uf6K6hXCIsXCJwYXRoXCI6XCJCYXRjaFN0YXRpc3RpY3MuanNcIixcInJ1bGVcIjpcImNvbnN0IFRvb2wgPSAkLnJlcXVpcmUoXFxcImhpa2VyOi8vcGFnZS9Ub29sLmpzXFxcIik7XFxuY29uc3QgQ29uZmlnID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvQ29uZmlnLmpzb25cXFwiKTtcXG5cXG4kLmV4cG9ydHMuYSA9IGZ1bmN0aW9uKGNoYXB0ZXJUZWFtLCBpbmZvLCBNWV9JRCkge1xcbiAgICBpZiAoY2hhcHRlclRlYW0ubGVuZ3RoID09PSAwKSB7XFxuICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v56m655qE5LiL6L296Zif5YiXXFxcIjtcXG4gICAgfVxcblxcbiAgICB2YXIgY291bnQgPSAwO1xcbiAgICB2YXIgdGFza0NvdW50ID0gY2hhcHRlclRlYW0ubGVuZ3RoO1xcbiAgICB2YXIgc3VjY2Vzc0NJRCA9IFtdO1xcbiAgICB2YXIgZmFpbE5hbWUgPSBbXTtcXG4gICAgdmFyIGxvZ0NvdW50ID0gMTtcXG4gICAgdmFyIHRhc2tUZWFtID0gY2hhcHRlclRlYW0ubWFwKGNoYXB0ZXJJdGVtID0+ICh7XFxuICAgICAgICBmdW5jOiB0YXNrLFxcbiAgICAgICAgaWQ6IGNoYXB0ZXJJdGVtLnRpdGxlLFxcbiAgICAgICAgcGFyYW06IHtcXG4gICAgICAgICAgICBjaGFwdGVySXRlbTogY2hhcHRlckl0ZW0sXFxuICAgICAgICAgICAgaW5mbzogaW5mbyxcXG4gICAgICAgICAgICBNWV9JRDogTVlfSURcXG4gICAgICAgIH1cXG4gICAgfSkpO1xcbiAgICBsZXQgbG9nTnVtID0gQ29uZmlnLmxvZ051bTtcXG5cXG5cXG4gICAgZnVuY3Rpb24gcHV0TG9nKHRleHQpIHtcXG4gICAgICAgIGxvZyh0ZXh0KTtcXG4gICAgICAgIGlmIChsb2dDb3VudCA+PSBsb2dOdW0pIHtcXG4gICAgICAgICAgICBkZWxldGVJdGVtKE1ZX0lEICsgXFxcIiNsb2cjXFxcIiArIChsb2dDb3VudCAtIDEwKSk7XFxuICAgICAgICB9XFxuICAgICAgICBhZGRJdGVtQWZ0ZXIoTVlfSUQgKyBcXFwifHzml6Xlv5dcXFwiLCB7XFxuICAgICAgICAgICAgdXJsOiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCIsXFxuICAgICAgICAgICAgdGl0bGU6IFxcXCIkPlxcXCIgKyB0ZXh0LFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF8xXFxcIixcXG4gICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICBsaW5lVmlzaWJsZTogZmFsc2UsXFxuICAgICAgICAgICAgICAgIGlkOiBNWV9JRCArIFxcXCIjbG9nI1xcXCIgKyBsb2dDb3VudFxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pO1xcbiAgICAgICAgbG9nQ291bnQrKztcXG4gICAgfVxcblxcbiAgICBmdW5jdGlvbiB0YXNrKHRhc2tQYXJhbSkge1xcbiAgICAgICAgbGV0IHJlc3VsdCA9ICQucmVxdWlyZShcXFwiaGlrZXI6Ly9wYWdlL0JhdGNoLmV4ZS5qc1xcXCIpKHRhc2tQYXJhbSk7XFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xcbiAgICB9XFxuXFxuICAgIGZ1bmN0aW9uIGxpc3RlbmVyKHBlcmNoLCBpZCwgZXJyb3IsIENJRCkge1xcbiAgICAgICAgY291bnQrKztcXG4gICAgICAgIGxldCBpc1N1Y2Nlc3MgPSBmYWxzZTtcXG4gICAgICAgIGlmIChlcnJvciAhPSBudWxsKSB7XFxuICAgICAgICAgICAgZmFpbE5hbWUucHVzaChpZCk7XFxuICAgICAgICAgICAgcHV0TG9nKFxcXCJbbGlzdGVuZXJd5LiL6L295aSx6LSl77yaXFxcIiArIGlkICsgXFxcIjxFUlJPUkAgXFxcIiArIGVycm9yICsgXFxcIj5cXFwiKTtcXG4gICAgICAgIH0gZWxzZSBpZiAoQ0lEID49IDApIHtcXG4gICAgICAgICAgICBzdWNjZXNzQ0lELnB1c2goQ0lEKTtcXG4gICAgICAgICAgICBsZXQgcmF0aW8gPSAoY291bnQgLyB0YXNrQ291bnQpLnRvRml4ZWQoNCk7XFxuICAgICAgICAgICAgbGV0IHN0cmlwQ291bnQgPSBNYXRoLmNlaWwocmF0aW8gKiAxMCk7XFxuICAgICAgICAgICAgaXNTdWNjZXNzID0gdHJ1ZTtcXG4gICAgICAgICAgICB1cGRhdGVJdGVtKHtcXG4gICAgICAgICAgICAgICAgdGl0bGU6IFxcXCLkuIvovb3ov5vluqbvvJpcXFwiICsgc3VjY2Vzc0NJRC5sZW5ndGggKyBcXFwiL1xcXCIgKyB0YXNrQ291bnQsXFxuICAgICAgICAgICAgICAgIGRlc2M6IFxcXCLigJzigJzigJ3igJ1cXFwiICsgXFxcIuKWh1xcXCIucmVwZWF0KHN0cmlwQ291bnQpLmZvbnRjb2xvcihcXFwiI2ZmYWMyZFxcXCIpICsgXFxcIuKWh1xcXCIucmVwZWF0KDEwIC0gc3RyaXBDb3VudCkuZm9udGNvbG9yKFxcXCIjZTVlMWU0XFxcIikgKyBcXFwiIFxcXCIgKyBTdHJpbmcoKHJhdGlvICogMTAwKSkuc2xpY2UoMCwgNSkgKyBcXFwiJVxcXCIsXFxuICAgICAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgICAgICBpZDogTVlfSUQgKyBcXFwifHzkuIvovb3ov5vluqZcXFwiXFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICBwdXRMb2coXFxcIltsaXN0ZW5lcl3lt7LlrozmiJDkuIvovb3vvJpcXFwiICsgaWQpO1xcbiAgICAgICAgfSBlbHNlIGlmIChDSUQgPT09IC0xKSB7XFxuICAgICAgICAgICAgZmFpbE5hbWUucHVzaChpZCk7XFxuICAgICAgICAgICAgcHV0TG9nKFxcXCJbbGlzdGVuZXJd5bey5YGc5q2i77yaXFxcIiArIGlkKTtcXG4gICAgICAgICAgICBjb3VudCA9IHRhc2tDb3VudDtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIGlmICh0YXNrQ291bnQgIT09IGNvdW50KSByZXR1cm47XFxuICAgICAgICBpZiAoc3VjY2Vzc0NJRC5sZW5ndGggPT09IHRhc2tDb3VudCkge1xcbiAgICAgICAgICAgIHVwZGF0ZUl0ZW0oe1xcbiAgICAgICAgICAgICAgICBkZXNjOiBcXFwi4oCc4oCc4oCd4oCdXFxcIiArIFxcXCLilodcXFwiLnJlcGVhdCgxMCkuZm9udGNvbG9yKFxcXCIjMDBmZjAwXFxcIikgKyBcXFwiIDEwMCVcXFwiLFxcbiAgICAgICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICAgICAgaWQ6IE1ZX0lEICsgXFxcInx85LiL6L296L+b5bqmXFxcIlxcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICB9XFxuICAgICAgICBsZXQgYmF0Y2hUZWFtID0gSlNPTi5wYXJzZShnZXRNeVZhcihNWV9JRCArIFxcXCI6YmF0Y2hUZWFtXFxcIiwgXFxcIltdXFxcIikgfHwgXFxcIltdXFxcIik7XFxuICAgICAgICBsZXQgc3RhdHVzID0gZ2V0TXlWYXIoTVlfSUQgKyBcXFwiOnN0YXR1c1xcXCIsIFxcXCIwXFxcIik7XFxuICAgICAgICBsZXQgZmFpbFRlYW0gPSBiYXRjaFRlYW0uZmlsdGVyKHYgPT4gIXN1Y2Nlc3NDSUQuaW5jbHVkZXModikpO1xcbiAgICAgICAgcHV0TXlWYXIoTVlfSUQgKyBcXFwiOmJhdGNoVGVhbVxcXCIsIEpTT04uc3RyaW5naWZ5KGZhaWxUZWFtKSk7XFxuICAgICAgICBpZiAoZmFpbFRlYW0ubGVuZ3RoID4gMCAmJiBzdGF0dXMgIT09IFxcXCIxXFxcIikge1xcbiAgICAgICAgICAgIHB1dE15VmFyKE1ZX0lEICsgXFxcIjpzdGF0dXNcXFwiLCBcXFwiM1xcXCIpO1xcbiAgICAgICAgICAgIHB1dExvZyhcXFwi5LiL6L295aSx6LSlOltcXFwiICsgZmFpbE5hbWUuam9pbihcXFwiXe+8jFtcXFwiKSArIFxcXCJd44CCXFxcIik7XFxuICAgICAgICAgICAgdXBkYXRlSXRlbSh7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcXFwiW+WkhOeQhuWksei0pV1cXFwiLFxcbiAgICAgICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICAgICAgaWQ6IE1ZX0lEICsgXFxcInx85LiL6L295o6n5Yi2XFxcIlxcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICB9IGVsc2UgaWYgKGZhaWxUZWFtLmxlbmd0aCA+IDAgJiYgc3RhdHVzID09PSBcXFwiMVxcXCIpIHtcXG4gICAgICAgICAgICBwdXRNeVZhcihNWV9JRCArIFxcXCI6c3RhdHVzXFxcIiwgXFxcIjRcXFwiKTtcXG4gICAgICAgICAgICBwdXRMb2coXFxcIltsaXN0ZW5lcl0j5bey5YGc5q2i5omA5pyJ5Lu75Yqh77yM5L2G5bey5pyJ6L+b5bqm5LiN5Lya5raI5aSxI1xcXCIpO1xcbiAgICAgICAgICAgIHVwZGF0ZUl0ZW0oe1xcbiAgICAgICAgICAgICAgICB0aXRsZTogXFxcIlvph43mlrDlvIDlp4tdXFxcIixcXG4gICAgICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgICAgIGlkOiBNWV9JRCArIFxcXCJ8fOS4i+i9veaOp+WItlxcXCJcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH0pO1xcbiAgICAgICAgICAgIHJldHVybiBcXFwiYnJlYWtcXFwiO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICBwdXRNeVZhcihNWV9JRCArIFxcXCI6c3RhdHVzXFxcIiwgXFxcIjJcXFwiKTtcXG4gICAgICAgICAgICBwdXRMb2coXFxcIuS4i+i9veS7u+WKoVtcXFwiICsgaW5mby5ib29rTmFtZSArIFxcXCJd5bey5YWo6YOo5oiQ5Yqf5a6M5oiQXFxcIik7XFxuICAgICAgICAgICAgdXBkYXRlSXRlbSh7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcXFwiW+i/lOWbnl1cXFwiLFxcbiAgICAgICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICAgICAgaWQ6IE1ZX0lEICsgXFxcInx85LiL6L295o6n5Yi2XFxcIlxcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICB9XFxuICAgICAgICB0b2FzdChcXFwi5LiL6L295Lu75YqhW1xcXCIgKyBpbmZvLmJvb2tOYW1lICsgXFxcIl3lt7LlrozmiJBcXFwiKTtcXG4gICAgfVxcbiAgICBsZXQgdGFza1RlYW1DaHVuayA9IFtdO1xcbiAgICBpZiAoQ29uZmlnLnRocmVhZE51bSA+IDApIHtcXG4gICAgICAgIHRhc2tUZWFtQ2h1bmsgPSBUb29sLmNodW5rKHRhc2tUZWFtLCBDb25maWcudGhyZWFkTnVtKTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICAgIHRhc2tUZWFtQ2h1bmsgPSBbdGFza1RlYW1dO1xcbiAgICB9XFxuICAgIGZvciAobGV0IHRhc2tMaXN0IG9mIHRhc2tUZWFtQ2h1bmspIHtcXG4gICAgICAgIGJlKHRhc2tMaXN0LCB7XFxuICAgICAgICAgICAgZnVuYzogbGlzdGVuZXJcXG4gICAgICAgIH0pO1xcbiAgICAgICAgbGV0IHN0YXR1cyA9IGdldE15VmFyKE1ZX0lEICsgXFxcIjpzdGF0dXNcXFwiLCBcXFwiMFxcXCIpO1xcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gXFxcIjFcXFwiKSB7XFxuICAgICAgICAgICAgbGV0IGJhdGNoVGVhbSA9IEpTT04ucGFyc2UoZ2V0TXlWYXIoTVlfSUQgKyBcXFwiOmJhdGNoVGVhbVxcXCIsIFxcXCJbXVxcXCIpIHx8IFxcXCJbXVxcXCIpO1xcbiAgICAgICAgICAgIC8vbGV0IHN0YXR1cyA9IGdldE15VmFyKE1ZX0lEICsgXFxcIjpzdGF0dXNcXFwiLCBcXFwiMFxcXCIpO1xcbiAgICAgICAgICAgIGxldCBmYWlsVGVhbSA9IGJhdGNoVGVhbS5maWx0ZXIodiA9PiAhc3VjY2Vzc0NJRC5pbmNsdWRlcyh2KSk7XFxuICAgICAgICAgICAgcHV0TXlWYXIoTVlfSUQgKyBcXFwiOmJhdGNoVGVhbVxcXCIsIEpTT04uc3RyaW5naWZ5KGZhaWxUZWFtKSk7XFxuICAgICAgICAgICAgcHV0TXlWYXIoTVlfSUQgKyBcXFwiOnN0YXR1c1xcXCIsIFxcXCI0XFxcIik7XFxuICAgICAgICAgICAgcHV0TG9nKFxcXCJbbGlzdGVuZXJdI+W3suWBnOatouaJgOacieS7u+WKoe+8jOS9huW3suaciei/m+W6puS4jeS8mua2iOWksSNcXFwiKTtcXG4gICAgICAgICAgICB1cGRhdGVJdGVtKHtcXG4gICAgICAgICAgICAgICAgdGl0bGU6IFxcXCJb6YeN5paw5byA5aeLXVxcXCIsXFxuICAgICAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgICAgICBpZDogTVlfSUQgKyBcXFwifHzkuIvovb3mjqfliLZcXFwiXFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgfVxcblxcbiAgICB9XFxuXFxuICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxufTtcXG5cXG4kLmV4cG9ydHMuYiA9IGZ1bmN0aW9uIGNvbWljKGNoYXB0ZXJUZWFtLCBpbmZvLCBNWV9JRCkge1xcbiAgICBpZiAoY2hhcHRlclRlYW0ubGVuZ3RoID09PSAwKSB7XFxuICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v56m655qE5LiL6L296Zif5YiXXFxcIjtcXG4gICAgfVxcbiAgICBjb25zdCBGaWxlID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvRmlsZS5qc1xcXCIpO1xcblxcbiAgICBsZXQgbG9nTnVtID0gQ29uZmlnLmxvZ051bTtcXG4gICAgbGV0IGxvZ0NvdW50ID0gMDtcXG5cXG4gICAgZnVuY3Rpb24gcHV0TG9nKHRleHQpIHtcXG4gICAgICAgIGxvZyh0ZXh0KTtcXG4gICAgICAgIGlmIChsb2dDb3VudCA+PSBsb2dOdW0pIHtcXG4gICAgICAgICAgICBkZWxldGVJdGVtKE1ZX0lEICsgXFxcIiNsb2cjXFxcIiArIChsb2dDb3VudCAtIDEwKSk7XFxuICAgICAgICB9XFxuICAgICAgICBhZGRJdGVtQWZ0ZXIoTVlfSUQgKyBcXFwifHzml6Xlv5dcXFwiLCB7XFxuICAgICAgICAgICAgdXJsOiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCIsXFxuICAgICAgICAgICAgdGl0bGU6IFxcXCIkPlxcXCIgKyB0ZXh0LFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF8xXFxcIixcXG4gICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICBsaW5lVmlzaWJsZTogZmFsc2UsXFxuICAgICAgICAgICAgICAgIGlkOiBNWV9JRCArIFxcXCIjbG9nI1xcXCIgKyBsb2dDb3VudFxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pO1xcbiAgICAgICAgbG9nQ291bnQrKztcXG4gICAgfVxcblxcbiAgICBmdW5jdGlvbiB0YXNrKHRhc2tQYXJhbSkge1xcbiAgICAgICAgY29uc3QgVG9vbCA9ICQucmVxdWlyZShcXFwiaGlrZXI6Ly9wYWdlL1Rvb2wuanNcXFwiKTtcXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xcbiAgICAgICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgICAgIGxldCBwaWMgPSBUb29sLmhpa2VyUGljKHRhc2tQYXJhbS51cmwpO1xcbiAgICAgICAgICAgICAgICBUb29sLnBpY0Rvd25sb2FkKHBpY1swXSwgdGFza1BhcmFtLmNoYXB0ZXJQYXRoICsgKHRhc2tQYXJhbS5pICsgMSkgKyBcXFwiLmpwZ1xcXCIsIHBpY1sxXSwgdGFza1BhcmFtLmRlY29kZSk7XFxuICAgICAgICAgICAgICAgIGlmIChnZXRNeVZhcih0YXNrUGFyYW0uTVlfSUQgKyBcXFwiOnN0YXR1c1xcXCIsIFxcXCJcXFwiKSA9PT0gXFxcIjFcXFwiKSB7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgZXJyb3JOdW0gPSAwO1xcbiAgICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XFxuICAgICAgICAgICAgICAgIGlmIChpID09PSA5KSB7XFxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgICAgcmV0dXJuIHRhc2tQYXJhbS5DSUQ7XFxuICAgIH1cXG4gICAgbGV0IGNvdW50ID0gMDtcXG4gICAgbGV0IHRvdGFsQ291bnQgPSAwO1xcbiAgICBsZXQgc3VjY2Vzc0NJRCA9IFtdO1xcblxcbiAgICBmdW5jdGlvbiBsaXN0ZW5lcihwYXJhbSwgaWQsIGVycm9yLCByZXN1bHQpIHtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgdG90YWxDb3VudCsrO1xcblxcbiAgICAgICAgICAgIGlmIChlcnJvciAhPSBudWxsKSB7XFxuICAgICAgICAgICAgICAgIHB1dExvZyhcXFwiW2xpc3RlbmVyXeS4i+i9veWksei0pe+8mlxcXCIgKyBpZCArIFxcXCI8RVJST1JAIFxcXCIgKyBlcnJvciArIFxcXCI+XFxcIik7XFxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09IC0xKSB7XFxuICAgICAgICAgICAgICAgIHB1dExvZyhcXFwiW2xpc3RlbmVyXeW3suWBnOatou+8mlxcXCIgKyBpZCk7XFxuICAgICAgICAgICAgICAgIHRvdGFsQ291bnQgPSBwYXJhbS5waXZDb3VudDtcXG4gICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xcbiAgICAgICAgICAgICAgICBsZXQgcmF0aW8gPSAoKGNvdW50IC8gcGFyYW0ucGl2Q291bnQpKS50b0ZpeGVkKDQpO1xcbiAgICAgICAgICAgICAgICBsZXQgc3RyaXBDb3VudCA9IE1hdGguY2VpbChyYXRpbyAqIDEwKTtcXG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtLnBpdkNvdW50ID09PSB0b3RhbENvdW50ICYmIHRvdGFsQ291bnQgPT09IGNvdW50KSB7XFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzQ0lELnB1c2gocGFyYW0uQ0lEKTtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICB1cGRhdGVJdGVtKHtcXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcXFwi5LiL6L296L+b5bqm77yaXFxcIiArIChzdWNjZXNzQ0lELmxlbmd0aCkgKyBcXFwiL1xcXCIgKyBwYXJhbS50b3RhbCxcXG4gICAgICAgICAgICAgICAgICAgIGRlc2M6IFxcXCLigJzigJzigJ3igJ1cXFwiICsgXFxcIuKWh1xcXCIucmVwZWF0KHN0cmlwQ291bnQpLmZvbnRjb2xvcihcXFwiI2ZmYWMyZFxcXCIpICsgXFxcIuKWh1xcXCIucmVwZWF0KDEwIC0gc3RyaXBDb3VudCkuZm9udGNvbG9yKFxcXCIjZTVlMWU0XFxcIikgKyBcXFwiIFxcXCIgKyBTdHJpbmcoKHJhdGlvICogMTAwKSkuc2xpY2UoMCwgNSkgKyBcXFwiJVxcXCIsXFxuICAgICAgICAgICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBNWV9JRCArIFxcXCJ8fOS4i+i9vei/m+W6plxcXCJcXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICAgICAgIC8vcHV0TG9nKFxcXCJbbGlzdGVuZXJd5bey5a6M5oiQ5LiL6L2977yaXFxcIiArIGlkKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgaWYgKHRvdGFsQ291bnQgIT09IHBhcmFtLnBpdkNvdW50KSByZXR1cm47XFxuICAgICAgICAgICAgaWYgKHRvdGFsQ291bnQgPT09IGNvdW50KSB7XFxuICAgICAgICAgICAgICAgIEZpbGUucmVuYW1lRmlsZShwYXJhbS5jaGFwdGVyUGF0aCwgcGFyYW0uQ0lEICsgXFxcIiRBJFxcXCIgKyBUb29sLnRleHRTaGllbGQocGFyYW0udGl0bGUpKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgdG90YWxDb3VudCA9IGNvdW50ID0gMDtcXG4gICAgICAgICAgICByZXR1cm4gXFxcImJyZWFrXFxcIjtcXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgICAgICBsb2coZS50b1N0cmluZygpKTtcXG4gICAgICAgIH1cXG4gICAgfVxcbiAgICBsZXQgdGFza1RlYW0gPSBbXTtcXG4gICAgbGV0IG1haW5QYXRoID0gQ29uZmlnLmNvbWljUGF0aCArIFxcXCIvXFxcIiArIGluZm8ucnVsZU5hbWUgKyBcXFwiL1xcXCIgKyBUb29sLnRleHRTaGllbGQoaW5mby5ib29rTmFtZSkgKyBcXFwiL1xcXCI7XFxuICAgIGlmIChpbmZvLmJvb2tUb3BQaWMpIHtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgbGV0IGJvb2tUb3BQaWMgPSBUb29sLmhpa2VyUGljKGluZm8uYm9va1RvcFBpYyk7XFxuICAgICAgICAgICAgVG9vbC5waWNEb3dubG9hZChib29rVG9wUGljWzBdLCBtYWluUGF0aCArIGluZm8uYm9va05hbWUgKyBcXFwiLmpwZ1xcXCIsIGJvb2tUb3BQaWNbMV0sIGluZm8uZGVjb2RlKTtcXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgICAgICBsb2coXFxcIjzlsIHpnaLkuIvovb3plJnor68+IFxcXCIgKyBlLm1lc3NhZ2UpO1xcbiAgICAgICAgfVxcbiAgICB9XFxuXFxuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgY2hhcHRlclRlYW0ubGVuZ3RoOyBrKyspIHtcXG4gICAgICAgIGxldCBpdGVtID0gY2hhcHRlclRlYW1ba107XFxuICAgICAgICBsZXQgb3JkZXIgPSBrO1xcbiAgICAgICAgbGV0IGNoYXB0ZXJQYXRoID0gbWFpblBhdGggKyBpdGVtLkNJRCArIFxcXCIkQiRcXFwiICsgVG9vbC50ZXh0U2hpZWxkKGl0ZW0udGl0bGUpICsgXFxcIi9cXFwiO1xcbiAgICAgICAgbGV0IHBpY0xpc3QgPSBbXTtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgbGV0IGdldFBpY0xpc3QgPSBuZXcgRnVuY3Rpb24oXFxcImlucHV0XFxcIiwgXFxcInVybFxcXCIsIFxcXCJyZXR1cm5cXFwiICsgaW5mby5wYXJzZUNvZGUpO1xcbiAgICAgICAgICAgIHBpY0xpc3QgPSBnZXRQaWNMaXN0KGl0ZW0udXJsLCBpdGVtLnVybCk7XFxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwaWNMaXN0ID09PSBcXFwic3RyaW5nXFxcIikge1xcbiAgICAgICAgICAgICAgICBwaWNMaXN0ID0gcGljTGlzdC5yZXBsYWNlKFxcXCJwaWNzOi8vXFxcIiwgXFxcIlxcXCIpLnNwbGl0KFxcXCImJlxcXCIpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgICAgICBwdXRMb2coXFxcIjzmvKvnlLvlm77niYfop6PmnpDplJnor68+IFxcXCIgKyBlLm1lc3NhZ2UpO1xcbiAgICAgICAgICAgIGNvbnRpbnVlO1xcbiAgICAgICAgfVxcbiAgICAgICAgaWYgKHBpY0xpc3QubGVuZ3RoID09PSAwKSB7XFxuICAgICAgICAgICAgcHV0TG9nKFxcXCI85ryr55S75Zu+54mH6Kej5p6Q6ZSZ6K+v77ya5Zu+54mH6ZO+5o6l6L+U5Zue5Li656m6PlxcXCIpO1xcbiAgICAgICAgICAgIGNvbnRpbnVlO1xcbiAgICAgICAgfVxcbiAgICAgICAgcGljTGlzdCA9IHBpY0xpc3QuZmlsdGVyKHAgPT4gcCk7XFxuICAgICAgICB2YXIgdGFza1RlYW0gPSBwaWNMaXN0Lm1hcCgodXJsLCBpKSA9PiAoe1xcbiAgICAgICAgICAgIGZ1bmM6IHRhc2ssXFxuICAgICAgICAgICAgaWQ6IGksXFxuICAgICAgICAgICAgcGFyYW06IHtcXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXFxuICAgICAgICAgICAgICAgIGk6IGksXFxuICAgICAgICAgICAgICAgIGNoYXB0ZXJQYXRoOiBjaGFwdGVyUGF0aCxcXG4gICAgICAgICAgICAgICAgTVlfSUQ6IE1ZX0lELFxcbiAgICAgICAgICAgICAgICBkZWNvZGU6IGluZm8uZGVjb2RlXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSkpO1xcbiAgICAgICAgYmUodGFza1RlYW0sIHtcXG4gICAgICAgICAgICBmdW5jOiBsaXN0ZW5lcixcXG4gICAgICAgICAgICBwYXJhbToge1xcbiAgICAgICAgICAgICAgICBwaXZDb3VudDogcGljTGlzdC5sZW5ndGgsXFxuICAgICAgICAgICAgICAgIHRvdGFsOiBjaGFwdGVyVGVhbS5sZW5ndGgsXFxuICAgICAgICAgICAgICAgIG9yZGVyOiBvcmRlcixcXG4gICAgICAgICAgICAgICAgQ0lEOiBpdGVtLkNJRCxcXG4gICAgICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsXFxuICAgICAgICAgICAgICAgIGNoYXB0ZXJQYXRoOiBjaGFwdGVyUGF0aFxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pO1xcbiAgICAgICAgaWYgKGdldE15VmFyKE1ZX0lEICsgXFxcIjpzdGF0dXNcXFwiLCBcXFwiXFxcIikgPT09IFxcXCIxXFxcIikge1xcbiAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgfVxcbiAgICB9XFxuXFxuICAgIGxldCBzdGF0dXMgPSBnZXRNeVZhcihNWV9JRCArIFxcXCI6c3RhdHVzXFxcIiwgXFxcIjBcXFwiKTtcXG4gICAgamF2YS5sYW5nLlRocmVhZC5zbGVlcCg0MCk7XFxuICAgIC8vbGV0IGJhdGNoVGVhbSA9IEpTT04ucGFyc2UoZ2V0TXlWYXIoTVlfSUQgKyBcXFwiOmJhdGNoVGVhbVxcXCIsIFxcXCJbXVxcXCIpIHx8IFxcXCJbXVxcXCIpO1xcbiAgICBsZXQgZmFpbFRlYW0gPSBjaGFwdGVyVGVhbS5maWx0ZXIodiA9PiAhc3VjY2Vzc0NJRC5pbmNsdWRlcyh2LkNJRCkpO1xcbiAgICBsZXQgZmFpbE5hbWUgPSBmYWlsVGVhbS5tYXAoaXRlbSA9PiBpdGVtLnRpdGxlKTtcXG4gICAgbGV0IGJhdGNoVGVhbSA9IGZhaWxUZWFtLm1hcChpdGVtID0+IGl0ZW0uQ0lEKTtcXG5cXG4gICAgaWYgKGZhaWxUZWFtLmxlbmd0aCA+IDAgJiYgc3RhdHVzICE9PSBcXFwiMVxcXCIpIHtcXG4gICAgICAgIHB1dE15VmFyKE1ZX0lEICsgXFxcIjpiYXRjaFRlYW1cXFwiLCBKU09OLnN0cmluZ2lmeShiYXRjaFRlYW0pKTtcXG4gICAgICAgIHB1dE15VmFyKE1ZX0lEICsgXFxcIjpzdGF0dXNcXFwiLCBcXFwiM1xcXCIpO1xcbiAgICAgICAgcHV0TG9nKFxcXCLkuIvovb3lpLHotKU6W1xcXCIgKyBmYWlsTmFtZS5qb2luKFxcXCJd77yMW1xcXCIpICsgXFxcIl3jgIJcXFwiKTtcXG4gICAgICAgIHVwZGF0ZUl0ZW0oe1xcbiAgICAgICAgICAgIHRpdGxlOiBcXFwiW+WkhOeQhuWksei0pV1cXFwiLFxcbiAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgIGlkOiBNWV9JRCArIFxcXCJ8fOS4i+i9veaOp+WItlxcXCJcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9KTtcXG4gICAgfSBlbHNlIGlmIChmYWlsVGVhbS5sZW5ndGggPiAwICYmIHN0YXR1cyA9PT0gXFxcIjFcXFwiKSB7XFxuICAgICAgICBwdXRNeVZhcihNWV9JRCArIFxcXCI6YmF0Y2hUZWFtXFxcIiwgSlNPTi5zdHJpbmdpZnkoYmF0Y2hUZWFtKSk7XFxuICAgICAgICBwdXRNeVZhcihNWV9JRCArIFxcXCI6c3RhdHVzXFxcIiwgXFxcIjRcXFwiKTtcXG4gICAgICAgIHB1dExvZyhcXFwiW2xpc3RlbmVyXSPlt7LlgZzmraLmiYDmnInku7vliqHvvIzkvYblt7LmnInov5vluqbkuI3kvJrmtojlpLEjXFxcIik7XFxuICAgICAgICB1cGRhdGVJdGVtKHtcXG4gICAgICAgICAgICB0aXRsZTogXFxcIlvph43mlrDlvIDlp4tdXFxcIixcXG4gICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICBpZDogTVlfSUQgKyBcXFwifHzkuIvovb3mjqfliLZcXFwiXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgICBwdXRNeVZhcihNWV9JRCArIFxcXCI6c3RhdHVzXFxcIiwgXFxcIjJcXFwiKTtcXG4gICAgICAgIHB1dExvZyhcXFwi5LiL6L295Lu75YqhW1xcXCIgKyBpbmZvLmJvb2tOYW1lICsgXFxcIl3lt7Llhajpg6jmiJDlip/lrozmiJBcXFwiKTtcXG4gICAgICAgIHVwZGF0ZUl0ZW0oe1xcbiAgICAgICAgICAgIHRpdGxlOiBcXFwiW+i/lOWbnl1cXFwiLFxcbiAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgIGlkOiBNWV9JRCArIFxcXCJ8fOS4i+i9veaOp+WItlxcXCJcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9KTtcXG4gICAgfVxcbiAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbn1cIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIiPmibnph4/kuIvovb3kuLvnqIvluo9cIixcInBhdGhcIjpcIkJhdGNoLmV4ZS5qc1wiLFwicnVsZVwiOlwiY29uc3QgTWlhbiA9ICQucmVxdWlyZShcXFwibWFpbkRvd25sb2FkXFxcIik7XFxuZnVuY3Rpb24gY29taWModGFza1BhcmFtKSB7XFxuICAgIGxldCB7XFxuICAgICAgICBjaGFwdGVySXRlbSxcXG4gICAgICAgIGluZm8sXFxuICAgICAgICBNWV9JRCxcXG4gICAgfSA9IHRhc2tQYXJhbTtcXG4gICAgcmV0dXJuIE1pYW4uY29taWMoY2hhcHRlckl0ZW0sIGluZm8sIGNoYXB0ZXJJdGVtLkNJRCwgTVlfSUQsIHRydWUpfHxjaGFwdGVySXRlbS5DSUQ7XFxufVxcblxcbmZ1bmN0aW9uIG5vdmVsKHRhc2tQYXJhbSkge1xcbiAgICBsZXQge1xcbiAgICAgICAgY2hhcHRlckl0ZW0sXFxuICAgICAgICBpbmZvLFxcbiAgICAgICAgTVlfSUQsXFxuICAgIH0gPSB0YXNrUGFyYW07XFxuICAgIHJldHVybiBNaWFuLm5vdmVsKGNoYXB0ZXJJdGVtLCBpbmZvLCBjaGFwdGVySXRlbS5DSUQsTVlfSUQsIHRydWUpfHxjaGFwdGVySXRlbS5DSUQ7XFxuICAgIC8vRmlsZS5yZW5hbWVGaWxlKGNoYXB0ZXJQYXRoLCBjaGFwdGVySXRlbS5DSUQgKyBcXFwiJEEkXFxcIiArIGNoYXB0ZXJJdGVtLnRpdGxlKTtcXG59XFxudmFyICRleGUgPSB7XFxuICAgIGNvbWljOiBjb21pYyxcXG4gICAgbm92ZWw6IG5vdmVsXFxufTtcXG4kLmV4cG9ydHMgPSBmdW5jdGlvbih0YXNrUGFyYW0pIHtcXG4gICAgcmV0dXJuICRleGVbdGFza1BhcmFtLmluZm8udHlwZV0odGFza1BhcmFtKTtcXG59O1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiI2ZpbGXlt6XlhbdcIixcInBhdGhcIjpcIkZpbGUuanNcIixcInJ1bGVcIjpcImNvbnN0IEZpbGUgPSBqYXZhLmlvLkZpbGU7XFxuY29uc3Qge1xcbiAgICBGaWxlcyxcXG4gICAgUGF0aHMsXFxuICAgIFN0YW5kYXJkQ29weU9wdGlvbixcXG4gICAgU3RhbmRhcmRPcGVuT3B0aW9uXFxufSA9IGphdmEubmlvLmZpbGU7XFxuY29uc3QgamF2YVN0cmluZyA9IGphdmEubGFuZy5TdHJpbmc7XFxubGV0IGphdmFTY29wZSA9IG5ldyBKYXZhSW1wb3J0ZXIoamF2YS5pbywgamF2YS5sYW5nLCBqYXZhLmxhbmcucmVmbGVjdCwgamF2YS51dGlsLlZlY3Rvcik7XFxuXFxuZnVuY3Rpb24gZGVsZXRlRmlsZXMoZmlsZU5hbWUpIHtcXG4gICAgbGV0IGZpbGUgPSBuZXcgRmlsZShmaWxlTmFtZSk7XFxuICAgIGlmICghZmlsZS5leGlzdHMoKSkge1xcbiAgICAgICAgLy9sb2coXFxcIuWIoOmZpOaWh+S7tuWksei0pe+8mlxcXCIgKyBmaWxlTmFtZSArIFxcXCLmlofku7bkuI3lrZjlnKhcXFwiKTtcXG4gICAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICAgIGlmIChmaWxlLmlzRmlsZSgpKSB7XFxuICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZUZpbGUoZmlsZU5hbWUpO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICByZXR1cm4gZGVsZXRlRGlyZWN0b3J5KGZpbGVOYW1lKTtcXG4gICAgICAgIH1cXG5cXG4gICAgfVxcblxcbn1cXG4vKipcXG4gKiDliKDpmaTljZXkuKrmlofku7ZcXG4gKiBcXG4gKiBAcGFyYW0gZmlsZU5hbWVcXG4gKiAgICAgICAgICAgIOiiq+WIoOmZpOaWh+S7tueahOaWh+S7tuWQjVxcbiAqIEByZXR1cm4g5Y2V5Liq5paH5Lu25Yig6Zmk5oiQ5Yqf6L+U5ZuedHJ1ZSzlkKbliJnov5Tlm55mYWxzZVxcbiAqL1xcbmZ1bmN0aW9uIGRlbGV0ZUZpbGUoZmlsZU5hbWUpIHtcXG4gICAgbGV0IGZpbGUgPSBuZXcgRmlsZShmaWxlTmFtZSk7XFxuICAgIGlmIChmaWxlLmlzRmlsZSgpICYmIGZpbGUuZXhpc3RzKCkpIHtcXG4gICAgICAgIGZpbGUuZGVsZXRlKCk7XFxuICAgICAgICAvL2xvZyhcXFwi5Yig6Zmk5Y2V5Liq5paH5Lu2XFxcIiArIGZpbGVOYW1lICsgXFxcIuaIkOWKn++8gVxcXCIpO1xcbiAgICAgICAgcmV0dXJuIHRydWU7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgICAvL2xvZyhcXFwi5Yig6Zmk5Y2V5Liq5paH5Lu2XFxcIiArIGZpbGVOYW1lICsgXFxcIuWksei0pe+8gVxcXCIpO1xcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICB9XFxuXFxufVxcbi8qKlxcbiAqIOWIoOmZpOebruW9le+8iOaWh+S7tuWkue+8ieS7peWPiuebruW9leS4i+eahOaWh+S7tlxcbiAqIFxcbiAqIEBwYXJhbSBkaXJcXG4gKiAgICAgICAgICAgIOiiq+WIoOmZpOebruW9leeahOaWh+S7tui3r+W+hFxcbiAqIEByZXR1cm4g55uu5b2V5Yig6Zmk5oiQ5Yqf6L+U5ZuedHJ1ZSzlkKbliJnov5Tlm55mYWxzZVxcbiAqL1xcbmZ1bmN0aW9uIGRlbGV0ZURpcmVjdG9yeShkaXIpIHtcXG4gICAgLy8g5aaC5p6cZGly5LiN5Lul5paH5Lu25YiG6ZqU56ym57uT5bC+77yM6Ieq5Yqo5re75Yqg5paH5Lu25YiG6ZqU56ymXFxuICAgIGlmICghZGlyLmVuZHNXaXRoKEZpbGUuc2VwYXJhdG9yKSkge1xcbiAgICAgICAgZGlyID0gZGlyICsgRmlsZS5zZXBhcmF0b3I7XFxuICAgIH1cXG4gICAgbGV0IGRpckZpbGUgPSBuZXcgRmlsZShkaXIpO1xcbiAgICAvLyDlpoLmnpxkaXLlr7nlupTnmoTmlofku7bkuI3lrZjlnKjvvIzmiJbogIXkuI3mmK/kuIDkuKrnm67lvZXvvIzliJnpgIDlh7pcXG4gICAgaWYgKCFkaXJGaWxlLmV4aXN0cygpIHx8ICFkaXJGaWxlLmlzRGlyZWN0b3J5KCkpIHtcXG4gICAgICAgIC8vbG9nKFxcXCLliKDpmaTnm67lvZXlpLHotKVcXFwiICsgZGlyICsgXFxcIuebruW9leS4jeWtmOWcqO+8gVxcXCIpO1xcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICB9XFxuICAgIGxldCBmbGFnID0gdHJ1ZTtcXG4gICAgLy8g5Yig6Zmk5paH5Lu25aS55LiL55qE5omA5pyJ5paH5Lu2KOWMheaLrOWtkOebruW9lSlcXG4gICAgbGV0IGZpbGVzID0gZGlyRmlsZS5saXN0RmlsZXMoKTtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xcbiAgICAgICAgLy8g5Yig6Zmk5a2Q5paH5Lu2XFxuICAgICAgICBpZiAoZmlsZXNbaV0uaXNGaWxlKCkpIHtcXG4gICAgICAgICAgICBmbGFnID0gZGVsZXRlRmlsZShmaWxlc1tpXS5nZXRBYnNvbHV0ZVBhdGgoKSk7XFxuICAgICAgICAgICAgaWYgKCFmbGFnKSB7XFxuICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0gZWxzZSB7IC8vIOWIoOmZpOWtkOebruW9lVxcbiAgICAgICAgICAgIGZsYWcgPSBkZWxldGVEaXJlY3RvcnkoZmlsZXNbaV0uZ2V0QWJzb2x1dGVQYXRoKCkpO1xcbiAgICAgICAgICAgIGlmICghZmxhZykge1xcbiAgICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgaWYgKCFmbGFnKSB7XFxuICAgICAgICAvL2xvZyhcXFwi5Yig6Zmk55uu5b2V5aSx6LSlXFxcIik7XFxuICAgICAgICByZXR1cm4gZmFsc2U7XFxuICAgIH1cXG4gICAgLy8g5Yig6Zmk5b2T5YmN55uu5b2VXFxuICAgIGlmIChkaXJGaWxlLmRlbGV0ZSgpKSB7XFxuICAgICAgICAvL2xvZyhcXFwi5Yig6Zmk55uu5b2VXFxcIiArIGRpciArIFxcXCLmiJDlip/vvIFcXFwiKTtcXG4gICAgICAgIHJldHVybiB0cnVlO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgICAgLy9sb2coXFxcIuWIoOmZpOebruW9lVxcXCIgKyBkaXIgKyBcXFwi5aSx6LSl77yBXFxcIik7XFxuICAgICAgICByZXR1cm4gZmFsc2U7XFxuICAgIH1cXG59XFxuXFxuLy9jb3B55Y2V5Liq5paH5Lu2XFxuZnVuY3Rpb24gY29weUZpbGUoc291cmNlLCB0YXJnZXQsIGlzQ292ZXIpIHtcXG4gICAgbGV0IHNvdXJjZVBhdGggPSBQYXRocy5nZXQoc291cmNlKTtcXG4gICAgbGV0IHRhcmdldFBhdGggPSBQYXRocy5nZXQodGFyZ2V0KTtcXG4gICAgbGV0IGlzRXhpc3QgPSBGaWxlcy5leGlzdHModGFyZ2V0UGF0aCk7XFxuICAgIGlmIChGaWxlcy5pc0RpcmVjdG9yeShzb3VyY2VQYXRoKSB8fCAoaXNFeGlzdCAmJiAhaXNDb3ZlcikgfHwgKGlzRXhpc3QgJiYgRmlsZXMuaXNEaXJlY3RvcnkodGFyZ2V0UGF0aCkpKSB7XFxuICAgICAgICByZXR1cm4gZmFsc2U7XFxuICAgIH1cXG4gICAgdHJ5IHtcXG4gICAgICAgIGlmICghaXNFeGlzdCkge1xcbiAgICAgICAgICAgIEZpbGVzLmNyZWF0ZURpcmVjdG9yaWVzKHRhcmdldFBhdGguZ2V0UGFyZW50KCkpO1xcbiAgICAgICAgfVxcbiAgICAgICAgaWYgKGlzQ292ZXIgPT09IHRydWUpIHtcXG4gICAgICAgICAgICBGaWxlcy5jb3B5KHNvdXJjZVBhdGgsIHRhcmdldFBhdGgsIFN0YW5kYXJkQ29weU9wdGlvbi5SRVBMQUNFX0VYSVNUSU5HLCBTdGFuZGFyZENvcHlPcHRpb24uQ09QWV9BVFRSSUJVVEVTKTtcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgRmlsZXMuY29weShzb3VyY2VQYXRoLCB0YXJnZXRQYXRoLCBTdGFuZGFyZENvcHlPcHRpb24uQ09QWV9BVFRSSUJVVEVTKTtcXG4gICAgICAgIH1cXG4gICAgfSBjYXRjaCAoZSkge1xcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICB9XFxufVxcblxcbmZ1bmN0aW9uIGdldEZpbGVUaW1lKHBhdGgpIHtcXG4gICAgbGV0IGZpbGUgPSBuZXcgRmlsZShwYXRoKTtcXG4gICAgbGV0IGxhc3RNb2RpZmllZCA9IGZpbGUubGFzdE1vZGlmaWVkKCk7XFxuICAgIGxldCBkYXRlID0gbmV3IERhdGUobGFzdE1vZGlmaWVkKTtcXG4gICAgcmV0dXJuIGRhdGUuZ2V0VGltZSgpO1xcbn1cXG5cXG5mdW5jdGlvbiBnZXROYW1lKHBhdGgpIHtcXG4gICAgcmV0dXJuIG5ldyBGaWxlKHBhdGgpLmdldE5hbWUoKSArIFxcXCJcXFwiO1xcbn1cXG5cXG5mdW5jdGlvbiBnZXRGaWxlUGF0aChwYXRoLCB0eXBlLCBleHBhbmQpIHtcXG4gICAgdHlwZSA9IHR5cGUgfHwgXFxcImZpbGVcXFwiO1xcbiAgICBpZiAoIVtcXFwiZmlsZVxcXCIsIFxcXCJkaXJcXFwiXS5pbmNsdWRlcyh0eXBlKSkgdGhyb3cgbmV3IEVycm9yKFxcXCLnsbvlnovplJnor69cXFwiKTtcXG4gICAgbGV0IGZpbGVUeXBlID0gdHlwZSA9PT0gXFxcImZpbGVcXFwiID8gXFxcImlzRmlsZVxcXCIgOiBcXFwiaXNEaXJlY3RvcnlcXFwiO1xcbiAgICBsZXQgZmlsZSA9IG5ldyBGaWxlKHBhdGgpO1xcbiAgICBsZXQgYXJyYXkgPSBmaWxlLmxpc3RGaWxlcygpIHx8IFtdO1xcbiAgICBsZXQgcGF0aExpc3QgPSBbXTtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xcbiAgICAgICAgaWYgKGFycmF5W2ldW2ZpbGVUeXBlXSgpKSB7XFxuICAgICAgICAgICAgcGF0aExpc3QucHVzaCh7XFxuICAgICAgICAgICAgICAgIG5hbWU6IGFycmF5W2ldLmdldE5hbWUoKSArIFxcXCJcXFwiLFxcbiAgICAgICAgICAgICAgICBwYXRoOiBhcnJheVtpXS5nZXRQYXRoKCkgKyBcXFwiXFxcIixcXG4gICAgICAgICAgICAgICAgbGFzdE1vZGlmaWVkOiBOdW1iZXIoYXJyYXlbaV0ubGFzdE1vZGlmaWVkKCkpLFxcbiAgICAgICAgICAgIH0pO1xcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIGlmIChleHBhbmQpIHtcXG4gICAgICAgIHBhdGhMaXN0ID0gcGF0aExpc3QuZmlsdGVyKGl0ID0+IGl0Lm5hbWUuZW5kc1dpdGgoZXhwYW5kKSk7XFxuICAgIH1cXG4gICAgcmV0dXJuIHBhdGhMaXN0O1xcbn1cXG5cXG5mdW5jdGlvbiBnZXRGaWxlcyhwYXRoLCB0eXBlLCBleHBhbmQpIHtcXG4gICAgbGV0IHR5cGVzID0ge1xcbiAgICAgICAgXFxcImZpbGVcXFwiOiBcXFwiaXNGaWxlXFxcIixcXG4gICAgICAgIFxcXCJkaXJcXFwiOiBcXFwiaXNEaXJlY3RvcnlcXFwiXFxuICAgIH07XFxuICAgIGxldCBmaWxlVHlwZSA9IHR5cGVzW3R5cGVdO1xcbiAgICBsZXQgZmlsZSA9IG5ldyBGaWxlKHBhdGgpO1xcbiAgICBsZXQgYXJyYXkgPSBmaWxlLmxpc3RGaWxlcygpIHx8IFtdO1xcbiAgICBsZXQgZmlsZUxpc3QgPSBbXTtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xcbiAgICAgICAgbGV0IGZpbGUgPSBhcnJheVtpXTtcXG4gICAgICAgIGlmICgoIWZpbGVUeXBlIHx8IGZpbGVbZmlsZVR5cGVdKCkpICYmICghZXhwYW5kIHx8IGZpbGUuZ2V0TmFtZSgpLmVuZHNXaXRoKGV4cGFuZCkpKSB7XFxuICAgICAgICAgICAgZmlsZUxpc3QucHVzaChmaWxlKTtcXG4gICAgICAgIH1cXG4gICAgfVxcbiAgICByZXR1cm4gZmlsZUxpc3Q7XFxufVxcblxcbmZ1bmN0aW9uIHJlbmFtZUZpbGUoZnJvbVBhdGgsIG5hbWUpIHtcXG4gICAgbGV0IGZyb21GaWxlID0gbmV3IEZpbGUoZnJvbVBhdGgpO1xcbiAgICBsZXQgdG9GaWxlID0gbmV3IEZpbGUoZnJvbUZpbGUuZ2V0UGFyZW50KCkgKyBcXFwiL1xcXCIgKyBuYW1lKTtcXG4gICAgdHJ5IHtcXG4gICAgICAgIGlmICghZnJvbUZpbGUuZXhpc3RzKCkpIHtcXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XFxuICAgICAgICB9XFxuICAgICAgICBpZiAodG9GaWxlLmV4aXN0cygpKSB7XFxuICAgICAgICAgICAgaWYgKCF0b0ZpbGUuZGVsZXRlKCkpIHtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICAgIEZpbGVzLm1vdmUoZnJvbUZpbGUudG9QYXRoKCksIHRvRmlsZS50b1BhdGgoKSwgU3RhbmRhcmRDb3B5T3B0aW9uLlJFUExBQ0VfRVhJU1RJTkcpO1xcbiAgICAgICAgcmV0dXJuIHRydWU7XFxuICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgIGxvZyhlLnRvU3RyaW5nKCkpO1xcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICB9XFxufVxcblxcbmZ1bmN0aW9uIG1vdmVGaWxlcyhmcm9tUGF0aCwgdG9QYXRoKSB7XFxuICAgIGxldCBmcm9tRmlsZSA9IG5ldyBGaWxlKGZyb21QYXRoKTtcXG4gICAgbGV0IHRvRmlsZSA9IG5ldyBGaWxlKHRvUGF0aCk7XFxuICAgIHRyeSB7XFxuICAgICAgICBpZiAoIWZyb21GaWxlLmV4aXN0cygpKSB7XFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgfVxcbiAgICAgICAgaWYgKHRvRmlsZS5leGlzdHMoKSkge1xcbiAgICAgICAgICAgIGlmICghZGVsZXRlRmlsZXModG9QYXRoKSkge1xcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgICAgRmlsZXMubW92ZShmcm9tRmlsZS50b1BhdGgoKSwgdG9GaWxlLnRvUGF0aCgpLCBTdGFuZGFyZENvcHlPcHRpb24uUkVQTEFDRV9FWElTVElORyk7XFxuICAgICAgICByZXR1cm4gdHJ1ZTtcXG4gICAgfSBjYXRjaCAoZSkge1xcbiAgICAgICAgbG9nKGUudG9TdHJpbmcoKSk7XFxuICAgICAgICByZXR1cm4gZmFsc2U7XFxuICAgIH1cXG59XFxuXFxuZnVuY3Rpb24gZmlsZVdyaXRlKHBhdGgsIGNvbnRlbnQpIHtcXG4gICAgd3JpdGVGaWxlKFxcXCJmaWxlOi8vXFxcIiArIHBhdGgsIGNvbnRlbnQpXFxufVxcblxcbmZ1bmN0aW9uIGZpbGVXcml0ZUFwcGVuZChwYXRoLCBjb250ZW50KSB7XFxuICAgIGxldCBmaWxlID0gbmV3IEZpbGUocGF0aCk7XFxuICAgIGxldCBwYXRocyA9IGZpbGUudG9QYXRoKCk7XFxuICAgIGlmIChmaWxlLmV4aXN0cygpKSB7XFxuICAgICAgICBGaWxlcy53cml0ZShwYXRocywgbmV3IGphdmFTdHJpbmcoY29udGVudCkuZ2V0Qnl0ZXMoKSwgU3RhbmRhcmRPcGVuT3B0aW9uLkFQUEVORCk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgICB3cml0ZUZpbGUoXFxcImZpbGU6Ly9cXFwiICsgcGF0aCwgY29udGVudCk7XFxuICAgIH1cXG59XFxuXFxuZnVuY3Rpb24gZ2V0VG90YWxTaXplT2ZGaWxlc0luRGlyKGZpbGUpIHtcXG4gICAgaWYgKGZpbGUuaXNGaWxlKCkpIHtcXG4gICAgICAgIHJldHVybiBmaWxlLmxlbmd0aCgpO1xcbiAgICB9XFxuICAgIGxldCBjaGlsZHJlbiA9IGZpbGUubGlzdEZpbGVzKCk7XFxuICAgIGxldCB0b3RhbCA9IDA7XFxuICAgIGlmIChjaGlsZHJlbiAhPSBudWxsKSB7XFxuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBjaGlsZHJlbikge1xcbiAgICAgICAgICAgIHRvdGFsICs9IGdldFRvdGFsU2l6ZU9mRmlsZXNJbkRpcihjaGlsZCk7XFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgcmV0dXJuIHRvdGFsO1xcbn1cXG5cXG5mdW5jdGlvbiBnZXRGaWxlU2l6ZShmaWxlUGF0aCkge1xcbiAgICAvL0J5dGVcXG4gICAgbGV0IHNpemUgPSBnZXRUb3RhbFNpemVPZkZpbGVzSW5EaXIobmV3IEZpbGUoZmlsZVBhdGgpKTtcXG4gICAgaWYgKHNpemUgPCAwKSB7XFxuICAgICAgICByZXR1cm4gbnVsbDtcXG4gICAgfVxcbiAgICBsZXQgdW5pdEZvcm0gPSBbXFxcIkJ5dGVcXFwiLCBcXFwiS0JcXFwiLCBcXFwiTUJcXFwiLCBcXFwiR0JcXFwiLCBcXFwiVEJcXFwiXTtcXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHVuaXRGb3JtLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XFxuICAgICAgICBpZiAoc2l6ZSA+IDEwMjQpIHtcXG4gICAgICAgICAgICBzaXplIC89IDEwMjQ7XFxuICAgICAgICAgICAgY29udGludWU7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgIHJldHVybiBzaXplLnRvRml4ZWQoMikucmVwbGFjZSgvKFxcXFwuMDApJC8sIFxcXCJcXFwiKSArIHVuaXRGb3JtW2ldO1xcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIHJldHVybiBcXFwiRVJST1I65pWw5YC86L+H5aSnXFxcIjtcXG59XFxuLy/lrozmlbTlkIjlubZcXG4vKlxcbmZ1bmN0aW9uIGZpbGVDb21iaW5lKGZpbGVzSW5wdXQsIGZpbGVPdXQsIGV4dGVuc2lvbiwgaW50ZXJjZXB0KSB7XFxuICAgIHdpdGgoamF2YVNjb3BlKSB7XFxuICAgICAgICBjb25zdCBUTVBfQlVGRkVSX1NJWkUgPSAweDMwMDAwO1xcbiAgICAgICAgY29uc3QgQlVGRkVSX1NJWkUgPSAweDMwMDAwMDtcXG4gICAgICAgIC8v5ZCI5bm25Li05pe25paH5Lu2XFxuICAgICAgICBsZXQgaW5wdXRGaWxlID0gbmV3IEZpbGUoZmlsZXNJbnB1dCk7XFxuICAgICAgICBsZXQgdG1wRmlsZSA9IG5ldyBGaWxlKGZpbGVPdXQgKyBcXFwiLnRtcFxcXCIpO1xcbiAgICAgICAgbGV0IHRvcyA9IG5ldyBCdWZmZXJlZE91dHB1dFN0cmVhbShuZXcgRmlsZU91dHB1dFN0cmVhbSh0bXBGaWxlKSk7XFxuICAgICAgICBsZXQgaW5wdXRGaWxlcyA9IGlucHV0RmlsZS5saXN0RmlsZXMoKTtcXG4gICAgICAgIGxldCB0YnlzID0gQXJyYXkubmV3SW5zdGFuY2UoQnl0ZS5UWVBFLCBUTVBfQlVGRkVSX1NJWkUpO1xcbiAgICAgICAgZm9yIChsZXQgZmlsZSBvZiBpbnB1dEZpbGVzKSB7XFxuICAgICAgICAgICAgaWYgKGZpbGUuZ2V0TmFtZSgpLmVuZHNXaXRoKGV4dGVuc2lvbikpIHtcXG4gICAgICAgICAgICAgICAgbGV0IGlzID0gbmV3IEZpbGVJbnB1dFN0cmVhbShmaWxlKTtcXG4gICAgICAgICAgICAgICAgbGV0IGxlbiA9IDA7XFxuICAgICAgICAgICAgICAgIHdoaWxlICgobGVuID0gaXMucmVhZCh0YnlzKSkgIT0gLTEpIHtcXG4gICAgICAgICAgICAgICAgICAgIHRvcy53cml0ZSh0YnlzLCAwLCBsZW4pO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIGlzLmNsb3NlKCk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgICAgdG9zLmNsb3NlKCk7XFxuICAgICAgICAvL+inhOWImeabv+aNouinhOWImTtcXG4gICAgICAgIGxldCBvdXRGaWxlID0gbmV3IEZpbGUoZmlsZU91dCk7XFxuICAgICAgICBpZiAodHlwZW9mIGludGVyY2VwdCA9PT0gXFxcImZ1bmN0aW9uXFxcIikge1xcbiAgICAgICAgICAgIGxldCB0aXMgPSBuZXcgRmlsZUlucHV0U3RyZWFtKHRtcEZpbGUpO1xcbiAgICAgICAgICAgIGxldCBvcyA9IG5ldyBCdWZmZXJlZE91dHB1dFN0cmVhbShuZXcgRmlsZU91dHB1dFN0cmVhbShvdXRGaWxlKSk7XFxuICAgICAgICAgICAgbGV0IGxlbiA9IDA7XFxuICAgICAgICAgICAgbGV0IGJ5cyA9IEFycmF5Lm5ld0luc3RhbmNlKEJ5dGUuVFlQRSwgQlVGRkVSX1NJWkUpO1xcbiAgICAgICAgICAgIHdoaWxlICgobGVuID0gdGlzLnJlYWQoYnlzKSkgIT0gLTEpIHtcXG4gICAgICAgICAgICAgICAgbGV0IG5ieXMgPSBpbnRlcmNlcHQobmV3IFN0cmluZyhieXMsMCxsZW4pKTtcXG4gICAgICAgICAgICAgICAgb3Mud3JpdGUobmJ5cywgMCwgbmJ5cy5sZW5ndGgpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB0bXBGaWxlLmRlbGV0ZSgpO1xcbiAgICAgICAgICAgIHRpcy5jbG9zZSgpO1xcbiAgICAgICAgICAgIG9zLmNsb3NlKCk7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgIGlmIChvdXRGaWxlLmV4aXN0cygpKSB7XFxuICAgICAgICAgICAgICAgIG91dEZpbGUuZGVsZXRlKCk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIHRtcEZpbGUucmVuYW1lVG8ob3V0RmlsZSk7XFxuICAgICAgICB9XFxuICAgIH1cXG59Ki9cXG4vL+aui1xcbmZ1bmN0aW9uIGZpbGVSdWxlKGZpbGVzSW5wdXQsIGZpbGVPdXQsIGludGVyY2VwdCkge1xcbiAgICB3aXRoKGphdmFTY29wZSkge1xcbiAgICAgICAgY29uc3QgQlVGRkVSX1NJWkUgPSAweDMwMDAwMDtcXG4gICAgICAgIGxldCB0bXBGaWxlID0gbmV3IEZpbGUoZmlsZXNJbnB1dCk7XFxuICAgICAgICBpZiAoISh0bXBGaWxlLmV4aXN0cygpICYmIHRtcEZpbGUuaXNGaWxlKCkpKSB7XFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgfVxcbiAgICAgICAgbGV0IG91dEZpbGUgPSBuZXcgRmlsZShmaWxlT3V0KTtcXG5cXG4gICAgICAgIGxldCB0aXMgPSBuZXcgRmlsZUlucHV0U3RyZWFtKHRtcEZpbGUpO1xcbiAgICAgICAgbGV0IG9zID0gbmV3IEJ1ZmZlcmVkT3V0cHV0U3RyZWFtKG5ldyBGaWxlT3V0cHV0U3RyZWFtKG91dEZpbGUpKTtcXG4gICAgICAgIGxldCBsZW4gPSAwO1xcbiAgICAgICAgbGV0IGJ5cyA9IEFycmF5Lm5ld0luc3RhbmNlKEJ5dGUuVFlQRSwgQlVGRkVSX1NJWkUpO1xcbiAgICAgICAgd2hpbGUgKChsZW4gPSB0aXMucmVhZChieXMpKSAhPSAtMSkge1xcbiAgICAgICAgICAgIGxldCBuYnlzID0gaW50ZXJjZXB0KG5ldyBTdHJpbmcoYnlzLCAwLCBsZW4pKTtcXG4gICAgICAgICAgICBvcy53cml0ZShuYnlzLCAwLCBuYnlzLmxlbmd0aCk7XFxuICAgICAgICB9XFxuICAgICAgICB0bXBGaWxlLmRlbGV0ZSgpO1xcbiAgICAgICAgdGlzLmNsb3NlKCk7XFxuICAgICAgICBvcy5jbG9zZSgpO1xcbiAgICAgICAgcmV0dXJuIHRydWU7XFxuICAgIH1cXG59XFxuXFxuZnVuY3Rpb24gcmVhZEZpbGUocGF0aCkge1xcbiAgICB0cnkge1xcbiAgICAgICAgbGV0IHBhdGhzID0gUGF0aHMuZ2V0KHBhdGgpO1xcbiAgICAgICAgaWYgKCFGaWxlcy5leGlzdHMocGF0aHMpKSByZXR1cm4gXFxcIlxcXCI7XFxuICAgICAgICByZXR1cm4gU3RyaW5nKG5ldyBqYXZhU3RyaW5nKEZpbGVzLnJlYWRBbGxCeXRlcyhwYXRocykpKTtcXG4gICAgfSBjYXRjaCB7XFxuICAgICAgICByZXR1cm4gXFxcIlxcXCI7XFxuICAgIH1cXG59XFxuJC5leHBvcnRzID0ge1xcbiAgICBnZXRGaWxlVGltZTogKHBhdGgpID0+IGdldEZpbGVUaW1lKHBhdGgpLFxcbiAgICBnZXRGaWxlUGF0aDogKHBhdGgsIHR5cGUsIGV4cGFuZCkgPT4gZ2V0RmlsZVBhdGgocGF0aCwgdHlwZSwgZXhwYW5kKSxcXG4gICAgZGVsZXRlRmlsZXM6IChwYXRoKSA9PiBkZWxldGVGaWxlcyhwYXRoKSxcXG4gICAgcmVuYW1lRmlsZTogKHBhdGgsIG5hbWUpID0+IHJlbmFtZUZpbGUocGF0aCwgbmFtZSksXFxuICAgIG1vdmVGaWxlczogKGZyb21QYXRoLCB0b1BhdGgpID0+IG1vdmVGaWxlcyhmcm9tUGF0aCwgdG9QYXRoKSxcXG4gICAgZmlsZVdyaXRlOiAocGF0aCwgY29udGVudCkgPT4gZmlsZVdyaXRlKHBhdGgsIGNvbnRlbnQpLFxcbiAgICBmaWxlV3JpdGVBcHBlbmQ6IChwYXRoLCBjb250ZW50KSA9PiBmaWxlV3JpdGVBcHBlbmQocGF0aCwgY29udGVudCksXFxuICAgIGdldE5hbWU6IChwYXRoKSA9PiBnZXROYW1lKHBhdGgpLFxcbiAgICBnZXRGaWxlU2l6ZTogKGZpbGVQYXRoKSA9PiBnZXRGaWxlU2l6ZShmaWxlUGF0aCksXFxuICAgIGZpbGVSdWxlOiAoZmlsZXNJbnB1dCwgZmlsZU91dCwgaW50ZXJjZXB0KSA9PiBmaWxlUnVsZShmaWxlc0lucHV0LCBmaWxlT3V0LCBpbnRlcmNlcHQpLFxcbiAgICBjb3B5RmlsZTogKHNvdXJjZSwgdGFyZ2V0LCBpc0NvdmVyKSA9PiBjb3B5RmlsZShzb3VyY2UsIHRhcmdldCwgaXNDb3ZlciksXFxuICAgIHJlYWRGaWxlOiAocGF0aCkgPT4gcmVhZEZpbGUocGF0aCksXFxuICAgIGdldEZpbGVzOiAocGF0aCwgdHlwZSwgZXhwYW5kKSA9PiBnZXRGaWxlcyhwYXRoLCB0eXBlLCBleHBhbmQpLFxcbiAgICBnZXRUb3RhbFNpemVPZkZpbGVzSW5EaXI6KGZpbGUpPT5nZXRUb3RhbFNpemVPZkZpbGVzSW5EaXIoZmlsZSlcXG59XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCIj6YCa55SoXCIsXCJwYXRoXCI6XCJUb29sLmpzXCIsXCJydWxlXCI6XCJjb25zdCB2ID0ge1xcbiAgICBzcGxpdCh0ZXh0LCB0YXJnZXQsIGNvdW50KSB7XFxuICAgICAgICBjb3VudCA9IGNvdW50ID09PSB1bmRlZmluZWQgPyAxIDogY291bnQ7XFxuICAgICAgICBsZXQgYXJyYXkgPSBbdGV4dF07XFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcXG4gICAgICAgICAgICB0ZXh0ID0gYXJyYXlbaV07XFxuICAgICAgICAgICAgbGV0IGluZGV4ID0gdGV4dC5pbmRleE9mKHRhcmdldCk7XFxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xcbiAgICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgYXJyYXlbaV0gPSB0ZXh0LnNsaWNlKDAsIGluZGV4KTtcXG4gICAgICAgICAgICBhcnJheVtpICsgMV0gPSB0ZXh0LnNsaWNlKGluZGV4ICsgdGFyZ2V0Lmxlbmd0aCk7XFxuICAgICAgICB9XFxuICAgICAgICByZXR1cm4gYXJyYXk7XFxuICAgIH0sXFxuICAgIGNodW5rKGFyciwgc2l6ZSkge1xcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFyci5sZW5ndGg7IGkgPCBsZW47IGkgKz0gc2l6ZSkge1xcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGFyci5zbGljZShpLCBpICsgc2l6ZSkpO1xcbiAgICAgICAgfVxcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcXG4gICAgfSxcXG4gICAgaGlrZXJQaWModXJsKSB7XFxuICAgICAgICB2YXIgaGVhZGVycyA9IHt9O1xcbiAgICAgICAgbGV0IHVybHMgPSB1cmwuc3BsaXQoXFxcIkBcXFwiKTtcXG4gICAgICAgIGxldCBwaWNVcmwgPSB1cmxzLnNoaWZ0KCk7XFxuICAgICAgICBsZXQgbGVuZ3RoID0gdXJscy5sZW5ndGg7XFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XFxuICAgICAgICAgICAgbGV0IFtrZXksIHZhbHVlXSA9IHYuc3BsaXQodXJsc1tpXSwgXFxcIj1cXFwiKTtcXG4gICAgICAgICAgICBpZiAoa2V5ID09PSBcXFwiaGVhZGVyc1xcXCIpIHtcXG4gICAgICAgICAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oaGVhZGVycywgSlNPTi5wYXJzZSh2YWx1ZSkpO1xcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XFxuICAgICAgICAgICAgICAgICAgICBsb2coZS50b1N0cmluZygpKTtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5LmluY2x1ZGVzKFxcXCIuXFxcIikgfHwga2V5LmluY2x1ZGVzKFxcXCI/XFxcIikpIHtcXG4gICAgICAgICAgICAgICAgcGljVXJsICs9IFxcXCJAXFxcIiArIGtleSArICh2YWx1ZSA/IFxcXCI9XFxcIiArIHZhbHVlIDogXFxcIlxcXCIpO1xcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ICE9PSBcXFwianNcXFwiKSB7XFxuICAgICAgICAgICAgICAgIGhlYWRlcnNba2V5XSA9IHZhbHVlO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICAgIHJldHVybiBbcGljVXJsLCBoZWFkZXJzXTtcXG4gICAgfSxcXG4gICAgcmFuZ2Uoc3RhcnQsIGVuZCkge1xcbiAgICAgICAgcmV0dXJuIEFycmF5KGVuZCAtIHN0YXJ0KS5maWxsKDApLm1hcCgoZWwsIGkpID0+IHN0YXJ0ICsgaSk7XFxuICAgIH0sXFxuICAgIHBpY0Rvd25sb2FkKHVybCwgcGF0aCwgaGVhZGVycywgZGVjaXBoZSkge1xcbiAgICAgICAgaWYgKHR5cGVvZiBkZWNpcGhlID09PSBcXFwic3RyaW5nXFxcIiAmJiBkZWNpcGhlLmxlbmd0aCA+IDApIHtcXG4gICAgICAgICAgICBsZXQgaW5zdHJlYW07XFxuICAgICAgICAgICAgbGV0IG91dHN0cmVhbTtcXG4gICAgICAgICAgICBsZXQgZmlsZTtcXG4gICAgICAgICAgICB0cnkge1xcbiAgICAgICAgICAgICAgICBmaWxlID0gbmV3IGphdmEuaW8uRmlsZShwYXRoKTtcXG4gICAgICAgICAgICAgICAgaWYgKGZpbGUuZXhpc3RzKCkpIHtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICBsZXQgZGlyID0gZmlsZS5nZXRQYXJlbnRGaWxlKCk7XFxuICAgICAgICAgICAgICAgIGlmIChkaXIgIT0gbnVsbCAmJiAhZGlyLmV4aXN0cygpKSB7XFxuICAgICAgICAgICAgICAgICAgICBkaXIubWtkaXJzKCk7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgaW5zdHJlYW0gPSBmZXRjaCh1cmwsIHtcXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXFxuICAgICAgICAgICAgICAgICAgICBpbnB1dFN0cmVhbTogdHJ1ZVxcbiAgICAgICAgICAgICAgICB9KTtcXG5cXG4gICAgICAgICAgICAgICAgb3V0c3RyZWFtID0gbmV3IGphdmEuaW8uRmlsZU91dHB1dFN0cmVhbShwYXRoKTtcXG4gICAgICAgICAgICAgICAgbGV0IHQgPSAkLmhpa2VyLmlucHV0LFxcbiAgICAgICAgICAgICAgICAgICAgYyA9ICQuaGlrZXIudXJsO1xcbiAgICAgICAgICAgICAgICAkLmhpa2VyLmlucHV0ID0gaW5zdHJlYW07XFxuICAgICAgICAgICAgICAgICQuaGlrZXIudXJsID0gdXJsO1xcbiAgICAgICAgICAgICAgICBsZXQgcGljaW4gPSAobmV3IEZ1bmN0aW9uKFxcXCJyZXR1cm4gXFxcIiArIGRlY2lwaGUpKSgpO1xcbiAgICAgICAgICAgICAgICAkLmhpa2VyLmlucHV0ID0gdDtcXG4gICAgICAgICAgICAgICAgJC5oaWtlci51cmwgPSBjO1xcbiAgICAgICAgICAgICAgICBsZXQgYnVmID0gamF2YS5sYW5nLnJlZmxlY3QuQXJyYXkubmV3SW5zdGFuY2UoamF2YS5sYW5nLkJ5dGUuVFlQRSwgMTAyNCk7XFxuICAgICAgICAgICAgICAgIGxldCBsZW47XFxuICAgICAgICAgICAgICAgIHdoaWxlICgobGVuID0gcGljaW4ucmVhZChidWYpKSAhPSAtMSkge1xcbiAgICAgICAgICAgICAgICAgICAgb3V0c3RyZWFtLndyaXRlKGJ1ZiwgMCwgbGVuKTtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICBjbG9zZU1lKGluc3RyZWFtKTtcXG4gICAgICAgICAgICAgICAgY2xvc2VNZShvdXRzdHJlYW0pO1xcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgICAgICAgICAgY2xvc2VNZShpbnN0cmVhbSk7XFxuICAgICAgICAgICAgICAgIGNsb3NlTWUob3V0c3RyZWFtKTtcXG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBqYXZhLmlvLkZpbGUgJiYgZmlsZS5leGlzdHMoKSkge1xcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5kZWxldGUoKTtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICBsb2coXFxcIjzop6Plr4bkuIvovb1FcnJvcj5cXFwiICsgZS50b1N0cmluZygpKVxcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xcbiAgICAgICAgICAgIH0gZmluYWxseSB7XFxuICAgICAgICAgICAgICAgIGNsb3NlTWUoaW5zdHJlYW0pO1xcbiAgICAgICAgICAgICAgICBjbG9zZU1lKG91dHN0cmVhbSk7XFxuICAgICAgICAgICAgfVxcblxcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICByZXF1aXJlRG93bmxvYWQodXJsLCBwYXRoLCBoZWFkZXJzKTtcXG4gICAgICAgIH1cXG4gICAgfSxcXG4gICAgdGV4dFNoaWVsZCh0ZXh0KSB7XFxuICAgICAgICBsZXQgZSA9IC8jfDp8JnxcXFxcfHxcXFxcXnxAfFxcXFw8fFxcXFw+fCV8XFxcXC98XFxcXD8vZztcXG4gICAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoZSwgXFxcIl9cXFwiKTtcXG4gICAgfVxcbiAgICBcXG59XFxuXFxuJC5leHBvcnRzID0gdjtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIiNDb25maWdcIixcInBhdGhcIjpcIkNvbmZpZy5qc29uXCIsXCJydWxlXCI6XCJqczpcXG5jb25zdCBGaWxlID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvRmlsZS5qcz9ydWxlPeafkOiBmuWQiFxcXCIpO1xcblxcbmxldCBsb2NhbENvbmZpZyA9IHt9O1xcblxcbnRyeSB7XFxuICAgIGxvY2FsQ29uZmlnID0gSlNPTi5wYXJzZShGaWxlLnJlYWRGaWxlKGdldFBhdGgoXFxcImhpa2VyOi8vZmlsZXMvcnVsZXMvZmlsZXMv5p+Q6IGa5ZCIL2NvbmZpZy5qc29uXFxcIikuc2xpY2UoNykpKTtcXG59IGNhdGNoIChlKSB7XFxuICAgIGRlbGV0ZUZpbGUoXFxcImNvbmZpZy5qc29uXFxcIik7XFxufVxcbmNvbnN0IENvbmZpZyA9IE9iamVjdC5hc3NpZ24oe1xcbiAgICBob21lUGF0aDogZ2V0UGF0aChcXFwiaGlrZXI6Ly9maWxlcy9Db21pY3NCb29rU2hlbGZcXFwiKS5zbGljZSg3KSxcXG4gICAgbG9nTnVtOiAxMCxcXG4gICAgdGhyZWFkTnVtOiAwLFxcbiAgICBkZWZfaXNQYWdpbmF0ZTogXFxcIjFcXFwiLCAvLzHpu5jorqTlvIDlkK/liIbpobXvvIww6buY6K6k5YWz6ZetXFxuICAgIHZpZXdQYWdlU2l6ZTogMjAwLFxcbiAgICBkZWZfUGljOiBcXFwiaGlrZXI6Ly9pbWFnZXMvaG9tZV9waWM0XFxcIixcXG4gICAgZGVmX0xvcmRfVHlwZTogXFxcImNvbWljXFxcIixcXG4gICAgZGVmX1ZpZXdfU3R5bGU6IFxcXCJ0ZXh0XzFcXFwiLFxcbiAgICBkZWZfRG9WaV9TdHlsZTogXFxcInRleHRfMlxcXCIsXFxuICAgIGRlZl9Eb1ZpX1R5cGU6IFxcXCIxXFxcIiwgLy8w5YWo6YOoLCAx5pyq5a6M5oiQ77yMMuW3suWujOaIkFxcbiAgICBkZWZfaXNDb21pY0NvbXBhdGlibGU6IFxcXCIwXFxcIlxcbn0sIGxvY2FsQ29uZmlnKTtcXG5jb25zdCBQQVRIUyA9IHtcXG4gICAgY29taWNQYXRoOiBcXFwiL+afkOa8q+eUuy9cXFwiLFxcbiAgICBjb250ZW50c0NhY2hlOiBcXFwiL+ebruW9lee8k+WtmC9cXFwiXFxufVxcblxcblxcbk9iamVjdC5rZXlzKFBBVEhTKS5mb3JFYWNoKGtleSA9PiBDb25maWdba2V5XSA9IENvbmZpZy5ob21lUGF0aCArIFBBVEhTW2tleV0pO1xcbiQuZXhwb3J0cyA9IENvbmZpZztcXG5cIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIiPmibnph4/kuIvovb3lmahcIixcInBhdGhcIjpcIkJhdGNoLnZpZXdcIixcInJ1bGVcIjpcImpzOlxcbmxldCB7XFxuICAgIGNoYXB0ZXJMaXN0LFxcbiAgICBpbmZvLFxcbiAgICBNWV9JRFxcbn0gPSBNWV9QQVJBTVM7XFxuc2V0UGFnZVRpdGxlKFxcXCLkuIvovb3lmah8XFxcIitpbmZvLmJvb2tOYW1lKTtcXG5hZGRMaXN0ZW5lcihcXFwib25DbG9zZVxcXCIsICQudG9TdHJpbmcoKE1ZX0lEKSA9PiB7XFxuICAgIGNsZWFyTXlWYXIoTVlfSUQgKyBcXFwiOmlzU3RhcnRcXFwiKTtcXG4gICAgY2xlYXJNeVZhcihNWV9JRCArIFxcXCI6c3RhdHVzXFxcIik7XFxuICAgIGNsZWFyTXlWYXIoTVlfSUQgKyBcXFwiOmJhdGNoVGVhbVxcXCIpO1xcbiAgICByZWZyZXNoUGFnZSgpO1xcbn0sIE1ZX0lEKSk7XFxuXFxubGV0IGlzU3RhcnQgPSBnZXRNeVZhcihNWV9JRCArIFxcXCI6aXNTdGFydFxcXCIsIFxcXCIwXFxcIik7XFxubGV0IHN0YXR1cyA9IGdldE15VmFyKE1ZX0lEICsgXFxcIjpzdGF0dXNcXFwiLCBcXFwiMFxcXCIpO1xcbmxldCBsYXlvdXQgPSBbXTtcXG5cXG5sZXQgYmF0Y2hUZWFtID0gSlNPTi5wYXJzZShnZXRNeVZhcihNWV9JRCArIFxcXCI6YmF0Y2hUZWFtXFxcIiwgXFxcIltdXFxcIikgfHwgXFxcIltdXFxcIik7XFxuaWYodHlwZW9mIGNoYXB0ZXJMaXN0ID09PSBcXFwic3RyaW5nXFxcIil7XFxuICAgIGNoYXB0ZXJMaXN0ID0gSlNPTi5wYXJzZShyZXF1ZXN0KFxcXCJmaWxlOi8vXFxcIitjaGFwdGVyTGlzdCl8fFxcXCJbXVxcXCIpO1xcbn1cXG5sZXQgY2hhcHRlclRlYW0gPSBiYXRjaFRlYW0ubWFwKHYgPT4ge1xcbiAgICBsZXQgY2hhcHRlckl0ZW0gPSBjaGFwdGVyTGlzdFt2XTtcXG4gICAgY2hhcHRlckl0ZW0uQ0lEID0gdjtcXG4gICAgcmV0dXJuIGNoYXB0ZXJJdGVtO1xcbn0pO1xcbmlmIChpc1N0YXJ0ID09PSBcXFwiMFxcXCIpIHtcXG4gICAgbGF5b3V0LnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFxcXCLngrnlh7vov5nph4zlvIDlp4vkuIvovb1bXFxcIiArIGNoYXB0ZXJUZWFtLmxlbmd0aCArIFxcXCJdXFxcIixcXG4gICAgICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZSgoY2hhcHRlclRlYW0sIGluZm8sIE1ZX0lEKSA9PiB7XFxuICAgICAgICAgICAgcHV0TXlWYXIoTVlfSUQgKyBcXFwiOmlzU3RhcnRcXFwiLCBcXFwiMVxcXCIpO1xcbiAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICBsZXQgZG93bmxvYWQgPSAkLnJlcXVpcmUoXFxcImhpa2VyOi8vcGFnZS9CYXRjaFN0YXRpc3RpY3MuanNcXFwiKTtcXG4gICAgICAgICAgICBpZihpbmZvLnR5cGU9PT1cXFwiY29taWNcXFwiJiZpbmZvLmNvbWljU2NoZW1lPT09XFxcIjFcXFwiKXtcXG4gICAgICAgICAgICAgICAgZG93bmxvYWQ9ZG93bmxvYWQuYjtcXG4gICAgICAgICAgICB9ZWxzZXtcXG4gICAgICAgICAgICAgICAgZG93bmxvYWQ9ZG93bmxvYWQuYTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgcmV0dXJuIGRvd25sb2FkKGNoYXB0ZXJUZWFtLCBpbmZvLCBNWV9JRCkgfHwgXFxcInRvYXN0Oi8v5LiL6L296ZSZ6K+vXFxcIjtcXG4gICAgICAgIH0sIGNoYXB0ZXJUZWFtLCBpbmZvLCBNWV9JRCksXFxuICAgICAgICBjb2xfdHlwZTogXFxcInRleHRfY2VudGVyXzFcXFwiLFxcbiAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICBpZDogTVlfSUQgKyBcXFwifHzlvIDlp4vkuIvovb1cXFwiXFxuICAgICAgICB9XFxuICAgIH0pO1xcbiAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICB0aXRsZTogXFxcIuS7u+WKoeWIl+ihqO+8mlxcXCIsXFxuICAgICAgICBjb2xfdHlwZTogXFxcInJpY2hfdGV4dFxcXCIsXFxuICAgIH0pO1xcbiAgICBmb3IgKGxldCBpdGVtIG9mIGNoYXB0ZXJUZWFtKSB7XFxuICAgICAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsXFxuICAgICAgICAgICAgdXJsOiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCIsXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzJcXFwiXFxuICAgICAgICB9KTtcXG4gICAgfVxcblxcbn0gZWxzZSB7XFxuICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBcXFwi5LiL6L296L+b5bqmOjAvXFxcIitjaGFwdGVyVGVhbS5sZW5ndGgsXFxuICAgICAgICBkZXNjOiBcXFwi4oCc4oCc4oCd4oCd4paH4paH4paH4paH4paH4paH4paH4paH4paH4paHXFxcIi5mb250Y29sb3IoXFxcIiNlNWUxZTRcXFwiKStcXFwiIDAlXFxcIixcXG4gICAgICAgIHVybDogXFxcImhpa2VyOi8vZW1wdHlcXFwiLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJ0ZXh0X2NlbnRlcl8xXFxcIixcXG4gICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgaWQ6IE1ZX0lEICsgXFxcInx85LiL6L296L+b5bqmXFxcIixcXG4gICAgICAgICAgICBsaW5lVmlzaWJsZTogZmFsc2VcXG4gICAgICAgIH1cXG4gICAgfSk7XFxuICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBcXFwi5ZCO5Y+w5LiL6L29XFxcIixcXG4gICAgICAgIHVybDogXFxcImZ1bmM6Ly9iYWNrZ3JvdW5kXFxcIixcXG4gICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF8yXFxcIlxcbiAgICB9KTtcXG5cXG4gICAgbGF5b3V0LnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFtcXFwiW+WPlua2iOS4i+i9vV1cXFwiLCBcXFwiW+ato+WcqOWBnOatoi4uLl1cXFwiLCBcXFwiW+i/lOWbnl1cXFwiLCBcXFwiW+WkhOeQhuWksei0pV1cXFwiLCBcXFwiW+mHjeaWsOW8gOWni11cXFwiXVtzdGF0dXNdLFxcbiAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChNWV9JRCkgPT4ge1xcbiAgICAgICAgICAgIGxldCBzdGF0dXMgPSBnZXRNeVZhcihNWV9JRCArIFxcXCI6c3RhdHVzXFxcIiwgXFxcIjBcXFwiKTtcXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSBcXFwiMFxcXCIpIHtcXG4gICAgICAgICAgICAgICAgcHV0TXlWYXIoTVlfSUQgKyBcXFwiOnN0YXR1c1xcXCIsIFxcXCIxXFxcIik7XFxuICAgICAgICAgICAgICAgIHVwZGF0ZUl0ZW0oe1xcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFxcXCJb5q2j5Zyo5YGc5q2iLi4uXVxcXCIsXFxuICAgICAgICAgICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBNWV9JRCArIFxcXCJ8fOS4i+i9veaOp+WItlxcXCJcXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/mraPlnKjlj5bmtojkuIvovb3ku7vliqFcXFwiO1xcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSBcXFwiMVxcXCIpIHtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+ato+WcqOaaguWBnC4uLlxcXCI7XFxuICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IFxcXCIyXFxcIikge1xcbiAgICAgICAgICAgICAgICBiYWNrKCk7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/lt7LpgIDlh7rkuIvovb3lmahcXFwiO1xcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoW1xcXCIzXFxcIiwgXFxcIjRcXFwiXS5pbmNsdWRlcyhzdGF0dXMpKSB7XFxuICAgICAgICAgICAgICAgIGNsZWFyTXlWYXIoTVlfSUQgKyBcXFwiOmlzU3RhcnRcXFwiKTtcXG4gICAgICAgICAgICAgICAgY2xlYXJNeVZhcihNWV9JRCArIFxcXCI6c3RhdHVzXFxcIik7XFxuICAgICAgICAgICAgICAgIGNsZWFyTXlWYXIoTVlfSUQgKyBcXFwiOmxvZ1xcXCIpO1xcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcbiAgICAgICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v6YeN5paw54K55Ye75LiL6L29XFxcIlxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0sIE1ZX0lEKSxcXG4gICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF8yXFxcIixcXG4gICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgaWQ6IE1ZX0lEICsgXFxcInx85LiL6L295o6n5Yi2XFxcIlxcbiAgICAgICAgfVxcbiAgICB9KTtcXG4gICAgbGF5b3V0LnB1c2goe1xcbiAgICAgICAgY29sX3R5cGU6IFxcXCJsaW5lX2JsYW5rXFxcIlxcbiAgICB9KTtcXG4gICAgbGF5b3V0LnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFxcXCI8c3Ryb25nPuS4i+i9veaXpeW/lzwvc3Ryb25nPlxcXCIuYmlnKCksXFxuICAgICAgICBjb2xfdHlwZTogXFxcInJpY2hfdGV4dFxcXCIsXFxuICAgICAgICBcXG4gICAgfSk7XFxuICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgIGNvbF90eXBlOiBcXFwibGluZVxcXCIsXFxuICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgIGlkOiBNWV9JRCArIFxcXCJ8fOaXpeW/l1xcXCJcXG4gICAgICAgIH1cXG4gICAgfSk7XFxuICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOlxcXCLigJzigJzigJ3igJ0kPlxcXCIrXFxcIuW8gOWni+S4i+i9vS4uLi4uLlxcXCIuZm9udGNvbG9yKFxcXCIjMDBmZjAwXFxcIiksXFxuICAgICAgICB1cmw6XFxcImhpa2VyOi8vZW1wdHlcXFwiLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzFcXFwiLFxcbiAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICBpZDogTVlfSUQgKyBcXFwiI2xvZyMwXFxcIixcXG4gICAgICAgICAgICBsaW5lVmlzaWJsZTpmYWxzZVxcbiAgICAgICAgfVxcbiAgICB9KTtcXG59XFxuXFxuc2V0UmVzdWx0KGxheW91dCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCIj5Lmm5p62XCIsXCJwYXRoXCI6XCJCb29rcmFjay52aWV3XCIsXCJydWxlXCI6XCJqczpcXG5jb25zdCBGaWxlID0gJC5yZXF1aXJlKFxcXCJGaWxlLmpzXFxcIik7XFxuY29uc3QgcmFuayA9ICQucmVxdWlyZShcXFwiZmlsZVJhbmsuanNcXFwiKTtcXG5jb25zdCBUb29sID0gJC5yZXF1aXJlKFxcXCJUb29sLmpzXFxcIik7XFxuY29uc3QgQ29uZmlnID0gJC5yZXF1aXJlKFxcXCJDb25maWcuanNvblxcXCIpO1xcblxcbihmdW5jdGlvbigpIHtcXG4gICAgbGV0IHR5cGUgPSBNWV9QQVJBTVMudHlwZSB8fCBnZXRQYXJhbShcXFwidHlwZVxcXCIsIFxcXCJcXFwiKSB8fCBcXFwiY29taWNcXFwiO1xcbiAgICBsZXQgcnVsZU5hbWUgPSBUb29sLnRleHRTaGllbGQoTVlfUEFSQU1TLnJ1bGVOYW1lIHx8IGRlY29kZVVSSUNvbXBvbmVudChnZXRQYXJhbShcXFwicnVsZU5hbWVcXFwiKSkpO1xcbiAgICBpZiAoIXJ1bGVOYW1lKSB7XFxuICAgICAgICB0b2FzdChcXFwi6K+35Lyg5YWl6KeE5YiZ5ZCNXFxcIik7XFxuICAgICAgICBiYWNrKGZhbHNlKTtcXG4gICAgfVxcbiAgICBpZiAoIVtcXFwiY29taWNcXFwiLCBcXFwibm92ZWxcXFwiXS5pbmNsdWRlcyh0eXBlKSkge1xcbiAgICAgICAgdG9hc3QoXFxcIuivt+S8oOWFpeato+ehrueahHR5cGU6Y29taWMgbm92ZWxcXFwiKTtcXG4gICAgICAgIGJhY2soZmFsc2UpO1xcbiAgICB9XFxuICAgIHNldFBhZ2VUaXRsZShydWxlTmFtZSArIFxcXCJ85pys5Zyw5Lmm5p62XFxcIik7XFxuICAgIGxldCBsYXlvdXQgPSBbXTtcXG4gICAgbGV0IHBhdGggPSBDb25maWdbdHlwZSArIFxcXCJQYXRoXFxcIl0gKyBydWxlTmFtZTtcXG4gICAgbGV0IGNvbF90eXBlID0gZ2V0SXRlbShcXFwiYm9va3JhY2s6Y29sX3R5cGVcXFwiLCBcXFwibW92aWVfM19tYXJxdWVlXFxcIik7XFxuICAgIGxldCByYW5rTWV0aG9kID0gZ2V0SXRlbShcXFwiYm9va3JhY2s6cmFua01ldGhvZFxcXCIsIFxcXCLns7vnu59cXFwiKTtcXG4gICAgbGV0IHJhbmtJc1JldmVyc2UgPSBnZXRJdGVtKFxcXCJib29rcmFjazpyYW5rSXNSZXZlcnNlXFxcIiwgXFxcIlxcXCIpO1xcblxcbiAgICBsZXQgY29sVHlwZXMgPSBbXFxcIm1vdmllXzFcXFwiLCBcXFwibW92aWVfMlxcXCIsIFxcXCJtb3ZpZV8zX21hcnF1ZWVcXFwiLCBcXFwibW92aWVfMV92ZXJ0aWNhbF9waWNcXFwiLCBcXFwicGljXzJcXFwiLCBcXFwicGljXzNcXFwiLCBcXFwicGljXzNfc3F1YXJlXFxcIiwgXFxcInBpY18yX2NhcmRcXFwiXTtcXG4gICAgXFxuICAgIGxldCByYW5rTWV0aG9kcyA9IFtcXFwi57O757ufXFxcIiwgXFxcIuWkp+Wwj1xcXCIsIFxcXCLlkI3np7BcXFwiLCBcXFwi5pe26Ze0XFxcIl07XFxuICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBcXFwi8J+nqVxcXCIsXFxuICAgICAgICBjb2xfdHlwZTogXFxcImZsZXhfYnV0dG9uXFxcIixcXG4gICAgICAgIHVybDogJChjb2xUeXBlcy5tYXAodj0+dj09PWNvbF90eXBlP1xcXCLigJzigJxcXFwiK3YrXFxcIuKAneKAnVxcXCI6dikpLnNlbGVjdCgobmFtZSkgPT4ge1xcbiAgICAgICAgICAgIGlmKC/igJzigJwuKj/igJ3igJ0vLnRlc3QoaW5wdXQpKSByZXR1cm47XFxuICAgICAgICAgICAgc2V0SXRlbShcXFwiYm9va3JhY2s6Y29sX3R5cGVcXFwiLCBpbnB1dCk7XFxuICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgIH0pXFxuICAgIH0pO1xcbiAgICBmb3IgKGxldCBuYW1lIG9mIHJhbmtNZXRob2RzKSB7XFxuICAgICAgICBsZXQgYSA9IHJhbmtNZXRob2QgPT09IG5hbWU7XFxuICAgICAgICBsZXQgdGl0bGVhID0gYSA/IFxcXCLigJjigJhcXFwiICsgbmFtZSArIFxcXCLigJnigJlcXFwiIDogbmFtZTtcXG4gICAgICAgIGxldCB0aXRsZWIgPSBcXFwiXFxcIjtcXG4gICAgICAgIGlmIChhKSB7XFxuICAgICAgICAgICAgdGl0bGViID0gIXJhbmtJc1JldmVyc2UgPyBcXFwi4oaTXFxcIiA6IFxcXCLihpFcXFwiO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICB0aXRsZWIgPSBcXFwi4oaVXFxcIjtcXG4gICAgICAgIH1cXG4gICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogdGl0bGVhICsgdGl0bGViLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwiZmxleF9idXR0b25cXFwiLFxcbiAgICAgICAgICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZSgobmFtZSkgPT4ge1xcbiAgICAgICAgICAgICAgICBsZXQgcmFua01ldGhvZCA9IGdldEl0ZW0oXFxcImJvb2tyYWNrOnJhbmtNZXRob2RcXFwiLCBcXFwi57O757ufXFxcIik7XFxuICAgICAgICAgICAgICAgIGxldCByYW5rSXNSZXZlcnNlID0gZ2V0SXRlbShcXFwiYm9va3JhY2s6cmFua0lzUmV2ZXJzZVxcXCIsIFxcXCJcXFwiKTtcXG5cXG4gICAgICAgICAgICAgICAgaWYgKHJhbmtNZXRob2QgPT09IG5hbWUpIHtcXG4gICAgICAgICAgICAgICAgICAgIGlmIChyYW5rSXNSZXZlcnNlKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgcmFua0lzUmV2ZXJzZSA9IFxcXCJcXFwiO1xcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICByYW5rSXNSZXZlcnNlID0gXFxcIjFcXFwiO1xcbiAgICAgICAgICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgICAgICAgICAgc2V0SXRlbShcXFwiYm9va3JhY2s6cmFua0lzUmV2ZXJzZVxcXCIsIHJhbmtJc1JldmVyc2UpO1xcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgc2V0SXRlbShcXFwiYm9va3JhY2s6cmFua0lzUmV2ZXJzZVxcXCIsIFxcXCJcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgIHNldEl0ZW0oXFxcImJvb2tyYWNrOnJhbmtNZXRob2RcXFwiLCBuYW1lKTtcXG5cXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgfSwgbmFtZSlcXG4gICAgICAgIH0pO1xcbiAgICB9XFxuICAgIGxldCByYW5rTWV0aG9kTWFwID0ge1xcbiAgICAgICAgXFxcIuezu+e7n1xcXCI6IFxcXCJcXFwiLFxcbiAgICAgICAgXFxcIuWkp+Wwj1xcXCI6IFxcXCJzaXplXFxcIixcXG4gICAgICAgIFxcXCLlkI3np7BcXFwiOiBcXFwibmFtZVxcXCIsXFxuICAgICAgICBcXFwi5pe26Ze0XFxcIjogXFxcInRpbWVcXFwiXFxuICAgIH07XFxuICAgIGxldCBib29rTGlzdCA9IFtdO1xcbiAgICBsZXQgbGlzdCA9IHJhbmsoRmlsZS5nZXRGaWxlcyhwYXRoLCBcXFwiZGlyXFxcIiksIHJhbmtNZXRob2RNYXBbcmFua01ldGhvZF0pO1xcbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcXG4gICAgICAgIGJvb2tMaXN0LnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBcXFwi4oCc4oCc4oCd4oCdXFxcIiArIFxcXCLllaXpg73msqHmnInogLZcXFwiLmJpZygpLFxcbiAgICAgICAgICAgIHVybDogXFxcImhpa2VyOi8vZW1wdHlcXFwiLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF9jZW50ZXJfMVxcXCIsXFxuICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgbGluZVZpc2libGU6IGZhbHNlXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSk7XFxuXFxuICAgIH1cXG4gICAgbGV0IHBhZ2VVcmwgPSB0eXBlID09PSBcXFwibm92ZWxcXFwiID8gXFxcImhpa2VyOi8vcGFnZS9Ob3ZlbEJyb3dzZXIudmlld1xcXCIgOiBcXFwiaGlrZXI6Ly9wYWdlL0NvbWljQnJvd3Nlci52aWV3XFxcIjtcXG4gICAgZm9yIChsZXQgaXRlbSBvZiBsaXN0KSB7XFxuICAgICAgICBsZXQgcGljID0gZmlsZUV4aXN0KFxcXCJmaWxlOi8vXFxcIiArIGl0ZW0uZ2V0UGF0aCgpICsgXFxcIi9cXFwiICsgaXRlbS5nZXROYW1lKCkgKyBcXFwiLmpwZ1xcXCIpID8gaXRlbS5nZXRQYXRoKCkgKyBcXFwiL1xcXCIgKyBpdGVtLmdldE5hbWUoKSArIFxcXCIuanBnXFxcIiA6IENvbmZpZy5kZWZfUGljO1xcbiAgICAgICAgYm9va0xpc3QucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IGl0ZW0uZ2V0TmFtZSgpLFxcbiAgICAgICAgICAgIHBpY191cmw6IHBpYyxcXG4gICAgICAgICAgICB1cmw6IHBhZ2VVcmwgKyBcXFwiP3J1bGU9XFxcIiArIE1ZX1JVTEUudGl0bGUsXFxuICAgICAgICAgICAgY29sX3R5cGU6Y29sX3R5cGUsXFxuICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgbG9uZ0NsaWNrOiBbe1xcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFxcXCLliKDpmaRcXFwiLFxcbiAgICAgICAgICAgICAgICAgICAganM6ICQudG9TdHJpbmcoKHBhdGgpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJC5yZXF1aXJlKFxcXCJsb25nUHJlc3MuanNcXFwiKS5kZWxldGVGaWxlRm9yQm9vayhwYXRoKTtcXG4gICAgICAgICAgICAgICAgICAgIH0sIGl0ZW0uZ2V0UGF0aCgpKVxcbiAgICAgICAgICAgICAgICB9XSxcXG4gICAgICAgICAgICAgICAgaWQ6IGl0ZW0uZ2V0UGF0aCgpLFxcbiAgICAgICAgICAgICAgICBwYXRoOiBpdGVtLmdldFBhdGgoKSxcXG4gICAgICAgICAgICAgICAgbmFtZTogaXRlbS5nZXROYW1lKClcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9KTtcXG4gICAgfVxcbiAgICBpZiAocmFua0lzUmV2ZXJzZSkge1xcbiAgICAgICAgYm9va0xpc3QucmV2ZXJzZSgpO1xcbiAgICB9XFxuXFxuICAgIHNldFJlc3VsdChsYXlvdXQuY29uY2F0KGJvb2tMaXN0KSk7XFxufSkoKTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIiPmlofku7bmjpLluo9cIixcInBhdGhcIjpcImZpbGVSYW5rLmpzXCIsXCJydWxlXCI6XCJqczpcXG5jb25zdCBGaWxlID0gJC5yZXF1aXJlKFxcXCJGaWxlLmpzXFxcIik7XFxubGV0IGNobk51bUNoYXIgPSB7XFxuICAgIOmbtjogMCxcXG4gICAg5LiAOiAxLFxcbiAgICDkuow6IDIsXFxuICAgIOS4iTogMyxcXG4gICAg5ZubOiA0LFxcbiAgICDkupQ6IDUsXFxuICAgIOWFrTogNixcXG4gICAg5LiDOiA3LFxcbiAgICDlhas6IDgsXFxuICAgIOS5nTogOVxcbn07XFxuXFxubGV0IGNobk5hbWVWYWx1ZSA9IHtcXG4gICAg5Y2BOiB7XFxuICAgICAgICB2YWx1ZTogMTAsXFxuICAgICAgICBzZWNVbml0OiBmYWxzZVxcbiAgICB9LFxcbiAgICDnmb46IHtcXG4gICAgICAgIHZhbHVlOiAxMDAsXFxuICAgICAgICBzZWNVbml0OiBmYWxzZVxcbiAgICB9LFxcbiAgICDljYM6IHtcXG4gICAgICAgIHZhbHVlOiAxMDAwLFxcbiAgICAgICAgc2VjVW5pdDogZmFsc2VcXG4gICAgfSxcXG4gICAg5LiHOiB7XFxuICAgICAgICB2YWx1ZTogMTAwMDAsXFxuICAgICAgICBzZWNVbml0OiB0cnVlXFxuICAgIH0sXFxuICAgIOS6vzoge1xcbiAgICAgICAgdmFsdWU6IDEwMDAwMDAwMCxcXG4gICAgICAgIHNlY1VuaXQ6IHRydWVcXG4gICAgfVxcbn1cXG5cXG5mdW5jdGlvbiBDaGluZXNlVG9OdW1iZXIoY2huU3RyKSB7XFxuICAgIGxldCBydG4gPSAwO1xcbiAgICBsZXQgc2VjdGlvbiA9IDA7XFxuICAgIGxldCBudW1iZXIgPSAwO1xcbiAgICBsZXQgc2VjVW5pdCA9IGZhbHNlO1xcbiAgICBsZXQgc3RyID0gY2huU3RyLnNwbGl0KCcnKTtcXG5cXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcXG4gICAgICAgIGxldCBudW0gPSBjaG5OdW1DaGFyW3N0cltpXV07XFxuICAgICAgICBpZiAodHlwZW9mIG51bSAhPT0gJ3VuZGVmaW5lZCcpIHtcXG4gICAgICAgICAgICBudW1iZXIgPSBudW07XFxuICAgICAgICAgICAgaWYgKGkgPT09IHN0ci5sZW5ndGggLSAxKSB7XFxuICAgICAgICAgICAgICAgIHNlY3Rpb24gKz0gbnVtYmVyO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgbGV0IHVuaXQgPSBjaG5OYW1lVmFsdWVbc3RyW2ldXS52YWx1ZTtcXG4gICAgICAgICAgICBzZWNVbml0ID0gY2huTmFtZVZhbHVlW3N0cltpXV0uc2VjVW5pdDtcXG4gICAgICAgICAgICBpZiAoc2VjVW5pdCkge1xcbiAgICAgICAgICAgICAgICBzZWN0aW9uID0gKHNlY3Rpb24gKyBudW1iZXIpICogdW5pdDtcXG4gICAgICAgICAgICAgICAgcnRuICs9IHNlY3Rpb247XFxuICAgICAgICAgICAgICAgIHNlY3Rpb24gPSAwO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIHNlY3Rpb24gKz0gKG51bWJlciAqIHVuaXQpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBudW1iZXIgPSAwO1xcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIHJldHVybiBydG4gKyBzZWN0aW9uO1xcbn1cXG5cXG5mdW5jdGlvbiBuYW1lQ29tcGFyZShhLCBiKSB7XFxuICAgIGlmIChhID09IG51bGwgfHwgYiA9PSBudWxsKVxcbiAgICAgICAgcmV0dXJuIGEgPT0gbnVsbCA/IGIgPT0gbnVsbCA/IDAgOiAtMSA6IDE7XFxuXFxuICAgIGEgPSBhLnJlcGxhY2UoLyhb6Zu25LiA5LqM5LiJ5Zub5LqU5YWt5LiD5YWr5Lmd5Y2B55m+5Y2D5LiH5Lq/XSkvZywgZnVuY3Rpb24obWF0Y2gsIHAxLCBwMiwgcDMsIG9mZnNldCwgc3RyaW5nKSB7XFxuICAgICAgICAvLyBwMSBpcyBub25kaWdpdHMsIHAyIGRpZ2l0cywgYW5kIHAzIG5vbi1hbHBoYW51bWVyaWNzXFxuICAgICAgICByZXR1cm4gdi5DaGluZXNlVG9OdW1iZXIocDEpO1xcbiAgICB9KVxcbiAgICBiID0gYi5yZXBsYWNlKC8oW+mbtuS4gOS6jOS4ieWbm+S6lOWFreS4g+WFq+S5neWNgeeZvuWNg+S4h+S6v10pL2csIGZ1bmN0aW9uKG1hdGNoLCBwMSwgcDIsIHAzLCBvZmZzZXQsIHN0cmluZykge1xcbiAgICAgICAgLy8gcDEgaXMgbm9uZGlnaXRzLCBwMiBkaWdpdHMsIGFuZCBwMyBub24tYWxwaGFudW1lcmljc1xcbiAgICAgICAgcmV0dXJuIHYuQ2hpbmVzZVRvTnVtYmVyKHAxKTtcXG4gICAgfSlcXG5cXG4gICAgbGV0IE5VTUJFUlMgPSBqYXZhLnV0aWwucmVnZXguUGF0dGVybi5jb21waWxlKFxcXCIoPzw9XFxcXFxcXFxEKSg/PVxcXFxcXFxcZCl8KD88PVxcXFxcXFxcZCkoPz1cXFxcXFxcXEQpXFxcIik7XFxuICAgIGxldCBzcGxpdDEgPSBOVU1CRVJTLnNwbGl0KG5ldyBqYXZhLmxhbmcuU3RyaW5nKGEpKTtcXG4gICAgbGV0IHNwbGl0MiA9IE5VTUJFUlMuc3BsaXQobmV3IGphdmEubGFuZy5TdHJpbmcoYikpO1xcblxcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGgubWluKHNwbGl0MS5sZW5ndGgsIHNwbGl0Mi5sZW5ndGgpOyBpKyspIHtcXG4gICAgICAgIGxldCBjMSA9IHNwbGl0MVtpXS5jaGFyQ29kZUF0KDApO1xcbiAgICAgICAgbGV0IGMyID0gc3BsaXQyW2ldLmNoYXJDb2RlQXQoMCk7XFxuICAgICAgICBsZXQgY21wID0gMDtcXG4gICAgICAgIGxldCB6ZXJvQ2hhckNvZGUgPSAnMCcuY2hhckNvZGVBdCgwKTtcXG4gICAgICAgIGxldCBuaW5lQ2hhckNvZGUgPSAnOScuY2hhckNvZGVBdCgwKTtcXG5cXG4gICAgICAgIGlmIChjMSA+PSB6ZXJvQ2hhckNvZGUgJiYgYzEgPD0gbmluZUNoYXJDb2RlICYmIGMyID49IHplcm9DaGFyQ29kZSAmJiBjMiA8PSBuaW5lQ2hhckNvZGUpIHtcXG4gICAgICAgICAgICBjbXAgPSBuZXcgamF2YS5tYXRoLkJpZ0ludGVnZXIoc3BsaXQxW2ldKS5jb21wYXJlVG8obmV3IGphdmEubWF0aC5CaWdJbnRlZ2VyKHNwbGl0MltpXSkpO1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgaWYgKGNtcCA9PT0gMCkge1xcbiAgICAgICAgICAgIGxldCByZWdleCA9IC9bYS16QS1aMC05XS9cXG4gICAgICAgICAgICBsZXQgczEgPSBTdHJpbmcoc3BsaXQxW2ldKVxcbiAgICAgICAgICAgIGxldCBzMiA9IFN0cmluZyhzcGxpdDJbaV0pXFxuICAgICAgICAgICAgaWYgKHJlZ2V4LnRlc3QoczEpIHx8IHJlZ2V4LnRlc3QoczIpKSB7XFxuICAgICAgICAgICAgICAgIGNtcCA9IG5ldyBqYXZhLmxhbmcuU3RyaW5nKHNwbGl0MVtpXSkuY29tcGFyZVRvKG5ldyBqYXZhLmxhbmcuU3RyaW5nKHNwbGl0MltpXSkpO1xcbiAgICAgICAgICAgICAgICAvLyBjbXAgPSBzMS5sb2NhbGVDb21wYXJlKHMyLCAnZW4nKVxcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIGNtcCA9IHMxLmxvY2FsZUNvbXBhcmUoczIsICd6aCcpXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcblxcbiAgICAgICAgaWYgKGNtcCAhPT0gMCkge1xcbiAgICAgICAgICAgIHJldHVybiBjbXA7XFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgbGV0IGxlbmd0aENtcCA9IHNwbGl0MS5sZW5ndGggLSBzcGxpdDIubGVuZ3RoO1xcbiAgICAvLyBpZiAobGVuZ3RoQ21wICE9PSAwKSBsZW5ndGhDbXAgPSBsZW5ndGhDbXAgPiAwID8gLTEgOiAxO1xcbiAgICByZXR1cm4gbGVuZ3RoQ21wO1xcbn1cXG5cXG5mdW5jdGlvbiByYW5rKGxpc3QsIG0pIHtcXG4gICAgc3dpdGNoIChtKSB7XFxuICAgICAgICBjYXNlIFxcXCJ0eXBlXFxcIjpcXG4gICAgICAgICAgICByZXR1cm4gbGlzdDtcXG4gICAgICAgIGNhc2UgXFxcIm5hbWVcXFwiOlxcbiAgICAgICAgICAgIHJldHVybiBsaXN0LnNvcnQoKGEsIGIpID0+IG5hbWVDb21wYXJlKFN0cmluZyhhLmdldE5hbWUoKSksIFN0cmluZyhiLmdldE5hbWUoKSkpKTtcXG4gICAgICAgIGNhc2UgXFxcInNpemVcXFwiOlxcbiAgICAgICAgICAgIHJldHVybiBsaXN0LnNvcnQoKGEsIGIpID0+IEZpbGUuZ2V0VG90YWxTaXplT2ZGaWxlc0luRGlyKGEpIC0gRmlsZS5nZXRUb3RhbFNpemVPZkZpbGVzSW5EaXIoYikpO1xcbiAgICAgICAgY2FzZSBcXFwidGltZVxcXCI6XFxuICAgICAgICAgICAgcmV0dXJuIGxpc3Quc29ydCgoYSwgYikgPT4gYS5sYXN0TW9kaWZpZWQoKSAtIGIubGFzdE1vZGlmaWVkKCkpO1xcbiAgICAgICAgZGVmYXVsdDpcXG4gICAgICAgICAgICByZXR1cm4gbGlzdDtcXG4gICAgfVxcblxcbn1cXG4kLmV4cG9ydHM9cmFuaztcIn0se1wiY29sX3R5cGVcIjpcInRleHRfMVwiLFwibmFtZVwiOlwiI+a8q+eUu+mYheivu1wiLFwicGF0aFwiOlwiQ29taWNCcm93c2VyLnZpZXdcIixcInJ1bGVcIjpcImpzOlxcbmlmIChnZXRQYXJhbShcXFwiaGFzUGFyYW1zXFxcIikgPT09IFxcXCJ0cnVlXFxcIikge1xcbiAgICBNWV9QQVJBTVMgPSB7XFxuICAgICAgICBwYXRoOiBkZWNvZGVVUklDb21wb25lbnQoZ2V0UGFyYW0oXFxcInBhdGhcXFwiKSksXFxuICAgICAgICBuYW1lOiBkZWNvZGVVUklDb21wb25lbnQoZ2V0UGFyYW0oXFxcIm5hbWVcXFwiKSlcXG4gICAgfVxcbn1cXG5sZXQgcGF0aCA9IE1ZX1BBUkFNUy5wYXRoO1xcbnNldFBhZ2VUaXRsZShcXFwi5pys5ZywfFxcXCIgKyBNWV9QQVJBTVMubmFtZSlcXG5jb25zdCBGaWxlID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvRmlsZS5qc1xcXCIpO1xcbmNvbnN0IFRvb2wgPSAkLnJlcXVpcmUoXFxcImhpa2VyOi8vcGFnZS9Ub29sLmpzXFxcIik7XFxuY29uc3QgQ29uZmlnID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvQ29uZmlnLmpzb25cXFwiKTtcXG5cXG52YXIgbGF5b3V0ID0gW107XFxubGV0IG1vZGUgPSBnZXRNeVZhcihcXFwiLm1vZGVcXFwiLCBcXFwiMFxcXCIpO1xcbmxldCBpc1JldmVyc2UgPSBnZXRNeVZhcihcXFwiLmlzUmV2ZXJzZVxcXCIsIFxcXCIwXFxcIik7XFxuYWRkTGlzdGVuZXIoXFxcIm9uQ2xvc2VcXFwiLCAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgY2xlYXJNeVZhcihcXFwiLm1vZGVcXFwiKTtcXG4gICAgY2xlYXJNeVZhcihcXFwiLmlzUmV2ZXJzZVxcXCIpO1xcbn0pKTtcXG5jb25zdCBjb21pY1N0YXR1cyA9IG5ldyBNYXAoW1xcbiAgICBbXFxcIkFcXFwiLCBcXFwiXFxcIl0sXFxuICAgIFtcXFwiQlxcXCIsIFxcXCLigJjigJhb5pyq5a6M5oiQXeKAmeKAmVxcXCJdXFxuXSk7XFxuXFxuZnVuY3Rpb24gZ2V0VGl0bGUodGl0bGUpIHtcXG4gICAgbGV0IHRpdGxlcyA9IFRvb2wuc3BsaXQodGl0bGUsIFxcXCIkXFxcIiwgMik7XFxuICAgIHJldHVybiBjb21pY1N0YXR1cy5nZXQodGl0bGVzWzFdKSArIHRpdGxlc1syXSB8fCB0aXRsZTtcXG59XFxuZnVuY3Rpb24gZ2V0VGl0bGUyKHRpdGxlKXtcXG4gICAgbGV0IHRpdGxlcyA9IFRvb2wuc3BsaXQodGl0bGUsIFxcXCIkXFxcIiwgMik7XFxuICAgIHJldHVybiB0aXRsZXNbMl0gfHwgdGl0bGU7XFxufVxcbmxheW91dC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCLliKDpmaTmlbTmnKxcXFwiLFxcbiAgICB1cmw6ICQoXFxcIuehruiupOWIoOmZpOaVtOacrOa8q+eUu++8n1xcXCIpLmNvbmZpcm0oKHBhdGgpID0+IHtcXG4gICAgICAgIGNvbnN0IEZpbGUgPSAkLnJlcXVpcmUoXFxcImhpa2VyOi8vcGFnZS9GaWxlLmpzXFxcIik7XFxuICAgICAgICBpZiAoRmlsZS5kZWxldGVGaWxlcyhwYXRoKSkge1xcbiAgICAgICAgICAgIGJhY2soKTtcXG4gICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v5Yig6Zmk5oiQ5YqfXFxcIjtcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+WIoOmZpOWksei0pVxcXCI7XFxuICAgICAgICB9XFxuICAgIH0sIHBhdGgpLFxcbiAgICBjb2xfdHlwZTogXFxcInRleHRfMlxcXCJcXG59KTtcXG5sYXlvdXQucHVzaCh7XFxuICAgIHRpdGxlOiBbXFxcIueci+a8q+eUu1xcXCIsIFxcXCLliKDpmaTnq6DoioJcXFwiXVttb2RlXSxcXG4gICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChtb2RlKSA9PiB7XFxuICAgICAgICBwdXRNeVZhcihcXFwiLm1vZGVcXFwiLCBtb2RlID09PSBcXFwiMFxcXCIgPyBcXFwiMVxcXCIgOiBcXFwiMFxcXCIpO1xcbiAgICAgICAgcmVmcmVzaFBhZ2UodHJ1ZSk7XFxuICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiXFxuICAgIH0sIG1vZGUpLFxcbiAgICBjb2xfdHlwZTogXFxcInRleHRfMlxcXCJcXG59KTtcXG5sYXlvdXQucHVzaCh7XFxuICAgIGNvbF90eXBlOiBcXFwibGluZV9ibGFua1xcXCJcXG59KVxcbmxldCBtaGxpc3QgPSBGaWxlLmdldEZpbGVQYXRoKHBhdGgsIFxcXCJkaXJcXFwiKTtcXG5taGxpc3Quc29ydCgoYSwgYikgPT4ge1xcbiAgICBhID0gKGEubmFtZS5tYXRjaCgvXFxcXGQrLykgfHwgW10pWzBdIHx8IDA7XFxuICAgIGIgPSAoYi5uYW1lLm1hdGNoKC9cXFxcZCsvKSB8fCBbXSlbMF0gfHwgMDtcXG4gICAgcmV0dXJuIGEgLSBiO1xcbn0pO1xcblxcbmxheW91dC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCLigJzigJzigJ3igJ1cXFwiICsgXFxcIueroOiKgiBcXFwiLmJpZygpICsgKFxcXCLlhbHmnIk6XFxcIiArIG1obGlzdC5sZW5ndGggKyBcXFwi56ugXFxcIikuc21hbGwoKSxcXG4gICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChpc1JldmVyc2UpID0+IHtcXG4gICAgICAgIHB1dE15VmFyKFxcXCIuaXNSZXZlcnNlXFxcIiwgaXNSZXZlcnNlID09PSBcXFwiMFxcXCIgPyBcXFwiMVxcXCIgOiBcXFwiMFxcXCIpO1xcbiAgICAgICAgcmVmcmVzaFBhZ2UodHJ1ZSk7XFxuICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiXFxuICAgIH0sIGlzUmV2ZXJzZSksXFxuICAgIGNvbF90eXBlOiBcXFwidGV4dF8xXFxcIlxcbn0pO1xcbmxldCBhcnJheSA9IFtdO1xcblxcbmlmIChtb2RlID09PSBcXFwiMFxcXCIpIHtcXG4gICAgaWYgKENvbmZpZy5kZWZfaXNDb21pY0NvbXBhdGlibGUgPT09IFxcXCIwXFxcIikge1xcbiAgICAgICAgbGV0IGxhenkgPSAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKCgpID0+IHtcXG4gICAgICAgICAgICBjb25zdCBGaWxlID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvRmlsZS5qc1xcXCIpO1xcbiAgICAgICAgICAgIGxldCBmaWxlbGlzdCA9IEZpbGUuZ2V0RmlsZVBhdGgoaW5wdXQpO1xcbiAgICAgICAgICAgIGxldCBzaG9ydGVuID0gaW5wdXQucmVwbGFjZShnZXRQYXRoKFxcXCJoaWtlcjovL2ZpbGVzL1xcXCIpLnNsaWNlKDcpLFxcXCJoaWtlcjovL2ZpbGVzL1xcXCIpO1xcbiAgICAgICAgICAgIGxldCBwaWNsaXN0ID0gZmlsZWxpc3QubWFwKChpdGVtLCBpKSA9PiBzaG9ydGVuICsgXFxcIi9cXFwiICsgKGkgKyAxKSArIFxcXCIuanBnXFxcIik7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJwaWNzOi8vXFxcIiArIHBpY2xpc3Quam9pbihcXFwiJiZcXFwiKTtcXG4gICAgICAgIH0pO1xcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBtaGxpc3QpIHtcXG4gICAgICAgICAgICBsZXQgdGl0bGUgPSBnZXRUaXRsZShpdGVtLm5hbWUpO1xcbiAgICAgICAgICAgIGFycmF5LnB1c2goe1xcbiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXFxuICAgICAgICAgICAgICAgIHVybDogaXRlbS5wYXRoICsgbGF6eSxcXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6IENvbmZpZy5kZWZfVmlld19TdHlsZSxcXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgIH1cXG4gICAgfSBlbHNlIHtcXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgbWhsaXN0KSB7XFxuICAgICAgICAgICAgbGV0IHRpdGxlID0gZ2V0VGl0bGUoaXRlbS5uYW1lKTtcXG4gICAgICAgICAgICBhcnJheS5wdXNoKHtcXG4gICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxcbiAgICAgICAgICAgICAgICB1cmw6IFxcXCJoaWtlcjovL3BhZ2UvY29taWNDb21wYXRpYmxlLnZpZXcjYXV0b1BhZ2UjI3JlYWRUaGVtZSM/cGF0aD1cXFwiK2l0ZW0ucGF0aCxcXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6IENvbmZpZy5kZWZfVmlld19TdHlsZSxcXG4gICAgICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGl0ZW0ucGF0aCxcXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBnZXRUaXRsZTIoaXRlbS5uYW1lKVxcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICB9XFxuICAgIH1cXG5cXG59IGVsc2Uge1xcbiAgICBmb3IgKGxldCBpdGVtIG9mIG1obGlzdCkge1xcbiAgICAgICAgbGV0IG5hbWUgPSBnZXRUaXRsZTIoaXRlbS5uYW1lKTtcXG4gICAgICAgIGFycmF5LnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBuYW1lLFxcbiAgICAgICAgICAgIHVybDogJChcXFwi56Gu6K6k5Yig6ZmkW1xcXCIgKyBuYW1lICsgXFxcIl3vvJ9cXFwiKS5jb25maXJtKChwYXRoKSA9PiB7XFxuICAgICAgICAgICAgICAgIGNvbnN0IEZpbGUgPSAkLnJlcXVpcmUoXFxcImhpa2VyOi8vcGFnZS9GaWxlLmpzXFxcIik7XFxuICAgICAgICAgICAgICAgIGlmIChGaWxlLmRlbGV0ZUZpbGVzKHBhdGgpKSB7XFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSh0cnVlKTtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/liKDpmaTmiJDlip9cXFwiO1xcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+WIoOmZpOWksei0pVxcXCI7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9LCBpdGVtLnBhdGgpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBDb25maWcuZGVmX1ZpZXdfU3R5bGVcXG4gICAgICAgIH0pO1xcbiAgICB9XFxufVxcbmlmIChpc1JldmVyc2UgPT09IFxcXCIxXFxcIikge1xcbiAgICBhcnJheS5yZXZlcnNlKCk7XFxufVxcbmxheW91dC5wdXNoLmFwcGx5KGxheW91dCwgYXJyYXkpO1xcbnNldFJlc3VsdChsYXlvdXQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiI+S4u+mhtemdolwiLFwicGF0aFwiOlwiTWFpbi52aWV3XCIsXCJydWxlXCI6XCJqczpcXG5mdW5jdGlvbiBtYWluKCkge1xcbiAgICB2YXIgbGF5b3V0ID0gW107XFxuICAgIGNvbnN0IEZpbGUgPSAkLnJlcXVpcmUoXFxcImhpa2VyOi8vcGFnZS9GaWxlLmpzXFxcIik7XFxuICAgIGNvbnN0IENvbmZpZyA9ICQucmVxdWlyZShcXFwiaGlrZXI6Ly9wYWdlL0NvbmZpZy5qc29uXFxcIik7XFxuICAgIGxldCB0eXBlID0gZ2V0TXlWYXIoXFxcIi50eXBlXFxcIiwgZ2V0SXRlbShcXFwibWFpbjp0eXBlXFxcIiwgQ29uZmlnLmRlZl9Mb3JkX1R5cGUpKTtcXG4gICAgbGV0IHRnbnVtID0gZ2V0TXlWYXIoXFxcIi50Z251bVxcXCIsIFxcXCIwXFxcIik7XFxuICAgIGFkZExpc3RlbmVyKFxcXCJvbkNsb3NlXFxcIiwgJC50b1N0cmluZygoTVlfSUQpID0+IHtcXG4gICAgICAgIGNsZWFyTXlWYXIoXFxcInNlYXJjaEtleVxcXCIpO1xcbiAgICAgICAgY2xlYXJNeVZhcihcXFwiLnRnbnVtXFxcIik7XFxuICAgIH0pKTtcXG4gICAgbGV0IHRhZyA9IEZpbGUuZ2V0RmlsZVBhdGgoQ29uZmlnW3R5cGUgKyBcXFwiUGF0aFxcXCJdLCBcXFwiZGlyXFxcIik7XFxuICAgIGlmICh0YWcubGVuZ3RoID09PSAwKSB7XFxuICAgICAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IFxcXCLimpnvuI9cXFwiLFxcbiAgICAgICAgICAgIHVybDogXFxcImhpa2VyOi8vcGFnZS9TZXR0aW5nL01vcmUudmlldyNub1JlZnJlc2gjI25vUmVjb3JkSGlzdG9yeSMjbm9IaXN0b3J5Iz9zZXR0aW5nVHlwZT1jb250ZW50c1xcXCIsXFxuICAgICAgICAgICAgZGVzYzogQ29uZmlnLmhvbWVQYXRoLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCJcXG4gICAgICAgIH0pO1xcbiAgICAgICAgbGF5b3V0LnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiAnPGgxIHN0eWxlPVxcXCJ0ZXh0LWFsaWduOiBjZW50ZXI7XFxcIj7llaXpg73msqHmnInogLY8L2gxPicsXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJyaWNoX3RleHRcXFwiXFxuICAgICAgICB9KTtcXG4gICAgICAgIHJldHVybiBzZXRSZXN1bHQobGF5b3V0KTtcXG4gICAgfVxcbiAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICB1cmw6ICdcXFwiaGlrZXI6Ly9zZWFyY2g/cz1cXFwiK2lucHV0JyxcXG4gICAgICAgIGRlc2M6IFxcXCLmkJzkvaDmg7PopoHnmoQjXFxcIiArIHR5cGUgKyBcXFwiIy4uLi4uLlxcXCIsXFxuICAgICAgICB0aXRsZTogXFxcIvCflI1cXFwiLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJpbnB1dFxcXCIsXFxuICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgIHJ1bGVzOiAkLnRvU3RyaW5nKCh0YWcsIHR5cGUpID0+IHtcXG4gICAgICAgICAgICAgICAgbGV0IGFycjEgPSBbXTtcXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YWcubGVuZ3RoOyBpKyspIHtcXG4gICAgICAgICAgICAgICAgICAgIGFycjEucHVzaCh7XFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxcInRpdGxlXFxcIjogdGFnW2ldLm5hbWUsXFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxcInNlYXJjaF91cmxcXFwiOiBcXFwiaGlrZXI6Ly9lbXB0eT9pc0FsbD0xJnNlYXJjaFRlcm1zPSoqJnR5cGU9XFxcIiArIHR5cGUsXFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxcInNlYXJjaEZpbmRcXFwiOiBcXFwianM6JC5yZXF1aXJlKCdoaWtlcjovL3BhZ2UvU2VhcmNoLnZpZXc/cnVsZT0nK01ZX1JVTEUuX3RpdGxlKTtcXFwiXFxuICAgICAgICAgICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJyMSk7XFxuICAgICAgICAgICAgfSwgdGFnLCB0eXBlKSxcXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6IGdldE15VmFyKCdzZWFyY2hLZXknLCAnJyksXFxuICAgICAgICAgICAgb25DaGFuZ2U6IFxcXCJwdXRNeVZhcignc2VhcmNoS2V5JyxpbnB1dClcXFwiXFxuICAgICAgICB9XFxuICAgIH0pO1xcbiAgICBsZXQgY29sX3R5cGUgPSBnZXRJdGVtKFxcXCJib29rcmFjazpjb2xfdHlwZVxcXCIsIFxcXCJtb3ZpZV8zX21hcnF1ZWVcXFwiKTtcXG4gICAgbGV0IGNvbFR5cGVzID0gW1xcXCJtb3ZpZV8yXFxcIiwgXFxcIm1vdmllXzNcXFwiLCBcXFwibW92aWVfM19tYXJxdWVlXFxcIiwgXFxcIm1vdmllXzFfdmVydGljYWxfcGljXFxcIiwgXFxcInBpY18yX2NhcmRcXFwiXTtcXG4gICAgbGF5b3V0LnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFxcXCLwn6epXFxcIixcXG4gICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCIsXFxuICAgICAgICB1cmw6ICQoY29sVHlwZXMubWFwKHYgPT4gdiA9PT0gY29sX3R5cGUgPyBcXFwi4oCc4oCcXFxcIiArIHYgKyBcXFwi4oCd4oCdXFxcIiA6IHYpKS5zZWxlY3QoKG5hbWUpID0+IHtcXG4gICAgICAgICAgICBpZiAoL+KAnOKAnC4qP+KAneKAnS8udGVzdChpbnB1dCkpIHJldHVybjtcXG4gICAgICAgICAgICBzZXRJdGVtKFxcXCJib29rcmFjazpjb2xfdHlwZVxcXCIsIGlucHV0KTtcXG4gICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcbiAgICAgICAgfSlcXG4gICAgfSk7XFxuICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBcXFwi4pqZ77iPXFxcIixcXG4gICAgICAgIHVybDogXFxcImhpa2VyOi8vcGFnZS9TZXR0aW5nL01vcmUudmlldyNub1JlZnJlc2gjI25vUmVjb3JkSGlzdG9yeSMjbm9IaXN0b3J5Iz9zZXR0aW5nVHlwZT1jb250ZW50c1xcXCIsXFxuICAgICAgICBkZXNjOiBDb25maWcuaG9tZVBhdGgsXFxuICAgICAgICBjb2xfdHlwZTogXFxcInNjcm9sbF9idXR0b25cXFwiXFxuICAgIH0pO1xcbiAgICBmb3IgKGxldCBpIGluIHRhZykge1xcbiAgICAgICAgbGV0IGl0ID0gdGFnW2ldO1xcbiAgICAgICAgaWYgKHRnbnVtID09PSBpKSB7XFxuICAgICAgICAgICAgbGF5b3V0LnB1c2goe1xcbiAgICAgICAgICAgICAgICB0aXRsZTogXFxcIuKAnOKAnFxcXCIgKyBpdC5uYW1lICsgXFxcIuKAneKAnVxcXCIsXFxuICAgICAgICAgICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCIsXFxuICAgICAgICAgICAgICAgIHVybDogJChbXFxcIuWIoOmZpOivpeebruW9lVxcXCIsIFxcXCLmiZPlvIDkuabmnrZcXFwiXSwgMSwgXFxcIumAieaLqeaTjeS9nFxcXCIpLnNlbGVjdCgoaXQsIHR5cGUpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIGlmIChcXFwi5Yig6Zmk6K+l55uu5b2VXFxcIiA9PT0gaW5wdXQpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3JldHVybiB0aGVuKFtcXFwi6K+l5pON5L2c5LiN5Lya5Yig6Zmk5bCP56iL5bqP77yM5L2G6K+l5bCP56iL5bqP5LiL6L2955qE5omA5pyJ5ryr55S75bCG6KKr5Yig6ZmkXFxcIl0pO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkKFxcXCLor6Xmk43kvZzkuI3kvJrliKDpmaTlsI/nqIvluo/vvIzkvYbor6XlsI/nqIvluo/kuIvovb3nmoTmiYDmnIkg5ryr55S7L+Wwj+ivtCDlsIbooqvliKDpmaRcXFwiKS5jb25maXJtKChwYXRoKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IEZpbGUgPSAkLnJlcXVpcmUoXFxcImhpa2VyOi8vcGFnZS9GaWxlLmpzXFxcIik7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChGaWxlLmRlbGV0ZUZpbGVzKHBhdGgpKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhck15VmFyKFxcXCIudGdudW1cXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKCk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v5Yig6Zmk5oiQ5YqfXFxcIjtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/liKDpmaTlpLHotKVcXFwiO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgaXQucGF0aCk7XFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9wYWdlL0Jvb2tyYWNrLnZpZXc/cnVsZT3mn5DogZrlkIgmcnVsZU5hbWU9XFxcIiArIGl0Lm5hbWUgKyBcXFwiJnR5cGU9XFxcIiArIHR5cGU7XFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH0sIGl0LCB0eXBlKVxcbiAgICAgICAgICAgIH0pO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiBpdC5uYW1lLFxcbiAgICAgICAgICAgICAgICBjb2xfdHlwZTogXFxcInNjcm9sbF9idXR0b25cXFwiLFxcbiAgICAgICAgICAgICAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoaSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICBwdXRNeVZhcihcXFwiLnRnbnVtXFxcIiwgaSk7XFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgICAgICAgICAgfSwgaSksXFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgbGV0IHBhdGggPSB0YWdbdGdudW1dLnBhdGg7XFxuICAgIGxldCBtaGxpc3QgPSBGaWxlLmdldEZpbGVQYXRoKHBhdGgsIFxcXCJkaXJcXFwiKTtcXG5cXG4gICAgaWYgKG1obGlzdC5sZW5ndGggPT09IDApIHtcXG4gICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogXFxcIuKAnOKAnOKAneKAnVxcXCIgKyBcXFwi5ZWl6YO95rKh5pyJ6IC2XFxcIi5iaWcoKSxcXG4gICAgICAgICAgICB1cmw6IFxcXCJoaWtlcjovL2VtcHR5XFxcIixcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcInRleHRfY2VudGVyXzFcXFwiLFxcbiAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgIGxpbmVWaXNpYmxlOiBmYWxzZVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pO1xcbiAgICAgICAgcmV0dXJuIHNldFJlc3VsdChsYXlvdXQpO1xcbiAgICB9XFxuXFxuICAgIGxldCBwYWdlVXJsID0gdHlwZSA9PT0gXFxcIm5vdmVsXFxcIiA/IFxcXCJoaWtlcjovL3BhZ2UvTm92ZWxCcm93c2VyLnZpZXdcXFwiIDogXFxcImhpa2VyOi8vcGFnZS9Db21pY0Jyb3dzZXIudmlld1xcXCI7XFxuICAgIGZvciAobGV0IGl0ZW0gb2YgbWhsaXN0KSB7XFxuICAgICAgICBsZXQgcGljID0gZmlsZUV4aXN0KFxcXCJmaWxlOi8vXFxcIiArIGl0ZW0ucGF0aCArIFxcXCIvXFxcIiArIGl0ZW0ubmFtZSArIFxcXCIuanBnXFxcIikgPyBpdGVtLnBhdGggKyBcXFwiL1xcXCIgKyBpdGVtLm5hbWUgKyBcXFwiLmpwZ1xcXCIgOiBDb25maWcuZGVmX1BpYztcXG4gICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogaXRlbS5uYW1lLFxcbiAgICAgICAgICAgIHBpY191cmw6IHBpYyxcXG4gICAgICAgICAgICB1cmw6IHBhZ2VVcmwgKyBcXFwiP3J1bGU9XFxcIiArIE1ZX1JVTEUudGl0bGUsXFxuICAgICAgICAgICAgY29sX3R5cGU6IGNvbF90eXBlLFxcbiAgICAgICAgICAgIGV4dHJhOiBPYmplY3QuYXNzaWduKGl0ZW0sIHtcXG4gICAgICAgICAgICAgICAgbG9uZ0NsaWNrOiBbe1xcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFxcXCLliKDpmaRcXFwiLFxcbiAgICAgICAgICAgICAgICAgICAganM6ICQudG9TdHJpbmcoKHBhdGgpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJC5yZXF1aXJlKFxcXCJsb25nUHJlc3MuanNcXFwiKS5kZWxldGVGaWxlRm9yQm9vayhwYXRoKVxcbiAgICAgICAgICAgICAgICAgICAgfSwgaXRlbS5wYXRoKVxcbiAgICAgICAgICAgICAgICB9XSxcXG4gICAgICAgICAgICAgICAgaWQ6IGl0ZW0ucGF0aFxcbiAgICAgICAgICAgIH0pXFxuICAgICAgICB9KTtcXG4gICAgfVxcbiAgICBzZXRSZXN1bHQobGF5b3V0KTtcXG59XFxuXFxubWFpbigpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiMS5oYW5pbWUx6aaW6aG15Li76aG1XCIsXCJwYXRoXCI6XCJoYW5pbWUxXCIsXCJydWxlXCI6XCJpZiAocGFnZSA9PSAxKSB7XFxuICAgIGFkZExpc3RlbmVyKCdvbkNsb3NlJywgJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICBjbGVhclZhcihcXFwiY29vXFxcIik7XFxuICAgIH0pKTtcXG5cXG4gICAgZnVuY3Rpb24gZXJyb3IoKSB7XFxuICAgICAgICB2YXIgY29vID0gZ2V0VmFyKFxcXCJjb29cXFwiLCBcXFwiXFxcIik7XFxuICAgICAgICBzZXRSZXN1bHQoW3tcXG4gICAgICAgICAgICB1cmw6IFxcXCJodHRwczovL2hhbmltZTEubWUvXFxcIixcXG4gICAgICAgICAgICDCoMKgwqBjb2xfdHlwZTogXFxcIng1X3dlYnZpZXdfc2luZ2xlXFxcIixcXG4gICAgICAgICAgICBkZXNjOiAnZmxvYXQmJjMyMCcsXFxuICAgICAgICAgICAgwqDCoMKgZXh0cmE6IHvCoMKgwqDCoMKgwqDCoFxcbiAgICAgICAgICAgICAgICBqczogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGZiYS5nZXRDb29raWUobG9jYXRpb24uaHJlZilcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYmEucHV0VmFyKFxcXCJjb29cXFwiLCBmKVxcbiAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0sIHvCoMKgwqBcXG4gICAgICAgICAgICB0aXRsZTogY29vLmluY2x1ZGVzKCdjZl9jbGVhcmFuY2UnKSA9PSB0cnVlID8gJ+KAnOKAnOiOt+WPluaIkOWKn++8jOWNs+WwhumAgOWHuuKAneKAnScgOiAn4oCc4oCc4oCd4oCdPGZvbnQgY29sb3IgPSBcXFwicmVkXFxcIiA+54K55Ye76L+Z6YeMKOi/h+WujOS4iumdoueahOmqjOivgeKYne+4jyznhLblkI7kuIDnm7TngrkpPC9mb250PicsXFxuICAgICAgICAgICAgdXJsOiAkKCcnKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKClcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIlxcbiAgICAgICAgICAgIH0pLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF9jZW50ZXJfMVxcXCIsXFxuICAgICAgICB9LCB7wqDCoMKgXFxuICAgICAgICAgICAgcGljX3VybDogJ2h0dHBzOi8vcDkuaXRjLmNuL3FfNzAvaW1hZ2VzMDMvMjAyMTEwMjYvN2ZmNjBmYzdmMzY5NDBhZTgyZjU3MWFhYzczY2QwNzEuZ2lmJyxcXG4gICAgICAgICAgICB1cmw6ICd0b2FzdDovL+eCueaIkeW5suWYm++8ge+8ge+8geayoeingei/h+acrOW4heeGiu+8nycsXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJwaWNfMV9mdWxsXFxcIixcXG4gICAgICAgIH1dKTtcXG4gICAgICAgIGlmIChjb28ubWF0Y2goL2NmX2NsZWFyYW5jZS8pKSB7XFxuICAgICAgICAgICAgdmFyIGNvb2tpZSA9IFxcXCJjZl9jbGVhcmFuY2VcXFwiICsgY29vLm1hdGNoKC9jZl9jbGVhcmFuY2UoLio/KVxcXFw7LylbMV07XFxuICAgICAgICAgICAgc2F2ZUZpbGUoXFxcIkNvb2tpZS50eHRcXFwiLCBjb29raWUsIDApO1xcbiAgICAgICAgICAgIGphdmEubGFuZy5UaHJlYWQuc2xlZXAoMTAwMCk7XFxuICAgICAgICAgICAgYmFjayhmYWxzZSk7XFxuICAgICAgICAgICAgdG9hc3QoJ+ivt+mHjeaWsOi/m+WFpScpO1xcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIHZhciBocmVmID0gJ2h0dHBzOi8vaGFuaW1lMS5tZS8nO1xcbiAgICB2YXIgaHRtbCA9IGZldGNoKGhyZWYsIHtcXG4gICAgICAgIGhlYWRlcnM6IHtcXG4gICAgICAgICAgICBDb29raWU6IHJlYWRGaWxlKFxcXCJDb29raWUudHh0XFxcIiwgMClcXG4gICAgICAgIH0sXFxuICAgIH0pO1xcbiAgICB2YXIgc3RyID0gXFxcIlxcXFx0XFxcIjtcXG4gICAgdHJ5IHtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6ICfigJzigJzigJ3igJ0nICsgYDxmb250IGNvbG9yID0gXFxcIiR7Z2V0UmFuZG9tQ29sb3IoKX1cXFwiID5gICsgJ+acgOaWsDwvZm9udD4nICsgYCR7c3RyLnJlcGVhdCg0MSl9YCArICc8c21hbGw+PGZvbnQgY29sb3I9XFxcInJlZFxcXCI+W+abtOWkml08L2ZvbnQ+PC9zbWFsbD4nLFxcbiAgICAgICAgICAgIHVybDogJCgnJykubGF6eVJ1bGUoKCkgPT4ge1xcbiAgICAgICAgICAgICAgICBzdG9yYWdlMC5wdXRNeVZhcignaW5kZXgnLCAxKVxcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSgpXFxuICAgICAgICAgICAgICAgIHB1dFZhcihcXFwiV2FyZWhvdXNlLmdvb2RcXFwiLCBcXFwiXFxcIilcXG4gICAgICAgICAgICAgICAgcmV0dXJuICdoaWtlcjovL2VtcHR5J1xcbiAgICAgICAgICAgIH0pLFxcbiAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgIGxpbmVWaXNpYmxlOiBmYWxzZVxcbiAgICAgICAgICAgIH0sXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzFcXFwiXFxuICAgICAgICB9KVxcbiAgICAgICAgdmFyIGxpc3QxID0gcGRmYShodG1sLCAnYm9keSYmLmhvbWUtcm93cy12aWRlb3Mtd3JhcHBlciwxJiYuaGlkZGVuLXhsJyk7XFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSA3OyBpKyspIHtcXG4gICAgICAgICAgICB2YXIgaW1nID0gcGRmaChsaXN0MVtpXSwgJ2ltZywxJiZzcmMnKS5yZXBsYWNlKFxcXCJsLmpwZ1xcXCIsIFxcXCJoLmpwZ1xcXCIpO1xcbiAgICAgICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiBwZGZoKGxpc3QxW2ldLCAnLmNhcmQtbW9iaWxlLXRpdGxlJiZUZXh0JyksXFxuICAgICAgICAgICAgICAgIGRlc2M6ICfop4LnnIvmrKHmlbDvvJonICsgcGRmaChsaXN0MVtpXSwgJy5jYXJkLW1vYmlsZS1kdXJhdGlvbiwxJiZUZXh0JyksXFxuICAgICAgICAgICAgICAgIHBpY191cmw6IGltZyxcXG4gICAgICAgICAgICAgICAgdXJsOiAnaGlrZXI6Ly9wYWdlL2ppZXhpP3VybD0nICsgcGRmaChsaXN0MVtpXSwgJ2EsMCYmaHJlZicpICsgJyNnYW1lVGhlbWUjI25vUmVjb3JkSGlzdG9yeSMnLFxcbiAgICAgICAgICAgICAgICBjb2xfdHlwZTogJ21vdmllXzInLFxcbiAgICAgICAgICAgIH0pO1xcbiAgICAgICAgfVxcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogJ+KAnOKAnOKAneKAnScgKyBgPGZvbnQgY29sb3IgPSBcXFwiJHtnZXRSYW5kb21Db2xvcigpfVxcXCIgPmAgKyAn5paw55Wq6aKE5ZGKPC9mb250PicgKyBgJHtzdHIucmVwZWF0KDM3KX1gICsgJzxzbWFsbD48Zm9udCBjb2xvcj1cXFwicmVkXFxcIj5b5pu05aSaXTwvZm9udD48L3NtYWxsPicsXFxuICAgICAgICAgICAgdXJsOiAkKCcnKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgICAgICAgICAgIHN0b3JhZ2UwLnB1dE15VmFyKCdpbmRleCcsIDEpXFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKClcXG4gICAgICAgICAgICAgICAgcHV0TXlWYXIoJ2hlYWRlci5mb2xkJywgJzAnKVxcbiAgICAgICAgICAgICAgICBwdXRWYXIoXFxcIldhcmVob3VzZS5nb29kXFxcIiwgXFxcIuaWsOeVqumihOWRilxcXCIpXFxuICAgICAgICAgICAgICAgIHJldHVybiAnaGlrZXI6Ly9lbXB0eSdcXG4gICAgICAgICAgICB9KSxcXG4gICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICBsaW5lVmlzaWJsZTogZmFsc2VcXG4gICAgICAgICAgICB9LFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF8xXFxcIlxcbiAgICAgICAgfSlcXG4gICAgICAgIHZhciBsaXN0ID0gcGRmYShodG1sLCAnYm9keSYmLmhvbWUtcm93cy12aWRlb3Mtd3JhcHBlciwxMCYmYScpLnJldmVyc2UoKTtcXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgNjsgaisrKSB7XFxuICAgICAgICAgICAgdmFyIHBpYyA9IHBkZmgobGlzdFtqXSwgJ2ltZyYmc3JjJyk7XFxuICAgICAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICAgICAgdGl0bGU6IHBkZmgobGlzdFtqXSwgJ1RleHQnKSxcXG4gICAgICAgICAgICAgICAgcGljX3VybDogcGljLFxcbiAgICAgICAgICAgICAgICB1cmw6ICdoaWtlcjovL3BhZ2UvamlleGk/dXJsPScgKyBwZGZoKGxpc3Rbal0sICdhJiZocmVmJykgKyAnI2dhbWVUaGVtZSMjbm9SZWNvcmRIaXN0b3J5IycsXFxuICAgICAgICAgICAgICAgIGNvbF90eXBlOiAnbW92aWVfM19tYXJxdWVlJyxcXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgIH1cXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6ICfigJzigJzigJ3igJ0nICsgYDxmb250IGNvbG9yID0gXFxcIiR7Z2V0UmFuZG9tQ29sb3IoKX1cXFwiID5gICsgJ+S7luS7rOWcqOecizwvZm9udD4nICsgYCR7c3RyLnJlcGVhdCgzNyl9YCArICc8c21hbGw+PGZvbnQgY29sb3I9XFxcInJlZFxcXCI+W+WIt+aWsF08L2ZvbnQ+PC9zbWFsbD4nLFxcbiAgICAgICAgICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgICAgICB9KSxcXG4gICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICBsaW5lVmlzaWJsZTogZmFsc2VcXG4gICAgICAgICAgICB9LFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF8xXFxcIlxcbiAgICAgICAgfSlcXG4gICAgICAgIHZhciBsaXN0MSA9IHBkZmEoaHRtbCwgJ2JvZHkmJi5ob21lLXJvd3MtdmlkZW9zLXdyYXBwZXIsNCYmLmhpZGRlbi14bCcpO1xcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gNzsgaSsrKSB7XFxuICAgICAgICAgICAgdmFyIGltZyA9IHBkZmgobGlzdDFbaV0sICdpbWcsMSYmc3JjJykucmVwbGFjZShcXFwibC5qcGdcXFwiLCBcXFwiaC5qcGdcXFwiKTtcXG4gICAgICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgICAgICB0aXRsZTogcGRmaChsaXN0MVtpXSwgJy5jYXJkLW1vYmlsZS10aXRsZSYmVGV4dCcpLFxcbiAgICAgICAgICAgICAgICBkZXNjOiAn6KeC55yL5qyh5pWw77yaJyArIHBkZmgobGlzdDFbaV0sICcuY2FyZC1tb2JpbGUtZHVyYXRpb24sMSYmVGV4dCcpLFxcbiAgICAgICAgICAgICAgICBwaWNfdXJsOiBpbWcsXFxuICAgICAgICAgICAgICAgIHVybDogJ2hpa2VyOi8vcGFnZS9qaWV4aT91cmw9JyArIHBkZmgobGlzdDFbaV0sICdhLDAmJmhyZWYnKSArICcjZ2FtZVRoZW1lIyNub1JlY29yZEhpc3RvcnkjJyxcXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6ICdtb3ZpZV8yJyxcXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgIH1cXG4gICAgfSBjYXRjaCAoZSkge1xcbiAgICAgICAgZXJyb3IoKVxcbiAgICB9XFxufVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiYTEu5p+Q6Imy572RXCIsXCJwYXRoXCI6XCJzZXdhbmdcIixcInJ1bGVcIjpcImpzOlxcbnZhciBkID0gW107XFxuY29uc3QgcGFnZSA9IE1ZX1BBR0U7XFxubGV0IGRhdGFUeXBlID0gZ2V0VmFyKFxcXCJXYXJlaG91c2UudHlwZVxcXCIsIFxcXCIzXFxcIik7XFxubGV0IGhyZWYgPSAnaHR0cHM6Ly8xLnNld2FuZzM5Lm5ldC9saXN0LycgKyBkYXRhVHlwZSArICctJyArIHBhZ2UgKyAnP190Lmh0bWwnO1xcbmFkZExpc3RlbmVyKCdvbkNsb3NlJywgJC50b1N0cmluZygoKSA9PiB7XFxuICAgIGNsZWFyVmFyKFxcXCJXYXJlaG91c2UudHlwZVxcXCIpO1xcbn0pKTtcXG5cXG5mdW5jdGlvbiB0YWIoYXJyLCB0eXBlLCBjb250cmFzdCkge1xcbiAgICBmb3IgKGxldCBpdGVtIG9mIGFycikge1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogaXRlbVsxXSA9PT0gY29udHJhc3QgPyBcXFwi4oCc4oCcXFxcIiArIGl0ZW1bMF0gKyBcXFwi4oCd4oCdXFxcIiA6IGl0ZW1bMF0sXFxuICAgICAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChrZXksIHR5cGUpID0+IHtcXG4gICAgICAgICAgICAgICAgcHV0VmFyKHR5cGUsIGtleSk7XFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgICAgICB9LCBpdGVtWzFdLCB0eXBlKSxcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcInNjcm9sbF9idXR0b25cXFwiXFxuICAgICAgICB9KTtcXG4gICAgfVxcbiAgICBkLnB1c2goe1xcbiAgICAgICAgY29sX3R5cGU6IFxcXCJibGFua19ibG9ja1xcXCJcXG4gICAgfSk7XFxufVxcbnZhciBodG1sID0gZmV0Y2goaHJlZilcXG5cXG5pZiAocGFnZSA9PSAxKSB7XFxuICAgIHRhYihbXFxuICAgICAgICBbXFxcIuWbveS6p+eyvuWTgVxcXCIsIFxcXCIzXFxcIl0sXFxuICAgICAgICBbXFxcIuS4reaWh+Wtl+W5lVxcXCIsIFxcXCI0XFxcIl0sXFxuICAgICAgICBbXFxcIuaXpemfqeeyvuWTgVxcXCIsIFxcXCI1XFxcIl0sXFxuICAgICAgICBbXFxcIuasp+e+jueyvuWTgVxcXCIsIFxcXCI2XFxcIl0sXFxuICAgICAgICBbXFxcIueyvuW9qeWKqOa8q1xcXCIsIFxcXCI3XFxcIl1cXG4gICAgXSwgXFxcIldhcmVob3VzZS50eXBlXFxcIiwgZGF0YVR5cGUpO1xcbn1cXG52YXIgbGlzdCA9IHBhcnNlRG9tRm9yQXJyYXkoaHRtbCwgJ2JvZHkmJi52aWRlby1pbWctYm94Jyk7XFxuZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgIGxldCBzcmMgPSBwYXJzZURvbShsaXN0W2pdLCBcXFwiaW1nJiZkYXRhLXNyY1xcXCIpO1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IHBhcnNlRG9tRm9ySHRtbChsaXN0W2pdLCAnaDYmJlRleHQnKSxcXG4gICAgICAgIGRlc2M6IHBhcnNlRG9tRm9ySHRtbChsaXN0W2pdLCAnLmxhYmVsJiZUZXh0JyksXFxuICAgICAgICBwaWNfdXJsOiBzcmMsXFxuICAgICAgICB1cmw6IHNyYy5yZXBsYWNlKFxcXCIxLmpwZ1xcXCIsIFxcXCJtM3U4L2luZGV4Lm0zdThcXFwiKSxcXG4gICAgICAgIGNvbF90eXBlOiBcXFwibW92aWVfMlxcXCJcXG4gICAgfSk7XFxufVxcbnNldFJlc3VsdChkKTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIjkuMThI5ryr55S7XCIsXCJwYXRoXCI6XCIxOEhcIixcInJ1bGVcIjpcImpzOlxcbnZhciBkID0gW107XFxuY29uc3QgcGFnZSA9IE1ZX1BBR0U7XFxuc2V0UGFnZVRpdGxlKFxcXCIxOEjmvKvnlLtcXFwiKTtcXG5sZXQgZGF0YVR5cGUgPSBnZXRWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIiwgXFxcIjE4SF9saXN0XFxcIik7XFxubGV0IGhyZWYgPSAnaHR0cHM6Ly8xOGgubW0tY2cuY29tL3poLycgKyBkYXRhVHlwZSArICcvYWxsLycgKyBwYWdlICsgJy5odG1sJztcXG5hZGRMaXN0ZW5lcignb25DbG9zZScsICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICBjbGVhclZhcihcXFwiV2FyZWhvdXNlLnR5cGVcXFwiKTtcXG59KSk7XFxuXFxuZnVuY3Rpb24gdGFiKGFyciwgdHlwZSwgY29udHJhc3QpIHtcXG4gICAgZm9yIChsZXQgaXRlbSBvZiBhcnIpIHtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IGl0ZW1bMV0gPT09IGNvbnRyYXN0ID8gXFxcIuKAnOKAnFxcXCIgKyBpdGVtWzBdICsgXFxcIuKAneKAnVxcXCIgOiBpdGVtWzBdLFxcbiAgICAgICAgICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZSgoa2V5LCB0eXBlKSA9PiB7XFxuICAgICAgICAgICAgICAgIHB1dFZhcih0eXBlLCBrZXkpO1xcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgfSwgaXRlbVsxXSwgdHlwZSksXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJzY3JvbGxfYnV0dG9uXFxcIlxcbiAgICAgICAgfSk7XFxuICAgIH1cXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIGNvbF90eXBlOiBcXFwiYmxhbmtfYmxvY2tcXFwiXFxuICAgIH0pO1xcbn1cXG52YXIgaHRtbCA9IGZldGNoKGhyZWYpXFxuXFxuaWYgKHBhZ2UgPT0gMSkge1xcbiAgICB0YWIoW1xcbiAgICAgICAgW1xcXCIxOEjplb/nr4dcXFwiLCBcXFwiMThIX2xpc3RcXFwiXSxcXG4gICAgICAgIFtcXFwi55+t56+H5ZCM5Lq6XFxcIiwgXFxcImRvdWppbl9saXN0XFxcIl1cXG4gICAgXSwgXFxcIldhcmVob3VzZS50eXBlXFxcIiwgZGF0YVR5cGUpO1xcbn1cXG5cXG5mdW5jdGlvbiBwbGF5KFVybCkge1xcbiAgICByZXR1cm4gJChVcmwpLnJ1bGUoKCkgPT4ge1xcbiAgICAgICAgdmFyIGQgPSBbXTtcXG4gICAgICAgIHZhciBodG1sID0gZmV0Y2goTVlfVVJMKVxcbiAgICAgICAgdmFyIHBpY3MgPSBbXTtcXG5cXG4gICAgICAgIHZhciBwZCA9IHBkZmgoaHRtbCwgJ2JvZHkmJmgxJiZUZXh0Jyk7XFxuICAgICAgICB2YXIgcCA9IHBkLnN1YnN0cigtNywgNykubWF0Y2goL1xcXFxbKC4qKVxcXFxdLylbMV0ucmVwbGFjZSgvW14wLTldL2lnLCBcXFwiXFxcIik7XFxuXFxuICAgICAgICB2YXIgbGlzdCA9IHBkZmEoaHRtbCwgJ2JvZHkmJnNjcmlwdCcpO1xcbiAgICAgICAgZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgICAgICAgICAgdmFyIHBpYzEgPSBwZGZoKGxpc3Rbal0sICdzY3JpcHQmJkh0bWwnKVxcbiAgICAgICAgICAgIGlmIChwaWMxLmluY2x1ZGVzKCdMYXJnZV9jZ3VybCcpKSB7XFxuICAgICAgICAgICAgICAgIHZhciBwaWMgPSBwaWMxLm1hdGNoKC9MYXJnZV9jZ3VybFxcXFxbMVxcXFxdID0gXFxcIiguKilcXFxcXy8pWzFdXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcblxcbiAgICAgICAgc2V0UGFnZVRpdGxlKHBkKTtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IHBkLFxcbiAgICAgICAgICAgIHVybDogcGljICsgJ18wMDEuanBnJyxcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcIm1vdmllXzFfdmVydGljYWxfcGljX2JsdXJcXFwiLFxcbiAgICAgICAgICAgIHBpY191cmw6IHBpYyArICdfMDAxLmpwZycsXFxuICAgICAgICB9KTtcXG5cXG4gICAgICAgIGZ1bmN0aW9uIOino+aekCgpIHtcXG4gICAgICAgICAgICB2YXIgcGljcyA9IFtdO1xcbiAgICAgICAgICAgIHZhciBodG1sID0gZmV0Y2goaW5wdXQpO1xcbiAgICAgICAgICAgIHZhciBwID0gcGRmaChodG1sLCAnYm9keSYmaDEmJlRleHQnKS5zdWJzdHIoLTcsIDcpLm1hdGNoKC9cXFxcWyguKilcXFxcXS8pWzFdLnJlcGxhY2UoL1teMC05XS9pZywgXFxcIlxcXCIpO1xcblxcbiAgICAgICAgICAgIHZhciBsaXN0ID0gcGRmYShodG1sLCAnYm9keSYmc2NyaXB0Jyk7XFxuICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgICAgICAgICAgICAgIHZhciBwaWMxID0gcGRmaChsaXN0W2pdLCAnc2NyaXB0JiZIdG1sJylcXG4gICAgICAgICAgICAgICAgaWYgKHBpYzEuaW5jbHVkZXMoJ0xhcmdlX2NndXJsJykpIHtcXG4gICAgICAgICAgICAgICAgICAgIHZhciBwaWMgPSBwaWMxLm1hdGNoKC9MYXJnZV9jZ3VybFxcXFxbMVxcXFxdID0gXFxcIiguKilcXFxcXy8pWzFdXFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gcDsgaSsrKSB7XFxuICAgICAgICAgICAgICAgIGlmIChpIDwgMTApIHtcXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcCA9IHBpYyArICdfMDAnICsgaSArICcuanBnJ1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIGlmIChpIDwgMTAwICYmIGkgPiA5KSB7XFxuICAgICAgICAgICAgICAgICAgICB2YXIgcHAgPSBwaWMgKyAnXzAnICsgaSArICcuanBnJ1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIGlmIChpID4gOTkpIHtcXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcCA9IHBpYyArICdfJyArIGkgKyAnLmpwZydcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICBwaWNzLnB1c2gocHApXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIHJldHVybiBcXFwicGljczovL1xcXCIgKyBwaWNzLmpvaW4oXFxcIiYmXFxcIik7XFxuICAgICAgICB9XFxuICAgICAgICBsZXQgZG93bmxvYWRsYXp5ID0gJC50b1N0cmluZyjop6PmnpApO1xcbiAgICAgICAgdmFyIGRvTGlzdCA9IFtdO1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogJ+KAnOKAnOKAneKAnTxiPjxzcGFuIHN0eWxlPVxcXCJjb2xvcjogIzFhYWQxOVxcXCI+8J+TpeS4i+i9vTwvc3Bhbj48L2I+JyxcXG4gICAgICAgICAgICB1cmw6IFxcXCJoaWtlcjovL3BhZ2UvZG93bmxvYWQudmlldyNub1JlY29yZEhpc3RvcnkjI25vUmVmcmVzaCM/cnVsZT3mn5DogZrlkIhcXFwiLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF8yXFxcIixcXG4gICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICBjaGFwdGVyTGlzdDogZG9MaXN0LFxcbiAgICAgICAgICAgICAgICBpbmZvOiB7XFxuICAgICAgICAgICAgICAgICAgICBib29rTmFtZTogcGQsXFxuICAgICAgICAgICAgICAgICAgICBydWxlTmFtZTogXFxcIjE4SOa8q+eUu1xcXCIsXFxuICAgICAgICAgICAgICAgICAgICBib29rVG9wUGljOiBwaWMgKyAnXzAwMS5qcGcnLFxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VDb2RlOiBkb3dubG9hZGxhenlcXG4gICAgICAgICAgICAgICAgfSxcXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZpZXc6IFxcXCIxXFxcIlxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pO1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogJ+KAmOKAmOKAmeKAmTxzdHJvbmc+PGZvbnQgY29sb3I9IFxcXCIjMDk4QUMxXFxcIj4nICsgXFxcIvCfl7PkuabmnrZcXFwiICsgJzwvZnJvbnQ+PC9zdHJvbmc+JyxcXG4gICAgICAgICAgICB1cmw6IFxcXCJoaWtlcjovL3BhZ2UvQm9va3JhY2sudmlldz9ydWxlPeafkOiBmuWQiCZydWxlTmFtZT0xOEjmvKvnlLtcXFwiLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF8yXFxcIixcXG4gICAgICAgIH0pO1xcbiAgICAgICAgZG9MaXN0LnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBcXFwi56ys5LiA6K+dXFxcIixcXG4gICAgICAgICAgICB1cmw6IE1ZX1VSTCxcXG4gICAgICAgIH0pXFxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBwOyBpKyspIHtcXG4gICAgICAgICAgICBpZiAoaSA8IDEwKSB7XFxuICAgICAgICAgICAgICAgIHZhciBwcCA9IHBpYyArICdfMDAnICsgaSArICcuanBnJ1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBpZiAoaSA8IDEwMCAmJiBpID4gOSkge1xcbiAgICAgICAgICAgICAgICB2YXIgcHAgPSBwaWMgKyAnXzAnICsgaSArICcuanBnJ1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBpZiAoaSA+IDk5KSB7XFxuICAgICAgICAgICAgICAgIHZhciBwcCA9IHBpYyArICdfJyArIGkgKyAnLmpwZydcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgcGljcy5wdXNoKHBwKVxcbiAgICAgICAgfVxcblxcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogJ+esrOS4gOivnScsXFxuICAgICAgICAgICAgdXJsOiBcXFwicGljczovL1xcXCIgKyBwaWNzLmpvaW4oXFxcIiYmXFxcIiksXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzJcXFwiLFxcbiAgICAgICAgfSlcXG4gICAgICAgIHNldFJlc3VsdChkKTtcXG4gICAgfSlcXG59IC8v5LqM57qn6Kej5p6QXFxuXFxudmFyIGxpc3QgPSBwYXJzZURvbUZvckFycmF5KGh0bWwsICcucG9zdHMmJi5wb3N0Jyk7XFxuZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgIHZhciB0ID0gcGFyc2VEb21Gb3JIdG1sKGxpc3Rbal0sICdoMyYmVGV4dCcpO1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IHQsXFxuICAgICAgICBkZXNjOiB0LnN1YnN0cigtNywgNykubWF0Y2goL1xcXFwoKC4qKVxcXFwpLylbMV0ucmVwbGFjZSgvW14wLTldL2lnLCBcXFwiXFxcIikgKyAncCcsXFxuICAgICAgICBwaWNfdXJsOiBwYXJzZURvbShsaXN0W2pdLCBcXFwiaW1nJiZzcmNcXFwiKSxcXG4gICAgICAgIHVybDogcGxheShwZGZoKGxpc3Rbal0sICdhJiZocmVmJykpLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJtb3ZpZV8zXFxcIlxcbiAgICB9KTtcXG59XFxuc2V0UmVzdWx0KGQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiYTIud25hY2dcIixcInBhdGhcIjpcInduYWNnXCIsXCJydWxlXCI6XCJqczpcXG52YXIgZCA9IFtdO1xcbmNvbnN0IHBhZ2UgPSBNWV9QQUdFO1xcbnNldFBhZ2VUaXRsZShcXFwid25hY2fmvKvnlLtcXFwiKTtcXG5sZXQgZGF0YVR5cGUgPSBnZXRWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIiwgXFxcImFsYnVtcy1pbmRleC1jYXRlLTFcXFwiKTtcXG5sZXQgaHJlZiA9ICdodHRwOi8vd3d3LnduYWNnLmNvbS8nICsgZGF0YVR5cGUgKyAnLXBhZ2UtJyArIHBhZ2UgKyAnLmh0bWwnO1xcbmFkZExpc3RlbmVyKCdvbkNsb3NlJywgJC50b1N0cmluZygoKSA9PiB7XFxuICAgIGNsZWFyVmFyKFxcXCJXYXJlaG91c2UudHlwZVxcXCIpO1xcbn0pKTtcXG5cXG5mdW5jdGlvbiB0YWIoYXJyLCB0eXBlLCBjb250cmFzdCkge1xcbiAgICBmb3IgKGxldCBpdGVtIG9mIGFycikge1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogaXRlbVsxXSA9PT0gY29udHJhc3QgPyBcXFwi4oCc4oCcXFxcIiArIGl0ZW1bMF0gKyBcXFwi4oCd4oCdXFxcIiA6IGl0ZW1bMF0sXFxuICAgICAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChrZXksIHR5cGUpID0+IHtcXG4gICAgICAgICAgICAgICAgcHV0VmFyKHR5cGUsIGtleSk7XFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgICAgICB9LCBpdGVtWzFdLCB0eXBlKSxcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcInNjcm9sbF9idXR0b25cXFwiXFxuICAgICAgICB9KTtcXG4gICAgfVxcbiAgICBkLnB1c2goe1xcbiAgICAgICAgY29sX3R5cGU6IFxcXCJibGFua19ibG9ja1xcXCJcXG4gICAgfSk7XFxufVxcbnZhciBodG1sID0gZmV0Y2goaHJlZilcXG5cXG5pZiAocGFnZSA9PSAxKSB7XFxuICAgIHRhYihbXFxuICAgICAgICBbXFxcIuWQjOS6uuW/lyjmsYnljJYpXFxcIiwgXFxcImFsYnVtcy1pbmRleC1jYXRlLTFcXFwiXSxcXG4gICAgICAgIFtcXFwi5Y2V6KGM5pysKOaxieWMlilcXFwiLCBcXFwiYWxidW1zLWluZGV4LWNhdGUtOVxcXCJdLFxcbiAgICAgICAgW1xcXCLnn63nr4co5rGJ5YyWKVxcXCIsIFxcXCJhbGJ1bXMtaW5kZXgtY2F0ZS0xMFxcXCJdLFxcbiAgICAgICAgW1xcXCLpn6nmvKso5rGJ5YyWKVxcXCIsIFxcXCJhbGJ1bXMtaW5kZXgtY2F0ZS0yMFxcXCJdLFxcbiAgICAgICAgW1xcXCLmnIDmlrBcXFwiLCBcXFwiYWxidW1zLWluZGV4XFxcIl0sXFxuICAgICAgICBbXFxcIuWQjOS6uuW/l1xcXCIsIFxcXCJhbGJ1bXMtaW5kZXgtY2F0ZS01XFxcIl0sXFxuICAgICAgICBbXFxcIuWNleihjOacrFxcXCIsIFxcXCJhbGJ1bXMtaW5kZXgtY2F0ZS02XFxcIl0sXFxuICAgICAgICBbXFxcIuefreevh1xcXCIsIFxcXCJhbGJ1bXMtaW5kZXgtY2F0ZS03XFxcIl0sXFxuICAgICAgICBbXFxcIumfqea8q1xcXCIsIFxcXCJhbGJ1bXMtaW5kZXgtY2F0ZS0xOVxcXCJdXFxuICAgIF0sIFxcXCJXYXJlaG91c2UudHlwZVxcXCIsIGRhdGFUeXBlKTtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBcXFwi8J+UjVxcXCIsXFxuICAgICAgICB1cmw6ICQudG9TdHJpbmcoKHIpID0+IHtcXG4gICAgICAgICAgICBwdXRNeVZhcigna2V5d29yZCcsIGlucHV0KTtcXG4gICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU9d25hY2cma3c9XFxcIiArIGlucHV0O1xcbiAgICAgICAgfSwgTVlfUlVMRS50aXRsZSksXFxuICAgICAgICBkZXNjOiAn5pCc57SiJyxcXG4gICAgICAgIGNvbF90eXBlOiBcXFwiaW5wdXRcXFwiXFxuICAgIH0pO1xcbn1cXG5cXG52YXIgbGlzdCA9IHBkZmEoaHRtbCwgJyNjbGFzc2lmeV9jb250YWluZXImJmxpJyk7XFxuZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgIHZhciB0aXRsZSA9IHBkZmgobGlzdFtqXSwgJy50eHRBJiZUZXh0Jyk7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogdGl0bGUsXFxuICAgICAgICB1cmw6ICdoaWtlcjovL3BhZ2Uvd25hY2fkuoznuqc/dXJsPWh0dHA6Ly93d3cud25hY2cuY29tJyArIHBkZmgobGlzdFtqXSwgJ2EmJmhyZWYnKSArICcjZ2FtZVRoZW1lIyNub1JlY29yZEhpc3RvcnkjJyxcXG4gICAgICAgIHBpY191cmw6ICdodHRwOicgKyBwZGZoKGxpc3Rbal0sICdpbWcmJnNyYycpLFxcbiAgICAgICAgZGVzYzogcGRmaChsaXN0W2pdLCAnLmluZm8mJlRleHQnKSxcXG4gICAgICAgIGNvbF90eXBlOiBcXFwibW92aWVfM1xcXCIsXFxuICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgIGxvbmdDbGljazogW3tcXG4gICAgICAgICAgICAgICAgdGl0bGU6ICfliLfmlrAnLFxcbiAgICAgICAgICAgICAgICBqczogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICB9LCB7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiAn5b+r6YCf5pCc57SiJyxcXG4gICAgICAgICAgICAgICAganM6ICQudG9TdHJpbmcoKHRpdGxlLCBydWxlKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vc2VhcmNoP3M9XFxcIiArIHRpdGxlICsgXFxcIiZydWxlPVxcXCIgKyBydWxlO1xcbiAgICAgICAgICAgICAgICB9LCB0aXRsZSwgTVlfUlVMRS50aXRsZSlcXG5cXG4gICAgICAgICAgICB9XVxcbiAgICAgICAgfVxcbiAgICB9KVxcbn1cXG5zZXRSZXN1bHQoZCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCJhMi53bmFjZ+S6jOe6p1wiLFwicGF0aFwiOlwid25hY2fkuoznuqdcIixcInJ1bGVcIjpcImpzOlxcbnZhciBkID0gW107XFxudmFyIGh0bWwgPSBmZXRjaChNWV9VUkwpXFxuXFxudmFyIGRlc2MgPSBbXTtcXG52YXIgZGQgPSBwZGZhKGh0bWwsICcuc3ViX3ImJnAnKVxcbmZvciAodmFyIGkgaW4gZGQpIHtcXG4gICAgZGVzYy5wdXNoKHBkZmgoZGRbaV0sICdwJiZUZXh0JykpXFxufVxcblxcbnZhciB0aXRsZSA9IHBkZmgoaHRtbCwgJy5waWMmJmltZyYmdGl0bGUnKTtcXG5zZXRQYWdlVGl0bGUodGl0bGUpO1xcbmQucHVzaCh7XFxuICAgIHRpdGxlOiAn4oCY4oCY4oCZ4oCZPGZvbnQgY29sb3I9XFxcImJsYWNrXFxcIj7kvZzogIUv5L2c5ZOB5ZCN77yaJyArICdcXFxcbicgKyB0aXRsZSArICc8L2ZvbnQ+JyxcXG4gICAgZGVzYzogJ+KAmOKAmOKAmeKAmTxmb250IGNvbG9yPVxcXCJibGFja1xcXCI+JyArIGRlc2Muam9pbihcXFwiXFxcXG5cXFwiKSArICc8L2ZvbnQ+JyxcXG4gICAgdXJsOiBwZChodG1sLCAnLnBpYyYmaW1nJiZzcmMnKSxcXG4gICAgY29sX3R5cGU6IFxcXCJtb3ZpZV8xX3ZlcnRpY2FsX3BpY19ibHVyXFxcIixcXG4gICAgcGljX3VybDogcGQoaHRtbCwgJy5waWMmJmltZyYmc3JjJyksXFxuICAgIGV4dHJhOiB7XFxuICAgICAgICBncmFkaWVudDogdHJ1ZVxcbiAgICB9XFxufSk7XFxuXFxudmFyIHRhZ3MgPSBwZGZhKGh0bWwsICcudHh0RGVzYyYmYScpO1xcbmlmICh0YWdzLmxlbmd0aCA+IDApIHtcXG4gICAgZm9yICh2YXIgcCBpbiB0YWdzKSB7XFxuICAgICAgICB2YXIgdGFnID0gcGRmaCh0YWdzW3BdLCAnYSYmVGV4dCcpO1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogdGFnLFxcbiAgICAgICAgICAgIHVybDogXFxcImhpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU9d25hY2cma3c9XFxcIiArIHRhZyxcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcInNjcm9sbF9idXR0b25cXFwiLFxcbiAgICAgICAgfSlcXG4gICAgfVxcbn1cXG5cXG5cXG5mdW5jdGlvbiBkb3dubG9hZChVcmwpIHtcXG4gICAgcmV0dXJuICQoVXJsKS5ydWxlKCgpID0+IHtcXG4gICAgICAgIHZhciBkID0gW107XFxuICAgICAgICBsZXQgdCA9IGdldFBhZ2VUaXRsZSgpLnJlcGxhY2UoXFxcIi3kuIvovb16aXBcXFwiLCBcXFwiXFxcIik7XFxuICAgICAgICBzZXRQYWdlVGl0bGUodCk7XFxuICAgICAgICB2YXIgaHRtbHMgPSBmZXRjaChNWV9VUkwpO1xcbiAgICAgICAgdmFyIGxpc3QgPSBwZGZoKGh0bWxzLCAnYm9keSYmc2NyaXB0JiZIdG1sJykubWF0Y2goL3RpcHNcXFxcWzBcXFxcXSA9ICcoLiopXFxcXCc7LylbMV07XFxuICAgICAgICBsZXQgaW1nID0gJ2h0dHBzOi8vZmlsZXMueWFuZGUucmUvanBlZy8wNmNkODQwZWUwMGYxODJiOGU4NGNkYWJkY2ZjYTRlNS95YW5kZS5yZSUyMDEwNzM4MDklMjBhbmdlbCUyMGJhbmRhZ2VzJTIwYmlraW5pJTIwYmx1ZV9hcmNoaXZlJTIwZmVldCUyMGdhcnRlciUyMGhvcm5zJTIwa2VsZW1pX21pJTIwbG9saSUyMHNlZV90aHJvdWdoJTIwc3dpbXN1aXRzJTIwdGhvbmclMjB3YWxscGFwZXIlMjB3YXJha3VfY2hpc2UlMjB3ZXQuanBnJztcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgcGljX3VybDogaW1nLFxcbiAgICAgICAgICAgIHVybDogaW1nLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwicGljXzFfZnVsbFxcXCIsXFxuICAgICAgICB9KTtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJsaW5lX2JsYW5rXFxcIlxcbiAgICAgICAgfSk7XFxuICAgICAgICB2YXIgbCA9IHBkZmEobGlzdCwgJyNhZHNib3gmJmEnKTtcXG4gICAgICAgIGZvciAodmFyIGogaW4gbCkge1xcbiAgICAgICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiBwZGZoKGxbal0sICdzcGFuJiZUZXh0JyksXFxuICAgICAgICAgICAgICAgIHVybDogJ2Rvd25sb2FkOi8vaHR0cDonICsgcGRmaChsW2pdLCAnYSYmaHJlZicpLFxcbiAgICAgICAgICAgICAgICBjb2xfdHlwZTogXFxcInRleHRfMlxcXCIsXFxuICAgICAgICAgICAgfSlcXG4gICAgICAgIH1cXG4gICAgICAgIHNldFJlc3VsdChkKTtcXG4gICAgfSlcXG59XFxuXFxubGV0IHl1ZWR1ID0gTVlfVVJMLnJlcGxhY2UoXFxcImluZGV4XFxcIiwgXFxcInNsaWRlXFxcIik7XFxubGV0IGhyZWYgPSBNWV9VUkwucmVwbGFjZShcXFwicGhvdG9zXFxcIiwgXFxcImRvd25sb2FkXFxcIik7XFxuXFxuZnVuY3Rpb24gcGxheWVyKFVybCkge1xcbiAgICByZXR1cm4gJChVcmwpLnJ1bGUoKCkgPT4ge1xcbiAgICAgICAgdmFyIGQgPSBbXTtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdXJsOiBNWV9VUkwucmVwbGFjZShcXFwiI2dhbWVUaGVtZSNcXFwiLCBcXFwiXFxcIiksXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJ4NV93ZWJ2aWV3X3NpbmdsZVxcXCIsXFxuICAgICAgICAgICAgZGVzYzogXFxcImZsb2F0JiYxMDAlXFxcIixcXG4gICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICBibG9ja1J1bGVzOiBbXFxcIippbWc0KlxcXCJdXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSk7XFxuICAgICAgICBzZXRSZXN1bHQoZCk7XFxuICAgIH0pXFxufVxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwi56ys5LiA6K+dKHg1KVxcXCIsXFxuICAgIHVybDogcGxheWVyKHl1ZWR1KSxcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzJcXFwiLFxcbn0sIHtcXG4gICAgdGl0bGU6IFxcXCLkuIvovb16aXBcXFwiLFxcbiAgICB1cmw6IGRvd25sb2FkKGhyZWYpLFxcbiAgICBjb2xfdHlwZTogXFxcInRleHRfMlxcXCIsXFxufSlcXG5zZXRSZXN1bHQoZCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCIj6ZW/5oyJXCIsXCJwYXRoXCI6XCJsb25nUHJlc3MuanNcIixcInJ1bGVcIjpcImpzOlxcbiQuZXhwb3J0cyA9IHtcXG4gICAgZGVsZXRlRmlsZUZvckJvb2socGF0aCkge1xcbiAgICAgICAgLy9yZXR1cm4gJChcXFwi5omA5pyJ55qEIOa8q+eUuy/lsI/or7Qg56ug6IqC5bCG6KKr5Yig6ZmkXFxcXG3noa7orqTliKDpmaTvvJ9cXFwiKS5jb25maXJtKChwYXRoKSA9PiB7XFxuICAgICAgICBjb25zdCBGaWxlID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvRmlsZS5qc1xcXCIpO1xcbiAgICAgICAgaWYgKEZpbGUuZGVsZXRlRmlsZXMocGF0aCkpIHtcXG4gICAgICAgICAgICBkZWxldGVJdGVtKHBhdGgpXFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+WIoOmZpOaIkOWKn1xcXCI7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/liKDpmaTlpLHotKVcXFwiO1xcbiAgICAgICAgfVxcbiAgICAgICAgLy99LCBwYXRoKTtcXG4gICAgfSxcXG4gICAgZGVsZXRlRmlsZUZvclR4dChwYXRoKSB7XFxuICAgICAgICBjb25zdCBGaWxlID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvRmlsZS5qc1xcXCIpO1xcbiAgICAgICAgaWYgKEZpbGUuZGVsZXRlRmlsZXMocGF0aCkpIHtcXG4gICAgICAgICAgICBpZiAoZmlsZUV4aXN0KFxcXCJmaWxlOi8vXFxcIiArIHBhdGggKyBcXFwiLmpzb25cXFwiKSkge1xcbiAgICAgICAgICAgICAgICBGaWxlLmRlbGV0ZUZpbGVzKHBhdGggKyBcXFwiLmpzb25cXFwiKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgZGVsZXRlSXRlbShwYXRoKTtcXG4gICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v5Yig6Zmk5oiQ5YqfXFxcIjtcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+WIoOmZpOWksei0pVxcXCI7XFxuICAgICAgICB9XFxuICAgIH1cXG59XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCJhMy5zcGFua2JhbmdcIixcInBhdGhcIjpcInNwYW5rYmFuZ1wiLFwicnVsZVwiOlwianM6XFxudmFyIGQgPSBbXTtcXG5jb25zdCBwYWdlID0gTVlfUEFHRTtcXG5sZXQgZGF0YVR5cGUgPSBnZXRWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIiwgXFxcIi9uZXdfdmlkZW9zL1xcXCIpO1xcbmxldCBocmVmID0gJ2h0dHBzOi8vc3BhbmtiYW5nLnBhcnR5JyArIGRhdGFUeXBlICsgcGFnZSArICcvJztcXG5hZGRMaXN0ZW5lcignb25DbG9zZScsICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICBjbGVhclZhcihcXFwiV2FyZWhvdXNlLnR5cGVcXFwiKTtcXG59KSk7XFxuXFxuZnVuY3Rpb24gdGFiKGFyciwgdHlwZSwgY29udHJhc3QpIHtcXG4gICAgZm9yIChsZXQgaXRlbSBvZiBhcnIpIHtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IGl0ZW1bMV0gPT09IGNvbnRyYXN0ID8gXFxcIuKAnOKAnFxcXCIgKyBpdGVtWzBdICsgXFxcIuKAneKAnVxcXCIgOiBpdGVtWzBdLFxcbiAgICAgICAgICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZSgoa2V5LCB0eXBlKSA9PiB7XFxuICAgICAgICAgICAgICAgIHB1dFZhcih0eXBlLCBrZXkpO1xcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgfSwgaXRlbVsxXSwgdHlwZSksXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJzY3JvbGxfYnV0dG9uXFxcIlxcbiAgICAgICAgfSk7XFxuICAgIH1cXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIGNvbF90eXBlOiBcXFwiYmxhbmtfYmxvY2tcXFwiXFxuICAgIH0pO1xcbn1cXG52YXIgaHRtbCA9IGZldGNoKGhyZWYpXFxuXFxuaWYgKHBhZ2UgPT0gMSkge1xcbiAgICB0YWIoW1xcbiAgICAgICAgW1xcXCLmnIDmlrBcXFwiLCBcXFwiL25ld192aWRlb3MvXFxcIl0sXFxuICAgICAgICBbXFxcIueDremXqFxcXCIsIFxcXCIvbW9zdF9wb3B1bGFyL1xcXCJdLFxcbiAgICAgICAgW1xcXCJqYXZoZFxcXCIsIFxcXCIvNncvY2hhbm5lbC9qYXZoZC9cXFwiXSxcXG4gICAgICAgIFtcXFwi6bq76LGGXFxcIiwgXFxcIi9meS9jaGFubmVsL21vZGVsK21lZGlhK2FzaWEvXFxcIl1cXG4gICAgXSwgXFxcIldhcmVob3VzZS50eXBlXFxcIiwgZGF0YVR5cGUpO1xcblxcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFxcXCLwn5SNXFxcIixcXG4gICAgICAgIHVybDogJC50b1N0cmluZygocikgPT4ge1xcbiAgICAgICAgICAgIHB1dE15VmFyKCdrZXl3b3JkJywgaW5wdXQpO1xcbiAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9wYWdlL3NlYXJjaD9wPSNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSNmeXBhZ2UmdHlwZT1zcGFua2Jhbmcma3c9XFxcIiArIGlucHV0O1xcbiAgICAgICAgfSwgTVlfUlVMRS50aXRsZSksXFxuICAgICAgICBkZXNjOiAn5pCc57SiJyxcXG4gICAgICAgIGNvbF90eXBlOiBcXFwiaW5wdXRcXFwiXFxuICAgIH0pO1xcbn1cXG5cXG5mdW5jdGlvbiBwbGF5ZXIoVXJsKSB7XFxuICAgIHJldHVybiAkKFVybCkubGF6eVJ1bGUoKCkgPT4ge1xcbiAgICAgICAgdmFyIGh0bWwgPSBmZXRjaChpbnB1dCk7XFxuICAgICAgICB2YXIgbGlzdCA9IHBkZmEoaHRtbCwgJyNpbm5lcl9jb250ZW50JiZzY3JpcHQnKTtcXG4gICAgICAgIGZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICAgICAgICAgIHZhciB2aWRlbzEgPSBwZGZoKGxpc3Rbal0sICdzY3JpcHQmJkh0bWwnKTtcXG4gICAgICAgICAgICBpZiAodmlkZW8xLmluY2x1ZGVzKCdjb250ZW50VXJsJykpIHtcXG4gICAgICAgICAgICAgICAgdmFyIHZpZGVvID0gdmlkZW8xLm1hdGNoKC9jb250ZW50VXJsXFxcIjogXFxcIiguKilcXFxcXFxcIiwvKVsxXTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZpZGVvO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgfSlcXG59XFxuXFxudmFyIGxpc3QgPSBwZGZhKGh0bWwsICcudmlkZW8tbGlzdCYmLnZpZGVvLWl0ZW0nKTtcXG5mb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBwZGZoKGxpc3Rbal0sICdoNCYmVGV4dCcpLFxcbiAgICAgICAgcGljX3VybDogcGRmaChsaXN0W2pdLCAnaW1nJiZkYXRhLXNyYycpLFxcbiAgICAgICAgdXJsOiBwbGF5ZXIoJ2h0dHBzOi8vc3BhbmtiYW5nLnBhcnR5JyArIHBkZmgobGlzdFtqXSwgJ2EmJmhyZWYnKSksXFxuICAgICAgICBkZXNjOiBcXFwi6KeC55yL5qyh5pWw77yaXFxcIiArIHBkZmgobGlzdFtqXSwgJy52JiZUZXh0JyksXFxuICAgICAgICBjb2xfdHlwZTogJ21vdmllXzInLFxcbiAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICBsb25nQ2xpY2s6IFt7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiAn5Yi35pawJyxcXG4gICAgICAgICAgICAgICAganM6ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgICAgIH0pXFxuICAgICAgICAgICAgfV1cXG4gICAgICAgIH1cXG4gICAgfSk7XFxufVxcbnNldFJlc3VsdChkKTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIiPogZrlkIjmkJzntKJcIixcInBhdGhcIjpcIlNlYXJjaC52aWV3XCIsXCJydWxlXCI6XCJqczpcXG5jb25zdCBGaWxlID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvRmlsZS5qcz9ydWxlPVxcXCIgKyBNWV9SVUxFLl90aXRsZSk7XFxuY29uc3QgQ29uZmlnID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvQ29uZmlnLmpzb24/cnVsZT1cXFwiICsgTVlfUlVMRS5fdGl0bGUpO1xcbmxldCBjb21pY1J1bGVEaXJzID0gRmlsZS5nZXRGaWxlUGF0aChDb25maWdbZ2V0UGFyYW0oXFxcInR5cGVcXFwiKSArIFxcXCJQYXRoXFxcIl0sIFxcXCJkaXJcXFwiKTtcXG5pZiAoZ2V0UGFyYW0oXFxcImlzQWxsXFxcIikgPT09IFxcXCIxXFxcIikge1xcbiAgICBjb21pY1J1bGVEaXJzID0gY29taWNSdWxlRGlycy5maWx0ZXIoaXRlbSA9PiBpdGVtLm5hbWUgPT09IE1ZX1JVTEUudGl0bGUpO1xcbn1cXG5cXG5sZXQgc2VhcmNoUmVzdWx0ID0gW107XFxubGV0IHNlYXJjaFRlcm1zPSBnZXRQYXJhbShcXFwic2VhcmNoVGVybXNcXFwiKTtcXG5sZXQgc2VhcmNoVGVzdDtcXG5cXG5pZiAoIWdldFNlYXJjaE1vZGUoKSkge1xcbiAgICBsZXQgdGVybXNBcnIgPSBzZWFyY2hUZXJtcy5zcGxpdChcXFwiXFxcIikubWFwKHQgPT4gdC5yZXBsYWNlKC9cXFxcKnxcXFxcLnxcXFxcP3xcXFxcK3xcXFxcJHxcXFxcXnxcXFxcW3xcXFxcXXxcXFxcKHxcXFxcKXxcXFxce3xcXFxcfXxcXFxcfHxcXFxcL3xcXFxcXFxcXC9nLCBrID0+IFxcXCJcXFxcXFxcXFxcXCIgKyBrKSk7XFxuICAgIGxldCByZWcgPSBuZXcgUmVnRXhwKHRlcm1zQXJyLmpvaW4oXFxcIi4qXFxcIiksIFxcXCJpXFxcIik7XFxuICAgIHNlYXJjaFRlc3QgPSB0ZXh0ID0+IHJlZy50ZXN0KHRleHQpO1xcbn0gZWxzZSB7XFxuICAgIHNlYXJjaFRlc3QgPSB0ZXh0ID0+IHNlYXJjaENvbnRhaW5zKHRleHQsIHNlYXJjaFRlcm1zLCBmYWxzZSk7XFxufVxcblxcbmxldCBwYWdlVXJsID0gZ2V0UGFyYW0oXFxcInR5cGVcXFwiKSA9PT0gXFxcIm5vdmVsXFxcIiA/IFxcXCJoaWtlcjovL3BhZ2UvTm92ZWxCcm93c2VyLnZpZXdcXFwiIDogXFxcImhpa2VyOi8vcGFnZS9Db21pY0Jyb3dzZXIudmlld1xcXCI7XFxuZm9yIChsZXQgc29uRGlyIG9mIGNvbWljUnVsZURpcnMpIHtcXG4gICAgbGV0IGNvbWljTGlzdCA9IEZpbGUuZ2V0RmlsZVBhdGgoc29uRGlyLnBhdGgsIFxcXCJkaXJcXFwiKTtcXG4gICAgZm9yIChsZXQgY29taWMgb2YgY29taWNMaXN0KSB7XFxuICAgICAgICBpZiAoc2VhcmNoVGVzdChjb21pYy5uYW1lKSkge1xcbiAgICAgICAgICAgIHNlYXJjaFJlc3VsdC5wdXNoKHtcXG4gICAgICAgICAgICAgICAgdGl0bGU6IGNvbWljLm5hbWUsXFxuICAgICAgICAgICAgICAgIHBpY191cmw6IGNvbWljLnBhdGggKyBcXFwiL1xcXCIgKyBjb21pYy5uYW1lICsgXFxcIi5qcGdcXFwiLFxcbiAgICAgICAgICAgICAgICB1cmw6IHBhZ2VVcmwgKyBcXFwiP3J1bGU9XFxcIiArIE1ZX1JVTEUuX3RpdGxlLFxcbiAgICAgICAgICAgICAgICBkZXNjOiBzb25EaXIubmFtZSxcXG4gICAgICAgICAgICAgICAgZXh0cmE6IGNvbWljXFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICB9XFxuICAgIH1cXG5cXG59XFxuc2V0UmVzdWx0KHNlYXJjaFJlc3VsdCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCIj6K6+572uXCIsXCJwYXRoXCI6XCJTZXR0aW5nL01vcmUudmlld1wiLFwicnVsZVwiOlwianM6XFxuY29uc3QgRmlsZSA9ICQucmVxdWlyZShcXFwiaGlrZXI6Ly9wYWdlL0ZpbGUuanNcXFwiKTtcXG5jb25zdCBDb25maWcgPSAkLnJlcXVpcmUoXFxcImhpa2VyOi8vcGFnZS9Db25maWcuanNvblxcXCIpO1xcblxcbmNvbnN0IHNldHRpbmdUeXBlID0gTVlfUEFSQU1TLnNldHRpbmdUeXBlIHx8IGdldFBhcmFtKFxcXCJzZXR0aW5nVHlwZVxcXCIpO1xcblxcbmxldCBsYXlvdXQgPSBbXTtcXG5sZXQgaWQgPSBcXFwiI1xcXCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcXG5zd2l0Y2ggKHNldHRpbmdUeXBlKSB7XFxuXFxuICAgIGNhc2UgXFxcImNvbnRlbnRzXFxcIjpcXG4gICAgICAgIGxldCBmID0gcmVxdWlyZShcXFwiaHR0cDovL2hpa2VyLm5va2lhLnByZXNzL2hpa2VydWxlL3J1bGVsaXN0Lmpzb24/aWQ9NTA5OVxcXCIpO1xcbiAgICAgICAgc2V0UGFnZVRpdGxlKFxcXCLnm67lvZXorr7nva586K6+572uXFxcIik7XFxuICAgICAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IFxcXCLpgInmi6nmlofku7blpLlcXFwiLFxcbiAgICAgICAgICAgIHVybDogSlNPTi5zdHJpbmdpZnkoZi5maWxlU2VsZWN0aW9uVXJpKHtcXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICQudG9TdHJpbmcoKGlkKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0ID0gZmluZEl0ZW0oaWQpLmV4dHJhO1xcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlSXRlbShpZCwge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhOiBPYmplY3QuYXNzaWduKHRhcmdldCwge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IFBBVEhcXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcXG4gICAgICAgICAgICAgICAgfSwgaWQpLFxcbiAgICAgICAgICAgICAgICBpbml0aWFsUGF0aDogQ29uZmlnLmhvbWVQYXRoLFxcbiAgICAgICAgICAgICAgICByZXF1aXJlVXJsOiBcXFwiaHR0cDovL2hpa2VyLm5va2lhLnByZXNzL2hpa2VydWxlL3J1bGVsaXN0Lmpzb24/aWQ9NTA5OVxcXCIsXFxuICAgICAgICAgICAgICAgIHBhdHRlcm46IDFcXG4gICAgICAgICAgICB9KSksXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJpbnB1dFxcXCIsXFxuICAgICAgICAgICAgZGVzYzogXFxcIuaUr+aMgWhpa2VyOi8vZmlsZXPot6/lvoQo6K+l5pON5L2c5LiN5Lya5Yid5aeL5YyW55uu5b2VKVxcXCIsXFxuICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBDb25maWcuaG9tZVBhdGgsXFxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiAkLnRvU3RyaW5nKChpZCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgcHV0TXlWYXIoaWQsIGlucHV0KTtcXG4gICAgICAgICAgICAgICAgfSwgaWQpLFxcbiAgICAgICAgICAgICAgICBpZDogaWRcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9KTtcXG4gICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcImxpbmVfYmxhbmtcXFwiXFxuICAgICAgICB9KTtcXG4gICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogXFxcIuehruiupFxcXCIsXFxuICAgICAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChpZCkgPT4ge1xcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSBnZXRNeVZhcihpZCwgZmluZEl0ZW0oaWQpLmV4dHJhLmRlZmF1bHRWYWx1ZSB8fCBcXFwiXFxcIik7XFxuICAgICAgICAgICAgICAgIGNvbnN0IENvbmZpZyA9ICQucmVxdWlyZShcXFwiaGlrZXI6Ly9wYWdlL0NvbmZpZy5qc29uXFxcIik7XFxuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5zdGFydHNXaXRoKFxcXCJoaWtlcjovL2ZpbGVzL1xcXCIpKSBpbnB1dCA9IGdldFBhdGgoaW5wdXQpLnNsaWNlKDcpO1xcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZW5kc1dpdGgoXFxcIi9cXFwiKSkgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKC9cXFxcLyQvLCBcXFwiXFxcIik7XFxuICAgICAgICAgICAgICAgIGlmIChDb25maWcuaG9tZVBhdGggPT0gaW5wdXQpIHJldHVybiBcXFwidG9hc3Q6Ly/lt7Lnu4/mmK/lvZPliY3nm67lvZVcXFwiO1xcbiAgICAgICAgICAgICAgICBDb25maWcgPSBKU09OLnBhcnNlKHJlYWRGaWxlKFxcXCJjb25maWcuanNvblxcXCIsIDApIHx8IFxcXCJ7fVxcXCIpO1xcbiAgICAgICAgICAgICAgICBDb25maWcuaG9tZVBhdGggPSBpbnB1dDtcXG4gICAgICAgICAgICAgICAgc2F2ZUZpbGUoXFxcImNvbmZpZy5qc29uXFxcIiwgSlNPTi5zdHJpbmdpZnkoQ29uZmlnKSwgMCk7XFxuICAgICAgICAgICAgICAgIGJhY2soKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+W3suS/neWtmFxcXCI7XFxuICAgICAgICAgICAgfSwgaWQpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF9jZW50ZXJfMVxcXCIsXFxuICAgICAgICB9KTtcXG4gICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogYFxcbiAgICAgICAgPHVsPlxcbiAgICAgICAgIDxsaT48Zm9udCBjb2xvcj1cXFwiYmx1ZVxcXCI+5pS55Y+Y55uu5b2V6Lev5b6E5ZCO5Y6f5YWI57yT5a2Y55qE5ryr55S75LiN5Lya6Ieq5Yqo56e75Yqo5Yiw5paw55uu5b2V77yM6ZyA6KaB6Ieq5bex56e75Yqo77yM5omA5Lul5bu66K6u5LiN6KaB5Lmx5pS55Yqo55uu5b2V77yM5aaC5p6c5oOz56e75Yqo5Yiw57O757uf55u45YaM562J6L2v5Lu26K+75Y+W5b6X5Yiw77yI55u45YaM5pyJ5pi+56S677yJ77yM55uu5b2V5Y+v5Lul5pS55oiQPGEgaHJlZj1cXFwiY29weTovLy9zdG9yYWdlL2VtdWxhdGVkLzAv5ryr55S7XFxcIj48dT4vc3RvcmFnZS9lbXVsYXRlZC8wL+a8q+eUuzwvdT48L2E+77yM6ZyA6KaB57uZ5rW36ZiU6K+75Y+W5a2Y5YKo5p2D6ZmQ77yM5LiN54S26K+75LiN5Yiw5pWw5o2uPC9mb250PjwvbGk+XFxuICAgICAgICAgPGxpPjxmb250IGNvbG9yPVxcXCJibHVlXFxcIj7mlLnlrozkuIvovb3kv53lrZjnm67lvZXlkI7vvIznvJPlrZjmvKvnlLvnnIvkuI3kuobor7fnu5nova/ku7bor7vlj5blrZjlgqjmnYPpmZDvvIzkuZ/lj6/ku6XmlLnlm548YSBocmVmPVxcXCJjb3B5Oi8vL3N0b3JhZ2UvZW11bGF0ZWQvMC9BbmRyb2lkL2RhdGEvY29tLmV4YW1wbGUuaGlrZXJ2aWV3L2ZpbGVzL0RvY3VtZW50cy9Db21pY3NCb29rU2hlbGZcXFwiPjx1Pi9zdG9yYWdlL2VtdWxhdGVkLzAvQW5kcm9pZC9kYXRhL2NvbS5leGFtcGxlLmhpa2Vydmlldy9maWxlcy9Eb2N1bWVudHMvQ29taWNzQm9va1NoZWxmPC91PjwvYT48L2ZvbnQ+PC9saT5cXG4gICAgICAgIDwvdWw+XFxuICAgIGAsXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJyaWNoX3RleHRcXFwiLFxcbiAgICAgICAgfSk7XFxuICAgICAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJsaW5lX2JsYW5rXFxcIlxcbiAgICAgICAgfSk7XFxuICAgICAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IFxcXCI8c3Ryb25nPua8q+eUu+mYheivu+WZqOiuvue9rjwvc3Ryb25nPlxcXCIuYmlnKCksXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJyaWNoX3RleHRcXFwiXFxuICAgICAgICB9KTtcXG4gICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcImxpbmVcXFwiXFxuICAgICAgICB9KTtcXG4gICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcImxpbmVcXFwiXFxuICAgICAgICB9KTtcXG4gICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogXFxcIuWFvOWuueaooeW8j1xcXCIsXFxuICAgICAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChkZWZfaXNDb21pY0NvbXBhdGlibGUpID0+IHtcXG4gICAgICAgICAgICAgICAgbGV0IENvbmZpZyA9IEpTT04ucGFyc2UocmVhZEZpbGUoXFxcImNvbmZpZy5qc29uXFxcIiwgMCkgfHwgXFxcInt9XFxcIik7XFxuXFxuICAgICAgICAgICAgICAgIENvbmZpZy5kZWZfaXNDb21pY0NvbXBhdGlibGUgPSBkZWZfaXNDb21pY0NvbXBhdGlibGUgPT09IFxcXCIwXFxcIiA/IFxcXCIxXFxcIiA6IFxcXCIwXFxcIjtcXG5cXG4gICAgICAgICAgICAgICAgc2F2ZUZpbGUoXFxcImNvbmZpZy5qc29uXFxcIiwgSlNPTi5zdHJpbmdpZnkoQ29uZmlnKSwgMCk7XFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgICAgICB9LCBDb25maWcuZGVmX2lzQ29taWNDb21wYXRpYmxlKSxcXG4gICAgICAgICAgICBkZXNjOiBDb25maWcuZGVmX2lzQ29taWNDb21wYXRpYmxlID09PSBcXFwiMFxcXCIgPyBcXFwi5LiN5byA5ZCvXFxcIiA6IFxcXCLlvIDlkK9cXFwiLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF8xXFxcIlxcbiAgICAgICAgfSk7XFxuICAgICAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJsaW5lX2JsYW5rXFxcIlxcbiAgICAgICAgfSk7XFxuICAgICAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IFxcXCI8c3Ryb25nPuS4i+i9veWZqOiuvue9rjwvc3Ryb25nPlxcXCIuYmlnKCksXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJyaWNoX3RleHRcXFwiXFxuICAgICAgICB9KTtcXG4gICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcImxpbmVcXFwiXFxuICAgICAgICB9KTtcXG4gICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcImxpbmVcXFwiXFxuICAgICAgICB9KTtcXG5cXG4gICAgICAgIGZ1bmN0aW9uIHNldE51bShrZXksIHRlc3QpIHtcXG4gICAgICAgICAgICBsZXQgQ29uZmlnID0gSlNPTi5wYXJzZShyZWFkRmlsZShcXFwiY29uZmlnLmpzb25cXFwiLCAwKSB8fCBcXFwie31cXFwiKTtcXG4gICAgICAgICAgICBpbnB1dCA9IHBhcnNlSW50KGlucHV0KTtcXG4gICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGlucHV0KSkgcmV0dXJuIFxcXCJ0b2FzdDovL+ivt+i+k+WFpeaVsOWtl1xcXCI7XFxuICAgICAgICAgICAgaWYgKCF0ZXN0KGlucHV0KSkgcmV0dXJuIFxcXCJ0b2FzdDovL+S4jeespuWQiOadoeS7tlxcXCI7XFxuICAgICAgICAgICAgQ29uZmlnW2tleV0gPSBpbnB1dDtcXG4gICAgICAgICAgICBzYXZlRmlsZShcXFwiY29uZmlnLmpzb25cXFwiLCBKU09OLnN0cmluZ2lmeShDb25maWcpLCAwKTtcXG4gICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+S/ruaUueaIkOWKn1xcXCI7XFxuICAgICAgICB9XFxuICAgICAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IFxcXCJsb2fmlbBcXFwiLFxcbiAgICAgICAgICAgIHVybDogJChDb25maWcubG9nTnVtLCBcXFwiMDxOPDEwMFxcXCIpLmlucHV0KHNldE51bSwgXFxcImxvZ051bVxcXCIsIGl0ID0+IGl0ID4gMCAmJiBpdCA8IDEwMCksXFxuICAgICAgICAgICAgZGVzYzogXFxcIlxcXCIgKyBDb25maWcubG9nTnVtLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF8xXFxcIlxcbiAgICAgICAgfSk7XFxuXFxuICAgICAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IFxcXCLliIbmibnkuIvovb3mlbAoMOS4jeW8gOWQrylcXFwiLFxcbiAgICAgICAgICAgIHVybDogJChcXFwiXFxcIiArIENvbmZpZy50aHJlYWROdW0sIFxcXCJOPi0xXFxcIikuaW5wdXQoc2V0TnVtLCBcXFwidGhyZWFkTnVtXFxcIiwgaXQgPT4gaXQgPiAtMSksXFxuICAgICAgICAgICAgZGVzYzogXFxcIlxcXCIgKyBDb25maWcudGhyZWFkTnVtLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF8xXFxcIixcXG4gICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICBsaW5lVmlzaWJsZTogZmFsc2UsXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSk7XFxuICAgICAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJsaW5lX2JsYW5rXFxcIlxcbiAgICAgICAgfSk7XFxuICAgICAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IFxcXCI8c3Ryb25nPuWFtuS7luiuvue9rjwvc3Ryb25nPlxcXCIuYmlnKCksXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJyaWNoX3RleHRcXFwiXFxuICAgICAgICB9KTtcXG4gICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcImxpbmVcXFwiXFxuICAgICAgICB9KTtcXG4gICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcImxpbmVcXFwiXFxuICAgICAgICB9KTtcXG4gICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogXFxcIua4heeQhue8k+WtmFxcXCIsXFxuICAgICAgICAgICAgdXJsOiBcXFwiaGlrZXI6Ly9wYWdlL1NldHRpbmcvTW9yZS52aWV3I25vUmVjb3JkSGlzdG9yeSMjbm9IaXN0b3J5Iz9zZXR0aW5nVHlwZT1jYWNoZVxcXCIsXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzFcXFwiXFxuICAgICAgICB9KTtcXG4gICAgICAgIGJyZWFrO1xcbiAgICBjYXNlIFxcXCJjYWNoZVxcXCI6XFxuICAgICAgICBzZXRQYWdlVGl0bGUoXFxcIua4hemZpOe8k+WtmHzorr7nva5cXFwiKTtcXG4gICAgICAgIGNvbnN0IGtub3duTGlzdCA9IG5ldyBNYXAoW1xcbiAgICAgICAgICAgIFtGaWxlLmdldE5hbWUoQ29uZmlnLmNvbWljUGF0aCksIFxcXCIj566h55CG5ZmoI+a8q+eUu+e8k+WtmOebruW9lVvkuI3lu7rorq7muIXpmaRdXFxcIl0sXFxuICAgICAgICAgICAgW0ZpbGUuZ2V0TmFtZShDb25maWcubm92ZWxGdWxsUGF0aCksIFxcXCIj566h55CG5ZmoI+Wwj+ivtOWQiOW5tuebruW9lVvlj6/ku6XmuIXpmaRdXFxcIl0sXFxuICAgICAgICAgICAgW1xcXCJkcueroOiKgue8k+WtmFxcXCIsIFxcXCLpgZPplb/mqKHmnb/kuLTml7bnvJPlrZhb5bu66K6u5riF6ZmkXVxcXCJdXFxuICAgICAgICBdKTtcXG5cXG4gICAgICAgIGxldCBjYWNoZURpciA9IEZpbGUuZ2V0RmlsZVBhdGgoQ29uZmlnLmhvbWVQYXRoLCBcXFwiZGlyXFxcIik7XFxuXFxuICAgICAgICBmdW5jdGlvbiBjbGVhbkNhY2hlKHBhdGgpIHtcXG4gICAgICAgICAgICBjb25zdCBGaWxlID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvRmlsZS5qc1xcXCIpO1xcbiAgICAgICAgICAgIGlmIChGaWxlLmRlbGV0ZUZpbGVzKHBhdGgpKSB7XFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+a4hemZpOWujOaIkFxcXCI7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+a4hemZpOWksei0pVxcXCI7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgICAgZm9yIChsZXQgY2FjaGUgb2YgY2FjaGVEaXIpIHtcXG4gICAgICAgICAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiBjYWNoZS5uYW1lLFxcbiAgICAgICAgICAgICAgICBkZXNjOiBcXFwi5aSn5bCP77yaXFxcIiArIEZpbGUuZ2V0RmlsZVNpemUoY2FjaGUucGF0aCkgKyBcXFwiXFxcXG7mj4/ov7DvvJpcXFwiICsgKGtub3duTGlzdC5nZXQoY2FjaGUubmFtZSkgfHwgXFxcIuacquefpeebruW9lVvpo47pmanmnKrnn6VdXFxcIiksXFxuICAgICAgICAgICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF8xXFxcIixcXG4gICAgICAgICAgICAgICAgdXJsOiAkKFxcXCLnoa7orqTmuIXpmaQgXFxcIiArIGNhY2hlLm5hbWUgKyBcXFwiID9cXFwiKS5jb25maXJtKGNsZWFuQ2FjaGUsIGNhY2hlLnBhdGgpXFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICB9XFxuICAgICAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJsaW5lX2JsYW5rXFxcIlxcbiAgICAgICAgfSk7XFxuICAgICAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IFxcXCLlhajpg6jmuIXpmaQoXFxcIiArIEZpbGUuZ2V0RmlsZVNpemUoQ29uZmlnLmhvbWVQYXRoKSArIFxcXCIpXFxcIixcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcInRleHRfY2VudGVyXzFcXFwiLFxcbiAgICAgICAgICAgIHVybDogJChcXFwi56Gu6K6k5riF6Zmk5YWo6YOo57yT5a2Y5pWw5o2uP1xcXCIpLmNvbmZpcm0oY2xlYW5DYWNoZSwgQ29uZmlnLmhvbWVQYXRoKVxcbiAgICAgICAgfSk7XFxuICAgICAgICBicmVhaztcXG59XFxuc2V0UmVzdWx0KGxheW91dCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCIj5ryr55S75YW85a65XCIsXCJwYXRoXCI6XCJjb21pY0NvbXBhdGlibGUudmlld1wiLFwicnVsZVwiOlwianM6XFxuY29uc3QgRmlsZSA9ICQucmVxdWlyZShcXFwiaGlrZXI6Ly9wYWdlL0ZpbGUuanNcXFwiKTtcXG5zZXRQYWdlVGl0bGUoJC5sb2coTVlfUEFSQU1TLnRpdGxlKSk7XFxubGV0IGZpbGVsaXN0ID0gRmlsZS5nZXRGaWxlUGF0aChNWV9QQVJBTVMucGF0aCk7XFxubGV0IHBpY2xpc3QgPSBmaWxlbGlzdC5tYXAoKGl0ZW0sIGkpID0+ICh7XFxuICAgIGNvbF90eXBlOiBcXFwicGljXzFfZnVsbFxcXCIsXFxuICAgIHVybDogXFxcImhpa2VyOi8vZW1wdHlcXFwiLFxcbiAgICBwaWNfdXJsOiBNWV9QQVJBTVMucGF0aCArIFxcXCIvXFxcIiArIChpICsgMSkgKyBcXFwiLmpwZ1xcXCJcXG59KSk7XFxuXFxuc2V0UmVzdWx0KHBpY2xpc3QpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiYTQuaGl0eGhvdFwiLFwicGF0aFwiOlwiaGl0eGhvdFwiLFwicnVsZVwiOlwianM6XFxudmFyIGQgPSBbXTtcXG5jb25zdCBwYWdlID0gTVlfUEFHRTtcXG5sZXQgZGF0YVR5cGUgPSBnZXRWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIiwgXFxcIlxcXCIpO1xcbmxldCBocmVmID0gJ2h0dHBzOi8vd3d3LmhpdHhob3Qub3JnLycrZGF0YVR5cGUrJz9tPTEmcGFnZT0nICsgcGFnZTtcXG5hZGRMaXN0ZW5lcignb25DbG9zZScsICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICBjbGVhclZhcihcXFwiV2FyZWhvdXNlLnR5cGVcXFwiKTtcXG59KSk7XFxuXFxuZnVuY3Rpb24gdGFiKGFyciwgdHlwZSwgY29udHJhc3QpIHtcXG4gICAgZm9yIChsZXQgaXRlbSBvZiBhcnIpIHtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IGl0ZW1bMV0gPT09IGNvbnRyYXN0ID8gXFxcIuKAnOKAnFxcXCIgKyBpdGVtWzBdICsgXFxcIuKAneKAnVxcXCIgOiBpdGVtWzBdLFxcbiAgICAgICAgICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZSgoa2V5LCB0eXBlKSA9PiB7XFxuICAgICAgICAgICAgICAgIHB1dFZhcih0eXBlLCBrZXkpO1xcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgfSwgaXRlbVsxXSwgdHlwZSksXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJzY3JvbGxfYnV0dG9uXFxcIlxcbiAgICAgICAgfSk7XFxuICAgIH1cXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIGNvbF90eXBlOiBcXFwiYmxhbmtfYmxvY2tcXFwiXFxuICAgIH0pO1xcbn1cXG52YXIgaHRtbCA9IGZldGNoKGhyZWYpXFxuXFxuaWYgKHBhZ2UgPT0gMSkge1xcbiAgICB0YWIoW1xcbiAgICAgICAgW1xcXCLmnIDmlrBcXFwiLCBcXFwiXFxcIl0sXFxuIFtcXFwi54Ot6ZeoXFxcIiwgXFxcImhvdFxcXCJdXFxuICAgIF0sIFxcXCJXYXJlaG91c2UudHlwZVxcXCIsIGRhdGFUeXBlKTtcXG5kLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFxcXCLwn5SNXFxcIixcXG4gICAgICAgIHVybDogJC50b1N0cmluZygocikgPT4ge1xcbiAgICAgICAgICAgIHB1dE15VmFyKCdrZXl3b3JkJywgaW5wdXQpO1xcbiAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9wYWdlL3NlYXJjaD9wPSNub0hpc3RvcnkjI2Z1bGxUaGVtZSMjbm9SZWNvcmRIaXN0b3J5I2Z5cGFnZSZ0eXBlPWhpdHhob3Qma3c9XFxcIiArIGlucHV0O1xcbiAgICAgICAgfSwgTVlfUlVMRS50aXRsZSksXFxuICAgICAgICBkZXNjOiAn5pCc57SiJyxcXG4gICAgICAgIGNvbF90eXBlOiBcXFwiaW5wdXRcXFwiXFxuICAgIH0pO1xcbn1cXG5cXG52YXIgbGlzdCA9IHBkZmEoaHRtbCwgJy52aWRlb3MmJi5jb250ZW50bWUnKTtcXG5mb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBwZGZoKGxpc3Rbal0sICdhJiZ0aXRsZScpLFxcbiAgICAgICAgaW1nOiBwZGZoKGxpc3Rbal0sICcueGxkJiZzcmMnKSxcXG4gICAgICAgIHVybDogJ2hpa2VyOi8vcGFnZS9oaXR4aG905LqM57qnP3VybD1odHRwczovL3d3dy5oaXR4aG90Lm9yZycgKyBwZGZoKGxpc3Rbal0sICdhJiZocmVmJyksXFxuICAgICAgICBjb2xfdHlwZTogJ21vdmllXzMnLFxcbiAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICBsb25nQ2xpY2s6IFt7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiAn5Yi35pawJyxcXG4gICAgICAgICAgICAgICAganM6ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgICAgIH0pXFxuICAgICAgICAgICAgfV1cXG4gICAgICAgIH1cXG4gICAgfSk7XFxufVxcbnNldFJlc3VsdChkKVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiYTQuaGl0eGhvdOS6jOe6p1wiLFwicGF0aFwiOlwiaGl0eGhvdOS6jOe6p1wiLFwicnVsZVwiOlwianM6XFxudmFyIGQgPSBbXTtcXG5pZihNWV9VUkwubWF0Y2goL3BhZ2UvKSl7XFxuTVlfVVJMID0gTVlfVVJMLnJlcGxhY2UoL1xcXFwmcGFnZSguKikvZywnJyk7XFxufVxcbnZhciBodG1sID0gZmV0Y2goTVlfVVJMKTtcXG52YXIgaW1nID0gcGRmaChodG1sLCAnLmNvbnRlbnRtZTImJmltZyYmc3JjJyk7XFxudmFyIHRpdGxlID0gcGRmaChodG1sLCAnLmxvZ28mJlRleHQnKS5yZXBsYWNlKFxcXCJIaXQteC1Ib3Q6IFxcXCIsIFxcXCJcXFwiKTtcXG5kLnB1c2goe1xcbiAgICB0aXRsZTogJ+S9nOWTgeWQje+8micgKyAnXFxcXG4nICsgdGl0bGUucmVwbGFjZSgvIFxcXFx8KC4qKS8sXFxcIlxcXCIpLFxcbiAgICBkZXNjOiAoKE51bWJlcih0aXRsZS5zcGxpdChcXFwiL1xcXCIpWzFdKS0xKSoxMCkrXFxcIlArXFxcIixcXG4gICAgdXJsOiBpbWcsXFxuICAgIGNvbF90eXBlOiBcXFwibW92aWVfMV92ZXJ0aWNhbF9waWNfYmx1clxcXCIsXFxuICAgIHBpY191cmw6IGltZyxcXG59KTtcXG5cXG5mdW5jdGlvbiDop6PmnpAoKSB7XFxuICAgIHZhciBwaWNzID0gW107XFxuICAgIHZhciBodG1sID0gZmV0Y2goaW5wdXQpO1xcbiAgICB2YXIgbGlzdCA9IHBkZmEoaHRtbCwgJy5jb250ZW50bWUyJiZpbWcnKTtcXG4gICAgZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgICAgICB2YXIgaW1nID0gcGRmaChsaXN0W2pdLCAnaW1nJiZzcmMnKTtcXG4gICAgICAgIHBpY3MucHVzaChpbWcpXFxuICAgIH1cXG4gICAgcmV0dXJuIFxcXCJwaWNzOi8vXFxcIiArIHBpY3Muam9pbihcXFwiJiZcXFwiKTtcXG59XFxuXFxubGV0IGxhenkgPSAkKFxcXCJcXFwiKS5sYXp5UnVsZSjop6PmnpApO1xcbmxldCBkb3dubG9hZGxhenkgPSAkLnRvU3RyaW5nKOino+aekCk7XFxudmFyIGRvTGlzdCA9IFtdO1xcbmQucHVzaCh7XFxuICAgIHRpdGxlOiAn4oCc4oCc4oCd4oCdPGI+PHNwYW4gc3R5bGU9XFxcImNvbG9yOiAjMWFhZDE5XFxcIj7wn5Ol5LiL6L29PC9zcGFuPjwvYj4nLFxcbiAgICB1cmw6IFxcXCJoaWtlcjovL3BhZ2UvZG93bmxvYWQudmlldyNub1JlY29yZEhpc3RvcnkjI25vUmVmcmVzaCM/cnVsZT3mn5DogZrlkIhcXFwiLFxcbiAgICBjb2xfdHlwZTogXFxcInRleHRfMlxcXCIsXFxuICAgIGV4dHJhOiB7XFxuICAgICAgICBjaGFwdGVyTGlzdDogZG9MaXN0LFxcbiAgICAgICAgaW5mbzoge1xcbiAgICAgICAgICAgIGJvb2tOYW1lOiB0aXRsZSxcXG4gICAgICAgICAgICBydWxlTmFtZTogXFxcImhpdHhob3RcXFwiLFxcbiAgICAgICAgICAgIGJvb2tUb3BQaWM6IGltZyxcXG4gICAgICAgICAgICBwYXJzZUNvZGU6IGRvd25sb2FkbGF6eVxcbiAgICAgICAgfSxcXG4gICAgICAgIGRlZmF1bHRWaWV3OiBcXFwiMVxcXCJcXG4gICAgfVxcbn0pO1xcbmQucHVzaCh7XFxuICAgIHRpdGxlOiAn4oCY4oCY4oCZ4oCZPHN0cm9uZz48Zm9udCBjb2xvcj0gXFxcIiMwOThBQzFcXFwiPicgKyBcXFwi8J+Xs+S5puaetlxcXCIgKyAnPC9mcm9udD48L3N0cm9uZz4nLFxcbiAgICB1cmw6IFxcXCJoaWtlcjovL3BhZ2UvQm9va3JhY2sudmlldz9ydWxlPeafkOiBmuWQiCZydWxlTmFtZT1oaXR4aG90XFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzJcXFwiLFxcbn0pO1xcblxcbnZhciBwYWdlID0gdGl0bGUuc3BsaXQoXFxcIi9cXFwiKVsxXTtcXG5pZiAocGFnZSA9PSBudWxsKSB7XFxuICAgIGRvTGlzdC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBcXFwi56ysMemhtVxcXCIsXFxuICAgICAgICB1cmw6IE1ZX1VSTCxcXG4gICAgfSlcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBcXFwi56ysMemhtVxcXCIsXFxuICAgICAgICB1cmw6IE1ZX1VSTCArIGxhenksXFxuICAgICAgICBjb2xfdHlwZTogJ3RleHRfMycsXFxuICAgIH0pO1xcbn0gZWxzZSB7XFxuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHBhZ2U7IGkrKykge1xcbiAgICAgICAgZG9MaXN0LnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBcXFwi56ysXFxcIiArIGkgKyBcXFwi6aG1XFxcIixcXG4gICAgICAgICAgICB1cmw6IE1ZX1VSTCArICcmcGFnZT0nICsgaSxcXG4gICAgICAgIH0pXFxuICAgIH1cXG4gICAgZm9yICh2YXIgaiA9IDE7IGogPD0gcGFnZTsgaisrKSB7XFxuICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBcXFwi56ysXFxcIiArIGogKyBcXFwi6aG1XFxcIixcXG4gICAgICAgICAgICB1cmw6IE1ZX1VSTCArICcmcGFnZT0nICsgaiArIGxhenksXFxuICAgICAgICAgICAgY29sX3R5cGU6ICd0ZXh0XzMnLFxcbiAgICAgICAgfSk7XFxuICAgIH1cXG59XFxuc2V0UmVzdWx0KGQpXCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCJhNi5wb3JuaHViXCIsXCJwYXRoXCI6XCJwb3JuaHViXCIsXCJydWxlXCI6XCJqczpcXG52YXIgZCA9IFtdO1xcbmNvbnN0IHBhZ2UgPSBNWV9QQUdFO1xcbmxldCBkYXRhVHlwZSA9IGdldFZhcihcXFwiV2FyZWhvdXNlLnR5cGVcXFwiLCBcXFwiL2xhbmd1YWdlL2NoaW5lc2VcXFwiKTtcXG5sZXQgVHlwZTEgPSBnZXRWYXIoXFxcInR5cGUxXFxcIiwgXFxcIlxcXCIpO1xcbmlmIChUeXBlMT09PScnKSB7XFxuICAgIHZhciBocmVmID0gJ2h0dHBzOi8vY24ucG9ybmh1Yi5jb20nICsgZGF0YVR5cGUgKyBUeXBlMSArICc/cGFnZT0nICsgcGFnZTtcXG59IGVsc2Uge1xcbiAgICBocmVmID0gJ2h0dHBzOi8vY24ucG9ybmh1Yi5jb20nICsgZGF0YVR5cGUgKyBUeXBlMSArICcmcGFnZT0nICsgcGFnZTtcXG59XFxuYWRkTGlzdGVuZXIoJ29uQ2xvc2UnLCAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgY2xlYXJWYXIoXFxcIldhcmVob3VzZS50eXBlXFxcIik7XFxuICAgIGNsZWFyVmFyKFxcXCJ0eXBlMVxcXCIpO1xcbn0pKTtcXG5cXG5mdW5jdGlvbiB0YWIoYXJyLCB0eXBlLCBjb250cmFzdCkge1xcbiAgICBmb3IgKGxldCBpdGVtIG9mIGFycikge1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogaXRlbVsxXSA9PT0gY29udHJhc3QgPyBcXFwi4oCc4oCcXFxcIiArIGl0ZW1bMF0gKyBcXFwi4oCd4oCdXFxcIiA6IGl0ZW1bMF0sXFxuICAgICAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChrZXksIHR5cGUpID0+IHtcXG4gICAgICAgICAgICAgICAgcHV0VmFyKHR5cGUsIGtleSk7XFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgICAgICB9LCBpdGVtWzFdLCB0eXBlKSxcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcInNjcm9sbF9idXR0b25cXFwiXFxuICAgICAgICB9KTtcXG4gICAgfVxcbiAgICBkLnB1c2goe1xcbiAgICAgICAgY29sX3R5cGU6IFxcXCJibGFua19ibG9ja1xcXCJcXG4gICAgfSk7XFxufVxcblxcbmlmIChwYWdlID09IDEpIHtcXG4gICAgdGFiKFtcXG4gICAgICAgIFtcXFwiUG9ybiBpbiBjaGluZXNlXFxcIiwgXFxcIi9sYW5ndWFnZS9jaGluZXNlXFxcIl0sXFxuICAgICAgICBbXFxcIuaOqOiNkOinhumikVxcXCIsIFxcXCIvcmVjb21tZW5kZWRcXFwiXSxcXG4gICAgICAgIFtcXFwi5YWo6YOoXFxcIiwgXFxcIi92aWRlb1xcXCJdXFxuICAgIF0sIFxcXCJXYXJlaG91c2UudHlwZVxcXCIsIGRhdGFUeXBlKVxcbmlmKGRhdGFUeXBlIT09XFxcIi9yZWNvbW1lbmRlZFxcXCIpe1xcbmNsZWFyVmFyKFxcXCJ0eXBlMVxcXCIpO1xcbnRhYihbXFxuICAgICAgICBbXFxcIuWFqOmDqFxcXCIsIFxcXCJcXFwiXSxcXG4gICAgICAgIFtcXFwi5pyA54Ot6ZeoXFxcIiwgXFxcIj9vPWh0XFxcIl0sXFxuICAgICAgICBbXFxcIuacgOmrmOWIhlxcXCIsIFxcXCI/bz10clxcXCJdLFxcbiAgICAgICAgW1xcXCLmnIDlpJrmrKHop4LnnItcXFwiLCBcXFwiP289bXZcXFwiXSxcXG4gICAgICAgIFtcXFwi5pyA5pawXFxcIiwgXFxcIj9vPWNtXFxcIl1cXG4gICAgXSwgXFxcInR5cGUxXFxcIiwgVHlwZTEpXFxufWVsc2V7XFxuY2xlYXJWYXIoXFxcInR5cGUxXFxcIik7XFxudGFiKFtcXG4gICAgICAgIFtcXFwi5pyA55u45YWzXFxcIiwgXFxcIlxcXCJdLFxcbiAgICAgICAgW1xcXCLmnIDmlrBcXFwiLCBcXFwiP289dGltZVxcXCJdXFxuICAgIF0sIFxcXCJ0eXBlMVxcXCIsIFR5cGUxKVxcbn1cXG5cXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBcXFwi8J+UjVxcXCIsXFxuICAgICAgICB1cmw6ICQudG9TdHJpbmcoKHIpID0+IHtcXG4gICAgICAgICAgICBwdXRNeVZhcigna2V5d29yZCcsIGlucHV0KTtcXG4gICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU9cG9ybmh1YiZrdz1cXFwiICsgaW5wdXQ7XFxuICAgICAgICB9LCBNWV9SVUxFLnRpdGxlKSxcXG4gICAgICAgIGRlc2M6ICfmkJzntKInLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJpbnB1dFxcXCJcXG4gICAgfSk7XFxufVxcbnZhciBodG1sID0gZmV0Y2goaHJlZilcXG5cXG5mdW5jdGlvbiBwbGF5ZXIoVXJsKSB7XFxuICAgIHJldHVybiAkKFVybCkubGF6eVJ1bGUoKCkgPT4ge1xcbiAgICAgICAgdmFyIGh0bWwgPSBmZXRjaChpbnB1dCk7XFxuICAgICAgICB2YXIgbGlzdCA9IHBkZmEoaHRtbCwgJyNtb2JpbGVDb250YWluZXImJnNjcmlwdCcpO1xcbiAgICAgICAgZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgICAgICAgICAgdmFyIHZpZGVvMSA9IHBkZmgobGlzdFtqXSwgJ3NjcmlwdCYmSHRtbCcpO1xcbiAgICAgICAgICAgIGlmICh2aWRlbzEubWF0Y2goLzEwODBQLykpIHtcXG4gICAgICAgICAgICAgICAgdmFyIHZpZGVvID0gdmlkZW8xLm1hdGNoKC92aWRlb1VybFxcXCI6XFxcIiguKilcXFxcXFxcIixcXFwicXVhbGl0eVxcXCI6XFxcIjEwODAvKVsxXTtcXG4gICAgICAgICAgICAgICAgdmFyIHZpZGVvMiA9IHZpZGVvMS5tYXRjaCgvdHJ1ZSxcXFwiZm9ybWF0XFxcIjpcXFwiaGxzXFxcIixcXFwidmlkZW9VcmxcXFwiOlxcXCIoLiopXFxcXFxcXCIsXFxcInF1YWxpdHlcXFwiOlxcXCI3MjAvKVsxXTtcXG52YXIgdmlkZW8zID0gdmlkZW8xLm1hdGNoKC8yNDBcXFwifSx7XFxcImRlZmF1bHRRdWFsaXR5XFxcIjpmYWxzZSxcXFwiZm9ybWF0XFxcIjpcXFwiaGxzXFxcIixcXFwidmlkZW9VcmxcXFwiOlxcXCIoLiopXFxcXFxcXCIsXFxcInF1YWxpdHlcXFwiOlxcXCI0ODAvKVsxXTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJ7dXJsczpbJ1xcXCIgKyB2aWRlby5yZXBsYWNlKC9cXFxcXFxcXC9nLCBcXFwiXFxcIikgKyBcXFwiJywnXFxcIiArIHZpZGVvMi5yZXBsYWNlKC9cXFxcXFxcXC9nLCBcXFwiXFxcIikrXFxcIicsJ1xcXCIrIHZpZGVvMy5yZXBsYWNlKC9cXFxcXFxcXC9nLCBcXFwiXFxcIikgKyBcXFwiJ10sbmFtZXM6WycxMDgwUCcsJzcyMFAnLCc0ODBQJ119XFxcIlxcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXZpZGVvMS5tYXRjaCgvMTA4MFAvKSAmJiB2aWRlbzEubWF0Y2goLzcyMFAvKSkge1xcbiAgICAgICAgICAgICAgICB2aWRlbyA9IHZpZGVvMS5tYXRjaCgvdHJ1ZSxcXFwiZm9ybWF0XFxcIjpcXFwiaGxzXFxcIixcXFwidmlkZW9VcmxcXFwiOlxcXCIoLiopXFxcXFxcXCIsXFxcInF1YWxpdHlcXFwiOlxcXCI3MjAvKVsxXTtcXG4gICAgICAgICAgICAgICAgdmlkZW8yID0gdmlkZW8xLm1hdGNoKC8yNDBcXFwifSx7XFxcImRlZmF1bHRRdWFsaXR5XFxcIjpmYWxzZSxcXFwiZm9ybWF0XFxcIjpcXFwiaGxzXFxcIixcXFwidmlkZW9VcmxcXFwiOlxcXCIoLiopXFxcXFxcXCIsXFxcInF1YWxpdHlcXFwiOlxcXCI0ODAvKVsxXTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJ7dXJsczpbJ1xcXCIgKyB2aWRlby5yZXBsYWNlKC9cXFxcXFxcXC9nLCBcXFwiXFxcIikgKyBcXFwiJywnXFxcIiArIHZpZGVvMi5yZXBsYWNlKC9cXFxcXFxcXC9nLCBcXFwiXFxcIikgKyBcXFwiJ10sbmFtZXM6Wyc3MjBQJywnNDgwUCddfVxcXCJcXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF2aWRlbzEubWF0Y2goLzcyMFAvKSAmJiB2aWRlbzEubWF0Y2goLzQ4MFAvKSkge1xcbiAgICAgICAgICAgICAgICB2aWRlbyA9IHZpZGVvMS5tYXRjaCgvMjQwXFxcIn0se1xcXCJkZWZhdWx0UXVhbGl0eVxcXCI6ZmFsc2UsXFxcImZvcm1hdFxcXCI6XFxcImhsc1xcXCIsXFxcInZpZGVvVXJsXFxcIjpcXFwiKC4qKVxcXFxcXFwiLFxcXCJxdWFsaXR5XFxcIjpcXFwiNDgwLylbMV07XFxuICAgICAgICAgICAgICAgIHZpZGVvMiA9IHZpZGVvMS5tYXRjaCgvdmlkZW9VcmxcXFwiOlxcXCIoLiopXFxcXFxcXCIsXFxcInF1YWxpdHlcXFwiOlxcXCIyNDAvKVsxXTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJ7dXJsczpbJ1xcXCIgKyB2aWRlby5yZXBsYWNlKC9cXFxcXFxcXC9nLCBcXFwiXFxcIikgKyBcXFwiJywnXFxcIiArIHZpZGVvMi5yZXBsYWNlKC9cXFxcXFxcXC9nLCBcXFwiXFxcIikgKyBcXFwiJ10sbmFtZXM6Wyc0ODBQJywnMjQwUCddfVxcXCJcXG4gICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICB2aWRlbyA9IHZpZGVvMS5tYXRjaCgvdmlkZW9VcmxcXFwiOlxcXCIoLiopXFxcXFxcXCIsXFxcInF1YWxpdHlcXFwiOlxcXCIyNDAvKVsxXTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZpZGVvLnJlcGxhY2UoL1xcXFxcXFxcL2csIFxcXCJcXFwiKVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgfSlcXG59XFxuXFxudmFyIGxpc3QgPSBwZGZhKGh0bWwsICcudmlkZW9MaXN0JiYudmlkZW9XcmFwcGVyJyk7XFxuZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogcGRmaChsaXN0W2pdLCAnLnRpdGxlJiZUZXh0JyksXFxuICAgICAgICBkZXNjOiBwZGZoKGxpc3Rbal0sICcudmlld3MmJlRleHQnKSArIFxcXCIgfCBcXFwiICsgcGRmaChsaXN0W2pdLCAnLnRpbWUmJlRleHQnKSxcXG4gICAgICAgIHVybDogcGxheWVyKCdodHRwczovL2NuLnBvcm5odWIuY29tJyArIHBkZmgobGlzdFtqXSwgJ2EsMSYmaHJlZicpKSxcXG4gICAgICAgIHBpY191cmw6IHBkZmgobGlzdFtqXSwgJ2ltZyYmc3JjJyksXFxuICAgICAgICBjb2xfdHlwZTogJ21vdmllXzInLFxcbiAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICBsb25nQ2xpY2s6IFt7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiAn5Yi35pawJyxcXG4gICAgICAgICAgICAgICAganM6ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgICAgIH0pXFxuICAgICAgICAgICAgfV1cXG4gICAgICAgIH1cXG4gICAgfSk7XFxufVxcbnNldFJlc3VsdChkKVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiYTcuZS1oZW50YWlcIixcInBhdGhcIjpcImVoZW50YWlcIixcInJ1bGVcIjpcImpzOlxcbnZhciBkID0gW107XFxudmFyIHBhZ2UgPSBnZXRWYXIoXFxcInBhZ2VcXFwiLCBcXFwiXFxcIik7XFxubGV0IGRhdGFUeXBlID0gZ2V0VmFyKFxcXCJXYXJlaG91c2UudHlwZVxcXCIsIFxcXCJcXFwiKTtcXG5hZGRMaXN0ZW5lcignb25DbG9zZScsICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICBjbGVhclZhcihcXFwiV2FyZWhvdXNlLnR5cGVcXFwiKTtcXG4gICAgY2xlYXJWYXIoXFxcInBhZ2VcXFwiKTtcXG59KSk7XFxuXFxuZnVuY3Rpb24gdGFiKGFyciwgdHlwZSwgY29udHJhc3QpIHtcXG4gICAgZm9yIChsZXQgaXRlbSBvZiBhcnIpIHtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IGl0ZW1bMV0gPT09IGNvbnRyYXN0ID8gXFxcIuKAnOKAnFxcXCIgKyBpdGVtWzBdICsgXFxcIuKAneKAnVxcXCIgOiBpdGVtWzBdLFxcbiAgICAgICAgICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZSgoa2V5LCB0eXBlKSA9PiB7XFxuICAgICAgICAgICAgICAgIHB1dFZhcih0eXBlLCBrZXkpO1xcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgfSwgaXRlbVsxXSwgdHlwZSksXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJzY3JvbGxfYnV0dG9uXFxcIlxcbiAgICAgICAgfSk7XFxuICAgIH1cXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIGNvbF90eXBlOiBcXFwiYmxhbmtfYmxvY2tcXFwiXFxuICAgIH0pO1xcbn1cXG5cXG5cXG5pZiAoTVlfUEFHRSA9PSAxIHx8IGRhdGFUeXBlID09ICdwb3B1bGFyJykge1xcbiAgICB2YXIgaHJlZiA9IFxcXCJodHRwczovL2UtaGVudGFpLm9yZy9cXFwiICsgZGF0YVR5cGU7XFxuICAgIHRhYihbXFxuICAgICAgICBbXFxcIuWFqOmDqFxcXCIsIFxcXCJcXFwiXSxcXG4gICAgICAgIFtcXFwi5ZCM5Lq65b+XXFxcIiwgXFxcImRvdWppbnNoaVxcXCJdLFxcbiAgICAgICAgW1xcXCLmvKvnlLtcXFwiLCBcXFwibWFuZ2FcXFwiXSxcXG4gICAgICAgIFtcXFwiQXJ0aXN0IENHXFxcIiwgXFxcImFydGlzdGNnXFxcIl0sXFxuICAgICAgICBbXFxcIkdhbWUgQ0dcXFwiLCBcXFwiZ2FtZWNnXFxcIl0sXFxuICAgICAgICBbXFxcIldlc3Rlcm5cXFwiLCBcXFwid2VzdGVyblxcXCJdLFxcbiAgICAgICAgW1xcXCJOb24tSFxcXCIsIFxcXCJub24taFxcXCJdLFxcbiAgICAgICAgW1xcXCJJbWFnZSBTZXRcXFwiLCBcXFwiaW1hZ2VzZXRcXFwiXSxcXG4gICAgICAgIFtcXFwiQ29zcGxheVxcXCIsIFxcXCJjb3NwbGF5XFxcIl0sXFxuICAgICAgICBbXFxcIkFzaWFuIFBvcm5cXFwiLCBcXFwiYXNpYW5wb3JuXFxcIl0sXFxuICAgICAgICBbXFxcIk1pc2NcXFwiLCBcXFwibWlzY1xcXCJdLFxcbiAgICAgICAgW1xcXCJwb3B1bGFyXFxcIiwgXFxcInBvcHVsYXJcXFwiXVxcbiAgICBdLCBcXFwiV2FyZWhvdXNlLnR5cGVcXFwiLCBkYXRhVHlwZSlcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBcXFwi8J+UjVxcXCIsXFxuICAgICAgICB1cmw6ICQudG9TdHJpbmcoKHIpID0+IHtcXG4gICAgICAgICAgICBwdXRNeVZhcigna2V5d29yZCcsIGlucHV0KTtcXG4gICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vcGFnZS9zZWFyY2g/cD0jbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjZnlwYWdlJnR5cGU9ZWhlbnRhaSZrdz1cXFwiICsgaW5wdXQ7XFxuICAgICAgICB9LCBNWV9SVUxFLnRpdGxlKSxcXG4gICAgICAgIGRlc2M6ICfmkJzntKIo6Iux5paHKScsXFxuICAgICAgICBjb2xfdHlwZTogXFxcImlucHV0XFxcIlxcbiAgICB9KTtcXG59IGVsc2Uge1xcbiAgICBocmVmID0gXFxcImh0dHBzOi8vZS1oZW50YWkub3JnL1xcXCIgKyBkYXRhVHlwZSArIFxcXCI/bmV4dD1cXFwiICsgcGFnZVxcbn1cXG4gICAgdmFyIGh0bWwgPSBmZXRjaChocmVmKVxcbiAgICBsZXQgcGFnZTEgPSBwZGZoKGh0bWwsICcjdW5leHQmJmhyZWYnKS5zcGxpdChcXFwibmV4dD1cXFwiKVsxXTtcXG4gICAgcHV0VmFyKFxcXCJwYWdlXFxcIiwgcGFnZTEpO1xcbiAgICB2YXIgbGlzdCA9IHBkZmEoaHRtbCwgJ2JvZHkmJi5nbHRodW1iJyk7XFxuICAgIGZvciAodmFyIGogaW4gbGlzdCkge1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogcGRmaChsaXN0W2pdLCAnaW1nJiZ0aXRsZScpLFxcbiAgICAgICAgICAgIHVybDogJ2hpa2VyOi8vcGFnZS9laGVudGFp5LqM57qnP3VybD0nICsgcGRmaChsaXN0W2pdLCAnLmdsdGh1bWImJkh0bWwnKS5tYXRjaCgvcG9wVXBcXFxcKCcoLiopXFxcXCZhbXA7YWN0LylbMV0ucmVwbGFjZSgvYW1wOy9nLCBcXFwiXFxcIikucmVwbGFjZShcXFwiYWxsZXJ5cG9wdXBzLnBocD9naWQ9XFxcIiwgXFxcIi9cXFwiKS5yZXBsYWNlKFxcXCImdD1cXFwiLCBcXFwiL1xcXCIpLFxcbiAgICAgICAgICAgIHBpY191cmw6IHBkZmgobGlzdFtqXSwgJ2ltZyYmZGF0YS1zcmN8fHNyYycpLFxcbiAgICAgICAgICAgIGRlc2M6IHBkZmgobGlzdFtqXSwgJy5jbiYmVGV4dCcpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwibW92aWVfM19tYXJxdWVlXFxcIlxcbiAgICAgICAgfSlcXG4gICAgfVxcbmlmKGxpc3QubGVuZ3RoID09IDApe1xcbiAgICBzZXRSZXN1bHQoW3tcXG4gICAgICAgIHRpdGxlOiBwZGZoKGh0bWwsJ2JvZHkmJlRleHQnKSxcXG4gICAgICAgIGNvbF90eXBlOiAncmljaF90ZXh0J1xcbiAgICB9XSlcXG59XFxuc2V0UmVzdWx0KGQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiYTcuZS1oZW50YWnkuoznuqdcIixcInBhdGhcIjpcImVoZW50YWnkuoznuqdcIixcInJ1bGVcIjpcImpzOlxcbnZhciBkID0gW107XFxudmFyIGh0bWwgPSBmZXRjaChNWV9VUkwpXFxudmFyIGRlc2MgPSBbXTtcXG5sZXQgbGlzdCA9IHBkZmEoaHRtbCwnI2dkZC0tdHIsMS0tdHIsMS0tdHIsMiYmdHInKTtcXG5mb3IodmFyIGsgaW4gbGlzdCl7XFxuZGVzYy5wdXNoKHBkZmgobGlzdFtrXSwnVGV4dCcpKVxcbn1cXG5sZXQgdGl0bGU9IHBkZmgoaHRtbCwnI2dkMiYmaDEmJlRleHQnKTtcXG5sZXQgaGg9IHBkZmgoaHRtbCwnI2dkdCYmLmdkdG0mJmEmJmhyZWYnKTtcXG5sZXQgaHRtbGwgPSBmZXRjaChoaCk7XFxubGV0IHBpYyA9IHBkZmgoaHRtbGwsJyNpMyYmaW1nJiZzcmMnKTtcXG5kLnB1c2goe1xcbnRpdGxlOiB0aXRsZSxcXG5kZXNjOiBkZXNjLmpvaW4oJ1xcXFxuJyksXFxucGljX3VybDogcGljLFxcbnVybDogcGljLFxcbmNvbF90eXBlOiAnbW92aWVfMV92ZXJ0aWNhbF9waWNfYmx1cidcXG59KVxcbmZ1bmN0aW9uIOino+aekCgpIHtcXG4gICAgdmFyIGh0bWwgPSBmZXRjaChpbnB1dClcXG4gICAgdmFyIGxpc3QgPSBwZGZhKGh0bWwsICcjZ2R0JiYuZ2R0bScpO1xcbiAgICB2YXIgaW1ncyA9IFtdO1xcbiAgICBmb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgICAgIHZhciBpbWdfaHJlZiA9IHBkZmgobGlzdFtqXSwgJ2EmJmhyZWYnKTtcXG4gICAgICAgIHZhciBoaCA9IGZldGNoKGltZ19ocmVmKVxcbiAgICAgICAgdmFyIGltZyA9IHBkZmgoaGgsICcjaTMmJmltZyYmc3JjJylcXG4gICAgICAgIGltZ3MucHVzaChpbWcpXFxuICAgIH1cXG4gICAgcmV0dXJuICdwaWNzOi8vJyArIGltZ3Muam9pbignJiYnKVxcbn1cXG5sZXQgbGF6eSA9ICQoXFxcIlxcXCIpLmxhenlSdWxlKOino+aekCk7XFxubGV0IGRvd25sb2FkbGF6eSA9ICQudG9TdHJpbmco6Kej5p6QKTtcXG52YXIgZG9MaXN0ID0gW107XFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6ICfigJzigJzigJ3igJ08Yj48c3BhbiBzdHlsZT1cXFwiY29sb3I6ICMxYWFkMTlcXFwiPvCfk6XkuIvovb08L3NwYW4+PC9iPicsXFxuICAgIHVybDogXFxcImhpa2VyOi8vcGFnZS9kb3dubG9hZC52aWV3I25vUmVjb3JkSGlzdG9yeSMjbm9SZWZyZXNoIz9ydWxlPeafkOiBmuWQiFxcXCIsXFxuICAgIGNvbF90eXBlOiBcXFwidGV4dF8yXFxcIixcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIGNoYXB0ZXJMaXN0OiBkb0xpc3QsXFxuICAgICAgICBpbmZvOiB7XFxuICAgICAgICAgICAgYm9va05hbWU6IHRpdGxlLFxcbiAgICAgICAgICAgIHJ1bGVOYW1lOiBcXFwiZS1oZW50YWlcXFwiLFxcbiAgICAgICAgICAgIGJvb2tUb3BQaWM6IHBpYyxcXG4gICAgICAgICAgICBwYXJzZUNvZGU6IGRvd25sb2FkbGF6eVxcbiAgICAgICAgfSxcXG4gICAgICAgIGRlZmF1bHRWaWV3OiBcXFwiMVxcXCJcXG4gICAgfVxcbn0pO1xcbmQucHVzaCh7XFxuICAgIHRpdGxlOiAn4oCY4oCY4oCZ4oCZPHN0cm9uZz48Zm9udCBjb2xvcj0gXFxcIiMwOThBQzFcXFwiPicgKyBcXFwi8J+Xs+S5puaetlxcXCIgKyAnPC9mcm9udD48L3N0cm9uZz4nLFxcbiAgICB1cmw6IFxcXCJoaWtlcjovL3BhZ2UvQm9va3JhY2sudmlldz9ydWxlPeafkOiBmuWQiCZydWxlTmFtZT1lLWhlbnRhaVxcXCIsXFxuICAgIGNvbF90eXBlOiBcXFwidGV4dF8yXFxcIixcXG59KTtcXG5kb0xpc3QucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwi56ysMemhtVxcXCIsXFxuICAgIHVybDogTVlfVVJMLFxcbn0pXFxuXFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6ICfnrKwx6aG1JyxcXG4gICAgdXJsOiBNWV9VUkwgKyBsYXp5LFxcbiAgICBjb2xfdHlwZTogJ3RleHRfMydcXG59KVxcbnZhciBwYWdlID0gcGRmaChodG1sLCAnYm9keSYmdGJvZHksLTEmJnRkLC0yJiZhJiZUZXh0Jyk7XFxuaWYgKHBhZ2UgIT0gMSkge1xcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHBhZ2U7IGkrKykge1xcbiAgICAgICAgdmFyIGhyZWYgPSBNWV9VUkwgKyAnP3A9JyArIGk7XFxuICAgICAgICBkb0xpc3QucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6ICfnrKwnICsgKE51bWJlcihpKSArIDEpICsgJ+mhtScsXFxuICAgICAgICAgICAgdXJsOiBocmVmLFxcbiAgICAgICAgfSlcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6ICfnrKwnICsgKE51bWJlcihpKSArIDEpICsgJ+mhtScsXFxuICAgICAgICAgICAgdXJsOiBocmVmICsgbGF6eSxcXG4gICAgICAgICAgICBjb2xfdHlwZTogJ3RleHRfMydcXG4gICAgICAgIH0pXFxuICAgIH1cXG59XFxuc2V0UmVzdWx0KGQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiYTguZmlrZmFwXCIsXCJwYXRoXCI6XCJmaWtmYXBcIixcInJ1bGVcIjpcImpzOlxcbnNldFJlc3VsdChbe1xcbiAgICB1cmw6IFxcXCJodHRwczovL2Zpa2ZhcC5jb20vXFxcIixcXG4gICAgwqDCoMKgY29sX3R5cGU6IFxcXCJ4NV93ZWJ2aWV3X3NpbmdsZVxcXCIsXFxuICAgIGRlc2M6ICdmbG9hdCYmMTAwJScsXFxuICAgIMKgwqDCoGV4dHJhOiB7wqDCoMKgwqDCoMKgwqBcXG4gICAgfVxcbn1dKTtcIn1dIiwiaWNvbiI6Imh0dHBzOi8vbGFubWVpZ3VvamlhbmcuY29tL3R1Ymlhby9xLzQucG5nIiwicHJveHkiOiIifQ==
